SetLangMode(LangRussian,"RUS",0);global function boolean StockMovDClassOrdQuantEFAfter(integer wn,integer rownr,integer changed)begin record StockMovVc SMr; row StockMovVc SMrw; record ItemStatusVc ISr;  getwindowrecord(wn,SMr); matrowget(SMr,rownr,SMrw);	if(nonblank(SMr.FrLocation) AND changed!=0 And CurrentCompany==25) then begin		ISr.Location = SMr.FrLocation;		ISr.Code = SMrw.ArtCode;		if(ReadfirstMain(ISr,2,true)) then begin			if(ISr.Instock < SMrw.OrdQuant) then begin				Messagebox(0,"недостаточно товаров на складе");			end;		end else begin			Messagebox(0,"такого товара нет на складе");		end;		end;	return;end;global function boolean StockMovDClassAfterEditField(Integer wn,string fieldname,Integer fn, Integer rownr,Integer changed)beginboolean res;	res = inner.StockMovDClassAfterEditField(wn,fieldname,fn,rownr,changed);	switch (fieldname) begin		case "OrdQuant": res = StockMovDClassOrdQuantEFAfter(wn,rownr,changed);	end;		StockMovDClassAfterEditField = res;return;end;global function Boolean StockMovDClassDeleteRowTest(Integer wn,Integer rownr)begin  record StockMovVc SMr;	row StockMovVc SMrw;	record ItemStatusVc ISr;  Boolean res,puf;  record INVc INr;  Integer i,rwcnt;  val ordqty;  string 60 comment;  string 60 location;  res = true;  GetWindowRecord(wn,SMr);      if(SMr.TypeCoin==5)then begin		res = false;		Messagebox(0,"Нельзя удалить. Перемещение по FOB !");	end;  StockMovDClassDeleteRowTest = res;  return;end;