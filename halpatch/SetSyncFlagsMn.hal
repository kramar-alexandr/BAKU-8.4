//server-onlyglobal updating procedure SetSyncFlagsMn() //Edit***************************Sasha2,13:44 24.06.2014 {begin	record INVc INr;	record DIVc DIr;	record ItemStatusVc ISr;	record CompaniesBlock Compb;	record WebSyncBlock WSB;  row CompaniesBlock Comprw;  integer oldcompany,i,rwcnt;  Boolean testf;  LongInt vl;		vl = -1;	oldcompany = CurrentCompany;    BlockLoad(Compb);  rwcnt = MatRowCnt(Compb);    for (i=0;i<rwcnt;i=i+1) begin    MatRowGet(Compb,i,Comprw);    if (SetCompanyCode(Comprw.CompCode,false) and Comprw.ActiveStatus==0) then begin   				INr.Code = "";			while(loopmain(INr,1,true)) begin				testf = true;				ISr.Code = INr.Code;				if (!ReadFirstMain(ISr,1,true) or ISr.Instock<=0) then begin testf = false; end;				if (testf) then begin					INr.SyncFlag = 0;					INr.SavedCount = 1;					RECORDSTORE(INr, true);				end;				if (testf==false) then begin				  INr.SyncFlag = -1;				  INr.SavedCount = 1;					RECORDSTORE(INr, true);				end;			end; RESETLOOP(INr);						DIr.Code = "";			while(loopmain(DIr,1,true)) begin				DIr.SyncFlag = 0;				DIr.SavedCount = 1;				RECORDSTORE(DIr, true);			end; RESETLOOP(DIr);									BlockLoad(WSB);			WSB.Items1 = vl; 			WSB.ItemsTemp1 = vl;			WSB.Brands1 = vl;			WSB.BrandsTemp1 = vl;			WSB.Types1 = vl;			WSB.TypesTemp1 = vl;			WSB.Collections1 = vl;			WSB.CollectionsTemp1 = vl;			WSB.Items2 = vl;			WSB.ItemsTemp2 = vl;			WSB.Brands2 = vl;			WSB.BrandsTemp2 = vl;			WSB.Types2 = vl;			WSB.TypesTemp2 = vl;			WSB.Collections2 = vl;			WSB.CollectionsTemp2 = vl;			BlockStore(WSB);						LogText(0,"Syncflags are set for company " & Comprw.CompName);		end;	end;		ResetCompany(oldcompany);	return;end; //Edit***************************Sasha2,13:45 24.06.2014 }