external procedure POSKeyPad(LongInt,LongInt,LongInt,LongInt,LongInt,string,LongInt);
external procedure SetupColumWithKeypadWindow(var real,var real,var real,var real,var real,var real,var real);
external function string 255 F_Label(string);
external procedure SplitButton(LongInt,LongInt,LongInt,LongInt,LongInt,string,string,string,string,LongInt);
external function string 255 GetChangePaswordLink();
remote function UUID GetServerUUIDRemote();
external function string 255 RemainingEinvoicesQuantity;
external function Boolean DisplayAdditionalFields();
remote function Integer MailAcceptanceStatus(LongInt);
external function Boolean IsMoveToCloud(record SetupStatusBlock);
external function Boolean IsMoveToCloudB();
external outer function Boolean IsCloudControllerClient();
external function string 255 GetCurrentStoreName();
external function Boolean CompaniesInClientMode();
external function Boolean ProductInDemoMode();
remote function string 255 GetCompanyShortCode(string);
external function Boolean AnyModuleAvailable();
external function Boolean AcceptanceStatusColumnTest(string);
external function Integer FlipCharCode(Integer,Integer);
external procedure RateField(real,real,real,string,integer,string,boolean,real,real,string,boolean);
external function boolean AddBicToMasterWindow(integer,var real,var real,real,real,real,real);
external function Boolean IsIntEnabActive(var string,var string,var Boolean,var string);
external function Boolean TouchScreenLookVertical();
external procedure SysEClass_Tool(Integer,var real,var real);
external procedure GTransEClass_Tool(Integer,var real,var real);
external procedure GTrans2EClass_Tool(Integer,var real,var real,var real);
external procedure GBaseEClass_Tool(Integer,var real,var real);
external procedure TransGenVClass_Tool(Integer,var real,var real);
external procedure GetCurUser(var record UserVc);
external procedure JobRClass_RUS();
external function string 60 UserDefined(string,string);
external function string 60 RestPMCashModePayMode();
external outer function string 255 MasterBannerURL();
external procedure ItemStatusUserSettings(string,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean,var Boolean);
external function Boolean AllowedInCountry(integer);
external function Integer ResourceWindowResourceType();
external function Boolean ResPlan_Rental();
external function Boolean ResPlan_ProdOperations();
remote function Boolean ReadPOSButtonsMy(string,string,longint,var string,var string,var string,var record POSButtonsVc,var integer);
remote function Boolean ReadNPTSWindowDataMy(string,string,longint,string,string,Date,Time,var Boolean,var string,var string,var string,var record POSButtonsVc,var Integer);
external function Boolean TouchScreenLook();
external procedure ExtractObj(string,var Integer,var string);
external function Boolean IsSessionOpen(string,string,Date,Time);
external procedure CntNPTSPaymentCurrencies(var Array string,var Array string,var Array Integer,var Array string,var Integer);
remote procedure CntPOSCurrencies(var Array string,var Array Boolean,var Integer);
external function Boolean CheckOffLineRecords(Boolean);
external function string 60 TileUserDefined(string,Integer,var Integer);
external function Boolean CUVATNrColumn;
external function Integer GetInternetEnablerCountry();
external function Integer CntVarietyCode(Integer,var Array string);
external function Integer VarietyMatMax(Integer);
external function Boolean UseTaxTemplatesforTaxCalc();
remote procedure TablesViewWClassDo(record LocalMachineBlock,string,Array string,Array string,Array string,Array string,Array Integer,var Integer,var LongInt);
external function string 20 GetMenuCode(string);
external procedure DrawModifierButtons(var Integer);
remote procedure ForkLiftQueueArray(string,string,var Array string,var Array string,var Array string,var Array string,var Array val,var Array Integer,var Array string,var Integer,Boolean,LongInt,LongInt,string);

external function Boolean DisplayLoginButtons();
external function Integer LoginShortcutsLines(Integer);
external function Integer LoginShortcutsPos(Real,Integer);

external procedure DefineTTRRowTypes(Integer);
external function real ItemButtons(string,Integer);
external procedure HWStoreWClassAddProducts(Integer);
external function Boolean HasCharts();
external function Boolean HasDetailedCharts();
external function Boolean HasNewRegistration();
external function Boolean ActivityIsForAcceptanceOrFYI(record ActVc,Boolean,Boolean);
// TravelLog
external function Integer LoginShortcuts();
external function Boolean TestConfigurationEnabler(string);
remote function Integer CustomerSalesPaymentTermType(string);
// POS Standalone
external function Boolean DefCustCodeSetup();
// in-apps
external function Boolean HasInAppsAvailable();
external function Integer CountCountries();

// Language functions ENG
/*external function Boolean DisplayLoginKeyPad_ENG();
external function string 255 VATZoneEditFieldLabel_RUS(Integer);
external function real VATZoneButtonsLabelsENG(real,real,real,real);
external procedure LoginButtons2_ENG(Real,Real);
external procedure FORMDEF_ENG();
external function string 255 DemoMsgWClassTitle_ENG(Boolean,Boolean);
external procedure TBEClassDef_ENG();
external function string 255 VATZoneNameENG();
external procedure TSERW_ENG();
external procedure TSERWNT_ENG();
external procedure TSERWTouch_ENG();
external procedure TSERWTEST_ENG();
external procedure INVFORM_ENG(Boolean);
external procedure DisplayRecordDetails_ENG(LongInt,LongInt,string,date,time,string,string,string,string,string,string,string,string,string,string,string,Integer,string,string,string,val,string,Boolean,string,string);
external procedure DrawPOSInterface_ENG(string,string,record POSButtonsVc,Integer,string,Integer);
external procedure DisplayRecordDetailsCustDisplay_ENG(LongInt,LongInt,string,date,time,string,string,string,string,string,string,Integer,string,string,string,val);
external function string 255 ResDayWClassWindowTitle_ENG();
external function string 255 ResMonWClassWindowTitle_ENG();
external function string 255 RTMonWClassWindowTitle_ENG();
external procedure SetupNightAuditWindowControls_ENG(Boolean);
external procedure CURClassDefinitionENG();
external function real DrawPaymentModesButtons_IV_ENG(real);
external function real FunctionButtons_ENG(string);
external procedure CreditCardWindowHeader_ENG(Boolean,Boolean,Real);
external procedure CreditCardWindowButtons_ENG(string,string,real);
external procedure CreditCardWindowInvoiceDetail_ENG(Real);
external procedure CreditCardWindowDeliveryDetail_ENG(Real);
external function real DrawPaymentModesButtons_ENG();
external procedure DrawBarMenuTiles_ENG(string);
external procedure DrawRestPMOtherPay_ENG();
external procedure DisplayRecordDetailsRA_ENG(LongInt,LongInt,string,date,time,string,string,string,string,string,string,Integer,string,LongInt,Date,string,LongInt,string);
external procedure DrawModifierButtons2_ENG(var integer,var integer);
external procedure OKCancel_ENG();
external procedure DefineElearningURLCacheLClass_ENG();
external procedure DefineElearningURLCacheDClass_ENG();
external function real TravelLogDeductions_ENG(real,real);
external procedure LoginButtons_ENG(Real);
external procedure FORMDEF2_ENG();
external procedure FORMDEF3_ENG();
external procedure ARS2RClass_ENG();
external procedure ALLVATRClass_ENG();*/

// Language functions RUS
external function Boolean DisplayLoginKeyPad_RUS();
external function real VATZoneButtonsLabelsRUS(real,real,real,real);
external procedure LoginButtons2_RUS(Real,Real);
external procedure FORMDEF_RUS();
external function string 255 DemoMsgWClassTitle_RUS(Boolean,Boolean);
external procedure TBEClassDef_RUS();
external function string 255 VATZoneNameRUS();
external procedure TSERW_RUS();
external procedure TSERWNT_RUS();
external procedure TSERWTouch_RUS();
external procedure TSERWTEST_RUS();
external procedure INVFORM_RUS(Boolean);
external procedure DisplayRecordDetails_RUS(LongInt,LongInt,string,date,time,string,string,string,string,string,string,string,string,string,string,string,Integer,string,string,string,val,string,Boolean,string,string);
external procedure DrawPOSInterface_RUSMy(string,string,record POSButtonsVc,Integer,string,Integer);
external procedure DisplayRecordDetailsCustDisplay_RUS(LongInt,LongInt,string,date,time,string,string,string,string,string,string,Integer,string,string,string,val);
external function string 255 ResDayWClassWindowTitle_RUS();
external function string 255 ResMonWClassWindowTitle_RUS();
external function string 255 RTMonWClassWindowTitle_RUS();
external procedure SetupNightAuditWindowControls_RUS(Boolean);
external procedure CURClassDefinitionRUS();
external function real DrawPaymentModesButtons_IV_RUS(real);
external function real FunctionButtons_RUS(string);
external procedure CreditCardWindowHeader_RUS(Boolean,Boolean,Real);
external procedure CreditCardWindowButtons_RUS(string,string,real);
external procedure CreditCardWindowInvoiceDetail_RUS(Real);
external procedure CreditCardWindowDeliveryDetail_RUS(Real);
external function real DrawPaymentModesButtons_RUS();
external procedure DrawBarMenuTiles_RUS(string);
external procedure DrawRestPMOtherPay_RUS();
external procedure DisplayRecordDetailsRA_RUS(LongInt,LongInt,string,date,time,string,string,string,string,string,string,Integer,string,LongInt,Date,string,LongInt,string);
external procedure DrawModifierButtons2_RUS(var integer,var integer);
external procedure OKCancel_RUS();
external procedure DefineElearningURLCacheLClass_RUS();
external procedure DefineElearningURLCacheDClass_RUS();
external function real TravelLogDeductions_RUS(real,real);
external procedure LoginButtons_RUS(Real);
external procedure FORMDEF2_RUS();
external procedure FORMDEF3_RUS();
external procedure ARS2RClass_RUS();
external procedure ALLVATRClass_RUS();


external function Boolean IsStandardUnused();
external function Boolean IsEnterprise();
external function Boolean StandardHansa();
external function Boolean HasATOL();

external function Boolean HasAccPeriods();
external function Boolean HasAccessGroups();
external function Boolean HasAddFee();
external function Boolean HasApprovals();
external function Boolean HasCCPayments();
external function Boolean HasAdvancedAccounting();
external function Boolean HasAdvancedCRM();
external function Boolean HasAdvancedPricing();
external function Boolean HasAdvancedProduction();
external function Boolean HasAdvancedStock();
external function Boolean HasAged();
external function Boolean HasBar();
external function Boolean HasBase2();
external function Boolean HasBranch();
external function Boolean HasBuyBack();
external function Boolean HasCategories();
//external function Boolean HasConsigmentStock();
external function Boolean HasCommunicator();
external function Boolean HasConsignmentStock();
external function Boolean HasContactClassification();
external function Boolean HasContactRelations();
external function Boolean HasConsolidation();
external function Boolean HasCountryPerCustomer();
external function Boolean HasCreditLimit();
external function Boolean HasCustItem();
external function Boolean HasCustomerSearchKey();
external function Boolean HasCustomerStatusReport();
external function Boolean HasDownpayments();
external function Boolean HasDefineColumns();
external function Boolean HasDeliveryAddress();
external function Boolean HasDepartments();
external function Boolean HasETaxDocuments();
external function Boolean HasEInvoicing();
external function Boolean HasEndorsedChecks();
external function Boolean HasExtraNLComment();
external function Boolean HasExtTax();
external function Boolean HasFavouriteActTypes();
external function Boolean HasFiscalPrinter();
external function Boolean HasFormEditor();
external function Boolean HasFreightAdvanced();
external function Boolean HasHideCostPrice();
external function Boolean HasHotelInterface();
external function Boolean HasGuestUserDefined();
external function Boolean HasJewelleryInterface();
external function Boolean HasIncomeAndExpenseBook();
external function Boolean HasIOUChecks();
external function Boolean HasItemClassification();
external function Boolean HasItemGroups();
external function Boolean HasKPIs();
external function Boolean HasLanguages();
external function Boolean HasLimitedAccess();
external function Boolean HasLocalMachines();
external function Boolean HasLoyaltyCards();
external function Boolean HasMailTags();
external function Boolean HasMainPartner();
external function Boolean HasMultiCurrency();
external function Boolean HasMultiLocations();
external function Boolean HasNLBudget();
external function Boolean HasNLBudgetClass();
external function Boolean HasObjects();
external function Boolean HasInvoiceOfficialSerNr();
external function Boolean HasOfficialSerNr();
external function Boolean HasOrderClasses();
external function Boolean HasPreferedOfficialSerNr();
external function Boolean HasNumberSeries();
external function Boolean HasPersons();
external function Boolean HasPocketScreen();
external function Boolean HasPositions();
external function Boolean HasPrepayments();
external function Boolean HasProjects();
external function Boolean HasPriceLists();
external function Boolean HasQualityControl();
external function Boolean HasReconLevel2();
external function Boolean HasReminderLevel();
external function Boolean HasRemoteBackup();
external function Boolean HasResourceDisplayGroups();
external function Boolean HasRussianPrepayment();
external function Boolean HasRetGoodsToSupp();
external function Boolean HasReturnedGoods();
external function Boolean HasRoomPackages();
external function Boolean HasRoomTypes();
external function Boolean HasRoute();
external function Boolean HasSalesman();
external function Boolean HasSalesmanBonus();
external function Boolean HasSalesGroup();
external function Boolean HasSecondQuantity();
external function Boolean HasSerialNumbers();
external function Boolean HasServerInCloud();
external function Boolean HasSettlementDiscount();
external function Boolean HasSimulations();
external function Boolean hasSimAccruals();
external function Boolean HasSkypeConnection();
external function Boolean HasSIPServerConnection();
external function Boolean HasStrAsSignFType();
external function Boolean HasTouchScreenDevice();
external function Boolean HasTaxMatrix();
external function Boolean HasTestFeatures();
external function Boolean HasMetroTestFeatures();
external function Boolean HasWorkOrders();
external function Boolean HasThrouLocation();
external function Boolean HasTouchScreenLook();
external function Boolean HasTREO();
external function Boolean HasVarieties();
external function Boolean HasVATZone();
external function Boolean HasWithholdingTax();
external function Boolean HasWithholdingTaxAdvanced();
external function Boolean HasWorkOrders();
external function Boolean HasWorkflowOverview();

external function Boolean HasStandardCRM();
external function Boolean HasStandardOrganizer();
external function Boolean HasStandardCommunicator();

external function Boolean HasEMail();
external function Boolean HasExternalEMail();

external function Boolean HasModAT2();
external function Boolean HasModBA();
external function Boolean HasModCheck();
external function Boolean HasModCL();
external function Boolean HasModCO();
external function Boolean HasModCons();
external function Boolean HasModCourses();
external function Boolean HasModCredMan();
external function Boolean HasModCRM();
external function Boolean HasModEDI();
external function Boolean HasModExp();
external function Boolean HasModHotel();
external function Boolean HasModHRM();
external function Boolean HasModIN();
external function Boolean HasModIntStock();
external function Boolean HasModNL();
external function Boolean HasPaymentGateway();
external function Boolean HasModPO();
external function Boolean HasModPOS();
external function Boolean HasModPL();
external function Boolean HasModPOProg();
external function Boolean HasModPP();
external function Boolean HasModProd();
external function Boolean HasModQT();
external function Boolean HasModRent();
external function Boolean HasModRest();
external function Boolean HasModRsrt();
external function Boolean HasModSO();
external function Boolean HasModSL();
external function Boolean HasModSVO();
external function Boolean HasModTS();
external function Boolean HasModWHM();
external function Boolean HasModDI();
external function Boolean UsePostOKButton();
external function Boolean HasBankImport();
external function Boolean HasPLIntegratedWithNL();
external function Boolean HasSLIntegratedWithNL();
external function Boolean HasIntegratedNL();
external function Boolean HasConsStockMoveInvoices();
remote function boolean CompanyIsJWLikeCompany(Integer); //Edit***************************Sasha2,16:05 17.08.2017

external procedure GenerateCCPaymentMenus();// Edit ************************** BPI Ukraine - KramarAlexandr - Tuesday, 13 February 2018 09:50:38

SetLangMode(LangRussian,"RUS",0);
  
	
	
	
	
	
window INRClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,v,v1,vm,vs,v2;
  Integer tilenr;
  
  WindowBegin("Определите отчет по складу",INRClass,CGRcW,RcType);
  h = 160; v = 6; vs = 20; h2 = 30; h3 = 180; h4 = 330;

  if (IsEnterprise) then begin
    SetWRect(20,80,580,470);
    Tile(0,40,false,"",f1);
    h4 = 330;
  end else begin
    SetWRect(20,80,400,470);
    h4 = 227;
    h = 120;
  end;

  EditFieldTL(h,v,150,"Товар",M4UStr,Normal,50,f1,false,INSClass); v = v + vs;
  if (IsEnterprise) then begin
    TileButtons(v,2);
    tilenr = 1;
    Tile(tilenr,340,false,tilenr,d1); tilenr = tilenr + 1;
    v = 6;
  end;
  if (HasItemGroups) then begin
    EditFieldTL(h,v,150,"Группа",M4UStr,Normal,11,f3,false,ITSClass); v = v + vs;
  end;
  if (HasItemClassification) then begin
    EditFieldTL(h,v,150,"Классиф. товара", M4UStr,Normal,100,f4,false,DISClass); v = v + vs;
    EditFieldTL(h,v,150,"Вид классификации",M4UStr,Normal,60,f5,false,CTypeSClass); v = v + vs;
  end;
  if (HasMultiLocations) then begin
    EditFieldTL(h,v,80,"Склад",M4Code,Normal,10,f2,false,LocationSClass); v = v + vs;
  end;
//  EditFieldTL(h,v+=vs,80,"Группа складов",M4Code,Normal,10,f6,false,LocGrSClass);
//  EditFieldTL(h,v+=vs,150,"Классификация склада",M4List,Normal,200,f7,false,LocClSClass);
  if (HasPositions) then begin
    EditFieldTL(h,v,150,"Место",M4Code,Normal,10,FirstAcc,false,FreePosSClass); v = v + vs;
  end;
  if (HasDepartments) then begin
    EditFieldTL(h,v,150,"Отдел",M4UStr,Normal,10,AccStr,false,DepSClass); v = v + vs;
  end;
  if (HasModPO) then begin
    EditFieldTL(h,v,150,"Поставщик",M4UStr,Normal,20,LastAcc,false,VESClass); v = v + vs;
  end;
  if (HasCategories) then begin
    EditFieldTL(h,v,50,"Категория поставщиков",M4UStr,Normal,5,f9,false,VGSClass); v = v + vs;
  end;
  if (HasContactClassification) then begin
    EditFieldTL(h,v,150,"Классиф. поставщиков",M4UStr,Normal,30,f8,false,CClassSClass); v = v + vs;
  end;
  EditFieldTL(h,v,80,"Дата",M4Date,Normal,0,d1,false,PasteCurDate); v = v + vs;
  ButtonFrame(h2,vm=(v+=30),123,5,"Purchase Ledger");
  RadioButton(h2,v,0,0,"Сводный",ArtMode);
  RadioButton(h2,v+=16,1,0,"Подробно",ArtMode);
  if (HasMultiLocations) then begin
    RadioButton(h2,v+=16,2,0,"По складам",ArtMode);
    CheckBox(h2+30,v+=16,0,"Вкл. суммы",flags[14]);
    RadioButton(h2,v+=16,3,0,"Итого по складам",ArtMode);
  end;
  EndFrame;
  if (HasMultiCurrency) then begin
    v = v + 45; v1 = v;
  end;
/*not implemented ?   
  if (HasMultiCurrency) then begin
    ButtonFrame(h2,v1=(v+=45),123,2,"Курс обмена");
    RadioButton(h2,v,0,0,"По поступлению",flags[1]);
    RadioButton(h2,v+=16,1,0,"Текущий",flags[1]);
  end;
*/  
  if (IsEnterprise) then begin
    ButtonFrame(h3,v=vm,123,5,"Метод оценки");
    RadioButton(h3,v,0,0,"По умолчанию",flags[11]);
    RadioButton(h3,v+=16,1,0,"По стоимости",flags[11]);
    RadioButton(h3,v+=16,2,0,"% oт базовой цены",flags[11]);
    RadioButton(h3,v+=16,3,0,"Средневзвешенный",flags[11]);
    RadioButton(h3,v+=16,4,0,"По очереди",flags[11]);
    ButtonFrame(h3,v=v1,123,3,"Отображать");
    RadioButton(h3,v,0,0,"Обычно",flags[19]);
    RadioButton(h3,v+=16,1,0,"Суммировано",flags[19]);
    RadioButton(h3,v+=16,2,0,"Раздельно",flags[19]);
  end;
  ButtonFrame(h4,v=vm,123,5,"Сортировать по");
  RadioButton(h4,v,0,0,"Номеру",flags[2]);
  if (HasItemGroups) then begin
    RadioButton(h4,v+=16,1,0,"Группе",flags[2]);
  end;
  RadioButton(h4,v+=16,2,0,"Наименованию",flags[2]);
  if (IsEnterprise) then begin
    RadioButton(h4,v+=16,3,0,"Штрих-коду",flags[2]);
    if (StandardHansa==false) then begin
      RadioButton(h4,v+=16,4,0,"Классификации",flags[2]);
    end;
  end;
  EndFrame;
  v2 = v + 16;
  v = v1;
  if (IsEnterprise) then begin
    CheckBox(h4,v=20,0,"Только с полож. балансом",UsedOnly);
    CheckBox(h4,v+=16,0,"Только отриц. кол-ва",flags[17]);
  end;
  if (IsEnterprise==false) then begin
    v = v2;
  end;
  if (HasSerialNumbers) then begin
    CheckBox(h4,v+=16,0,"Показать сер. №",flags[10]); v = v + 16;
  end;
  if (HasSecondQuantity) then begin
    CheckBox(h4,v,0,"Показать кол-во 2",flags[15]); v = v + 16;
  end;
  if (IsEnterprise) then begin
    CheckBox(h4,v,0,"Суммы - два знака после запятой",flags[16]); v = v + 16; // Who wanted this? Decimals per report....nahh.., I haven't added this one, JJ
    CheckBox(h4,v,0,"Показать закрытые",flags[18]); v = v + 16;
    CheckBox(h4,v,0,"Средневзв. стоимость на выбр. дату",flags[20]); v = v + 16;
    if (StandardHansa==false) then begin
      CheckBox(h4,v,0,"Показывать с заменит.",flags[21]); v = v + 16;
    end;
  end;
  
  CheckBox(h4,v,0,"Исключить обычные товары",flags[24]);
	CheckBox(h4,v+=16,0,"Исключить товары консигн.",flags[25]);
	CheckBox(h4,v+=16,0,"Исключить товары малоцен.",flags[26]);
  
  if (IsEnterprise) then begin
    Tile(tilenr,340,false,tilenr,-); tilenr = tilenr + 1;
    v = 6;
    EditFieldTL(h,v,150,"Группа складов",M4Code,Normal,10,f10,false,LocGrSClass); 
    EditFieldTL(h,v+=vs,150,"Классификация складов",M4List,Normal,200,f11,false,LocClSClass); 
    ButtonFrame(h=30,vm=(v+=40),188,3,"Purchase Ledger");
    RadioButton(h,v,0,0,"Включая склад комиссии",flags[12]);
    RadioButton(h,v+=16,1,0,"Не включая склад комиссии",flags[12]);
    RadioButton(h,v+=16,2,0,"Только склад комиссии",flags[12]);
  end else begin
    vm = v;
  end;
  if (HasVarieties) then begin
    CheckBox(h4,v=vm,0,"Показ. варианты",flags[22]); v = v + 16;
  end;
  if (HasLocalization("ARG,MEX,USA") and IsStandardProduct==false) then begin
    CheckBox(h4,v,0,"Показать номер Отправки (Подробно)",flags[23]); v = v + 16;
  end;
  EndWindow;
end;




window TemporaryPricesLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  Integer pos;

  WindowBegin("Временные цены",TemporaryPricesLClass,CGmlist,-);
  SetWRect(20,80,300,350);
  Sizeable(-1,-1,0,0);
  SpawnClass(TemporaryPricesDClass);
  UseView(TemporaryPricesVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"№",SerNr,false,SerNr);
  RlColKey(150,150,"С даты",FromDate,false,FromDate);
  RlColKey(250,250,"По дату",ToDate,false,ToDate);
  RlCol(300,300,"Комментарий",Comment,false);
  EndWindow;
end;


window TemporaryPricesDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,t,v,vs, h2;
  WindowBegin("Временные цены",TemporaryPricesDClass,CGview,-);
  UseView(TemporaryPricesVc);
  SetWRect(20,80,500,550);
		v = 10; vs = 20; h = 120; h2 = 320;
    EditField(h,v,80,"Номер ",ViewOnly,SerNr,false,0); 
		EditField(h2,v,80,"Объект ",Normal,Object,false,ObjPROMOSClass); 
		// CheckBox(h2 + 50,v,0,"OK",OKFlag);
    EditField(h,v+=vs,80,"С даты",Normal,FromDate,true,PasteCurDate);
    EditField(h2,v,80,"По дату",Normal,ToDate,true,PasteCurDate);
		EditField(h,v+=vs,-20,"Комментарий",Normal,Comment,false,0);
		MatrixBegin(10,v=100,-27,-32,-,99);
			MatCol(1,20,"Товар",0,ArtCode,false,INSClass);
			MatCol(1,-160,"Цена",0,Price,true,0);
			MatCol(1,-80,"Валюта",0,Currency,true,CurncyCodeSClass);
		EndMatrix;
		
		SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  EndWindow;
end;






window ConsItemLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  Integer pos;

  WindowBegin("Консолидированные товары",ConsItemLClass,CGmlist,-);
  SetWRect(20,80,350,350);
  Sizeable(-1,-1,0,0);
  SpawnClass(ConsItemDClass);
  UseView(ConsItemVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Item (Cons)",Code,false,Code);
  RlColKey(150,150,"Item (Local)",LocCode,false,LocCodeBrand);
  RlCol(300,300,"Brand",BrandCode,false);
	SearchField("Поиск");
  EndWindow;
end;


window ConsItemDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,t,v,vs, h2;
  WindowBegin("Таблица соответствия",ConsItemDClass,CGview,-);
  UseView(ConsItemVc);
  SetWRect(20,80,500,550);
		v = 10; vs = 20; h = 120; h2 = 320;
    EditField(h,v,80,"Item (Cons)",Normal,Code,false,INSClass); 
		EditField(h2,v,80,"Item (Local)",Normal,LocCode,false,INSClass); 
    EditField(h,v+=vs,80,"Brand",Normal,BrandCode,true,BPIBrandSCLass);
  EndWindow;
end;




window UserBrandsLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  Integer pos;

  WindowBegin("Бренды сотрудников",UserBrandsLClass,CGmlist,-);
  SetWRect(20,80,300,350);
  Sizeable(-1,-1,0,0);
  SpawnClass(UserBrandsDClass);
  UseView(UserBrandsVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Логин",Code,false,Code);
  RlCol(104,104,"Имя",Name,false);
  EndWindow;
end;


window UserBrandsDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,t,v,vs, h2;
  WindowBegin("Бренды сотрудника",UserBrandsDClass,CGview,-);
  UseView(UserBrandsVc);
  SetWRect(20,80,500,550);
		v = 10; vs = 20; h = 120; h2 = 320;
    EditField(h,v,100,"Логин ",Normal,Code,false,UserSClass); 
		EditField(h,v+=20,-20,"Имя ",Normal,Name,false,0); 
		MatrixBegin(10,v=100,-27,-32,-,1000);
			MatCol(1,24,"Бренд",0,Brand,false,BPIBrandSClass);
			MatCol(1,100,"Название",0,Name,true,0);
		EndMatrix;
		
		SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  EndWindow;
end;




window VILClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  Integer pos;

  WindowBegin("Счета-фактуры поставщиков",VILClass,CGmlist,-);
  SetWRect(20,80,840,350);
  Sizeable(-1,-1,0,0);
  SpawnClass(VIDClass);
  UseView(VIVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"№",SerNr,false,SerNr);
  RlColKey(79,79,"ОК",OKFlag,false,OKFlag);
  RlColKey(111,111,"Дата сч/ф",InvDate,false,InvDate);
  RlColKey(191,191,"Дата проводки",TransDate,false,TransDate);
  pos = 271;
	
  if (HasmodPO) then begin
		if(CurrentCompany!=29)then begin
			RlColKey(pos,pos,"№ счета поставщика",POSerNr,false,POSerNr);
			pos = pos + 60;
			RlColKey(pos,pos,"Номер сч/ф пост.",InvoiceNr,false,InvoiceNr);
		end else begin
			RlColKey(pos,pos,"Зак.Btrx №",POSerNr,false,POSerNr);
			pos = pos + 60;
			RlColKey(pos,pos,"Btrx-сч/ф №",InvoiceNr,false,InvoiceNr);
		end;
  end else begin
    RlColKey(pos,pos,"Номер сч/ф пост.",InvoiceNr,false,InvoiceNr);
  end;
  if (HasLocalization("ARG,MEX")) then begin
    pos = pos + 120;
  end else begin
    pos = pos + 120;
  end;
  RlColKey(pos,pos,"Поставщик",VECode,false,VECode);
  pos = pos + 70;
  RlColKey(pos,pos,"Наим.",VEName,false,VEName);
  if (HasMultiCurrency) then begin
    if (AcceptanceStatusColumnTest("VIVc")) then begin 
      CalculatedColumn(-150,-150,"Подтв.","VILClassAcceptanceStatus",false); 
    end;
    RlColKey(-110,-110,"Итого",PayVal,true,PayVal);
    RlCol(-39,-39,"",CredMark,true);
    RlCol(-30,-30,"Вал.",CurncyCode,true);
  end else begin
    RlColKey(-90,-90,"Всего",PayVal,true,PayVal);
    RlCol(-10,-10,"",CredMark,true);
  end;
  RlCol(-1,-1,"",Invalid,true);
  SearchField("Поиск");
  if (HasLimitedAccess) then begin
    BrowseSubsetButton(-40,-15);
  end;
  if (GuiType==kGuiMetro) then begin
    RowMenuBegin("");
    RowMenuItem(0,"OK",'G','G',4312,"OKVILsm");
    RowMenuItem(1,"Статус счета-фактуры",'r','r',4300,"VIInfoVILsm");
    EndRowMenu;
  end else begin
    SpecialMenu("OK",'G',0,"OKVILsm");
    SpecialMenu("Статус счета-фактуры",'r',1,"VIInfoVILsm");
		SpecialMenu("Выгрузить в Excel",' ',3,"VInvoicesToExcelDsm");
  end;
  EndWindow;
end;

	
	
	
	
	
	
window VIDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,t,v,vm,vs;
  record CYBlock CYb;
  string 255 label;
  Integer tilenr;
  Integer f,flipnr;
  Integer pos;

  WindowBegin("Счёт-фактура поставщика",VIDClass,CGview,-);
  SetWRect(20,80,770,460);
  if (IsEnterprise==false) and (HasModNL==false) then begin
  end else begin
    Sizeable(-1,-1,0,0);
  end;
  UseView(VIVc);
  //  FormName(PrintVID);
  ActiveFieldOnNew("VECode");
  if (IsEnterprise==false) then begin
    if (IsBooks and IsStandardProduct==false) then begin
      AutoSizeWindow(false);
    end;
    v = 6; h = 90; h2 = 260; h3 = 460; h4=-120; vs = 20;
    if (HasVATZone or ((HasMultiCurrency or HasBase2) and (HasModNL))) then begin
      Tile(0,74,false,"",VECode);  
    end;
    if (HasNumberSeries) then begin
      EditField(h,v,80,"Номер.",Normal,SerNr,false,TSerSClass);
    end else begin
      EditField(h,v,80,"Номер.",Normal,SerNr,false,0);
    end;
    EditField(h2,v,-40,"Наименование",Normal,VEName,false,0);  

    EditField(h,vm=(v+=20),80,"Поставщик",Normal,VECode,false,VESClass);
    EditField(h2,v,80,"Дата сч/ф пост.",Normal,InvDate,false,PasteCurDate);  
    CheckBox(-80,v,0,"OK",OKFlag);
    if (HasModNL) then begin
      EditField(h3,v,-100,"Ссылка",Normal,RefStr,false,0);         
    end;
    if (HasVATZone) then begin
      tilenr = 1;
      TileButton(tilenr,"Сроки"); tilenr = tilenr + 1;  
      TileButton(tilenr,"Затраты"); tilenr = tilenr + 1;  
      if (HasMultiCurrency or HasBase2) then begin
        TileButton(tilenr,"Вылюта"); tilenr = tilenr + 1;  
      end;
      TileButton(tilenr,"Разное"); tilenr = tilenr + 1;  
      tilenr = 1;
      Tile(tilenr,100,false,tilenr,InvoiceNr); tilenr = tilenr + 1;
      v = 6;
    end else begin
      if (HasMultiCurrency or HasBase2) and (HasModNL) then begin
        tilenr = 1;
        TileButton(tilenr,"Сроки"); tilenr = tilenr + 1;  
        TileButton(tilenr,"Затраты"); tilenr = tilenr + 1;  
        TileButton(tilenr,"Вылюта"); tilenr = tilenr + 1;  
        tilenr = 1;
        Tile(tilenr,100,false,tilenr,InvoiceNr); tilenr = tilenr + 1;
        v = 6;
      end else begin
        v = v + vs;
      end;
    end;
    vm = v;
    EditField(h,v,80,"Номер сч/ф пост.",Normal,InvoiceNr,false,0);  
    EditField(h,v+=vs,80,"ИТОГО",Normal,PayVal,true,0);
    EditField(h,v+=vs,80,"НДС",Normal,VATVal,true,0);
    EditField(h2,v=vm,22,"Условия опл.",Normal,PayDeal,false,PDSClass);  
    if (HasModNL) then begin
      EditField(h2,v+=vs,80,"Дата транз.",Normal,TransDate,false,PasteCurDate);
    end;
    EnterSkip(Math);
    EditField(h2,v+=vs,80,"Срок оплаты",Normal,DueDate,false,PasteCurDate);
    v = vm;
    EditField(h3,v,90,"Кредит. сч/ф",Normal,CredInv,false,APSClass);
    if (HasLanguages) then begin
      EditField(h4,v,80,"Язык",Normal,LangCode,false,LangSClass);
    end;
    EditField(h3,v+=vs,90,"Код сортировки",Normal,SortCode,false,0);
    if (HasObjects) then begin
      EditField(h4,v,80,"Объекты",Normal,Objects,false,ObjSClass);
    end;
    EditField(h3,v+=vs,-40,"Банк. счет",Normal,BankAcc,false,0);
    if (HasLocalization("POL")) then begin         
      EditField(h2,v+=vs,80,"Дата доставки услуги",Normal,ServiceDelDate,false,PasteCurDate);         
    end;
    EditField(h2,v+=vs,-40,"Коммент.",Normal,Comment,false,0);
    if (HasModNL or HasModTS or HasIncomeAndExpenseBook) then begin
      if (HasVATZone or HasMultiCurrency or HasBase2) then begin
        Tile(tilenr,330,true,tilenr,Math); tilenr = tilenr + 1;
        v = 6;
      end else begin
        v = v + 2*vs;
      end;
      BlockLoad(CYb);
      if (HasAdvancedStock or HasModTS or HasModPO) then begin
        MatrixBegin(10,v,-50,-32,-,99);
      end else begin
        MatrixBegin(10,v,-27,-32,-,99);
      end;
      MatTypedRow(stp);
      MatOverStrike(ovst);
      flipnr = 0;
      Flip(flipnr); flipnr = flipnr + 1;
      MatCol(t=kInvoiceRowTypeNormal,24,"Счет",0,AccNumber,false,AccSClass);  
      Flip(flipnr); flipnr = flipnr + 1;
      pos = 90;
      if (HasObjects) then begin
        MatCol(t=kInvoiceRowTypeNormal,pos,"Объекты",0,Objects,false,ObjSClass); pos = pos + 90;
        if (HasAdvancedAccounting) then begin
          MatCol(t,pos,"Short.",0,ACShort,false,ACShortSClass); //!!TRANSLATE
          pos = pos + 60;
        end;
        MatCol(t,pos,"Описание",0,Comment,false,0);
      end else begin
        if (HasAdvancedAccounting) then begin
          MatCol(t,pos,"Short.",0,ACShort,false,ACShortSClass); //!!TRANSLATE
          pos = pos + 60;
        end;
        MatCol(t,pos,"Описание",0,Comment,false,0);
      end;
      MatCol(t,-130,"Сумма",0,Sum,true,0);  
      if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
        MatCol(t,-35,"Налог. код",0,TaxTemplateCode,false,TaxTemplateSClass);
      end else begin
        MatCol(t,-35,"Кот НДС",0,VATCode,false,VATCodeSClass);  
      end;

      MatText(t=kInvoiceRowTypePrepayment,24,"№ предопл.",true);  
      MatCol(t,208,"",0,PrepayNr,false,APPay3SClass);
      MatCol(t,-266,"",0,Comment,false,0); 
      MatCol(t,-160,"",0,PrepayAmount,true,0);/* Price holds the #VAT# sum, Recipe holds the date of prepaym. */  
      MatCol(t,-70,"",0,VATVal,true,0);  

      MatText(t=kInvoiceRowTypeEmployee,24,"Оплата сотрудником",true);
      MatCol(t,208,"",0,UserCode,false,UserSClass); 
      MatCol(t,-406,"",0,AccNumber,false,0); 
      MatCol(t,-306,"",0,Objects,false,0);
      MatCol(t,-206,"",0,Comment,false,0);

      if (HasAdvancedStock or HasModTS or HasModPO) then begin
        Flip(flipnr); flipnr = flipnr + 1;
        pos = 140;
        t = kInvoiceRowTypeNormal;
        if (HasAdvancedStock) then begin
          MatCol(t,pos,"Тип заказа",0,OrderType,false,0);  
          MatCol(t,-360,"#Stock# Type",0,StockType,false,SetSClass);  
        end else begin
          MatCol(t=1,pos,"Описание",0,Comment,false,0);  
        end;
        MatCol(t,-260,"Сумма",0,Sum,true,0);  
        MatCol(t,-190,"Товар",0,Item,false,INSClass);  
        MatCol(t,-130,"Qty",0,qty,true,0);  
          MatCol(t,-100,"Проект",0,PRCode,false,PRSClass);  
        if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
          MatCol(t,-30,"T-Cd",0,TaxTemplateCode,false,TaxTemplateSClass);  
        end else begin
          MatCol(t,-30,"#V-Cd#",0,VATCode,false,VATCodeSClass);  
        end;
        MatText(3,270,"",true);  
      end;
      if (HasModAT2) then begin
        Flip(flipnr); flipnr = flipnr + 1;
        MatCol(t=kInvoiceRowTypeNormal,140,"Описание",0,Comment,false,0);
        MatCol(t,-300,"Asset No.",0,InventoryNr,false,AT2UnitSClass); //!!TRANSLATE
      end;
      InsertRowTest;
      DeleteRowTest;
      RowMenuBegin("");         
      RowMenuItem(0,"Баланс",'=','=',0,"BalanceVIDsm");         
      EndRowMenu;
      EndMatrix;
      vs = 20;
//      v = 18;//canoot be set to 18 on windows
      if (flipnr>2) then begin
        for (f=1;f<flipnr;f=f+1) begin
          VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1));  
          v = v + vs;
        end;
      end;
      EditField(-140,-20,-40,"Выч. НДС",ViewOnly,CalcVATVal,true,0);
      if (HasMultiCurrency or HasBase2) then begin
        Tile(tilenr,70,false,tilenr,FrRate); tilenr = tilenr + 1;
        h1 = h + 20;
        v = 6;
        EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);  
        if (HasMultiCurrency) then begin
          if (HasBase2) then begin
            EditField(h1,v+vs,50,"Осноная валюта 1",Normal,BaseRate1,true,0);  
          end else begin
            EditField(h1,v+vs,50,"Осноная валюта",Normal,BaseRate1,true,0);  
          end;
          if (HasBase2) then begin  
            EditField(h1,v+(vs*2),50,"Осноная валюта 2",Normal,BaseRate2,true,0);  
          end;
          EditField(h2=295,v,50,"Курс",Normal,FrRate,true,0);  
          if (HasBase2) then begin  
            RateField(h3=360,v,50,":",Normal,"ToRateB1",true,h3+60,v+14,"Осноная валюта 1",false);  
            RateField(h3,v+=vs,50,":",Normal,"ToRateB2",true,h3+60,v+14,"Осноная валюта 2",false);            
          end else begin
            RateField(h3=360,v,50,":",Normal,"ToRateB1",true,h3+60,v+14,"Осноная валюта",false);      
          end;    
        end else begin
          EditField(h1,v+=vs,50,"Осноная валюта 1",Normal,BaseRate1,true,0);  
          EditField(h1,v+=vs,50,"Осноная валюта 2",Normal,BaseRate2,true,0);  
        end;
      end;
      if (HasVATZone) then begin
        Tile(tilenr,120,false,tilenr,InvoiceNr); tilenr = tilenr + 1;
        v = 20;
        v = VATZoneButtonsLabelsrus(h,v,170,16);
      end;
      SpecialMenu("Баланс",'=',0,"BalanceVIDsm");
      SpecialMenu("Статус счёта-фактуры",'r',2,"VIInfoVIDsm"); 
      if (HasIntegratedNL) then begin
        SpecialMenu("Открыть запись операции",'t',5,"OpenTRFromVI"); 
      end;
      if ((HasRussianPrepayment or HasPrepayments) and HasModPL) then begin
        SpecialMenu("Соедиинть с предоплатой",' ',6,"ConnectToPrepayVIDsm"); 
      end;
      if (HasModAT2) then begin
        SpecialMenu("Asset",' ',7,"CreateAT2FromVI"); //!!TRANSLATE
      end;
    end else begin
      if (HasMultiCurrency or HasBase2) then begin
        EditField(h,v+=vs,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
        if (HasMultiCurrency) then begin
          if (HasBase2) then begin
            EditField(h,v+vs,50,"Осн. вал. 1",Normal,BaseRate1,true,0);  
          end else begin
            EditField(h,v+vs,50,"Осн. вал.",Normal,BaseRate1,true,0);  
          end;
          if (HasBase2) then begin  
            EditField(h,v+(vs*2),50,"Осн. вал. 2",Normal,BaseRate2,true,0);  
          end;
          EditField(h2=295,v,50,"Курс",Normal,FrRate,true,0);  
          if (HasBase2) then begin  
            RateField(h3=360,v,50,":",Normal,"ToRateB1",true,h3+60,v+14,"Осноная валюта 1",false);  
            RateField(h3,v+=vs,50,":",Normal,"ToRateB2",true,h3+60,v+14,"Осноная валюта 2",false);            
          end else begin
            RateField(h3=360,v,50,":",Normal,"ToRateB1",true,h3+60,v+14,"Осноная валюта",false);      
          end;    
        end else begin
          EditField(h,v+=vs,50,"Осн. вал. 1",Normal,BaseRate1,true,0);  
          EditField(h,v+=vs,50,"Осн. вал. 2",Normal,BaseRate2,true,0);  
        end;
      end;
    SpecialMenu("Статус сч/ф",'r',2,"VIInfoVIDsm");
      if (HasIntegratedNL) then begin
      SpecialMenu("Открыть книгу операций",'t',5,"OpenTRFromVI");
    end;
    if ((HasRussianPrepayment or HasPrepayments) and HasModPL) then begin
      SpecialMenu("Связать с предоплатой",' ',6,"ConnectToPrepayVIDsm");
      end;
    end;
    if (HasWithholdingTax) then begin
      SpecialMenu("Add Withholding Tax",' ',26,"WithholdingLineVIDsm"); //!!TRANSLATE
    end;
    SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);         
    SpecialMenu("Создать кредит-ноту",' ',15,"CreateCreditNoteVIDsm");
    if (HasModCL) then begin
      SpecialMenu("Create Cash Out",' ',8,"DoCLOutFromVID");  
    end;
    if (HasModNL and HasMultiCurrency) then begin
      SpecialMenu("Внутренний сч/ф",' ',12,"IntIVFromVIDsm");
    end;
    if (HasLocalization("POL") and HasVATZone) then begin
      SpecialMenu("Создать внутренний счет-фактуру",' ',12,"IntIVFromVIDsm");
    end;
    if (HasLocalization("HRV,POL,RUS,SLV,SVN,SRB,UKR")) and (HasIntegratedNL) then begin
      SpecialMenu("Коррекция НДС книги покупок",' ',9,"VATCorrectionVIsm");
    end;
    SpecialMenu("Добавить поставщика",' ',0,"AddSupplierVIDsm"); 
    if (HasModAT2) then begin
      SpecialMenu("Asset",' ',7,"CreateAT2FromVI"); //!!TRANSLATE
    end;
  end else begin
    BlockLoad(CYb);
    vs = 20;
    Tile(0,94,false,"",InvDate);
    if (IsEnterprise) then begin
      h = 75; h2 = 260; h3 = 530;
    end else begin
      h = 90; h1 = 90; h2 = 270; h3 = 470; h4=-110;
    end;
    if (HasNumberSeries) then begin
      EditField(h,vm=(v=6),95,"Номер",Normal,SerNr,false,TSerSClass);
    end else begin
      EditField(h,vm=(v=6),95,"№",Normal,SerNr,false,0);  
    end;
    EditField(h,v+=vs,95,"Поставщик",Normal,VECode,false,VESClass);
    EnterSkip(PayVal);
    EditField(h2,v=vm,-40,"Наим.",Normal,VEName,false,0);
    if (IsEnterprise) then begin
      EditField(h2,vm=(v+=20),95,"Удерж. сумма",Normal,HoldSum,true,0);
    end else begin
      EditField(h2,v+=vs,80,"Дата сч/ф",Normal,InvDate,false,PasteCurDate);
      EditField(h3,v,90,"Ссылка",Normal,RefStr,false,0);
    end;
    CheckBox(h4=-100,v,0,"ОК",OKFlag);
    if (IsEnterprise) then begin
      EditField(h,v+=vs,95,"ИТОГО",Normal,PayVal,true,0);
      EditField(h2,v,95,"НДС",Normal,VATVal,true,0);
			EditField(h3=-250,v,95,"Объект доп.затрат",Normal,ExtraCostObj,true,0);
			if(currentuser=="SA" or currentuser=="SA1")then begin
				EditField(h4,v,80,"PU Nr",Normal,PartPUSerNr,true,0);
			end;
    end;
    tilenr = 1;
    TileButton(tilenr,"Условия"); tilenr = tilenr + 1;
    TileButton(tilenr,"Затраты"); tilenr = tilenr + 1;
    TileButton(tilenr,"Валюта"); tilenr = tilenr + 1;
    if (IsEnterprise) then begin
      if (HasLocalization("UKR")) then begin
        TileButton(tilenr,"НДС курс"); tilenr = tilenr + 1;
      end;
      TileButton(tilenr,"Коммент."); tilenr = tilenr + 1;
      TileButton(tilenr,"Счета"); tilenr = tilenr + 1;
      TileButton(tilenr,"Адрес выст. счета"); tilenr = tilenr + 1;
    end;
    tilenr = 1;
    Tile(tilenr,90,false,tilenr,InvDate); tilenr = tilenr + 1;
    if (IsEnterprise) then begin
      vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -90;
      EditField(h1,vm=(v=6),82,"Дата сч/ф",Normal,InvDate,false,PasteCurDate);
      EditField(h1,v+=vs,25,"Условия оплаты",Normal,PayDeal,false,PDSClass);//PDSClass
      EditField(h1,v+=vs,82,"Дата операции",Normal,TransDate,false,PasteCurDate);
      EditField(h1,v+=vs,82,"Дата оплаты",Normal,DueDate,false,0);
      if (HasLocalization("POL")) then begin  
        EditField(h1,v+=vs,82,"Дата оказ. услуги",Normal,ServiceDelDate,false,PasteCurDate);  
      end;
    end else begin
      EditField(h,v=6,80,"Пост. сч/ф номер",Normal,InvoiceNr,false,0);
      EditField(h,v+=vs,80,"ИТОГО",Normal,PayVal,true,0);
      EnterSkip(PayDeal);
      EditField(h,v+=vs,80,"НДС",Normal,VATVal,true,0);
    end;
    if (IsEnterprise) then begin
      EditField(h2,v=vm,135,"№ сч/ф постав.",Normal,InvoiceNr,false,0);
      EditField(h2,v+=vs,135,"Подписи",Normal,OKPersons,false,UserSClass);
      EditField(h2,v+=vs,135,"Объекты",Normal,Objects,false,ObjSClass);
      EditField(h2,v+=vs,135,"Ссылка",Normal,RefStr,false,0);
    end else begin
      EditField(h2,v=6,22,"Усл. платежа",Normal,PayDeal,false,PDSClass);
      EnterSkip(Math);
      EditField(h2,v+=vs,80,"Дата транз.",Normal,TransDate,false,PasteCurDate);
      EditField(h2,v+=vs,80,"Срок оплаты",Normal,DueDate,false,0);
    end;
    if (IsEnterprise) then begin
      EditField(h3,v=vm,82,"Дата получения",Normal,RcvDate,false,PasteCurDate);
      EditField(h3,v+=vs,82,"Дата скидки",Normal,RebDate,false,PasteCurDate);
      EditField(h3,v+=vs,82,"Скидка",Normal,RebVal,true,0);
      EditField(h3,v+=vs,82,"Кредит. сч/ф",Normal,CredInv,false,APSClass);
    end else begin
      EditField(h3,v=6,90,"Кредит. сч/ф",Normal,CredInv,false,APSClass);
      EditField(h3,v+=vs,90,"Банк. счет",Normal,BankAcc,false,0);
      EditField(h3,v+=vs,90,"Код сорт.",Normal,SortCode,false,0);
      v = 6;
      if (HasLanguages) then begin
        EditField(h4,v,90,"Язык",Normal,LangCode,false,LangSClass);
        v = v + vs;
      end;
      if (HasObjects) then begin
        EditField(h4,v,90,"Объекты",Normal,Objects,false,ObjSClass);
        v = v + vs;
      end;
    end;
    EnterSkip(Math);
    if (HasAdvancedAccounting) then begin
      CheckBox(h4,v=6,0,"Отложен",Closed);
      if (StandardHansa==false) then begin
        CheckBox(h4,v+=16,0,"Предв. заказ",PrelBook);
      end;
    end;
		if(currentuser=="SA")then begin
			CheckBox(h4,v+=16,0,"PartBrndSHpFlg",BrandShipCostf);
			CheckBox(h4,v+=16,0,"PartBrndSHpUsedFlg",BrandShipCostIVUsedf);
		end;
    Tile(tilenr,130,true,tilenr,Math); tilenr = tilenr + 1;
    EditField(140,-21,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
    if (HasWithholdingTax) then begin
      if (StandardHansa==false) then begin
        EditField(270,-20,70,"Уд. налог",Normal,WithHoldingTax,true,0);
      end;
    end;
    if (HasExtTax) then begin
      EditField(410,-20,70,"Внеш. нал.",ViewOnly,TAX1Sum,true,0);
    end;
    EditField(-120,-20,70,"Итого НДС",ViewOnly,CalcVATVal,true,0);
  //  SoftEditField(-144,-21,70,"Subtotal",ViewOnly,"NettVal",true,0,M4Val,255);
    EnterSkip(Math);
  //  CheckBox(20,-21,0,"OK",OKFlag);
    h=4;
    if (HasModNL) then begin
      if (IsEnterprise) then begin
        MatrixBegin(h,v=24,-50,-24,-,299);
      end else begin
        MatrixBegin(h,v=24,-27,-24,-,99);
      end;
      MatTypedRow(stp); //??
      MatOverStrike(ovst);
      flipnr = 0;
      Flip(flipnr); flipnr = flipnr + 1;
      MatCol(t=kInvoiceRowTypeNormal,32,"Счет",0,AccNumber,false,AccSClass);
      if (HasObjects) then begin
        MatCol(t,90,"Объекты",0,Objects,false,ObjSClass);
      end;
      MatText(t=6,32,"№ предопл.",true);
      MatCol(t,208,"",0,PrepayNr,false,APPay3SClass);
      MatCol(t,-266,"",0,Comment,false,0); 
      MatCol(t,-160,"",0,PrepayAmount,true,0);/* Price holds the #VAT# sum, Recipe holds the date of prepaym. */
      MatCol(t,-70,"",0,VATVal,true,0);

      MatText(t=kInvoiceRowTypeEmployee,32,"Оплата сотрудником",true);
      MatCol(t,158,"",0,UserCode,false,UserSClass); 
      MatCol(t,-406,"",0,AccNumber,false,0); 
      MatCol(t,-306,"",0,Objects,false,0);
      MatCol(t,-206,"",0,Comment,false,0);

      MatText(t=kInvoiceRowTypeDownpayment,32,"Предоплата",true); 
      MatColTL(t,122,"",0,-1,ViewOnly,0,Item,true,0); 
      MatColTL(t,208,"",0,-1,ViewOnly,0,qty,true,0); 
      MatCol(t,268,"",0,Comment,false,0); 
//      MatColTL(t,-240,"",0,-1,ViewOnly,0,Price,true,0);
//      MatColTL(t,-180,"",0,-1,ViewOnly,0,vRebate,true,0);
      MatColTL(t,-170,"",0,-1,Normal,0,Sum,true,0); 
      if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
        MatCol(t,-100,"",0,AccNumber,false,AccSClass); 
        MatCol(t,-54,"",0,TaxTemplateCode,false,TaxTemplateSClass); 
      end else begin
        MatCol(t,-90,"",0,AccNumber,false,AccSClass); 
        MatCol(t,-30,"",0,VATCode,false,VATCodeSClass); 
      end;

      MatText(t=kInvoiceRowTypeRetention,32,"Удержание",true);
      MatCol(t,100,"",0,Comment,false,0);
      if (HasModTS) then begin
        MatCol(t,-340,"Проект",0,PRCode,false,PRSClass);
      end;
      MatCol(t,-210,"Счет",0,AccNumber,false,AccSClass);
      MatCol(t,-110,"Сумма",0,Sum,true,0);
      if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
        MatCol(t,-30,"Ш.н.",0,TaxTemplateCode,false,TaxTemplateSClass);
      end else begin
        MatCol(t,-30,"Код НДС",0,VATCode,false,VATCodeSClass);
      end;
      MatText(t=kInvoiceRowTypeWithholdingTax,32,"Удерживаемый налог",true);
      MatCol(t,132,"",0,WHTax,false,WHTaxSClass);
      MatCol(t,172,"",0,AccNumber,false,AccSClass);
      MatCol(t,292,"",0,Sum,true,0);
      MatCol(t,392,"",0,Comment,false,0);
      Flip(flipnr); flipnr = flipnr + 1;
      t = 1; pos = 180;
      if (HasAdvancedAccounting) then begin
        MatCol(t,pos,"Код счета",0,ACShort,false,ACShortSClass);
        pos = pos + 60;
      end;
      MatCol(t,pos,"Описание",0,Comment,false,0);
      MatCol(t,-120,"Сумма",0,Sum,true,0);
      if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
        MatCol(t,-30,"Ш.н.",0,TaxTemplateCode,false,TaxTemplateSClass);
      end else begin
        MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);
      end;
    //  MatCol(t,-30,"TT",0,TaxTemplateCode,false,VATCodeSClass);
      if (HasAdvancedStock or HasModTS or HasModPO) then begin
        Flip(flipnr); flipnr = flipnr + 1;
        pos = 140;
        t=1;
        if (HasAdvancedStock) then begin
          MatCol(t,pos,"Тип заказа",0,OrderType,false,0);
          MatCol(t,-360,"Тип склада",0,StockType,false,SetSClass);
        end else begin
          MatCol(t=1,pos,"Описание",0,Comment,false,0);
        end;
        MatCol(t,-260,"Сумма",0,Sum,true,0);
        MatCol(t,-190,"Товар",0,Item,false,INSClass);
        MatCol(t,-130,"К-во",0,qty,true,0);
        if (HasModTS) then begin
          MatCol(t,-100,"Проект",0,PRCode,false,PRSClass);
        end;
        if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
          MatCol(t,-30,"Ш.н.",0,TaxTemplateCode,false,TaxTemplateSClass);
        end else begin
          MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);
        end;
        MatText(3,270,"",true);
      end;
      if (HasSimAccruals) then begin
        Flip(flipnr); flipnr = flipnr + 1;
        MatCol(t=kInvoiceRowTypeNormal,140,"Комментарий",0,Comment,false,0);
        MatCol(t,-260,"Сумма",0,Sum,true,0);   // From dict
        MatCol(t,-180,"Расх.буд.пер.",0,PeriodCode,false,AutSimPerSClass);   // From dict
        MatCol(t,-80,"НДС",0,VATVal,true,0);   // From dict
      end;
      if (HasAdvancedStock or HasSerialNumbers) then begin
        Flip(flipnr); flipnr = flipnr + 1;
        MatCol(t=kInvoiceRowTypeNormal,140,"Описание",0,Comment,false,0);
        MatCol(t,-350,"Товар",0,Item,false,INSClass);   // From dict
        if (HasSerialNumbers) then begin
          MatColTL(t,-250,"Серийный №",0,-1,ViewOnly,-1,SerialNr,false,0);   // From dict
        end;
        MatCol(t,-130,"К-во",0,qty,true,0);   // From dict
        if (HasAdvancedStock) then begin
          MatColTL(t,-70,"Изменение цены",0,-1,ViewOnly,-1,VarianceAmount,false,0);   // From dict
        end;
      end;
        Flip(flipnr); flipnr = flipnr + 1;
        MatCol(t=kInvoiceRowTypeNormal,140,"Описание",0,Comment,false,0);
        MatCol(t,-300,"№ актива",0,InventoryNr,false,AT2UnitSClass);
        MatCol(t,-150,"Вид опер. с активом",0,AssetTransType,false,SetSClass);
      InsertRowTest;
      DeleteRowTest;
//      RowMenuBegin("");
//      EndRowMenu;
      EndMatrix;
      vs = 20;
      v = 18;
      if (flipnr>2) then begin
        for (f=1;f<flipnr;f=f+1) begin
          VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1));
          v = v + vs;
        end;
      end;
    end;

    Tile(tilenr,70,false,tilenr,FrRate); tilenr = tilenr + 1;
    vs = 20;
    if (HasBase2) then begin
      h1 = h1 + 20;
    end;
    EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
    if (HasMultiCurrency) then begin
    if (HasBase2) then begin
        EditField(h1,v+vs,50,"Осноная валюта 1",Normal,BaseRate1,true,0);
    end else begin
        EditField(h1,v+vs,50,"Осноная валюта",Normal,BaseRate1,true,0);
      end;
      if (HasBase2) then begin  
        EditField(h1,v+(vs*2),50,"Осноная валюта 2",Normal,BaseRate2,true,0);  
      end;
      EditField(h2=295,v,50,"Курс",Normal,FrRate,true,0);  
      if (HasBase2) then begin  
        RateField(h3=360,v,50,":",Normal,"ToRateB1",true,h3+60,v+14,"Осноная валюта 1",false);  
        RateField(h3,v+=vs,50,":",Normal,"ToRateB2",true,h3+60,v+14,"Осноная валюта 2",false);            
      end else begin
        RateField(h3=360,v,50,":",Normal,"ToRateB1",true,h3+60,v+14,"Осноная валюта",false);      
      end;    
    end else begin
      EditField(h1,v+=vs,50,"Осноная валюта 1",Normal,BaseRate1,true,0);  
      EditField(h1,v+=vs,50,"Осноная валюта 2",Normal,BaseRate2,true,0);  
    end;
    if (IsEnterprise) then begin
      if (HasLocalization("SVK,UKR")) then begin
        Tile(tilenr,70,false,tilenr,VATFrRate); tilenr = tilenr + 1;
        vs = 20;
        EditField(h=110,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
        EditField(h,v+vs,50,"Осноная валюта 1",Normal,VATBaseRate1,true,0);  
        EditField(h,v+(vs*2),50,"Осноная валюта 2",Normal,VATBaseRate2,true,0);    
        EditField(h2=295,v,50,"#VAT# Rate",Normal,VATFrRate,true,0);  
        RateField(h3=360,v,50,":",Normal,"VATToRateB1",true,h3+60,v+14,"Осноная валюта 1",false);  
        RateField(h3,v+=vs,50,":",Normal,"VATToRateB2",true,h3+60,v+14,"Осноная валюта 2",false);             
      end;
      Tile(tilenr,110,false,tilenr,PRCode); tilenr = tilenr + 1;
      vs = 20; h1 = 110; h2 = 290; h3 = 550; h4 = -100;
      if (StandardHansa==false) then begin
        EditField(h1,v=vm,82,"Факторинг",Normal,VEFactoring,false,VESClass);
        EditField(h1,v+=vs,82,"Подразделение",ViewOnly,BranchID,false,0);
      end else begin
        EditField(h1,v=vm,82,"Филиал",ViewOnly,BranchID,false,0);         
      end;
      EditField(h1,v+=vs,82,"Сумма пост. в вал.",Normal,SupCurVal,false,0);
      EditField(h1,v+=20,82,"Статистич. ст-сть",Normal,StatVal,true,0);
      EditField(h1,v+=vs,-20,"Комментарий",Normal,Comment,false,0);
      EditField(h2,v=vm,80,"Продавец",Normal,SalesMan,false,UserSClass);
      if (HasSalesGroup) then begin
        EditField(h2,v+=vs,80,"Группа продажт",Normal,SalesGroup,false,SalesGroupSClass);
        EditField(h2+160,v,80,"Org. Supp.",ViewOnly,OrgVE,false,0);
      end;
      EditField(h2,v+=vs,80,"Язык",Normal,LangCode,false,LangSClass);
      EditField(h2,v+=vs,80,"Счёт кредитор.",Normal,APAcc,false,AccSClass);
      CheckBox(h3,v=6,0," № сч/ф пост.",APonTR);
        if (HasLocalization("PRT")==false) then begin
          CheckBox(h3,v+=16,0,"Счёт себе",SelfBilling);
        end;
      CheckBox(h3,v+=16,0,"Пост-оплата #VAT#",OPBookVAT);
        if (HasLocalization("ARG")) then begin         
        CheckBox(h3,v+=16,0,"Фискальная сч/ф",FiscalFlag);
      end;
      Tile(tilenr,90,false,tilenr,POSerNr); tilenr = tilenr + 1;
      EditField(h1,v=vm,82,"№ зак. пост.",Normal,POSerNr,false,0);
      if (StandardHansa==false) then begin
        EditField(h1,v+=vs,82,"№ опер. зак. пост.",Normal,POCQStatNr,false,POCQStatSClass);
        EditField(h1,v+=vs,82,"Дата оказ. услуги",Normal,ServiceDelDate,false,PasteCurDate);
        if (HasLocalization("ARG")) then begin         
        EditField(h1,v+=vs,82,"Срок действ. CAE",Normal,CAEExpiry,false,PasteCurDate);
        end;
      end;
      EditField(h2,v=vm,135,"Код банка",Normal,BankCode,false,BankSClass);
      if (HasLocalization("EST")) then begin
        EditField(h3,v,-20,"Оплата на Имя",Normal,PayToName,false,0);
      end;
      EditField(h2,v+=vs,135,"Банковский счет",Normal,BankAcc,false,VEBankAccSClass);
      EditField(h2,v+=vs,135,"Код сортировки",Normal,SortCode,false,0);
        if (HasLocalization("ARG")) then begin         
        EditField(h2,v+=vs,135,"CAE",Normal,CAE,false,0);
        end;
        v = vm;
        if (HasLocalization("ARG,BOL")) then begin         
          EditField(h3,v,-20,"ID налоговой инстанции",Normal,TaxAuthID,false,0);         
          EditField(h3,v+=vs,-20,"Контрольный код",Normal,TaxAuthIDCC,false,0);         
        end;
        EditField(h3,v+=vs,-20,"Штрих-код",Normal,BarCode,false,0);
      EditField(h3,v+=vs,-20,"Код платежа",Normal,PaymentCode,false,PaymentCodeSClass);
  /*
    EditField(h2,v,30,"Sup. VAT-Code",Normal,VEVatCode,false,VATCodeSClass);
    EditField(h3,v,80,"Official Ser. No.",Normal,OfficialSerNr,false,0);
  */
      Tile(tilenr,250,false,tilenr,Addr1); tilenr = tilenr + 1;
      label = UserDefined("CUVc","InvAddr0");
      if (blank(label)) then begin label = "Счёт-фактура"; end;
      EditField(h=110,v=6,-20,label,Normal,Addr1,false,0);
      label = UserDefined("CUVc","InvAddr1");
      if (blank(label)) then begin label = "Адрес"; end;
      EditField(h,v+=vs, -20,label,Normal,Addr2,false,0);
      label = UserDefined("CUVc","InvAddr2");
      EditField(h,v+=vs, -20,label,Normal,Addr3,false,0);
      label = UserDefined("CUVc","InvAddr3");
      EditField(h,v+=vs, -20,label,Normal,InvAddr3,false,0);
      label = UserDefined("CUVc","InvAddr4");
      EditField(h,v+=vs, -20,label,Normal,InvAddr4,false,0);
      EditField(h,vm=(v+=vs),80,"Страна",Normal,InvCountry,false,CountrySClass);
      if (HasApprovals) then begin
        SoftEditField(h3=h+4,v=(vm+=40),123,"Статус утверждения",ViewOnly,"AcceptanceStatusFlag",false,0,M4Str,255);
/*      
        ButtonFrame(h3=h+4,v=(vm+=40),123,6,"Статус утверждения");
        RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);
        RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);
        RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);
        RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);
        RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);
        RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);
*/        
        v = VATZoneButtonsLabelsrus(h3=290,v=vm,170,16);
      end else begin
        v = VATZoneButtonsLabelsrus(h3=290,v=vm+20,170,16);
      end;
      EditField(h2=-170,v=vm,150,"Регион",Normal,Region,false,RegionSClass);
      EditField(h2,v+=vs,150,"ИНН",Normal,VATNr,false,0);
      if (HasLocalization("HRV,SVN")) then begin          
      EditField(h2,v+=vs,50,"Юрид. документы",ViewOnly,VELegalForm,false,0);
      end;
      EditField(h2,v+=vs,150,"Телефон",Normal,Phone,false,0);
      EditField(h2,v+=vs,150,"Факс",Normal,Fax,false,0);
    end;
    SpecialMenu("Баланс",'=',0,"BalanceVIDsm");
    if (HasModNL) then begin
      SpecialMenu("Статус счета-фактуры",'r',2,"VIInfoVIDsm");
    end;
    if (HasModTS) then begin
      SpecialMenu("Добавить удержание",' ',25,"RetentionLineVIDsm");
    end;
    if (HasWithholdingTax) then begin
      SpecialMenu("Добавить удерживаемый налог",' ',26,"WithholdingLineVIDsm");
    end;
    if (HasEInvoicing) then begin
      SpecialMenu("Открыть E-Покупка Сч/ф pdf",' ',13,"OpenVEIVPDFDsm");
    end;
    if (HasIntegratedNL) then begin
      SpecialMenu("Открыть запись операции",'t',5,"OpenTRFromVI");
    end;
    if (HasAdvancedAccounting) then begin
      SpecialMenu("Открыть предварительную запись операции",' ',13,"OpenTRFromVI2");
    end;
    if ((HasRussianPrepayment or HasPrepayments) and HasModPL) then begin
      SpecialMenu("Связать с предоплатой",' ',6,"ConnectToPrepayVIDsm");
    end;
    if (HasModIN and HasAdvancedAccounting) then begin
      if (StandardHansa==false) then begin
        SpecialMenu("Не сверенные счета клиентам",' ',11,"PUNotReconVIDsm");         
      end;
      SpecialMenu("Поиск товара",'f',1,"ItemSearchDsm");         
    end;
    if (HasTaxMatrix) then begin
      SpecialMenu("Открыть налоговую матрицу",' ',25,"OpenVatMatrixVIDsm"); 
    end;
    if (HasModCL) then begin
      SpecialMenu("Печать кассового ордера",' ',3,"PrintCashInOutVIDsm");         
    end;
    if (HasApprovals) then begin
      SpecialMenu("Запросить утверждение",' ',6,"VISendforAcceptanceVIDsm"); 
      SpecialMenu("Отменить запрос утверждения",' ',2,"CancelApprovalRequestDsm"); 
			SpecialMenu("Создать список на удаление",' ',8,"CreateNoterToDelVIDsm");
			SpecialMenu("Сохранить строки согласно списку",' ',8,"SaveItemsFromVIDsm");
			SpecialMenu("Удалить лишние строки согласно списку",' ',8,"DeleteItemsFromVIDsm");
    end;
	if(CurrentUser=="IRKAKH")then begin
		SpecialMenu("Recovery This From History",' ',8,"VIHistBackDsm");
	end;
    SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);         
    if (HasModCRM) then begin
//      SpecialMenu("Activity",'c',4,"ActFromVIDsm");
    end;
      SpecialMenu("Создать актив",' ',7,"CreateAT2FromVI");
    if (HasModCL) then begin
      SpecialMenu("Создать расходный ордер",' ',8,"DoCLOutFromVID");
    end;
    SpecialMenu("Создать кредитный счет-фактуру",' ',15,"CreateCreditNoteVIDsm");
    if ((HasModNL and HasMultiCurrency) and (StandardHansa==false)) then begin
      SpecialMenu("Создать внутренний счет-фактуру",' ',12,"IntIVFromVIDsm");
    end;
    if (HasLocalization("UKR")) then begin
      SpecialMenu("Создать первое событие",' ',10,"FirstEventVIDsm");
    end;
    if (HasLocalization("HRV,POL,RUS,SLV,SVN,SRB,UKR")) and (HasIntegratedNL) then begin
      SpecialMenu("Коррекция НДС книги покупок",' ',9,"VATCorrectionVIsm");
    end;
	  SpecialMenu("Создать платеж поставщику",' ',1,"CreateOPFromVIDsm"); // by Ira
  end;
  EndWindow;
end;
	
	
	
	
	
window OPLClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  Integer rn;
  
  WindowBegin("Платежи поставщикам",OPLClass,CGmlist,-);
  SetWRect(20,80,800,307);
  Sizeable(-1,-1,0,0);
  SpawnClass(OPDClass);
  UseView(OPVc);
  FormName(PrintOPL);
  RecordList(4,17,-21,-39);
  RlColKey(4,1,      "Номер",SerNr,false,SerNr);
  RlColKey(84,79,    "Заказан",OrderedFlag,false,OrderedFlag);
  RlColKey(121,116,  "OK",DoneFlag,false,DoneFlag);
  if (HasModNL) then begin
    RlColKey(151,151,  "Дата",TransDate,false,TransDate);
  end else begin
    RlCol(151,151,  "Дата оплаты",PayDate,false);
  end;
  RlColKey(231,231,"Ссылка",PayNumber,false,PayNumber);
	RlCol(-400,-400,"Комментарий",BankName,false);
	
  if (IsEnterprise) then begin
  if (AcceptanceStatusColumnTest("OPVc")) then begin 
    CalculatedColumn(-170,-170,"Подтв.","OPLClassAcceptanceStatus",false); 
  end;
  end else begin
    RlCol(-230,-230,"Банк. счет",BankAcc,false);
  end;
  if (HasMultiCurrency) then begin
    RlColKey(-131,-131,"Сумма",CurPayVal,true,CurPayVal);
    RlCol(-30,-15,"Валюта",PayCurCode,true);
  end else begin
    RlColKey(-100,-100,"Сумма",CurPayVal,true,CurPayVal);
  end;
  RlCol(-1,-1,"",Invalid,true);
  SearchField("Поиск");
  if (GuiType==kGuiMetro) then begin
    RowMenuBegin("");
    RowMenuItem(0,"Заказ",'B','B',4312,"OrderOPLsm");  
    RowMenuItem(0,"OK",'G','G',4312,"OKOPLsm");
    if (IsEnterprise and HasLocalization("EST,LVA")) then begin         
      RowMenuItem(0,"Статус эл. платежа",' ',' ',4300,"EPaymentStatusOPLsm");         
    end;
    EndRowMenu;
    SpecMenuGroup("",kSpecMenuGroupTypeButtonsInBottomBarRight,0);  
    if (IsEnterprise) then begin
      SpecialMenuWithIcon("Рекомендации по оплате",' ',4313,1,"OPSuggOPLsm");  
//    SpecMenuItem("Create Withholding Rows",' ',3);//no code
//  SpecMenuItem("Payment Transfer",' ',4); no code
    end;
    if (HasModCheck) then begin
      SpecialMenuWithIcon("Выписать чеки",' ',4313,2,"ChequeRunOPLsm");  
    end;
  end else begin
    SpecialMenu("Заказать",'B',0,"OrderOPLsm");
    SpecialMenu("OK",'G',1,"OKOPLsm");
//    SpecMenuItem("Create Withholding Rows",' ',3);//no code
//  SpecMenuItem("Payment Transfer",' ',4); no code
    if (IsEnterprise and HasLocalization("EST,LVA")) then begin  
      SpecialMenu("Статус электронных платежей",' ',5,"EPaymentStatusOPLsm");
    end;
    SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0); //!!TRANSLATE
    if (IsEnterprise or (IsBooks and IsStandardProduct==false)) then begin
      SpecialMenu("Payments Suggestion",' ',2,"OPSuggOPLsm"); //!!TRANSLATE
    end;
    if (HasModCheck) then begin
     SpecialMenu("Выписать чеки",' ',6,"ChequeRunOPLsm");
    end;
  end;
  EndWindow;
end;

	
	
	
	
	
	
	
	
window IVDClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,hm,hs,t,v,v2,v3,vm,vs;
  string 255 label,tstr;// Edit ************************** Tuesday, 4 December 2012 10:28:40
  Boolean CurFIFOFlip;
  WindowBegin("Счет-фактура клиенту",IVDClass,CGview,-);
  Sizeable(-1,-1,0,0);
  UseView(IVVc);
if (HasTouchScreenLook==false) then begin
  ActiveFieldOnNew("CustCode");  
  SetWRect(20,80,750,560);
  CommunicateButton;
  CurFIFOFlip = false; //Edit***************************Sasha2,11:03 23.05.2016
  Tile(0,74,false,"",CustCode);
  EditField(75,vm=(v=6),95,"Номер",Normal,SerNr,false,TSerSClass);
  EditField(75,v+=20,95,"Клиент",Normal,CustCode,false,CUSClass);
  EnterSkip(PayDeal);
  EditField(h=255,v=vm,-40,"Наим.",Normal,Addr0,false,0);
  EditField(h,vm=(v+=20),135,"Оф.номер",Normal,OfficialSerNr,false,LegalInvNrSClass);
  CheckBox(h4=-100,v,0,"OK",OKFlag);
  TileButton(1,"Сроки");
  TileButton(2,"Товары");
  TileButton(3,"Валюта");
  TileButton(4,"Условия отгр.");
  TileButton(5,"Идентификаторы");
  TileButton(6,"Прайс-лист");
  TileButton(7,"Адрес сч/ф");
  TileButton(8,"Адрес дост.");
  Tile(1,110,false,"1",InvDate);
  vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;
  EditField(h1,vm=(v=6),82,"Дата с/ф",Normal,InvDate,false,PasteCurDate);
  EditField(h1,v+=vs,25,"Условия оплаты",Normal,PayDeal,false,PDSClass);//PDMSClass);
  EditField(h1,v+=vs,82,"Дата оплаты",Normal,PayDate,false,PasteCurDate);
  EditField(h1,v+=vs,82,"Дата операции",Normal,TransDate,false,PasteCurDate);
  EditField(h2,v=vm,135,"Ответственный",Normal,OurContact,false,0);
  EditField(h2,v+=vs,135,"Внимание",Normal,ClientContact,false,ContactSClass);
  EditField(h2,v+=vs,135,"Объекты",Normal,Objects,false,ObjSClass);
  EditField(h2,v+=vs,135,"Рекомендатель",Normal,RefStr,false,0);
  EditField(h2,v+=vs,135,"№ счета клиенту",Normal,CustOrdNr,false,0);
	EditField(h3,v,80,"Скид. ваучер",Normal,VaucherCode,false,0);
  EditField(h3,v=vm,80,"Продавец",Normal,SalesMan,false,SalesmanSClass);
  EditField(h3,v+=vs,80,"Лок. машина",Normal,MachineName,false,LocalMachineSClass);// Edit ************************** Monday, 15 April 2013 12:00:16
	if (UserCanAction("ViewMoneyInf",true))then begin EditField(h3,v+=vs,80,"Сдача",Normal,RetValue,false,0); end else begin v=v+vs; end;
  
  if(left(currentuser,2)=="SA")then begin
		EditField(h3,v+=vs,80,"InvType",Normal,InvType,false,0);// Edit ************************** Monday, 15 April 2013 12:00:16
  end;
  
  //EditField(h3,v+=vs,-20,"Комментарий",Normal,InvComment,false,0);
  /*EditField(h3,v+=vs,80,"Лок. машина",Normal,MachineName,false,LocalMachineSClass);
  EditField(h3,v+=vs,80,"Проект",Normal,PRCode,false,0);
  CheckBox(h4,v=6,0,"Спорные",DisputedFlag);*/
  EnterSkip(Math);
  Tile(2,220,true,"2",Math);
  //  CheckBox(20,-20,0,"OK",OKFlag);
  if(currentcompany==28)then begin EditField(55,-75,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); end else begin EditField(55,-41,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); end;
	/*EditField(h1,-38,100,"Received By",Normal,ReceivedBy,false,UserSClass);
	EditField(h2,-38,100,"Checked By",Normal,CheckedBy,false,UserSClass);
	EditField(h3,-38,100,"Returned By",Normal,ReturnedBy,false,UserSClass);
	EditField(h1,-18,100,"Confirmed By",Normal,ConfirmedBy,false,UserSClass);
	EditField(h3,-18,100,"Approved By",Normal,ApprovedBy,false,UserSClass);*/
  if (UserCanAction("ViewCostPrice",true)) then begin
    //EditField(160,-41,70,"GP %",Normal,GPProc,true,0);
   if (UserCanAction("ViewMoneyInf",true))then begin EditField(100,-15,70,"Итого прибыль",ViewOnly,TotGP,true,0); end;
  end;
	if(currentcompany!=28)then begin
		if (left(CurrentUser,2) == "SA") then begin
			if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(230,-41,70,"Налог2",Normal,TAX2Sum,true,0);
			EditField(230,-21,70,"Вн. нал.",Normal,TAX1Sum,true,0);
			EditField(380,-41,95,"НДС",Normal ,Sum3,true,0);
			EditField(380,-21,95,"База",Normal,BaseSum4,true,0);
			EditField(-150,-41,95,"Пром. итог",Normal ,Sum1,true,0);
			EditField(-150,-21,95,"Итого",Normal ,Sum4,true,0);
			end;
		end else begin
			if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(230,-41,70,"Налог2",ViewOnly,TAX2Sum,true,0);
			EditField(230,-21,70,"Вн. нал.",ViewOnly,TAX1Sum,true,0);
			EditField(380,-41,95,"НДС",ViewOnly ,Sum3,true,0);
			EditField(380,-21,95,"База",ViewOnly,BaseSum4,true,0);
			EditField(-150,-41,95,"Пром. итог",ViewOnly ,Sum1,true,0);
			EditField(-150,-21,95,"Итого",ViewOnly ,Sum4,true,0);
			end;
		end;
	end else begin
		if (UserCanAction("ViewMoneyInf",true))then begin
		EditField(230,-31,70,"Налог2",ViewOnly,TAX2Sum,true,0);
		EditField(230,-15,70,"Вн. нал.",ViewOnly,TAX1Sum,true,0);
		EditField(380,-31,95,"НДС",ViewOnly ,Sum3,true,0);
		EditField(380,-15,95,"База",ViewOnly,BaseSum4,true,0);
		EditField(-150,-31,95,"Пром. итог",ViewOnly ,Sum1,true,0);
		EditField(-150,-15,95,"Итого",ViewOnly ,Sum4,true,0);
		end;
		EditField(200,-71,100,"Received By",Normal,ReceivedBy,false,UserSClass);
		EditField(375,-71,100,"Checked By",Normal,CheckedBy,false,UserSClass);
		EditField(-150,-71,100,"Returned By",Normal,ReturnedBy,false,UserSClass);
		EditField(200,-51,100,"Confirmed By",Normal,ConfirmedBy,false,UserSClass);
		EditField(-150,-51,100,"Approved By",Normal,ApprovedBy,false,UserSClass);
	end;
  v = 24;
	if(currentcompany==28)then begin MatrixBegin(4,v,-50,-85,-,1000); end else begin MatrixBegin(4,v,-50,-55,-,1000); end;
  MatTypedRow(stp);
  Flip(0);
  MatCol(t=kInvoiceRowTypeNormal,32,"Товар",0,ArtCode,false,INSClass);
  //  MatCol(t,94,"Var",0,VARList,true,VARSClass);
  //  MatCol(t,144,"Qty",0,Quant,true,0);
  if (HasVarieties) then begin
  MatCol(t,94,"Кол-во",0,Quant,true,MATVARINSClass);
  end else begin
    MatCol(t,94,"Кол-во",0,Quant,true,0); 
  end;
  EnterSkip(ArtCode);
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,32,"Товар",0,ArtCode,false,INSClass);
  if (HasVarieties) then begin
  MatCol(t,94,"Кол-во",0,Quant,true,MATVARINSClass);
  end else begin
    MatCol(t,94,"Кол-во",0,Quant,true,0); 
  end;
  EnterSkip(ArtCode);
  MatText(t=kInvoiceRowTypeCredit,32,"Кредитовать сч/ф",true);
  MatCol(t,208,"",0,OrdRow,false,ARSClass);
  MatCol(t,-216,"",0,Spec,false,0);//MatText(t,-216,"",true);
  MatText(t=kInvoiceRowTypeInterest,32,"Пеня",true);
  MatCol(t,98,"",0,ArtCode,false,0);
  MatCol(t,153,"",0,Quant,true,0);
  MatCol(t,188,"",0,Spec,false,0);
  MatText(t=kInvoiceRowTypeDownpayment,32,"Авансовый платеж",true);
  MatColTL(t,122,"",0,-1,ViewOnly,0,ArtCode,true,0); 
  MatColTL(t,188,"",0,-1,ViewOnly,0,Quant,true,0);
  MatCol(t,238,"",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true)) then begin 
	MatColTL(t,-170,"",0,-1,Normal,0,Sum,true,0); //?? TL?
  if (UseTaxTemplatesforTaxCalc) then begin
    MatCol(t,-100,"",0,SalesAcc,false,AccSClass);
    MatCol(t,-54,"",0,TaxTemplateCode,false,TaxTemplateSClass);
  end else begin
    MatCol(t,-70,"",0,SalesAcc,false,AccSClass);
    MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);
  end;
	end;
  MatText(t=kInvoiceRowTypePrepayment,32,"Номер предоплаты",true);
  //MatCol(t,170,"",0,CUPNr,true,ARPaySClass);// Edit ************************** Tuesday, 26 September 2017 18:10:03
 MatCol(t,170,"",0,CUPNr,true,ARPay2SClass);// Edit ************************** Tuesday, 26 September 2017 18:10:03  ORIG 8.4
	if (UserCanAction("ViewMoneyInf",true))then begin 
	MatCol(t,-300,"",0,BasePrice,false,0); 
  MatCol(t,-170,"",0,Price,true,0);// Price holds the VAT sum, Recipe holds the date of prepaym. 
  MatCol(t,-100,"",0,Sum,true,0); 
	end; 
  MatText(t=kInvoiceRowTypeLoan,32,"Займ",true);
  MatCol(t,98,"",0,CuAccCode,true,CuAccSClass);
  MatCol(t,-350,"",0,SalesAcc,true,AccSClass);
  MatCol(t,-230,"",0,Objects,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-110,"",0,Sum,true,0); end;
  MatCol(t,-30,"",0,VATCode,false,VATCodeSClass);
  MatText(t=kInvoiceRowTypeLoanInterest,32,"% займа",true);
  MatCol(t,98,"",0,CuAccCode,true,CuAccSClass);
  MatCol(t,-350,"",0,SalesAcc,true,AccSClass);
  MatCol(t,-230,"",0,Objects,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-110,"",0,Sum,true,0); end;
  MatCol(t,-30,"",0,VATCode,false,VATCodeSClass);
  MatText(t=kInvoiceRowTypeVoid,28,"Отменить",false);
  MatColTL(t,65,"Подпись",0,-1,ViewOnly,0,VoidedSign,false,0);
  MatCol(t,100,"Товар",0,ArtCode,false,INSClass);
  if (HasVarieties) then begin
  MatCol(t,150,"К-во",0,Quant,true,MATVARINSClass);
  end else begin
    MatCol(t,150,"К-во",0,Quant,true,0); 
  end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,190,"Цена",0,Price,true,0); end;
  MatCol(t,250,"Описание",0,Spec,false,0);
  MatCol(t,-195,"Сер. №",0,SerialNr,false,SerialNrSClass);
  if (UserCanAction("ViewMoneyInf",true))then begin 
	MatCol(t,-110,"%",0,vRebate,true,0);
  MatCol(t,-80,"Сумма",0,Sum,true,0);
  MatText(t=kInvoiceRowTypeSubtotal,32,"Итого",true);
  MatCol(t,100,"",0,Spec,false,0);
  MatColTL(t,-140,"Сумма",0,-1,ViewOnly,0,Sum,true,0);
	end;
  //  MatCol(t,-70,"Cost",0,Cost,true,0);
  MatText(t=kInvoiceRowTypeHidden,32,"Эта строка и все последующие не выводятся на печать",false);
  MatText(t=kInvoiceRowTypeCorrection,32,"K",true);
  MatCol(t,45,"Товар",0,ArtCode,false,INSClass);
  MatCol(t,91,"Кво",0,Quant,true,0); 
  MatText(t=kInvoiceRowTypeRetention,32,"Удержание",true);
  MatCol(t,100,"",0,Spec,false,0);
  MatColTL(t,-210,"SalesAcc",0,-1,0,0,SalesAcc,false,AccSClass);
  if (UserCanAction("ViewMoneyInf",true))then begin  MatColTL(t,-110,"Сумма",0,-1,0,0,Sum,true,0); end;
  MatCol(t,-30,"",0,VATCode,false,VATCodeSClass);
  MatText(t=kInvoiceRowTypeGiftVoucherSold,32,"ПС",true);
  MatCol(t,58,"",0,GCNr,false,GCSClass);
  MatCol(t,-416,"",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-84,"Сумма",0,Sum,true,0); end;
  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);  
  MatText(t=kInvoiceRowTypeGiftVoucherPayment,32,"ПСП",true);
  MatCol(t,58,"",0,GCNr,false,GCSSClass);
  MatCol(t,-316,"",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-84,"Сумма",0,Sum,true,0); end;
  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);  
  MatText(t=kInvoiceRowTypeCashPayment,32,"Налич.",true);
  if (UserCanAction("ViewMoneyInf",true))then begin  MatCol(t,94,"Сумма",0,Sum,true,0); end;
  MatCol(t,198,"Валюта",0,CurncyCode,true,CurncyCodeSClass); 
  MatCol(t,250,"Спец.",0,Spec,false,0); 
  MatCol(t,-140,"курс.",0,ToRateB1,false,0);//Edit-------------------Vitalii 13:21 02.03.2017
  MatText(t=kInvoiceRowTypeLoyaltyPointsPayment,32,"LOYPA",true);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,68,"Сумма",0,Sum,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,108,"Баллы",0,Points,true,0); end;
  MatCol(t,148,"Валюта",0,CurncyCode,true,CurncyCodeSClass);
  MatCol(t,-280,"Спец.",0,Spec,false,0);
  MatText(t=kInvoiceRowTypeLoyaltyPointsBonus,28,"LOYBO",true);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,68,"Баллы",0,Points,true,0); end;
  MatCol(t,141,"Спец.",0,Spec,false,0);
  MatText(t=kInvoiceRowTypeCreditCardPayment,32,"CC",true);
  MatCol(t,60,"",0,Objects,false,0);
  MatCol(t,100,"Сумма",0,Sum,true,0);
  MatCol(t,-280,"",0,PayMode,false,0);
  MatCol(t,-104,"",0,Spec,false,0);
  MatText(t=kInvoiceRowTypeHeader,32,"Заголовок",true);
  MatCol(t,100,"",0,Spec,false,0);
  MatText(t=kInvoiceRowType18,28,"Зарезерв.",true); // Don't use this number
  MatCol(t,100,"",0,Spec,false,0);
  MatText(t=kInvoiceRowType19,28,"Зарезерв.",true); // Don't use this number
  MatCol(t,100,"",0,Spec,false,0);
  MatText(t=kInvoiceRowTypePerceptionTax,32,"Налоговые сборы",true);
  MatCol(t,132,"",0,CuAccCode,false,0);
  MatCol(t,252,"",0,TAX2Prc,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,292,"",0,Sum,true,0); end;
  MatCol(t,372,"",0,SalesAcc,false,0);
  MatCol(t,452,"",0,Spec,false,0);
  MatText(t=kInvoiceRowTypeWithholdingTax,32,"Удерживаемый налог",true);
  MatCol(t,132,"",0,WHTax,false,WHTaxSClass);
  MatCol(t,172,"",0,SalesAcc,false,AccSClass);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,292,"",0,Sum,true,0); end;
  MatCol(t,392,"",0,Spec,false,0);
  MatText(t=kInvoiceRowTypeMultiBuyDiscount,32,"Кампания",true);
  MatCol(t,152,"",0,MBRCode,false,0);
  MatCol(t,192,"",0,ArtCode,false,INSClass);
  MatCol(t,-400,"",0,Spec,false,0);
  MatCol(t,-270,"",0,Quant,true,0);
  MatCol(t,-235,"",0,Price,true,0);
  MatCol(t,-135,"",0,vRebate,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-100,"",0,Sum,true,0); end;
  MatText(t=kInvoiceRowTypeDebtorsTransfer,32,"DBT TRSF",true);
  MatCol(t,94,"Ком.",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-235,"Счет дебеторов",0,SalesAcc,false,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-135,"Сумма",0,Sum,true,0); end;
  MatCol(t,-30,"НДС",0,VATCode,false,0);
 
  //t = 21 kInvoiceRowTypeChequePayment  
  Flip(1);
  //  MatCol(t=kInvoiceRowTypeNormal,194,"Description",0,Spec,false,0);
  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin  MatCol(t,-235,"Цена",0,Price,true,0); end;
  //  MatColTL(t,-235,"",0,M45Val,Normal,0,Price,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-135,"%",0,vRebate,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-100,"Сумма",0,Sum,true,0); end;
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-235,"Цена",0,Price,true,0); end;
  //  MatColTL(t,-235,"",0,M45Val,Normal,0,Price,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-135,"%",0,vRebate,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-100,"Сумма",0,Sum,true,0); end;
  MatCol(t=kInvoiceRowTypeInterest,-260,"",0,OrdRow,true,0);
  MatCol(t,-235,"",0,BasePrice,true,0);
  MatCol(t,-135,"",0,vRebate,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-100,"",0,Sum,true,0); end;
  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-235,"Цена",0,Price,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-135,"%",0,vRebate,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-100,"Сумма",0,Sum,true,0); end;
  Flip(2);
  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);
  MatCol(t,-360,"Счет",0,SalesAcc,false,AccSClass);
  MatCol(t,-310,"Буд.пер",0,PeriodCode,false,AutSimPerSClass);
  MatCol(t,-255,"Склад",0,Location,false,LocationSClass);
  MatCol(t,-180,"Место",0,PosCode,false,UsedPosSClass);
  if (UseTaxTemplatesforTaxCalc) then begin
    MatCol(t,-144,"Объекты",0,Objects,false,ObjSClass);
    MatCol(t,-70,"НДС",0,TaxTemplateCode,false,TaxTemplateSClass);
  end else begin
    MatCol(t,-124,"Объекты",0,Objects,false,ObjSClass);
    MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);
  end;
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);
  MatCol(t,-360,"Счет",0,SalesAcc,false,AccSClass);
  MatCol(t,-310,"Буд.пер",0,PeriodCode,false,AutSimPerSClass);
  MatCol(t,-255,"Склад",0,Location,false,LocationSClass);
  MatCol(t,-180,"Место",0,PosCode,false,UsedPosSClass);
  if (UseTaxTemplatesforTaxCalc) then begin
    MatCol(t,-144,"Объекты",0,Objects,false,ObjSClass);
    MatCol(t,-70,"НДС",0,TaxTemplateCode,false,TaxTemplateSClass);
  end else begin
    MatCol(t,-124,"Объекты",0,Objects,false,ObjSClass);
    MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);
  end;
  MatCol(t=kInvoiceRowTypeInterest,-70,"",0,SalesAcc,false,AccSClass);
  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);
  //  MatCol(t=kInvoiceRowTypePrepayment,-224,"",0,SalesAcc,false,AccSClass);
  //  MatCol(t,-24,"",0,VATCode,false,VATCodeSClass);
  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);
  MatCol(t,-250,"Счет",0,SalesAcc,false,AccSClass);
  MatCol(t,-170,"Буд.пер.",0,PeriodCode,false,AutSimPerSClass);
  MatCol(t,-104,"Объекты",0,Objects,false,ObjSClass);
  MatCol(t,-30,"НДС",0,VATCode,false,VATCodeSClass);
  Flip(3);
  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);
	if (UserCanAction("ViewMoneyInf",true)) then begin 
  if (UserCanAction("ViewCostPrice",true)) then begin
    MatCol(t,-380,"Цена",0,Price,true,0);
    MatCol(t,-315,"%",0,vRebate,true,0);
    MatCol(t,-280,"Ст.в осн.2",0,BasePriceB2,true,0);
    MatCol(t,-210,"Стоим-ть",0,BasePrice,true,0);
    MatCol(t,-140,"Прибыль",0,rowGP,true,0);
    MatCol(t,-70,"FIFO",0,FIFO,true,0);
  end else begin
    MatCol(t,-235,"Цена",0,Price,true,0);
    MatCol(t,-135,"%",0,vRebate,true,0);
    MatCol(t,-100,"Сумма",0,Sum,true,0);
  end;
	end;
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);
	if (UserCanAction("ViewMoneyInf",true))then begin 
  if (UserCanAction("ViewCostPrice",true)) then begin
    MatCol(t,-380,"Цена",0,Price,true,0);
    MatCol(t,-315,"%",0,vRebate,true,0);
    MatCol(t,-280,"Ст.в осн.",0,BasePriceB2,true,0);
    MatCol(t,-210,"Стоим-ть",0,BasePrice,true,0);
    MatCol(t,-140,"Прибыль",0,rowGP,true,0);
    MatCol(t,-70,"FIFO",0,FIFO,true,0);
  end else begin
    MatCol(t,-235,"Цена",0,Price,true,0);
    MatCol(t,-135,"%",0,vRebate,true,0);
    MatCol(t,-100,"Сумма",0,Sum,true,0);
  end;
	end;
  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);
	if (UserCanAction("ViewMoneyInf",true))then begin 
  if (UserCanAction("ViewCostPrice",true)) then begin
    MatCol(t,-315,"Цена",0,Price,true,0);
    MatCol(t,-245,"%",0,vRebate,true,0);
    MatCol(t,-210,"Стоим-ть",0,BasePrice,true,0);
    MatCol(t,-140,"Прибыль",0,rowGP,true,0);
    MatCol(t,-70,"FIFO",0,FIFO,true,0);
  end else begin
    MatCol(t,-235,"Цена",0,Price,true,0);
    MatCol(t,-135,"%",0,vRebate,true,0);
    MatCol(t,-100,"Сумма",0,Sum,true,0);
  end;
	end;
  Flip(4);
  MatCol(t=kInvoiceRowTypeNormal,144,"Описание",0,Spec,false,0);
  MatCol(t,-370,"Продавцы",0,Salesmen,false,UserSClass); 
  MatCol(t,-310,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
//  MatCol(t,-250,"Main Serial No.",0,MotherNr,true,0);
  MatCol(t,-230,"П.Фактор",0,PriceFactor,true,0); 
  MatCol(t,-180,"Структура",0,Recepy,false,RecSClass);
  if (UserCanAction("ViewCostPrice",true)) then begin
    if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-70,"FIFO",0,FIFORowVal,true,0); end;
  end else begin
  end;
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Описание",0,Spec,false,0);
  MatCol(t,-310,"Сер. №",0,SerialNr,false,SerialNrSClass);
  MatCol(t,-240,"Фактор",0,PriceFactor,true,0);
  MatCol(t,-180,"Структура",0,Recepy,true,0);
  if (UserCanAction("ViewCostPrice",true)) then begin
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-110,"FIFO",0,FIFORowVal,true,0); end;
  end;
  MatCol(t,-40,"Коэф.",0,Coefficient,true,0);
  MatCol(t=kInvoiceRowTypeCorrection,144,"Описание",0,Spec,false,0);
  MatCol(t,-310,"Сер. №",0,SerialNr,false,SerialNrSClass);
  MatCol(t,-240,"Фактор",0,PriceFactor,true,0);
  MatCol(t,-180,"Структура",0,Recepy,true,0);
  if (UserCanAction("ViewCostPrice",true)) then begin
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-110,"FIFO",0,FIFORowVal,true,0); end;
  end;
  MatCol(t,-80,"",0,MotherArtCode,false,0);
  MatCol(t,-40,"",0,RecipeQuant,false,0);
  //  MatCol(t,-40,"Коэф",0,Coefficient,true,0);
  Flip(5);
  MatCol(t=kInvoiceRowTypeNormal,144,"Наименование",0,Spec,false,0);
  MatCol(t,-315,"Ед-ца",0,UnitCode,false,UnitSClass);
  MatCol(t,-260,"К-во ед.",0,UnitFactQuant,true,0);
  MatCol(t,-200,"Шир.",0,UnitXval,true,0);
  MatCol(t,-160,"Выс.",0,UnitYval,true,0);
  MatCol(t,-120,"Глуб.",0,UnitZval,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-80,"Цена ед-ц",0,UnitFactPrice,true,0); end;
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Наименование",0,Spec,false,0);
  MatCol(t,-315,"Ед-ца",0,UnitCode,false,UnitSClass);
  MatCol(t,-260,"К-во ед.",0,UnitFactQuant,true,0);
  MatCol(t,-200,"Шир.",0,UnitXval,true,0);
  MatCol(t,-160,"Выс.",0,UnitYval,true,0);
  MatCol(t,-120,"Глуб.",0,UnitZval,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-80,"Цена ед-ц",0,UnitFactPrice,true,0); end;
  MatCol(t=kInvoiceRowTypeCorrection,144,"Наименование",0,Spec,false,0);//New Row Type..
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-315,"Ед-ца",0,UnitCode,false,UnitSClass); end;
  MatCol(t,-260,"К-во ед.",0,UnitFactQuant,true,0);
  MatCol(t,-200,"Шир.",0,UnitXval,true,0);
  MatCol(t,-160,"Выс.",0,UnitYval,true,0);
  MatCol(t,-120,"Глуб.",0,UnitZval,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-80,"Цена ед-ц",0,UnitFactPrice,true,0); end;
  Flip(6);
  MatCol(t=kInvoiceRowTypeNormal,144,"Наименование",0,Spec,false,0);
  MatCol(t,-390,"Код товара клиента",0,CustArtCode,false,CUINSClass); 
  MatCol(t,-300,"Коэфф.",0,Coefficient,true,0); 
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-260,"Цен. фактор",0,PriceFactor,true,0); end;
  MatCol(t,-210,"История серв. контр.",0,CUServiceHistNr,false,0); 
  MatCol(t,-130,"Кред. строка",0,CreditedRow,false,0); 
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-70,"Налог на окр. ср.",0,RepaExVAT,true,0); end;
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,144,"Наименование",0,Spec,false,0);
  MatCol(t,-390,"Код товара клиента",0,CustArtCode,false,CUINSClass); 
  MatCol(t,-300,"Коэфф.",0,Coefficient,true,0); 
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-260,"Цен. фактор",0,PriceFactor,true,0); end;
  MatCol(t,-210,"История серв. контр.",0,CUServiceHistNr,false,0); 
  MatCol(t,-130,"Кред. строка",0,CreditedRow,false,0); 
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-70,"Налог на окр. ср.",0,RepaExVAT,true,0); end;
  MatCol(t=kInvoiceRowTypeCorrection,144,"Наименование",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(t,-80,"Нал.на окр.среду",0,RepaExVAT,true,0); end;
  if (UserCanAction("ViewCostPrice",true)) then begin //Edit***************************Sasha2,11:03 23.05.2016 {
    Flip(7);
    CurFIFOFlip = true;
    MatCol(t=kInvoiceRowTypeNormal,144,"Наименование",0,Spec,false,0);
    MatColTL(t,-380,"Из сч/ф",0,-1,ViewOnly,0,IVForRetNr,true,0); 
    MatColTL(t,-330,"Из комп.",0,-1,ViewOnly,0,RetFromComp,true,0); 
   if (UserCanAction("ViewMoneyInf",true))then begin 
		MatCol(t,-280,"FIFO вал.за ед.",0,FIFOCur,true,0);
    MatCol(t,-190,"FIFO вал.по стр.",0,FIFORowValCur,true,0);
    MatCol(t,-100,"FIFO вал.валюта",0,CurncyCodeCur,true,0);
	 end;
  end; //Edit***************************Sasha2,11:03 23.05.2016 }
  if(currentuser=="SA")then begin
		Flip(8);
  	MatCol(t,-100,"Скидка ДР",0,UsedBirthRebate,true,0);
  end;
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 22;
  v = 18; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,3,"C");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,4,"D");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,5,"E");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,6,"F");
  if (CurFIFOFlip) then begin
    v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,7,"G"); //Edit***************************Sasha2,11:03 23.05.2016
  end;
  if(currentuser=="SA")then begin
  	v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,8,"H");
  end;
  Tile(3,70,false,"3",FrRate);
  vs = 20;
  EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
  EditField(h2,v,50,"Курс",Normal,FrRate,true,0);
  EditField(h2+65,v,50,":",Normal,ToRateB1,true,0);
  StaticText(h2+125,v+12,"Базовая ваолюта 1",false);
  EditField(h1,v+=vs,50,"Базовая ваолюта 1",Normal,BaseRate1,true,0);
  EditField(h2+65,v,50,":",Normal,ToRateB2,true,0);
  StaticText(h2+125,v+12,"Базовая ваолюта 2",false);
  EditField(h1,v+=vs,50,"Базовая ваолюта 2",Normal,BaseRate2,true,0);
  Tile(4,110,false,"4",ShipDeal);
  vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;
  EditField(h1,v=6,80,"Условия отгрузки",Normal,ShipDeal,false,ShipDealSClass);
  EditField(h1,v+=vs,80,"Метод доставки",Normal,ShipMode,false,DMSClass);
  EditField(h1,v+=vs,80,"Маршрут",Normal,Sorting,false,DelRouteSClass);
  EditField(h1,v+=vs,80,"Склад",Normal,Location,false,LocationSClass);
  EditField(h1,v+=vs,80,"Подразделение",ViewOnly,BranchID,false,AllCUSClass);
  EditField(h2,v=vm,80,"Итого кол-во",ViewOnly,TotQty,true,0);
  EditField(h2,v+=vs,80,"Итого вес",ViewOnly,TotWeight,true,0);
  EditField(h2,v+=vs,80,"Итого объем",ViewOnly,TotVolume,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h2,v+=vs,80,"Фрахт",Normal,FrPrice,true,0); end else begin v=v+vs; end;
  EditField(h2,v+=vs,80,"Трансп. комп.",Normal,FreightCode,false,FreightCompanySClass);
  CheckBox(h3,v=vm,0,"Обновить склад",UpdStockFlag);
	CheckBox(h3,v+=vs,0,"TaxFree",TaxFree);
	if (UserCanAction("CredCheckIgnore",false))then begin CheckBox(h3,v+=vs,0,"Выкл. проверку на возвр.",RetChekf); end;
  EditField(h3,v+=3*vs,80,"НДС фрахта",Normal,FrVATCode,true,VATCodeSClass);
  Tile(5,170,false,"5",OrderNr);
	if (CurrentUser=="SA3") then begin
		EditField(h1,v=vm,80,"Номер счета",Normal,OrderNr,false,0);
	end else begin
		EditField(h1,v=vm,80,"Номер счета",ViewOnly,OrderNr,false,0);
	end;
  EditField(h1,v+=vs,80,"Зак.на обсл.",ViewOnly,SVONr,false,0);
  EditField(h1,v+=vs,80,"№ кред.договор.",ViewOnly ,CredManNr,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h1,v+=vs,80,"Стат. сумма",Normal,StatVal,true,0); end else begin v=v+vs; end;
  EditField(h1,v+=vs,80,"Дата оказания усл.",Normal,ServiceDelDate,false,PasteCurDate);
  EditField(h1,v+=vs,80,"Время операции",Normal,TransTime,false,SetSClass);
  EditField(h1,v+=vs,80,"InvalidDate",Normal,InvalidDate,false,0);// Edit ************************** Tuesday, 26 May 2015 11:33:08
  EditField(h1,v+=vs,80,"InvalidLocOKNr",Normal,InvalidLocOKNr,false,0);// Edit ************************** Tuesday, 26 May 2015 11:33:07
  //  ColourPushButton(-100,v,-20,v+60,"TestIVDClassCardData","Test" & chr(10) & "CardData",4);
  //  SoftEditField(h3+50,v,100,"Control Code"  ,ViewOnly ,"TaxAuthIDCC",false,0,M4Str,60);
  EditField(h2,v=vm,135,"Налогов. орган",ViewOnly ,TaxAuthID,false,0);
  EditField(h2,v+=vs,135,"Контрольн. код",ViewOnly ,TaxAuthIDCC,false,0);
  EditField(h2,v+=vs,135,"CAE/CAEA",Normal,CAE,false,0);
  EditField(h2,v+=vs,135,"Срок дейст. CAE",Normal,CAEExpiry,false,0);
  EditField(h2,v+=vs,70,"CAEA действ. с",ViewOnly,CAEAStartDate,false,0);
  EditField(h2+173,v,70,"CAEA действ. до",ViewOnly,CAEAExpiryDate,false,0); //##cc    
  EditField(h2,v+=vs,70,"CAEA действ. с",ViewOnly,CAEAStartDate,false,0);
  EditField(h2+173,v,70,"CAEA действ. до",ViewOnly,CAEAExpiryDate,false,0);
  EditField(h2+173,v+vs,-20,"TaxTransactionCode",Normal,TaxTransactionCode,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 02, 24 11 2020 y. at 10:52:22 AM
  EditField(h2+173,v+2*vs,-20,"CAEA действ. до",Normal,TaxParentDocument,false,0); //##cc // Edit ************************** BPI Ukraine - KramarAlexandr - 02, 24 11 2020 y. at 10:52:24 AM

  
  EditField(h2,v+=vs,70,"Статус",Normal,Status,false,SetSClass);
  EditField(h2,v+=vs,70,"Банк",Normal,BankCode,false,BankSClass);
  //  EditField(h2,v+=vs,135,"E-Inv Exp. Date",ViewOnly,EInvExpDate,false,0);//Tx server
  //  EditField(h2,v+=vs,135,"E-Inv Exp. Qty",ViewOnly,EInvExpQty,false,0);
  h3 = 545; //##ii;
  CheckBox(h3,v=vm,0,"Без напоминания",NoRemndrFlag);
  CheckBox(h3,v+=16,0,"Без пени",NoInterestFlag);
  CheckBox(h3,v+=16,0,"Без сборов",NoColectionFlag);
  CheckBox(h3,v+=16,0,"Информация о клиенте",ARonTR);
  CheckBox(h3,v+=16,0,"Не посылать как эл. сч/ф",NoEInvoice);
  CheckBox(h3,v+=16,0,"Фискальная сч/ф",FiscalFlag);
  CheckBox(h3,v+=16,0,"Счет себе",SelfBilling);
  //  CheckBox(h3,v+=16,0,"E-Invoice Exported",EInvExpFlag);
  Tile(6,150,false,"6",PriceList); vs = 20;
  EditField(h1,v=vm,80,"Прайс-лист",Normal,PriceList,false,PLDefSClass);
  if(currentuser=="SA")then begin
		EditField(h1,v+=vs,80,"Таблица сидок",Normal,RebCode,false,0); 
  end else begin
		EditField(h1,v+=vs,80,"Таблица сидок",ViewOnly,RebCode,false,0); 
  end;
  
  //  EditField(h1,v+=vs,80,"Disc. %",ViewOnly,DiscPerc,false,0);
  //  EditField(h1,v+=vs,80,"Disc. Amount",ViewOnly,DiscSum,false,0);
  EditField(h1,v+=vs,80,"Первонач. клиент",ViewOnly,OrgCust,false,0);
  EditField(h1,v+=vs,80,"Кредитная карта",Normal,CreditCard,false,CreditCardSClass);
  EditField(h1,v+=vs,80,"Авторизация",Normal,AuthorizationCode,false,0);
  EditField(h1,v+=vs,80,"Счет дебиторов",Normal,ARAcc,false,AccSClass);
  EditField(h1,v+=2*vs,-20,"Комментарий",Normal,InvComment,false,0);
  if(left(currentuser,2)!="SA")then begin
		EditField(h1,v+=vs,200,"CRMID",ViewOnly,CRMid,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - Tuesday, 16 April 2019 09:58:28
  end else begin
  	EditField(h1,v+=vs,200,"CRMID",Normal,CRMid,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - Tuesday, 16 April 2019 09:58:28
  end;
  EditField(h2,v=vm,80,"Группа продаж",Normal,SalesGroup,true,0);
  EditField(h2,v+=vs,80,"Язык",Normal,LangCode,false,LangSClass);
	if (UserCanAction("ViewMoneyInf",true))then begin  
	EditField(h2,v+=vs,80,"Комиссия",Normal,Commision,true,0);
  EditField(h2,v+=vs,80,"Итого вкл. ком.",ViewOnly,SumIncCom,true,0);
  //EditField(h2,v+=vs,80,"Пеня",Normal,IntCode,true,IntSClass);// Edit ************************** BPI Ukraine - KramarAlexandr - 05, 04 01 2019 y. at 5:43:40 PM
	EditField(h2,v+=vs,80,"CalcFinRef",ViewOnly,CalcFinRef,true,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 05, 04 01 2019 y. at 5:44:09 PM
	end else begin
		v=v+(3*vs);
	end;
  EditField(h2,v+=vs,80,"Org. No.",Normal,CredInv,false,0);
  EditField(h2,v+=vs,80,"UsedBirthRebateH",Normal,UsedBirthRebateH,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - Friday, 18 May 2018 18:35:40
  EditField(h3,v=vm,80,"Уровень напоминания",Normal,LastRemndr,false,0);
  EditField(h3,v+=vs,80,"Дата последнего напомин.",Normal,LastRemDate,false,PasteCurDate);
  EditField(h3,v+=vs,80,"Накопительная карта",Normal,LoyaltyCardNr,false,LoyaltyCardSClass);
  EditField(h3,v+=vs,80,"Связанная накопительная карта",Normal,LinkLoyaltyCardNr,false,LoyaltyCardSClass);//Edit-------------------Vitalii 11:39 01.06.2017
  EnterSkip(Math);
	if (UserCanAction("ViewMoneyInf",true))then begin  
  if(left(currentuser,2)=="SA")then begin
		EditField(h3,v+=vs,80,"Программы лояльности",Normal,LCMLevel,false,LCMemberLevelSClass);
		EditField(h3,v+=vs,80,"Накопительные баллы",Normal,Points,true,0);
  end else begin
  	EditField(h3,v+=vs,80,"Программы лояльности",ViewOnly,LCMLevel,false,LCMemberLevelSClass);
		EditField(h3,v+=vs,80,"Накопительные баллы",ViewOnly,Points,true,0);
  end;
	end else begin
		v=v+(2*vs);
	end;
  EditField(h3,v+=vs,80,"№ TREO",Normal,TREONr,false,0);
  Tile(7,250,false,"7",Addr1); vs = 20;
  label = UserDefined("CUVc","InvAddr0");
  if (blank(label)) then begin label = "Сч/ф"; end;
  EditField(h=110,v=6,-20,label,Normal,Addr1,false,0);
  label = UserDefined("CUVc","InvAddr1");
  if (blank(label)) then begin label = "адрес"; end;
  EditField(h,v+=vs, -20,label,Normal,Addr2,false,0);
  label = UserDefined("CUVc","InvAddr2");
  EditField(h,v+=vs, -20,label,Normal,Addr3,false,0);
  label = UserDefined("CUVc","InvAddr3");
  EditField(h,v+=vs, -20,label,Normal,InvAddr3,false,0);
  label = UserDefined("CUVc","InvAddr4");
  EditField(h,v+=vs, -20,label,Normal,InvAddr4,false,0);
  EditField(h,vm=(v+=vs),80,"Страна",Normal,InvCountry,false,CountrySClass);
  ButtonFrame(h3=h+4,v=(vm+=40),123,6,"Статус утверждения");
  RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);  
   v = VATZoneButtonsLabelsRUS(h3=290,v=vm,140,16);
  EditField(h2=-170,v=vm,150,"Регион",Normal,Region,false,RegionSClass); 
  EditField(h2,v+=vs,150,"ИНН",Normal,VATNr,false,0);
  EditField(h2,v+=vs,150,"Телефон",Normal,Phone,false,0);
  EditField(h2,v+=vs,150,"Факс",Normal,Fax,false,0);
  Tile(8,170,false,"8",ShipAddr0); vs = 20;
  EditField(h1,v=6,80,"Код адреса",Normal,DelAddrCode,false,DelAddr3SClass);
  EditField(h1,v+=vs,-20,"Отгрузка",Normal,ShipAddr0,false,0);
  EditField(h1,v+=vs,-20,"Адрес",Normal,ShipAddr1,false,0);
  EditField(h1,v+=vs,-20,"",Normal,ShipAddr2,false,0);
  EditField(h1,v+=vs,-20,"",Normal,ShipAddr3,false,0);
  EditField(h1,v+=vs,-20,"",Normal,DelAddr3,false,0);
  EditField(h1,v+=vs,-20,"",Normal,DelAddr4,false,0);
  EditField(h1,v+=vs,80,"Страна",Normal,DelCountry,false,CountrySClass);
  EnterSkip(InvDate);
	SpecialMenu("Создать платеж клиента",' ',1,"CreateIPFromIVDsm");//Edit-------------------Vitalii 14:11 18.04.201
  SpecialMenu("Статус товара",'I',0,"ItemStatusIVDsm");
  SpecialMenu("Создать резерв",'',0,"CreateORFormIV");// Edit ************************** BPI Ukraine - KramarAlexandr - 05, 25 12 2020 y. at 11:00:21 AM
  SpecialMenu("Поиск товара",'f',1,"ItemSearchDsm");
  SpecialMenu("Статус счета-фактуры",'r',2,"IVInfoIVDsm");
  SpecialMenu("Цены предыдущей продажи",' ',15,"IVLastSPrsm");
  //SpecialMenu("Добавить строку заголовка",' ',12,"HeaderLineIVDsm");
  //SpecialMenu("Добавить скрытую строку",' ',12,"HiddenLineIVDsm");
  //SpecialMenu("Добавить налог на окружающую среду",' ',19,"RepaIVsm");
  //SpecialMenu("Добавить удержание",' ',25,"RetentionLineIVDsm"); 
  //SpecialMenu("Добавить итого",' ',12,"SubTotalLineIVDsm");
  //SpecialMenu("Отправить для утверждения",' ',6,"IVSendforAcceptanceIVDsm");
  //SpecialMenu("Отменить запрос на  утверждение",' ',2,"CancelApprovalRequestDsm"); //!!PRODTRANSLATE
  if (GuiType==kGuiiPhone) then begin
    SpecialMenu("Sign",' ',10,"SignIVDsm"); //!!TRANSLATE
  end;
  //SpecialMenu("Пересчитать в осн. вал.1",' ',14,"SwitchToBase1IVDsm");
  SpecialMenu("Связать с предоплатой",' ',4,"ConnectToPrepayIVDsm");
  SpecialMenu("Пересчитать скидку",' ',11,"RecalcDiscountIVDsm");
  //SpecialMenu("Пересчитать вес и объем",' ',10,"RecalcWeightIVDsm");
  SpecialMenu("Обновить товары валютного прейскуранта",' ',5,"UpdatePricesIVDsm");
  SpecialMenu("Распечатать кассовый ордер",' ',7,"PrintCashInOutIVDsm");
  //SpecialMenu("Распечатать проформу счета-фактуры",' ',3,"PrintProformaIVDsm");
  SpecialMenu("Отправить на фискальный принтер",' ',19,"PrintToFiscPrntIVDsm");
  //SpecialMenu("Платёж кредитной картой",' ',22,"CCPayIVDsm");
  //SpecialMenu("Редактировать платежи",' ',24,"EditInstalmentIVDsm");
  //SpecialMenu("Отправить эл. сч/ф заново",' ',21,"ResendEIVDsm");
  SpecialMenu("Открыть запись операции",'t',8,"OpenTRFromIV");
  //SpecialMenu("Изменение скидки менеджером",' ',24,"MgrsDiscOverrideIVDsm");  
  //SpecialMenu("Открыть нал. матрицу",' ',25,"TestVatMatrixIVDsm"); 
  SpecialMenu("Добавить возврат товара",' ',0,"PasteRetItemIVDsm");
	SpecialMenu("Добавить товары акции 1+1",' ',0,"PasteOPOItemIVDsm");
  SpecialMenu("Скидка дня рождения",'',2,"GetBirthRebateDsm");
  SpecialMenu("Заменить кассира",'',2,"ReSelectSalesman");
	if(UserCanAction("UnOkIVSpec",true))then begin SpecialMenu("Разутвердить сч/ф",' ',0,"UnOKIVDsm"); end;
    	

   // SpecialMenu("Apple гар. статус проверка",'w',26,"WarrantyStatusIVDsm"); 
  if(currentuser=="SA")then begin
		SpecialMenu("Экспорт регистра",' ',0,"ExportRegIVDsm");
	end;
	SpecialMenu("Замена карты лояльности",' ',0,"ChangeLoyaltyCardDsm");
	GenerateCCPaymentMenus;// Edit ************************** BPI Ukraine - KramarAlexandr - Tuesday, 13 February 2018 09:50:42
	SpecialMenu("Дублировать из истории сч./ф.",' ',0,"RHistpasteItems");
	SpecialMenu("Отправить в налог",' ',0,"SendTax");  // Irkan 27.02.2020
	SpecialMenu("История налогов",' ',0,"HistoryTax");  // Irkan 21.09.2020
	SpecialMenu("Возврат товара (налог) - Ручной режим",' ',0,"ReturnTax");  // Irkan 14.09.2020
	SpecialMenu("Возврат товара (налог) - Автоматическией режим",' ',0,"ReturnAutoTax");  // Edit ************************** BPI Ukraine - KramarAlexandr - 02, 24 11 2020 y. at 10:34:06 AM
	SpecialMenu("Отменить товар (налог)",' ',0,"CancelTax");  // Irkan 21.09.2020
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);
  SpecialMenu("Создать приходный ордер",' ',1,"DoCLInFromIVD");
  SpecialMenu("Создать кредитовую счет-фактуру",' ',20,"CreateCreditNoteIVDsm");
  SpecialMenu("Создать кредитный договор",' ',25,"CreateCredManIVsm");
  SpecialMenu("Создать контракт",' ',13,"COFromIVDsm");
  SpecialMenu("Создать корректирующую счет-фактуру",' ',16,"CorrectionIVsm");
  SpecialMenu("Создать дебит ноту",' ',20,"CreateDebitNoteIVDsm");
  SpecialMenu("Создать счет-фактуру EDI",' ',9,"DoEDIInvFromIVD");
  SpecialMenu("Создать e-mail",'m',23,"CreateMailFromIVDsm");
  SpecialMenu("Создать взносы",' ',6,"CreateInstalmentsIVDsm");
  SpecialMenu("Создать коррекцию НДС книги продаж",' ',17,"VATCorrectionIVsm");
  
end else begin

  date td;
  integer acnt,wn;
  longint bm,lt,rt,tp,page;
  real h,h2,h3,h4,v;
  record IVVc IVr;
  record LocalMachineBlock LMb;
  record POSButtonsVc POSBr;
  string 255 bc1,bc2,compname,lmc,nr,sessdesc,sm;
  time tt;
  record CompaniesBlock CBb; //Edit***************************Sasha2,15:47 27.04.2017
  row CompaniesBlock CBrw; //Edit***************************Sasha2,15:47 27.04.2017
  string 10 hostIp;
  record UserVc Userr;
  
  Userr.Code = currentuser;
  readfirstmain(Userr,1,true);
  
  BlockLoad(CBb); //Edit***************************Sasha2,15:47 27.04.2017 {
  matrowget(CBb,0,CBrw);
  hostIp = CBrw.TCPIP;
  if (Blank(hostIp)) then begin
    hostIp = "127.0.0.1";
  end;

  BlockLoad(LMb);    
	wn = CurWindow;
	GetScreenSize(wn,tp,lt,bm,rt);
	switch (GuiType) begin
		case kGuiCocoa:      
			bm = bm - 80;
		case kGuiGDI:
			tp = tp + 30;
			bm = bm - 40;
			rt = rt - 55;
			lt = lt - 45;
		case kGuiWPF:
			tp = tp + 30;
			bm = bm - 40;
			rt = rt - 55;
			lt = lt - 45;
	end;
	
	page = StringToInt(GetWindowString(wn,"touchscreenwindowpage"));
	if (page<1) then begin
		page = 1;
	end;
	ReadPOSButtonsMy("IVDClass",LMb.POSButtonGroup,page,bc1,bc2,compname,POSBr,acnt);
	SetWRect(lt,tp,rt,bm); 
	BrowseButtons(false);
	Sizeable(-1,-1,0,0);
	BrowseButtons(false);
	DynamicWindow;
	UseView(IVVc);
	ActiveFieldOnNew("ivcashcommand");
	ToolBar;
//    PushButton(-340,5,-340 + 34,5+18,ToolPasteSpec,"v");
	EndToolBar;
	
	v = 20;
	h = -300; h2 = -150; h3 = -70; h4 = -10;
	
	wn = CurWindow;
	if (wn>0) then begin
		switch (GetWindowClass(wn)) begin
			case "IVDClass":
				GetWindowRecord(wn,IVr);
		end;
	end;
	td = IVr.TransDate;
	if (blankdate(td)) then begin td = CurrentDate; end;
	tt = IVr.TransTime;
	if (blanktime(tt)) then begin tt = CurrentTime; end;
	lmc = IVr.MachineName;
	if (blanktime(lmc)) then begin lmc = LMb.LocalMachineCode; end;
	sm = IVr.SalesMan;
	if (blanktime(sm)) then begin sm = CurrentUser; end;
	nr = "Invoice: ";
	if (IVr.SerNr>0) then begin
		nr = nr & IVr.SerNr;
	end;
			
	/*if (IsSessionOpen(IVr.MachineName,IVr.DrawerCode,CurrentDate,CurrentTime)) then begin// Edit ************************** Thursday, 14 November 2013 14:37:42
		sessdesc = "Сессия открыта"; 
	end else begin
		sessdesc = "*** Сессия закрыта ***";     
	end;*/// Edit ************************** Thursday, 14 November 2013 14:37:40
	sessdesc = "Скидка клиента: " & IVr.RebCode & "      Касса код: " & IVr.TaxTransactionCode & "      Касса Parent Doc: " & IVr.TaxParentDocument;
		
		
	DisplayRecordDetails_RUS(10,26,compname,td,tt,lmc,sm,nr,IVr.CustCode,IVr.Addr0,"","","","","",IVr.LoyaltyCardNr,LMb.ShowBaggerSupervisor,"","","",blankval,sessdesc,true,IVr.OfficialSerNr,"");
	
	if (bm<650) then begin
		SoftEditFieldTLX(360,6,h4,"",M4Str,ViewOnly,100,20,patM4black,"CustomerDisplayData_Line1",true,0);
		SoftEditFieldTLX(360,36,h4,"",M4Str,ViewOnly,100,30,patM4black,"CustomerDisplayData_Line2",true,0);
	end else begin
		SoftEditFieldTLX(360,6,h4,"",M4Str,ViewOnly,100,30,patM4black,"CustomerDisplayData_Line1",true,0);
		SoftEditFieldTLX(360,46,h4,"",M4Str,ViewOnly,100,50,patM4black,"CustomerDisplayData_Line2",true,0);
	end;
	
	
	
	//HalPushButton(480,350,680,680,"IVDClassUpdateWebBrowser","Показать картинку товара");
	SoftEditFieldTLX(20,380,650,"",M4Str,ViewOnly,100,10,patM4black,"CustomerDisplayData_Line3",false,0);
		if(WindowsMode==1)then begin
			if(true)then begin    		
				WebPage(20,400,700,-80,"http://" & hostIp & ":1071/indexlong?user=" & currentuser & curmachinename & CurrentCompany,"");
			end;
		end else begin
			WebPage(20,400,700,-80,"http://" & hostIp & ":1071/index?user=" & currentuser & curmachinename & CurrentCompany,"");
		end;   	//WebPage(20,400,700,-80,"$subset","");
	//WebPage(20,700,390,-80,"$HWStore","");
	switch (LMb.POSButtonsPosition) begin
		case kPOSButtonsPositionLeft:
			if(SetInSet("SKLAD",Userr.AccessGroup))then begin// Edit ************************** BPI Ukraine - KramarAlexandr - 05, 17 05 2019 y. at 12:06:18 PM
				SoftEditField(110,-22,200,"Товар/Команда"  ,Normal ,"ivcashcommand",false,0,M4Str,255); 
			end else begin
				SoftEditField(110,-22,200,"Товар/Команда"  ,Normal ,"ivcashcommand",false,INSClass,M4Str,255); 
			end;
			CheckBox(350,-22,0,"TaxFree",TaxFree);
		case kPOSButtonsPositionRight:
			CheckBox(-350,-22,0,"TaxFree",TaxFree);
			if(SetInSet("SKLAD",Userr.AccessGroup))then begin// Edit ************************** BPI Ukraine - KramarAlexandr - 05, 17 05 2019 y. at 12:06:21 PM
				SoftEditField(-260,-22,200,"Товар/Команда"  ,Normal ,"ivcashcommand",false,0,M4Str,255);
			end else begin
				SoftEditField(-260,-22,200,"Товар/Команда"  ,Normal ,"ivcashcommand",false,INSClass,M4Str,255);
			end;
	end;
	
	EditField(360,116,-10,"Комментарий",Normal,InvComment,false,0);
	
	SoftEditField(2000,-22,200,""  ,Normal ,"ivcashcommandlastitemsernrf",false,0,M4Str,255);        
	DrawPOSInterface_RUSMy(bc1,bc2,POSBr,acnt,"",100);
	BottomBar;
	SpecialMenu("Вставить товары из перемещения",'B',6,"PasteStoclMovToIVsm");
end;
//	SpecialMenu("Создать платеж клиента",' ',1,"CreateIPFromIVDsm");//Edit-------------------Vitalii 14:11 18.04.201
	SpecialMenu("Создать платеж клиента",' ',1,"CreateIPFromIVDsm");//Edit-------------------Vitalii 14:11 18.04.201
	SpecialMenu("Создать резерв",'',0,"CreateORFormIV");// Edit ************************** BPI Ukraine - KramarAlexandr - 05, 25 12 2020 y. at 11:00:21 AM
	SpecialMenu("Экспорт счет-фактуры в Excel",' ',0,"ExportInvoiceToExcelDsm");	//Edit----------------------Dima  04.03.2015
  SpecialMenu("Открыть прикрепленные ссылки",' ',25,"OpenLinkWindow");	//Edit----------------------Dima  20.05.2015
  SpecialMenu("Статус счета-фактуры",'r',2,"IVInfoIVDsm");
  SpecialMenu("Скидка дня рождения",'',2,"GetBirthRebateDsm");
  SpecialMenu("Открыть карточку контракта",' ',2,"OpenCUDsm");
  SpecialMenu("Открыть очет Поиск контактных лиц",' ',2,"OpenSearchContactRnDsm");
  SpecialMenu("Открыть отчет Статус cashback по клиенту",' ',2,"OpenClientCashbackStatusRnDsm"); //Edit***************************Sasha2,16:29 28.08.2017
	SpecialMenu("Замена карты лояльности",' ',0,"ChangeLoyaltyCardDsm");
	SpecialMenu("Заменить кассира",' ',2,"ReSelectSalesman");
	SpecialMenu("Добавить товары акции 1+1",' ',0,"PasteOPOItemIVDsm");
	if(UserCanAction("UnOkIVSpec",true))then begin SpecialMenu("Разутвердить сч/ф 3",' ',2,"UnOKIVDsm"); end;
  SpecialMenu("Отправить в налог",' ',2,"SendTax");  // Irkan 27.02.2020
  SpecialMenu("История налогов",' ',2,"HistoryTax");  // Irkan 21.09.2020
  SpecialMenu("Возврат товара (налог) - Ручной режим",' ',2,"ReturnTax");  // Irkan 14.09.2020
	SpecialMenu("Возврат товара (налог) - Автоматическией режим",' ',0,"ReturnAutoTax");  // Edit ************************** BPI Ukraine - KramarAlexandr - 02, 24 11 2020 y. at 10:34:06 AM
	SpecialMenu("Отменить товару (налог)",' ',2,"CancelTax");  // Irkan 21.09.2020

  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);
  SpecialMenu("Создать кредитовый счет-фактуру",' ',20,"CreateCreditNoteIVDsm");
  SpecialMenu("Сделать поступление для FOB_MAGAZIN",' ',0,"CreatePufromIVforPLDsm"); //Edit***************************Sasha2,14:35 07.04.2015


  if(UserCanAction("UnOkIVSpec",true))then begin SpecialMenu("Разутвердить сч/ф 4",' ',2,"UnOKIVDsm"); end;  
  SpecialMenu("Отправить в налог",' ',26,"UnOKIVDsm");  // Irkan 27.02.2020
  EndWindow;
end;

window MyRebLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Таблицы скидок",RebLClass,CGmlist,RebView);
  SpawnClass(MyRebDClass);
  SetWRect(64,80,509,298);
  Sizeable(-1,-1,0,0);
  UseView(MyRebVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Код",Code,false,Code);
  RlCol(75,75, "Комментарий",Comment,false);
  //RlCol(-200,-200, "Заменяет",Replaces,false);
  RlCol(-200,-200, "С даты",FromDate,false);
  RlCol(-100,-100, "По дату",ToDate,false);
  SearchField("Найти");
  EndWindow;
end;

window MyRebDClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,l,v,vs;
  WindowBegin("Таблица скидок",MyRebDClass,CGview,MyRebView);
  UseView(MyRebVc);
  SetWRect(20,80,647,333);
  Sizeable(-1,-1,-1,0);
  vs=20;
  Tile(0,40,false,"",Code);
  EditField(h=90,v=6,50,"Код",Normal ,Code,false,0);
  EditField(230,v,-40,"Коммент.",Normal,Comment,false,0);
  if (HasAdvancedPricing) then begin
    EditField(h,v+=vs,80,"Период",Normal,FromDate,false,PasteCurDate);
    EditField(230,v,80,"-",Normal,ToDate,false,PasteCurDate);
		EditField(400,v,80,"Объект",Normal,Object,false,ObjPROMOSClass);
		EditField(400,v+vs,-20,"Склады",Normal,Locations,false,LocationSClass);
    EditField(h,v+=vs,80,"Время",Normal,FromTime,false,0);
    EditField(230,v,80,"-",Normal,ToTime,false,0);
    //EditField(440,v,-40,"Заменить",Normal,Replaces,false,RebSClass);
  end;
  TileButtons(v,2);
  Tile(1,110,false,"1",StaffCode);
  h = 110; h1 = 200; h2 = 300; vs = 20;
  /*EditField(h,v=6,50,"Скидка от кол-ва",Normal,StaffCode,false,StaffSClass);
  EditField(h,v+=vs,50,"Колонка 0",Normal,vra0,false,0);
  EditField(h,v+=vs,50,"Колонка 1",Normal,vra1,false,0);
  EditField(h1,v,50,"2",Normal,vra2,false,0);
  EditField(h2,v,50,"3",Normal,vra3,false,0);
  EditField(h,v+=vs,50,"Колонка 4",Normal,vra4,false,0);
  EditField(h1,v,50,"5",Normal,vra5,false,0);
  EditField(h2,v,50,"6",Normal,vra6,false,0);
  EditField(h,v+=vs,50,"Колонка 7",Normal,vra7,false,0);
  EditField(h1,v,50,"8",Normal,vra8,false,0);
  EditField(h2,v,50,"9",Normal,vra9,false,0);*/
  Tile(2,120,true,"2",Math);
  /*StaticText(h=46,v=27,"Товар",false);
  StaticText(h+=64,v=27,"Товар",false);
  StaticText(h+=69,v,"На кол.",false);
  StaticText(248,v,"Колонка",false);*/
  h = 10; v=v+20; l = 30;
  StaticText(h,v-40,"Чтобы отменить скидку на товар в предыдущих таблицах",false);
  StaticText(h,v-20,"Укажите скидку на товар равную -1",false);
  MatrixBegin(h,v,h+240+11*l,-10,-,9999);
  MatCol(1,h=30,"Код",0,CodeType,false,SetSClass);
  MatCol(1,h=100,"Группа",0,ITCode,false,ITSClass);
  //MatCol(1,h+=150,"Скидка",0,StaffCode,false,StaffSClass);
  MatCol(1,h+=150,"Скидка",0,vra0,false,0);
  /*MatCol(1,h+=l,"1",0,vra1,false,0);
  MatCol(1,h+=l,"2",0,vra2,false,0);
  MatCol(1,h+=l,"3",0,vra3,false,0);
  MatCol(1,h+=l,"4",0,vra4,false,0);
  MatCol(1,h+=l,"5",0,vra5,false,0);
  MatCol(1,h+=l,"6",0,vra6,false,0);
  MatCol(1,h+=l,"7",0,vra7,false,0);
  MatCol(1,h+=l,"8",0,vra8,false,0);*/
  MatCol(1,h+=250,"Object",0,MtObject,false,ObjPROMOSClass);
  EndMatrix;
/*  noone uses this one
  Tile(3,70,false,"3",DiscAcc);
  EditField(h=150,v=6,50,"Счёт скидки",Normal,DiscAcc,false,AccSClass);
  EditField(h,v+=20,50,"Процент скидки",Normal,DiscPerc,false,0);
  EditField(h,v+=20,50,"Код НДС",Normal,VATCode,false,VATCodeSClass);
*/
	SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  EndWindow;
end;





window OnePOneRebLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Таблицы скидок 1+1",OnePOneRebLClass,CGmlist,-);
  SpawnClass(OnePOneRebDClass);
  SetWRect(64,80,509,298);
  Sizeable(-1,-1,0,0);
  UseView(OnePOneRebVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"№",SerNr,false,SerNr);
  RlCol(75,75, "Комментарий",Comment,false);
  RlColKey(-200,-200, "С даты",FromDate,false,FromDate);
  RlColKey(-100,-100, "По дату",ToDate,false,ToDate);
  SearchField("Найти");
  EndWindow;
end;

window OnePOneRebDClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,l,v,vs;
  WindowBegin("Таблица скидок 1+1",OnePOneRebDClass,CGview,-);
  UseView(OnePOneRebVc);
  SetWRect(20,80,647,333);
  Sizeable(-1,-1,-1,0);
  vs=20;
  Tile(0,40,false,"",SerNr);
  EditField(h=90,v=6,50,"Код",Normal ,SerNr,false,0);
  EditField(230,v,-40,"Коммент.",Normal,Comment,false,0);
  if (HasAdvancedPricing) then begin
    EditField(h,v+=vs,80,"С даты",Normal,FromDate,false,PasteCurDate);
    EditField(230,v,80,"По дату",Normal,ToDate,false,PasteCurDate);
  end;
  TileButtons(v,2);
  Tile(1,110,false,"Цены",vra0);
  h = 40; h1 = 260; h2 = 470; vs = 20; v=20;
	CheckBox(h2-50,v,0,"Пересчитать посл. изм.",Recalcf);
  EditField(h,v+=vs,100,"1+1",Normal,vra0,false,0);
  EditField(h1,v,100,"2+2",Normal,vra1,false,0);
  EditField(h2,v,100,"3+3",Normal,vra2,false,0);
  EditField(h,v+=vs,100,"4+4",Normal,vra3,false,0);
  EditField(h1,v,100,"5+5",Normal,vra4,false,0);
  EditField(h2,v,100,"6+6",Normal,vra5,false,0);
  EditField(h,v+=vs,100,"7+7",Normal,vra6,false,0);
  EditField(h1,v,100,"8+8",Normal,vra7,false,0);
  EditField(h2,v,100,"9+9",Normal,vra8,false,0);
  EditField(h,v+=vs,100,"10+10",Normal,vra9,false,0);
	EditField(h2,v,100,"(x+x),x>10 ",Normal,vra10,false,0);
  Tile(2,120,true,"Товары",Math);
  h = 10; v=20; l = 30;
  MatrixBegin(h,v,h+240+11*l,-10,-,9999);
  MatCol(1,h=30,"Товар 1",0,FirstItmCode,false,INSClass);
  MatCol(1,h=200,"Товар 2",0,SecondItmCode,false,INSClass);
	MatCol(1,h=370,"Комплект",0,AssembledItmCode,false,INSClass);
  EndMatrix;
	//SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  EndWindow;
end;








window IVLClass:8
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real pos;
  Boolean acptf;
  
  WindowBegin("Счета-фактуры",IVLClass,CGmlist,-);
    pos = 1020;
    if (HasHotelInterface) then begin
      pos = pos + 80;
    end;
    acptf = AcceptanceStatusColumnTest("IVVc"); 
    if (acptf) then begin
      pos = pos + 40;
    end;
    SetWRect(20,80,pos,298);
    Sizeable(-1,-1,0,0);
    SpawnClass(IVDClass);
    UseView(IVVc);
    FormName(PrintIVL);
    RecordList(4,17,-21,-39);
    RlColKey(4,4,"Но.",SerNr,false,SerNr);
    RlColKey(79,79,"ОК",OKFlag,false,OKFlag);
    RlColKey(111,111,"Дата сч/ф",InvDate,false,InvDate);
    RlColKey(191,191,"Склад",Location,false,Location); 
		if(currentcompany==29)then begin
			RlColKey(235,235,"Btrx№",OfficialSerNr,false,Location); 
		end;
  RlColKey(301,301,"Счет Но.",OrderNr,false,OrderNr);
  RlColKey(381,381,"Клиент",CustCode,false,CustCode); 
  RlColKey(441,441,"Наим.",Addr0,false,Name); 
  RlCol(-230,-230,"Transaction",TaxTransactionCode,false); 
  if (acptf) then begin
    CalculatedColumn(-170,-170,"Подтв.","IVLClassAcceptanceStatus",false);
  end;
  	if(left(currentuser,2)=="SA")then begin
  		RlCol(-160,-160,"",MachineName,true);
  	end;
    RlColKey(-110,-110,"Итого",Sum4,true,Sum4);
    RlCol(-39,-39,"",CredMark,true);
    RlCol(-30,-30,"Вал.",CurncyCode,true);
    RlCol(-1,-1,"",Invalid,true);
    SearchField("Найти");
  if (HasLimitedAccess) then begin 
    BrowseSubsetButton(-40,-15);
  end;
    SpecialMenu("OK",'G',0,"OKIVLsm");
    SpecialMenu("Печатать проформу cчета-фактуры",' ',1,"PrintIVLsm");
    SpecialMenu("Статус сч/ф",'r',2,"IVInfoIVLsm");
		SpecialMenu("Выгрузить в Excel",' ',3,"InvoicesToExcelDsm");
    EndWindow;
end;

window INSClass:4
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer,android,iPad,iPhone") 
begin
  real v;
  Integer icn;

  icn = StringToInt(USetStr(912));
  WindowBegin("Выберите товар",INSClass,CGslist,-); 
  Sizeable(-1,-1,0,0);
  UseView(INVc);
  SpawnClass(INDClass);
  if (GuiType==kGuiAndroid) then begin
    SetWRect(0,0,320,418);
    WindowTitleBar(6002,icn,6003,"Выберите товар"); 
    RecordList(0,0,-1,-1);
    RLCellKey(0,12,280,12,Code,false,kFontSizeLarge,patM4curpen,Code);
    RLCell(0,56,80,56,Group,false,kFontSizeSmall,patM4curpen);
    RLCell(80,56,280,56,Name,false,kFontSizeSmall,patM4curpen);
    RLCell(-50,56,-1,56,UPrice1,false,kFontSizeSmall,patM4curpen);
  end else begin
    if (GuiType==kGuiiPhone) then begin
      RecordList(4,17,-21,-39);
      RLCellKey(10,6,150,19,Code,false,12,patM4blue,Code);
      RLCell(210,6,280,19,Group,false,12,patM4black);
      RLCell(10,26,150,39,Name,false,12,patM4black);
      RLCell(210,26,280,39,UPrice1,false,12,patM4black);
    end else begin
      v = 0;
      if (GuiType==kGuiCocoa) then begin
        SetWRect(210,80,850,498);
        //FlowView(0,0,-1,200);
        //v = v+200;
      end else begin
        SetWRect(210,80,850,298);
      end;
      RecordList(4,v+17,-21,-39);
      RlColKey(4,4,"Код",Code,false,ActCode);
      if (HasModIN) then begin
      RlColKey(155,105,"Группа",Group,false,ActGroup); 
      RlColKey(210,160,"Наименование",Name,false,ActName); 
      end else begin
      RlColKey(105,105,"Наименование",Name,false,ActName);    
      end;
      if (IsEnterprise) then begin
        RlColKey(-250,-250,"Альт. код",AlternativeCode,false,ActAlternativeCode); 
      end;
      if (IsEnterprise) or (HasModIN) then begin
        //RlCol(-120,-120,"Баз. цена",UPrice1,true); 
      end else begin
        //RlCol(-120,-120,"Цена",UPrice1,true); 
      end;
      if (IsEnterprise) then begin
        CalculatedColumn(-50,-50,"На складе","INSClassInStock",true); 
      end;
      SearchField("Найти");
      if (HasModIN) then begin
        if (UserCanReport("INInfoRn","",true)) then begin
          SpecialMenu("Item Status Report",'I',0,"INStatusINSsm");
        end;
      end;
      if (IsEnterprise) then begin
        SpecialMenu("Поиск",'F',1,"INSearchSsm"); 
        SpecialMenu("Альт. товары",'l',2,"AltItemINSsm"); 
        SpecialMenu("Перекр. продажи товары",'r',2,"CrossItemINSsm"); 
      end;
    end;
  SearchField("Поиск"); 
  end;
  EndWindow;
end;

window NPTSCashPaymentTClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  array boolean achangecrncyf;
  array string 255 acrncy;
  integer acrncnt,i,typ;
  real f,h,h2,h3,h4,hm,l,v,v3,vm,vs;
  WindowBegin("Платеж наличными",NPTSCashPaymentTClass,CGother,RcType);
  AutoSizeWindow(false);
  DynamicWindow;
  CntPOSCurrencies(acrncy,achangecrncyf,acrncnt);
  //if (acrncnt<2) then begin acrncnt = 2; end;

//  Modality(1);
  UseView(RcVc);
  SetWRect(80,200,750,430+acrncnt*30);
//  Sizeable(-1,-1,0,0);
  h = 120; h2 = 170; v=40; vs = 30;
  h = 40; f = 70;
  v = 30;
  StaticText(h,v,"Валюта",false);
  StaticText(h+=70,v,"Всего",false);
  StaticText(h+=110,v,"К оплате",false);
  StaticText(h+=110,v,"Сумма",false);
  StaticText(h+=110,v,"Сдача выдана",false);
  StaticText(h+=110,v,"Сдача к выд.",false);
  v = v + 10;

  //for (i=0;i<1;i=i+1) begin// Edit ************************** Monday, 24 December 2012 10:29:14
  for (i=0;i<acrncnt;i=i+1) begin
    h = 40;
    StaticText(h,v+14,acrncy[i],false);
    SoftEditFieldTLX(h+=70,v,f=100,"",M4Str,ViewOnly,100,15,patM4black,"NPTSCashPaymentTotalDue" & i,true,0);
    SoftEditFieldTLX(h+=110,v,f,"",M4Str,ViewOnly,100,15,patM4black,"NPTSCashPaymentCashAmountDue" & i,true,0);
    SoftEditFieldTLX(h+=110,v,f,"",M4Str,Normal,100,15,patM4black,"NPTSCashPaymentCashReceived" & i,true,0);
    typ = ViewOnly;
    if (achangecrncyf[i]) then begin
      typ = Normal;
    end;
    SoftEditFieldTLX(h+=110,v,f,"",M4Str,Normal,100,15,patM4black,"NPTSCashPaymentChangeGiven" & i,true,0);
    SoftEditFieldTLX(h+=110,v,f,"",M4Str,ViewOnly,100,15,patM4black,"NPTSCashPaymentChangeDue" & i,true,0);
    v = v + vs;
    if (HasMultiCurrency==false) then begin
      if (i==0) then begin
        i = acrncnt;
      end;
    end;
  end;

  h = 40;
  v = v + 10;
 /* if (HasMultiCurrency) then begin
    EditFieldTL(h,v, 30,"База",M4Str,ViewOnly,5,CurncyCode,false,0); // Edit ************************** Monday, 24 December 2012 10:29:26
  
  h = h + 70;
  SoftEditFieldTLX(h+=110,v,f=100,"",M4Str,ViewOnly,100,15,patM4black,"NPTSCashPaymentCashAmountDueTotal",true,0);
  SoftEditFieldTLX(h+=110,v,f,"",M4Str,ViewOnly,100,15,patM4black,"NPTSCashPaymentCashReceivedTotal",true,0);
  SoftEditFieldTLX(h+=110,v,f,"",M4Str,ViewOnly,100,15,patM4black,"NPTSCashPaymentChangeGivenTotal",true,0);
  SoftEditFieldTLX(h+=110,v,f,"",M4Str,ViewOnly,100,15,patM4black,"NPTSCashPaymentChangeDueTotal",true,0);
end;*/
  v = 10; h2 = 55; v3 = 48; vs = 48;
  ColourPushButton(-360,-80/*v+4*vs*/,-360+3*h2,-30/*v+4*vs+v3*/,"CancelNPTSCashPaymentTClass","Отмена<BR>F2",20); //Edit***************************Sasha2,14:01 21.04.2015
  ColourPushButton(-180,-80/*v+4*vs*/,-180+3*h2,-30/*v+4*vs+v3*/,"ProceedNPTSCashPaymentTClass","Продолжить<BR>F1",20); //Edit***************************Sasha2,14:01 21.04.2015
  
  /*h3 = 210; h4 = 400; v = 10; hm = 680;

  vm = -160; l = 57;
  v = 10;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad1","1_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad2","2_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad3","3_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad4","4_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad5","5_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad6","6_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad7","7_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad8","8_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad9","9_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyDel","Del",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad0","0_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"IVDClassToolKeyPadPoint",".",2);
  v = v+vs;
  h = hm; ColourPushButton(h,v,h+3*h2,v+v3,"NPTSPaymentToolKeyEnter","Enter",2);*/
  EndWindow;
end;


window INDClass:8
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  integer tilenr;
  real h,h1,h2,h3,h4,h5,v,vm,vs;
  string 255 label;
  WindowBegin("Товар",INDClass,CGview,-);
  SetWRect(20,80,830,400);//##cc
  Sizeable(-1,-1,-1,0);
  DynamicWindow;
  UseView(INVc);
  Tile(0,87,false,"",Code); 
  v = 6; vs = 20; h = 155; h1 = 300; h2 = 385; h3 = 395; h4 = 285; h5 = 433;
  EditField(h,v, 150,"Код товара",Normal,Code,false,0);
  EditField(h2,v,80,"Группа",Normal,Group,false,ITSClass);
  EditField(h2+200,v,80,"Группа скидок",Normal,RebGroup,false,ITSClass);
  EditField(h,v+=vs,-324,"Наименование(ENG)",Normal,Name,false,0); //Edit***************************Sasha2,13:47 15.12.2014
	EditField(h2+200,v,120,"Глобальний код",Normal,GlobalArtCode,false,0);
	EditField(h2+200,v+20,120,"Главный код",Normal,MainCode,false,0);
	EditField(h2+200,v+40,120,"Оригинальный код",Normal,OrigCode,false,0);
  tilenr = 1;
  TileButton(tilenr,"Цена"); tilenr = tilenr + 1;
  if (UserCanAction("AllowJewelleryInterface",false) or CurrentCompany == 28) then begin
    TileButton(tilenr,"Ювелир."); tilenr = tilenr + 1; 
    TileButton(tilenr,"Часы"); tilenr = tilenr + 1;
  end;
  TileButton(tilenr,"Склад"); tilenr = tilenr + 1;
  TileButton(tilenr,"Упр. складом"); tilenr = tilenr + 1;
  if (UserCanAction("ViewCostPrice",true)) then begin
  TileButton(tilenr,"Стоимость"); tilenr = tilenr + 1;
  end;
  TileButton(tilenr,"Структура"); tilenr = tilenr + 1;
  TileButton(tilenr,"Счета"); tilenr = tilenr + 1;
  if (GuiType==kGuiiPhone) then begin
    TileButton(tilenr,"Image"); tilenr = tilenr + 1;
  end;
  TileButton(tilenr,"Варианты"); tilenr = tilenr + 1;
  TileButton(tilenr,"Текст"); tilenr = tilenr + 1;
  TileButton(tilenr,"Модель ст-ти"); tilenr = tilenr + 1;
	TileButton(tilenr,"ABC анализ"); tilenr = tilenr + 1;
  TileButton(tilenr,"Bitrix классификации");
  tilenr = 1;
  CheckBox(h,v+=vs,0,"Закрыт",Terminated);
	CheckBox(h,v+=vs,0,"Снят с производства",OutOfOrder);
  CheckBox(h2-100,v,0,"Не для продажи",NotForSales);
  Tile(tilenr,209,false,tilenr,Unittext); tilenr = tilenr + 1;
  EditField(h,v=6 ,100,"Единица измерения",Normal,Unittext,false,UnitSClass);
  if (UserCanAction("AllowJewelleryInterface",false)) and (UserCanAction("ViewCostPrice",true)) then begin
    //EditField(h,v+=vs,100,"Стоимость",Normal,InPrice,true,0); 
  end;
  EditField(h,v+=vs,100,"Базовая цена",Normal,UPrice1,true,0);
  EditField(h,v+=vs,100,"Изменение баз. цены",ViewOnly,LastBasePriceChange,true,0);
  EditField(h,v+=vs,100,"Фактор цены",Normal,PriceFactor,true,0);
  EditField(h,v+=vs,100,"Формула тов.",Normal,CalcPrice,false,CPMSClass);
  EditField(h,v+=vs,100,"Наценка, %",Normal,Markup,true,0);
  EditField(h,v+=vs,100,"% премии",Normal,Bonus,true,0);
  EditField(h,v+=vs,-220,"Объекты",Normal,Objects,false,ObjSClass);
	if(currentcompany!=25)then begin
		EditField(h,v+=vs,80,"Наим.колл.",Normal,CCCollectName,false,DI4SClass); //Edit***************************Sasha2,16:30 04.11.2015
		EditField(h+180,v,-170,"Классификация",Normal,DispGroups,false,DISClass); //Edit***************************Sasha2,16:30 04.11.2015
	end else  begin
		EditField(h,v+=vs,-170,"Классификация",Normal,DispGroups,false,DISClass); 
	end;
	if(CurrentCompany==25)then begin
		EditField(h,v+=vs,80,"Коллекция",Normal,CCCollectName,false,0); // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger 16:18 19.11.2020
		EditField(h+380,v,150,"Модель",Normal,CCModelName,false,0);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger 16:18 19.11.2020
		if (Left(CurrentUser,2)=="SA") then begin
			EditField(h,v+=vs,80,"Стар Коллекция",Normal,MainDisp,false,0);
			EditField(h+380,v,80,"Стар Модель",Normal,SNOne,false,0);
		end;
	end;
	if(CompanyIsJWLikeCompany(CurrentCompany))then begin
		EditField(h,v+=vs,80,"SAP",Normal,SN,false,0);
		EditField(h+180,v,-170,"Старая классиф.",Normal,OldDispGroups,false,DISClass);
	end else begin
		EditField(h+180,v+=vs,-170,"Старая классиф.",Normal,OldDispGroups,false,DISClass);
	end;
	if(currentcompany==28)then begin
		EditField(h,v+=vs,50,"Категория",Normal,Category,false,INCatSClass);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger15:55 30.07.2018
		EditField(h+85,v,200,"",Viewonly,CategoryName,false,0);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger15:55 30.07.2018

		EditField(h,v+=vs,100,"Condition Code",Normal,CompletCode,false,INCompCodeSClass);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger15:55 30.07.2018
		EditField(h+180,v, 100,"Модель",Normal,Reference,false,DI3SClass);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger10:42 31.07.2018
		EditField(h,v+=vs,100,"SN",Viewonly,SN,false,0);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger15:55 30.07.2018
		EditField(h+180,v, 100,"Цвет",Normal,Colour,false,DI6SClass);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger10:42 31.07.2018
		EditField(h,v+=vs,100,"SN1",Normal,SNOne,false,0);  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger15:55 30.07.2018
		EditField(h,v+=vs,100,"Product code (Старый код)",Normal,IDOldINNr,false,0); // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger12:37 11.12.2018
	end;
  ButtonFrame(h1,v=24,130,4,"Тип товара");//##cc
  RadioButton(h1,v,kItemTypePlain,0,"Свободный",ItemType);
  RadioButton(h1,v+=16,kItemTypeStocked,0,"Складируемый",ItemType);
  RadioButton(h1,v+=16,kItemTypeStructured,0,"Структурированный",ItemType);
  RadioButton(h1,v+=16,kItemTypeService,0,"Работа",ItemType);
 // Edit Start ---------------------------------------------- Edit Start
	//Wednesday, 17 December 2014 12:44:51
	 
  ButtonFrame(h1+150,v=24,180,5,"Тип товара");
  RadioButton(h1+150,v,0,0,"Обычный",ConsgType);
  //RadioButton(h1+150,v+=16,1,0,"Консигнация",ConsgType);
  RadioButton(h1+150,v+=16,2,0,"Малоценка",ConsgType);
  RadioButton(h1+150,v+=16,3,0,"Основные средства",ConsgType);
  RadioButton(h1+150,v+=16,4,0,"Осн. средства - Малоценка",ConsgType);
  EditField(h1+150,v+20 ,50,"Счет оприходования",Normal,PurchAcc,false,AccSClass);
	// Edit End ---------------------------------------------- Edit End
	
  Pict_Field(-165,8,-15,148,"");
  if (GuiType==kGuiCocoa) then begin
    PushButton(-155,160,-15,180,ToolImagePicker,"Добавить картинку");//##cc  
  end;
  CheckBox(h1,v+=32,0,"В проекте товар как материал",ItemMaterial);
  if (UserCanAction("AllowJewelleryInterface",false) or CurrentCompany == 28) then begin
    Tile(tilenr,110,false,tilenr,-); tilenr = tilenr + 1;
			EditField(h,v=6, 140,"Метал",Normal,Metal,false,0); 
			EditField(h,v+=vs, 140,"Вес",Normal,RowWeight,false,0); 
			EditField(h,v+=vs, 140,"Размер",Normal,Size,false,0); 
			EditField(h,v+=vs, 140,"Длина",Normal,Length,false,0); 
			EditField(h,v+=vs, 140,"Коллекция",Normal,Reference,false,0); 
			v = 6; 
			EditField(h5+50,v, 140,"Гл. камень детали (карат.)",Normal,MajStoneDet,false,0); // Edit ************************** Thursday, 11 April 2013 11:43:09
			EditField(h5+50,v+=vs, 140,"Цвет",Normal,Colour,false,0); 
			EditField(h5+50,v+=vs, 140,"Прозрачность",Normal,Clarity,false,0); 
			EditField(h5+50,v+=vs, 140,"Сертификат",Normal,Cert,false,0); 
			EditField(h5+50,v+=vs, 140,"Мин. камень детали",Normal,MinStoneDet,false,0);
    Tile(tilenr,90,false,tilenr,-); tilenr = tilenr + 1;
			EditField(h,v=6, 140,"Марка часов",Normal,WatchBrand,false,0); 
			EditField(h,v+=vs, 140,"Наим. стиля",Normal,StyleName,false,0); 
			EditField(h,v+=vs, 140,"Метал часов",Normal,WatchMetal,false,0); 
			EditField(h,v+=vs, 140,"Движение",Normal,Movement,false,0); 
			v = 6; 
			EditField(h5,v, 140,"Браслет/ремешок",Normal,BrcStr,false,0); 
			EditField(h5,v+=vs, 140,"Цвет циферблата",Normal,Gender,false,0); 
			EditField(h5,v+=vs, 140,"Проч.",Normal,Other,false,0); 
			EditField(h5,v+=vs, 140,"Проч.2",Normal,Other2,false,0); 
  end;
  Tile(tilenr,170,false,tilenr,MinLevel);  tilenr = tilenr + 1; // Need to clean this Tile up!
  v = 6;
  vm = v;
  ButtonFrame(h1,v+=14,143,3,"Серийные номера");//##cc
  RadioButton(h1,v,0,0,"нет",SerNrf);
  RadioButton(h1,v+=16,1,0,"на единицу",SerNrf);
  RadioButton(h1,v+=16,2,0,"на партию",SerNrf);
  CheckBox(h1+200,v,0,"Не требовать номер партии на сч/ф POS",DonotRequireBatchNrOnIVCash);
  EditField(h,v=6,100,"Мин. кол-во на скл.",Normal,MinLevel,true,0);
  EditField(h,v+=vs,100,"Макс. кол-во на складе",Normal,MaxLevel,true,0);
  EditField(h,v+=vs  ,100,"Полка",Normal,Department,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 04, 28 11 2019 y. at 10:04:33 AM
  EditField(h,v+=vs  ,100,"Ячейка",Normal,InvCode,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 04, 28 11 2019 y. at 10:11:25 AM
  EditField(h,v+=vs,100,"Источник по умолч.",Normal,DefaultSource,false,SourceSClass);  
  EditField(h5,v ,50,"Налог на окр. среду/кг",Normal,RepaPricePerWeight,true,0);
  EditField(h,v+=vs ,100,"Степень риска",Normal,HazLevCode,false,HazLevSClass);
  EditField(h5,v ,50,"% алкоголя",Normal,AlcPrc,true,0);
  EditField(h,v+=vs ,100,"Единица 2",Normal,Unittext2,false,UnitSClass);
  EditField(h5,v ,50,"Конвертация 1",Normal,Conversion1,true,0);
  EditField(h,v+=vs,100,"Коэфф-нт единицы",Normal,UnitCoefficient,true,0);
  EditField(h5,v ,50,"Конвертация 2",Normal,Conversion2,true,0);
  
  Tile(tilenr,170,false,tilenr,LocArea);  tilenr = tilenr + 1;
  EditField(h,vm=(v=6) ,100,"Товар паллеты",Normal,DefPalletItem,true,INSClass);
  EditField(h5,v ,80,"Участок погрузки",Normal,PickArea,false,LocAreaSClass);
  EditField(h,v+=vs ,100,"Участ. склада по умолч.",Normal,LocArea,false,LocAreaSClass);
  EditField(h5,v ,50,"Паллет на участке погрузки",Normal,PalletsInPickArea,true,0);
  EditField(h,v+=vs ,50,"Макс. кол. на паллете",Normal,QtyonPallet,true,0);
  EditField(h4,v ,50,"Слои в палл.",Normal,PalletLayers,true,0);
  EditField(h5,v ,50,"Кол-во в слое",Normal,QtyonPalletLayer,true,0);
  EditField(h,v+=vs ,50,"Ширина паллеты",Normal,PalletWidth,true,0);
  EditField(h4,v ,50,"Высота",Normal,PalletHeight,true,0);
  EditField(h5,v ,50,"Глубина",Normal,PalletDepth,true,0);
  EditField(h,v+=vs ,50,"Ширина места по умолч.",Normal,DefPosWidth,true,0);
  EditField(h4,v ,50,"Высота",Normal,DefPosHeight,true,0);
  EditField(h5,v ,50,"Глубина",Normal,DefPosDepth,true,0);
  EditField(h,v+=vs ,50,"Ширина",Normal,Width,true,0);
  EditField(h4,v ,50,"Высота",Normal,Height,true,0);
  EditField(h5,v ,50,"Глубина",Normal,Depth,true,0);
  EditField(h,v+=vs ,50,"Объем",Normal,Volume,true,0);
  EditField(h4,v ,50,"Плотность",Normal,Density,true,0);
  EditField(h5,v ,50,"Нетто",Normal,NetWeight,true,0);
  EditField(h5,v+=vs ,50,"Вес",Normal,Weight,true,0);
  if (UserCanAction("ViewCostPrice",true)) then begin
  Tile(tilenr,190,false,tilenr,InPrice);  tilenr = tilenr + 1;

  	if(UserCanAction("EditCostInIN",true)==false)then begin// Edit ************************** BPI Ukraine - KramarAlexandr - 01, 18 05 2020 y. at 8:01:13 PM
			EditField(h+38,vm=(v=6),100,"Стоимость",ViewOnly,InPrice,true,0); //##cc
			EditField(h5,v,70,"Изменение стоимости",ViewOnly,LastPriceChange,true,0);
			EditField(h+38,v+=vs ,100,"Стоимость в осн. вал. 2",ViewOnly,InPriceB2,true,0); //##cc
			ButtonFrame(h1,v+=24,264,4,"Изменять ст-ть при поступлении"); //##cc
			RadioButton(h1,v,0,0,"не изменять",UpdateCost);
			RadioButton(h1,v+=16,1,0,"на ст-ть последней покупки, вкл.накл.затр.",UpdateCost);
			RadioButton(h1,v+=16,2,0,"на средневзвешенную",UpdateCost);
			RadioButton(h1,v+=16,3,0,"на цену последней покупки(искл.накл.затр.)",UpdateCost);
			ButtonFrame(h5=580,v=v-3*16,200,3,"Обнов. стоим. затрат по переоц. склада"); //##cc
			RadioButton(h5,v,0,0,"не обновлять",SRUpdateCost);
			RadioButton(h5,v+=16,1,0,"стоим. последн. переоценки",SRUpdateCost);
			RadioButton(h5,v+=16,2,0,"средневзвешенная",SRUpdateCost);
			EditField(h+38,v=vm+2*vs,100,"Накладные расходы",ViewOnly,ExtraCost,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Средневзвешенная",ViewOnly,WeighedAvPrice,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Средневзв. в осн.вал.2",ViewOnly,WeighedAvPriceB2,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Ст.посл.покупки(вкл.накл.затр.)",ViewOnly,LastPurchPrice,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Ц. посл.покупки(искл.накл.затр.)",ViewOnly,LastPurchPrice2,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Валюта посл. покупки",ViewOnly,LastPurchCurncyCode,false,CurncyCodeSClass); //##cc
			EditField(h+38,v+=vs ,100,"Фиксированный фрахт",ViewOnly,FixedFreight,true,0); //##cc
			CheckBox(h1,v,0,"Включать фиксированный сбор на товар",InclItemFreight);
		end else begin
			EditField(h+38,vm=(v=6),100,"Стоимость",Normal,InPrice,true,0); //##cc
			EditField(h5,v,70,"Изменение стоимости",ViewOnly,LastPriceChange,true,0);
			EditField(h+38,v+=vs ,100,"Стоимость в осн. вал. 2",Normal,InPriceB2,true,0); //##cc
			ButtonFrame(h1,v+=24,264,4,"Изменять ст-ть при поступлении"); //##cc
			RadioButton(h1,v,0,0,"не изменять",UpdateCost);
			RadioButton(h1,v+=16,1,0,"на ст-ть последней покупки, вкл.накл.затр.",UpdateCost);
			RadioButton(h1,v+=16,2,0,"на средневзвешенную",UpdateCost);
			RadioButton(h1,v+=16,3,0,"на цену последней покупки(искл.накл.затр.)",UpdateCost);
			ButtonFrame(h5=580,v=v-3*16,200,3,"Обнов. стоим. затрат по переоц. склада"); //##cc
			RadioButton(h5,v,0,0,"не обновлять",SRUpdateCost);
			RadioButton(h5,v+=16,1,0,"стоим. последн. переоценки",SRUpdateCost);
			RadioButton(h5,v+=16,2,0,"средневзвешенная",SRUpdateCost);
			EditField(h+38,v=vm+2*vs,100,"Накладные расходы",Normal,ExtraCost,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Средневзвешенная",Normal,WeighedAvPrice,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Средневзв. в осн.вал.2",Normal,WeighedAvPriceB2,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Ст.посл.покупки(вкл.накл.затр.)",Normal,LastPurchPrice,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Ц. посл.покупки(искл.накл.затр.)",Normal,LastPurchPrice2,true,0); //##cc
			EditField(h+38,v+=vs ,100,"Валюта посл. покупки",Normal,LastPurchCurncyCode,false,CurncyCodeSClass); //##cc
			EditField(h+38,v+=vs ,100,"Фиксированный фрахт",Normal,FixedFreight,true,0); //##cc
			CheckBox(h1,v,0,"Включать фиксированный сбор на товар",InclItemFreight);
		end;

  end;
  Tile(tilenr,170,false,tilenr,Recepy);  tilenr = tilenr + 1;
  EditField(h,v=6 ,120,"Структура",Normal,Recepy,false,RecSClass);
  CheckBox(h1,v,0,"Разбивать на компоненты при вводе",ExplodeRec);
  EditField(h,v+=vs ,120,"Структура в сч/ф",Normal,InvRecepy,false,RecSClass);
  EditField(h2,v,150,"Штрих-код",Normal,BarCode,false,0);
  EditField(h,v+=vs ,120,"Товар контракта",Normal,ContractItem,false,INSClass);
  EditField(h2,v,150,"Код произв-ля",Normal,EUCodex,false,CommoditySClass);
  EditField(h,v+=vs ,120,"Арендное фактур.",Normal,RentalItem,false,INSClass);
  EditField(h2,v,150,"Код EKN",Normal,EKNCode,false,0); // i think it is same as Commodity Code
  EditField(h2,v+=vs,150,"ПП Код",Normal,CPSCode,false,0);// Edit ************************** Monday, 3 September 2012 09:29:01
  EditField(h,v+=vs ,120,"Гарантия, мес.",Normal,WarrantyLength,true,0);
  EditField(h2,v,150,"Цвет",Normal,colnr,false,SetSClass);
  EditField(h,v+=vs,-40,"Альтернативный код",Normal,AlternativeCode,false,0);
  EditField(h,v+=vs,-40,"Предупреждение",Normal,WarnText1,false,0);
  //EditField(h,v+=vs,-40,"Ссылка на картинку",Normal,ImgLink,false,0);
  Tile(tilenr,170,false,tilenr,SalesAcc);  tilenr = tilenr + 1;
  v = 6;
  vm = v;
  EditField(h,vm,55,"Счет реализации",Normal,SalesAcc,false,AccSClass);
  EditField(h,v+=vs,55,VATZoneNameRUS & "Счет реализации, ",Normal,EUSalesAcc,false,AccSClass);
  EditField(h,v+=vs,55,"Счет реализации, эксп.",Normal,ExpSalesAcc,false,AccSClass);
  EditField(h,v+=vs,55,"Серв. фактур. счет реал.",Normal,SVOInvbleSalesAcc,false,AccSClass); 
  EditField(h,v+=vs,55,"Серв. гар. счет реал.",Normal,SVOWarrantySalesAcc,false,AccSClass); 
  EditField(h,v+=vs,55,"Серв. контракт счет реал.",Normal,SVOContractSalesAcc,false,AccSClass); 
  EditField(h,v+=vs,55,"Серв. гудвил счет реал.",Normal,SVOGoodwillSalesAcc,false,AccSClass); 

  EditField(h,v+=vs,55,"Исп. компонент-в",Normal,CompUsage,false,AccSClass);

  EditField(h2=360,v=vm,55,"Внутр. счет стоим.",Normal,CostAcc,false,AccSClass);
  EditField(h2,v+=vs,55,VATZoneNameRUS & "Счет стоимости",Normal,EUCostAcc,false,AccSClass);
  EditField(h2,v+=vs,55,"Счет затрат, эксп.",Normal,ExpCostAcc,false,AccSClass);
  EditField(h2,v+=vs,55,"Серв. фактур. счет затрат",Normal,SVOInvbleCostAcc,false,AccSClass); 
  EditField(h2,v+=vs,55,"Серв. гар. счет затрат",Normal,SVOWarrantyCostAcc,false,AccSClass); 
  EditField(h2,v+=vs,55,"Серв. контракт счет затр.",Normal,SVOContractCostAcc,false,AccSClass); 
  EditField(h2,v+=vs,55,"Серв. гудвил счет затрат",Normal,SVOGoodwillCostAcc,false,AccSClass); 
  EditField(h2,v+=vs,55,"Отель - временный счет",Normal,HotelWIPAcc,false,AccSClass);

  EditField(h2=530,v=vm,20,"Код НДС",Normal,VATCode,false,VATCodeSClass);
  EditField(h2,v+=vs,20,VATZoneNameRUS & "Код НДС",Normal,VATCodeEU,false,VATCodeSClass);
  EditField(h2,v+=vs,20,"Код НДС, эксп.",Normal,VATCodeExp,false,VATCodeSClass);
  CheckBox(h2,v+=20,0,"Вычислять налоговые сборы",Perceptions);
  CheckBox(h2,v+=16,0,"Вычислять удерживаемые налоги",Withholdings);
  EditField(h2=670,v=vm,50,"Ш-н расч. нал",Normal,TaxTemplateCode,false,TaxTemplateSClass);
  EditField(h2,v+=vs,50,VATZoneNameRUS & "ш-н расч. нал",Normal,TaxTemplateCodeEU,false,TaxTemplateSClass);
  EditField(h2,v+=vs,50,"Экс. ш-н расч. нал",Normal,TaxTemplateCodeExp,false,TaxTemplateSClass);
  if (GuiType==kGuiiPhone) then begin
    Tile(tilenr,70,false,tilenr,-);  tilenr = tilenr + 1;
    AttachmentDisplay(10,10,200,200);
//    PushButton(30,10,-80,40,ToolImagePicker,"Take picture");
//    ControlLabel(0,0,0,0,"Take picture","SystemFont",17,kTextStyleBold,AdjCenter,patM4ReportsTextBlue);
  end;
  Tile(tilenr,70,false,tilenr,VARMask);  tilenr = tilenr + 1;
  EditField(h,v=6,-40,"Маска варианта",Normal,VARMask,false,VARMasksSClass);
  EditField(h,v+=vs,-40,"Порядок в отчете",Normal,VARRepOrder,false,VARMasksSClass);
  EditField(h,v+=vs,-40,"Подмножества",Normal,VARSubsets,false,VARSubsetsSClass);
  Tile(tilenr,120,true,tilenr,Math);  tilenr = tilenr + 1;
  v = 24;
  if(currentuser=="SA1")then begin
		TextField(60,v-5,-20,370,Math2,0);
  end else begin
		MatrixBegin(4,v,-32,-40,-,99);
		MatCol(1,24,"Язык",0,LangCode,false,LangSClass);
		MatCol(1,94,"Наименование",0,Text,false,0); //Edit***************************Sasha2,17:36 01.12.2014
		//MatCol(1,300,"Описание",0,Description,false,0); //Edit***************************Sasha2,17:36 01.12.2014
		//MatCol(1,-200,"Техн.параметры",0,Technical,false,0); //Edit***************************Sasha2,17:36 01.12.2014
		EndMatrix;
  end;
  Tile(tilenr,220,false,tilenr,CostPerc);  tilenr = tilenr + 1;
  ButtonFrame(h=100,vm=(v=20),230,6,"Первичная модель стоимости");
  RadioButton(h,v,0,0,"По умолчанию",PrimaryCostModel);
  RadioButton(h,v+=16,1,0,"Стоимость покупки",PrimaryCostModel);
  RadioButton(h,v+=16,2,0,"% _от базовой цены",PrimaryCostModel);
  EditField(h+150,v,55,"%",Normal,CostPerc,true,0);
  RadioButton(h,v+=16,3,0,"Средневзвешенная",PrimaryCostModel);
  RadioButton(h,v+=16,4,0,"По очереди",PrimaryCostModel);
  RadioButton(h,v+=16,kCostModelNoneItem,0,"Нет",PrimaryCostModel);
  ButtonFrame(h,v+=40,230,3,"Модель стоимости по очереди");
  RadioButton(h,v,0,0,"По умолчанию",QueuedCostModel);
  RadioButton(h,v+=16,1,0,"FIFO цена",QueuedCostModel);
  RadioButton(h,v+=16,2,0,"LIFO цена",QueuedCostModel);  
  
  ButtonFrame(h2=380,v=vm,250,3,"Стоимость на серийный номер");//##cc
  RadioButton(h2,v,0,0,"По умолчанию",FIFOPerSerialNr);
  RadioButton(h2,v+=16,1,0,"Стоимость не на серийный номер",FIFOPerSerialNr);
  RadioButton(h2,v+=16,2,0,"Стоимость на серийный номер",FIFOPerSerialNr);  
  ButtonFrame(h2,v+=40,250,3,"Стоимость по очереди по каждому складу");//##cc
  RadioButton(h2,v,0,0,"По умолчанию",FIFOPerLocation);
  RadioButton(h2,v+=16,1,0,"Стоимость по очереди не по складам",FIFOPerLocation);
  RadioButton(h2,v+=16,2,0,"Стоимость по очереди по каждому складу",FIFOPerLocation);  
  ButtonFrame(h2,v+=40,250,3,"Средневзвешенная по каждому складу");//##cc
  RadioButton(h2,v,0,0,"По умолчанию",WAPerLocation);
  RadioButton(h2,v+=16,1,0,"Средневзвешенная не по складам",WAPerLocation);
  RadioButton(h2,v+=16,2,0,"Средневзвешенная по каждому складу",WAPerLocation);  
	
	Tile(tilenr,320,false,"",ItemCat);  tilenr = tilenr + 1;

	v = 20;

  EditField(h2-150,v,55,"Категория товара ABC или E",Normal,ItemCat,false,0);
  EditField(h2+250,v,55,"Подкатегория товара XYZ или S",Normal,SubItemCat,false,0);
	EditField(h2-150,v+=vs,55,"ABC подклассификация",Normal,ABCSubClass,false,0);
  EditField(h2-150,v+=vs,100,"Тип сезонных потребностей",Normal,TypeSeasNeeds,false,0);
  EditField(h2+250,v,55,"Время выполнения заказа (месяцы)",Normal,LeadTime,false,0); 
  EditField(h2-150,v+=vs,100,"Жизненный цикл ",Normal,LifeCicle,false,0); 
  
  EditField(h2-150,v+=vs,100,"BPIBrand",Normal,BPIBrand,false,BPIBrandSClass);
  EditField(h2-150,v+=vs,100,"BPICollection",Normal,BPICollection,false,BPICollectionSClass); 
  EditField(h2-150,v+=vs,100,"BPIGroup",Normal,BPIGroup,false,BPIGroupSClass); 
	EditField(h2-150,v+=vs,100,"BPISubGroup",Normal,BPISubGroup,false,BPISubGroupSClass); 
	EditField(h2-150,v+=vs,100,"BPICategory",Normal,BPICategory,false,BPICategorySClass); 
	EditField(h2-150,v+=vs,100,"BPIMaterial",Normal,BPIMaterial,false,BPIMaterialSClass); 
	EditField(h2-150,v+=vs,100,"BPIColor",Normal,BPIColor,false,BPIColorSClass); 
	EditField(h2-150,v+=vs,100,"BPIShape",Normal,BPIShape,false,BPIShapeSClass); 
	EditField(h2-150,v+=vs,100,"BPISize",Normal,BPISize,false,BPISizeSClass); 
	//EditField(h2-150,v+=vs,100,"Year",Normal,Year,false,0); 
	EditField(h2-150,v+=vs,100,"Year",Normal,High,false,0); 
	EditField(h2-150,v+=vs,100,"High",Normal,Life2,false,0); 
	v=20+vs*2;
	h2=h2+200;
	EditField(h2-150,v+=vs,100,"BPIUse",Normal,BPIUse,false,BPIUseSClass); 
	EditField(h2-150,v+=vs,100,"BPISex",Normal,BPISex,false,BPISexSClass); 
	EditField(h2-150,v+=vs,100,"BPIPlating",Normal,BPIPlating,false,BPIPlatingSClass); 
	EditField(h2-150,v+=vs,100,"BPIClarity",Normal,BPIClarity,false,BPIClaritySClass); 
	EditField(h2-150,v+=vs,100,"BPIWeight",Normal,BPIWeight,false,BPIWeightSClass); 
	EditField(h2-150,v+=vs,100,"BPICut",Normal,BPICut,false,BPICutSClass); 
	EditField(h2-150,v+=vs,100,"BPIStone",Normal,BPIStone,false,BPIStoneSClass); 
	EditField(h2-150,v+=vs,100,"BPIStrap",Normal,BPIStrap,false,BPIStrapSClass); 
	EditField(h2-150,v+=vs,100,"BPIOdour",Normal,BPIOdour,false,BPIOdourSClass); 
  
	
	Tile(tilenr,320,false,"Bitrix классификации",BTRxGiftClass);
	v = 20;
	
	h2=h2-250;
	EditField(h2-150,v+=vs,100,"Bitrix подарок",Normal,BTRxGiftClass,false,0);
	EditField(h2-150,v+=vs,100,"Внутренняя категория",Normal,BTRxInterCatClass,false,0);
  EditField(h2-150,v+=vs,100,"Категория для сайта 1 уровня",Normal,BTRxFirstLevCat,false,0); 
  EditField(h2-150,v+=vs,100,"Категория   для сайта 2 ровня",Normal,BTRxSecondLevCat,false,0); 
	EditField(h2-150,v+=vs,100,"Категория для сайта 3 увроня",Normal,BTRxThirdLevCat,false,0); 
	EditField(h2-150,v+=vs,100,"Артикул",Normal,AlternativeCode,false,0); 
	EditField(h2-150,v+=vs,100,"Бренд",Normal,BPIBrand,false,0); 
	EditField(h2-150,v+=vs,100,"Имя",Normal,Name,false,0); 
	EditField(h2-150,v+=vs,100,"Материал",Normal,BtrxMaterial,false,0); 
	EditField(h2-150,v+=vs,100,"Покрытие",Normal,BtrxPlating,false,0); 
	EditField(h2-150,v+=vs,100,"Сертификат",Normal,Cert,false,0); 
	EditField(h2-150,v+=vs,100,"Механизм часов",Normal,BTRxWatchMechanism,false,0); 
	EditField(h2-150,v+=vs,100,"Запас хода",Normal,BTRxPowerReserve,false,0); 
	EditField(h2-150,v+=vs,100,"Ремешок",Normal,BPIStrap,false,0); 
	EditField(h2-150,v+=vs,100,"Цвет ремешка",Normal,BTRxStrapColour,false,0); 
	EditField(h2-150,v+=vs,100,"Каратность россыпи",Normal,BTRxPlacerScatt,false,0); 
	EditField(h2-150,v+=vs,100,"Цвет",Normal,BtrxColor,false,0); 
	EditField(h2-150,v+=vs,100,"Аромат",Normal,BtrxOdour,false,0); 
	EditField(h2-150,v+=vs,100,"Модель телефона",Normal,BTRxPhoneModel,false,0); 
	EditField(h2-150,v+=vs,100,"Тип",Normal,BTRxType,false,0);
	EditField(h2-150,v+=vs,100,"Камень",Normal,BTRxStone,false,0);
	v = 20;
	v = 20;
	h2=h2+250;
	EditField(h2-150,v+=vs,100,"Наполнение",Normal,BTRxFilling,false,0); 
	EditField(h2-150,v+=vs,100,"Пол",Normal,BtrxSex,false,0); 
	EditField(h2-150,v+=vs,100,"Размер ",Normal,BPISize,false,0); 
	EditField(h2-150,v+=vs,100,"Длина",Normal,Depth,false,0); 
	EditField(h2-150,v+=vs,100,"Ширина",Normal,Width,false,0); 
	EditField(h2-150,v+=vs,100,"Высота",Normal,Height,false,0); 
	EditField(h2-150,v+=vs,100,"Диаметр",Normal,BTRxDiam,false,0); 
	EditField(h2-150,v+=vs,100,"Объем",Normal,Volume,false,0); 
	EditField(h2-150,v+=vs,100,"Вес",Normal,Weight,false,0); 
	EditField(h2-150,v+=vs,100,"Цвет изделия",Normal,BTRxProdColour,false,0); 
	EditField(h2-150,v+=vs,100,"Материал цепочки",Normal,BTRxChainMaterial,false,0); 
	EditField(h2-150,v+=vs,100,"Комплектация часов 1",Normal,BTRxWatchGradeA,false,0); 
	EditField(h2-150,v+=vs,100,"Комплектация часов 2",Normal,BTRxWatchGradeB,false,0); 
	EditField(h2-150,v+=vs,100,"Комплектация часов 3",Normal,BTRxWatchGradeC,false,0); 
	EditField(h2-150,v+=vs,100,"Камень 1",Normal,BTRxStoneA,false,0); 
	EditField(h2-150,v+=vs,100,"Каратность камня",Normal,BTRxStoneScattA,false,0); 
	EditField(h2-150,v+=vs,100,"Камень 2",Normal,BTRxStoneB,false,0); 
	EditField(h2-150,v+=vs,100,"Каратность камня 2",Normal,BTRxStoneScattB,false,0); 
	EditField(h2-150,v+=vs,100,"Камень 3",Normal,BTRxStoneC,false,0); 
	EditField(h2-150,v+=vs,100,"Каратность камня 3",Normal,BTRxStoneScattC,false,0); 
	EditField(h2-150,v+=vs,100,"Карат. гл камня",Normal,BTRxCentralCarat,false,0);
	v = 20;
	h2=h2+250;
	EditField(h2-150,v+=vs,100,"Камень",Normal,BPIStone,false,BPIStoneSClass); 
	EditField(h2-150,v+=vs,100,"Название продукта",Normal,BtrxProductName,false,0); 
	EditField(h2-150,v+=vs,100,"Количество в наборе",Normal,BtrxCountInSet,false,0); 
	EditField(h2-150,v+=vs,100,"Материал ремешка",Normal,BTRxStrapMat,false,0); 
	EditField(h2-150,v+=vs,100,"Цвет часов",Normal,BtrxClockFaceColour,false,0); 
	EditField(h2-150,v+=vs,100,"Материал часов",Normal,BtrxClockFaceMaterial,false,0);
	EditField(h2-150,v+=vs,100,"Центральный камень",Normal,BtrxCentralGim,false,0); 
	EditField(h2-150,v+=vs,100,"Гарантия",Normal,BtrxWarranty,false,0); 
	EditField(h2-150,v+=vs,100,"Защита от царапин",Normal,BtrxScratchRes,false,0); 
	EditField(h2-150,v+=vs,100,"Размер товара",Normal,BtrxItemSize,false,0); 
	EditField(h2-150,v+=vs,100,"Единица измерения",Normal,BtrxUnitOfMeas,false,0); 
	EditField(h2-150,v+=vs,100,"Все материалы",Normal,BtrxAllMaterials,false,0); 
	EditField(h2-150,v+=vs,100,"Усложнения",Normal,BtrxComplications,false,0); 
	EditField(h2-150,v+=vs,100,"Диаметр корпуса",Normal,BtrxCaseDiam,false,0); 
	EditField(h2-150,v+=vs,100,"Защита от микроволн",Normal,BtrxMicrowaveProtect,false,0); 
	EditField(h2-150,v+=vs,100,"Совместимость с плитой",Normal,BtrxMatchesKitchenStove,false,0); 
	EditField(h2-150,v+=vs,100,"Дополнительное описание",Normal,BtrxAddProdDescription,false,0); 
	EditField(h2-150,v+=vs,100,"Уход",Normal,BtrxCare,false,0); 
	EditField(h2-150,v+=vs,100,"Особенности продукта",Normal,BtrxProductFeaches,false,0); 
	h2=h2-100;	
	CheckBox(h2-150,v+=vs,0,"Лимитированный товар",BTRxLimitedGood); 
	EditField(h2-75,v+=vs,100,"Водонепроницаемость",Normal,BTRxWatterRes,false,0); 
	EditField(h2-75,v+=vs,100,"Форм.кода товара",Normal,ExtProwItRegulations,false,ExpProvItemRegSClass); 
	CheckBox(h2-150,v+=vs,0,"Водонепроницаемость",BTRxWatterResf);
	//ButtonFrame(h=100,v+=120,0,6," ");
  SpecialMenu("Отчет по товару",' ',1,"StockInAllCompRunRn")
  if (UserCanReport("INInfoRn","",true)) then begin 
    SpecialMenu("Справка по товару",'I',0,"INStatusINDsm");
  end;
//  SpecMenuItem("Recalculate Price List",' ',2);
  if (UserCanReport("INrsRn","INrsRClass",true)) then begin 
  SpecialMenu("История товара",'h',3,"INrsRn_INSm");
  end;
  SpecialMenu("Статус товара по складу",' ',4,"LocItemStatDsm");
  SpecialMenu("Напечатать ценник",' ',5,"DoPrintLablDsm");// Edit ************************** Tuesday, 27 May 2014 10:45:08
  if (UserCanAction("AllowJewelleryInterface",false)) and (UserCanReport("INInfoRn","",true)) then begin 
   // SpecialMenu("Статус товара по альт. коду",'S',5,"ItemStatusAltINDsm");
  end;
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0); 
  SpecialMenu("Создать товар поставщика",' ',1,"PIFromINDsm");
  SpecialMenu("Создать структуру",' ',2,"RecFromINDsm");
  SpecialMenu("Генерировать баркод",' ',5,"INGenBarCodeDsm");
  EndWindow;
end;

window cutINDClass:8
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  integer tilenr;
  real h,h1,h2,h3,h4,h5,v,vm,vs;
  string 255 label;
  WindowBegin("Товар",cutINDClass,CGview,-);
  SetWRect(20,80,830,400);//##cc
  Sizeable(-1,-1,-1,0);
  DynamicWindow;
  UseView(INVc);
  Tile(0,87,false,"",Code); 
  v = 6; vs = 20; h = 155; h1 = 300; h2 = 385; h3 = 395; h4 = 285; h5 = 433;
  EditField(h,v, 150,"Код товара",VIewOnly,Code,false,0);
  EditField(h2,v,80,"Группа",VIewOnly,Group,false,ITSClass);
  EditField(h,v+=vs,-40,"Наименование",VIewOnly,Name,false,0);
  tilenr = 1;
  TileButton(tilenr,"Цена"); tilenr = tilenr + 1;
  TileButton(tilenr,"Склад"); tilenr = tilenr + 1;
  TileButton(tilenr,"Структура"); tilenr = tilenr + 1;
 
  tilenr = 1;
  
  Tile(tilenr,209,false,tilenr,Unittext); tilenr = tilenr + 1;
  EditField(h,v=6 ,100,"Единица измерения",VIewOnly,Unittext,false,UnitSClass);
  EditField(h,v+=vs,-240,"Классификация",VIewOnly,DispGroups,false,DISClass);
  
  Tile(tilenr,170,false,tilenr,MinLevel);  tilenr = tilenr + 1; // Need to clean this Tile up!
  v = 6;
  vm = v;
  EditField(h,v,100,"Полка",Normal,Department,false,DepSClass);
  EditField(h,v+=vs,100,"Ячейка",Normal,InvCode,false,0);
  EditField(h5,v ,80,"Участок погрузки",Normal,PickArea,false,LocAreaSClass);
  EditField(h,v+=vs ,100,"Участ. склада по умолч.",Normal,LocArea,false,LocAreaSClass);
  EditField(h5,v ,50,"Паллет на участке погрузки",Normal,PalletsInPickArea,true,0);
  EditField(h,v+=vs ,50,"Макс. кол. на паллете",Normal,QtyonPallet,true,0);
  EditField(h4,v ,50,"Слои в палл.",Normal,PalletLayers,true,0);
  EditField(h5,v ,50,"Кол-во в слое",Normal,QtyonPalletLayer,true,0);
  EditField(h,v+=vs ,50,"Ширина паллеты",Normal,PalletWidth,true,0);
  EditField(h4,v ,50,"Высота",Normal,PalletHeight,true,0);
  EditField(h5,v ,50,"Глубина",Normal,PalletDepth,true,0);
  EditField(h,v+=vs ,50,"Ширина места по умолч.",Normal,DefPosWidth,true,0);
  EditField(h4,v ,50,"Высота",Normal,DefPosHeight,true,0);
  EditField(h5,v ,50,"Глубина",Normal,DefPosDepth,true,0);
  EditField(h,v+=vs ,50,"Ширина",Normal,Width,true,0);
  EditField(h4,v ,50,"Высота",Normal,Height,true,0);
  EditField(h5,v ,50,"Глубина",Normal,Depth,true,0);
  EditField(h,v+=vs ,50,"Объем",Normal,Volume,true,0);
  EditField(h4,v ,50,"Плотность",Normal,Density,true,0);
  EditField(h5,v ,50,"Нетто",Normal,NetWeight,true,0);
  EditField(h5,v+=vs ,50,"Вес",Normal,Weight,true,0);
 
  Tile(tilenr,170,false,tilenr,Recepy);  tilenr = tilenr + 1;
  v = 6;
  EditField(h,v,150,"Штрих-код",VIewOnly,BarCode,false,0);
  EditField(h,v+=vs,-40,"Альтернативный код",VIewOnly,AlternativeCode,false,0);
  
  
  if (UserCanReport("INInfoRn","",true)) then begin 
  SpecialMenu("Справка по товару",'I',0,"INStatusINDsm");
  end;
  if (UserCanReport("INrsRn","INrsRClass",true)) then begin 
  SpecialMenu("История товара",'h',3,"INHistINDsm");
  end;
  SpecialMenu("Статус товара по складу",' ',4,"LocItemStatDsm");
  SpecialMenu("Напечатать ценник",' ',5,"DoPrintLablDsm");// Edit ************************** Tuesday, 27 May 2014 10:45:08
  SpecialMenu("Генерировать баркод",' ',5,"INGenBarCodeDsm");
  EndWindow;
end;


window INLClass:3
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Товары",INLClass,CGmlist,-);
  if(UserCanAction("DisallowFullINDClass",true)==true)then begin// Edit ************************** Thursday, 24 July 2014 10:09:24
		SpawnClass(INDClass);
  end else begin
  	SpawnClass(cutINDClass);// Edit ************************** Thursday, 24 July 2014 10:09:27
  end;
  SetWRect(64,80,909,298);
  Sizeable(-1,-1,0,0);
  UseView(INVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,    "Код",Code,false,Code);
  if (HasModIN) then begin
  RlColKey(151,151,"Class",DispGroups,false,MyDispGroups); //!!PRODTRANSLATE
  //RlColKey(131,131,"Group",Group,false,Group); //!!PRODTRANSLATE
  RlColKey(201,201,"Description",Name,false,Name); //!!PRODTRANSLATE
  end else begin
  RlColKey(111,111,"Наименование",Name,false,Name);
  end;
  if (IsEnterprise) then begin
    RlColKey(-290,-290,"Альт. код",AlternativeCode,false,AlternativeCode); 
    RlColKey(-180,-180,"Штрих. код",BarCode,false,BarCode); 
    RlColKey(-70,-70,"Группа",Group,false,Group); //!!PRODTRANSLATE// Edit ************************** Monday, 12 January 2015 14:59:54
    if (currentuser=="SA" or currentuser=="SA1") then begin
      RlColKey(-20,-20,"Тип",ItemType,false,ItemType); //Edit***************************Sasha2,15:49 15.05.2015
    end;
  end;
  /*if (IsEnterprise) or (HasModIN) then begin// Edit ************************** Thursday, 24 July 2014 10:29:18
    RlCol(-70,-70,"Баз. цена",UPrice1,true); 
  end else begin
    RlCol(-70,-70,"Цена",UPrice1,true); 
  end;*/
  SearchField("Найти");
  if (GuiType==kGuiMetro) then begin
    RowMenuBegin(""); //!!TRANSLATE
    if (HasModIN) then begin
      if (UserCanReport("INInfoRn","",true)) then begin //!!TRANSLATE
        RowMenuItem(1,"Отчёт Статус товара",'I','I',4315,"OKIVLsm"); //!!TRANSLATE
      end;
      RowMenuItem(2,"Статус товара",' ',' ',4315,"ItemStatusINLsm"); //!!TRANSLATE
    end;
    if (IsEnterprise) then begin
      if (UserCanReport("INrsRn","INrsRClass",true)) then begin //!!TRANSLATE
        RowMenuItem(3,"IИстория товара",'h','h',4315,"INHistINLsm"); //!!TRANSLATE
      end;
    end;
    if (CompanyIsJWLikeCompany(currentcompany)) then begin
      RowMenuItem(4,"Статус товара по Альтернативному коду",'I','I',4315,"ItemStatusAltINLsm"); //!!TRANSLATE
    end;
    EndRowMenu;
    SpecMenuGroup("",kSpecMenuGroupTypeButtonsInBottomBarRight,0); //!!TRANSLATE
    SpecialMenuWithIcon("Search",'F',4313,2,"INSearchLsm"); //!!TRANSLATE
  end else begin
  if (HasModIN) then begin
    if (UserCanReport("INInfoRn","",true)) then begin 
    SpecialMenu("Справка по товару",'I',0,"INStatusINLsm");
    end;
    SpecialMenu("Статус товара",' ',1,"ItemStatusINLsm"); 
  end;
  if (IsEnterprise) then begin
    if (UserCanReport("INrsRn","INrsRClass",true)) then begin 
    SpecialMenu("История товара",'h',2,"INHistINLsm");//CMD H DOES HIDE HANSA 
    end;
  end;
  SpecialMenu("Найти",'F',2,"INSearchLsm"); 
  if (CompanyIsJWLikeCompany(currentcompany)) then begin
    SpecialMenu("Статус товара по альт. коду",'I',5,"ItemStatusAltINLsm");
    end;
  end;
  EndWindow;
end;




window PULClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real pos;

  WindowBegin("Поступления",PULClass,CGmlist,PUView);
  SpawnClass(PUDClass);
  SetWRect(20,80,1000,298);
  Sizeable(-1,-1,0,0);
  UseView(PUVc);
  FormName(PrintPUL);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Номер",SerNr,false,SerNr);
  RlColKey(79,79,"ОК",OKFlag,false,OKFlag);
  RlColKey(111,111,"Дата",TransDate,false,TransDate);
  pos = 191;
  if (HasMultiLocations) then begin
    RlColKey(pos,pos,"Склад",Location,false,Location);
    pos = 251;
  end;
  if (HasModPO) then begin
		if(currentcompany!=29)then begin
			RlColKey(pos,pos,"Номер заказа",PONr,false,PONr);
		end else begin
			RlColKey(pos,pos,"Номер заказа",FreightCompanyRegNr,false,PONr);
		end;
    pos = 331;
  end;
  RlColKey(pos,pos,"Поставщик",VECode,false,VECode);
  RlColKey(451,451,"Наим.",VEName,false,VEName);
  RlColKey(601,601,"Комментарий",Comment,false,Comment);
	RlCol(-170,-170,"Фрахт",ShipCost,false);
  RlCol(-75,-75,"Таможня",CustomsCost,false);
  if (AcceptanceStatusColumnTest("PUVc")) then begin 
    CalculatedColumn(-40,-40,"Подтв.","PULClassAcceptanceStatus",false); 
  end;
  if (HasAdvancedStock) then begin
    RlCol(-1,-1,"",Invalid,true);
  end;
  if (HasLimitedAccess) then begin
    BrowseSubsetButton(-40,-15);
  end;
  SearchField("Поиск");
  if (GuiType==kGuiMetro) then begin
    RowMenuBegin("");
    RowMenuItem(0,"OK",'G','G',4312,"PUOKLsm");  
    EndRowMenu;
  end else begin
    SpecialMenu("OK",'G',0,"PUOKLsm");
  end;
  EndWindow;
end;





window PUDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,t,v,vm,vs;
  string 255 label;
  record CYBlock CYb;
  Integer tilenr;
  Integer f,flipnr;

  BlockLoad(CYb);
  WindowBegin("Поступление товаров на склад",PUDClass,CGview,-);
	if (CompanyIsJWLikeCompany(currentcompany)) then begin
		SetWRect(20,80,950,620);
	end else begin
		SetWRect(20,80,880,460);
	end;
	
	Sizeable(-1,-1,0,0);
	
  UseView(PUVc);
  ActiveFieldOnNew("VECode");      
  FormName(PurchaseForm);
  Tile(0,74,false,"",TransDate);
  EditField(75,vm=(v=6),95,"Но.",Normal,SerNr,false,TSerSClass);
  EditField(75,v+=20,95,"Поставщик",Normal,VECode,false,VESClass);
  EnterSkip(TransDate);
  EditField(h=255,v=vm,-40,"Наименов",Normal,VEName,false,0);
  CheckBox(h4=-100,v+=20,0,"ОК",OKFlag);
	CheckBox(-400,v,0,"Отменить проверки на классификации",ItemClassifCheck);
  CheckBox(h4,v+=16,0,"Цена вкл. НДС",InclVAT);
	if(currentCompany==28 and (UserCanAction("ViewAddCondForItPUf",false) or left(CurrentUser,2)=="SA"))then begin
		CheckBox(-400,v,0,"Добавление кондиций",SHandCUSTCostOKCondf);
	end;
	
  tilenr = 1;
  TileButton(tilenr,"Условия"); tilenr = tilenr + 1; 
  TileButton(tilenr,"Товары"); tilenr = tilenr + 1; 
  if (HasMultiCurrency) then begin
    TileButton(tilenr,"Валюта"); tilenr = tilenr + 1; 
  end;
  if (IsEnterprise) then begin
    TileButton(tilenr,"Доп. издержки"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Фрахт"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Коммент."); tilenr = tilenr + 1; 
  end;
  tilenr = 1;

  vs = 20; h1 = 110; h2 = 300; h3 = 550; h4 = -100;
  Tile(tilenr,70,false,tilenr,TransDate); tilenr = tilenr + 1;
  EditField(h1,vm=(v=6),82,"Дата опер.",Normal,TransDate,false,PasteCurDate);
  if (IsEnterprise==false) then begin
    EditField(h2,v,-20,"Коммент.",Normal,Comment,false,0); 
  end;
  if (HasMultiLocations) then begin
  EditField(h1,v+=vs,82,"Склад",Normal,Location,false,LocationSClass);
  end;
  if (IsEnterprise) then begin
  EditField(h1,v+=vs,82,"Маршрут",ViewOnly,Sorting,false,0);
  end;
  if (HasObjects) then begin
    if (IsEnterprise) then begin
  EditField(h2,v=vm,135,"Объекты",Normal,Objects,false,ObjSClass);
    end else begin
      if (HasMultiLocations) then begin
        EditField(h2,v,135,"Объекты",Normal,Objects,false,ObjSClass); 
      end else begin
        EditField(h2,v+=vs,135,"Объекты",Normal,Objects,false,ObjSClass); 
      end;
    end;
  end;
  if (IsEnterprise) then begin
		if(currentcompany!=28)then begin
			if(currentcompany==29)then begin
				EditField(h2,v+=vs,135,"№ заказа Btrx",Normal,FreightCompanyRegNr,false,0);
			end else begin
				EditField(h2,v+=vs,135,"№ заказа пост.",ViewOnly,PONr,false,0);
			end;
		end else begin
			EditField(h2,v+=vs,135,"№ заказа пост.",ViewOnly,IDPONr,false,0);
		end;
		EditField(h2,v+=vs,135,"Договор постав.",ViewOnly,POCOSerNr,true,POCOSClass);
		EditField(h3,v=vm,80,"Вид заказа пост.",ViewOnly,PUClass,false,0);
		if(currentcompany==28)then begin 
			EditField(h3,v+=vs,80,"№ зак.пост.(Hansa)",ViewOnly,PONr,false,0);
		end;
  end;
  if (HasLanguages) then begin
  EditField(h3,v+=vs,80,"Язык",Normal,LangCode,false,LangSClass);
  end;
//  CheckBox(h4,v=vm,0,"Price Incl. #VAT#",InclVAT);
  EnterSkip(Math);
  Tile(tilenr,220,true,tilenr,Math); tilenr = tilenr + 1;
  v = 24;
	if(currentcompany==28)then begin
		MatrixBegin(4,v,-50,-85,-,1000);
	end else begin
		if (HasSerialNumbers) then begin
			MatrixBegin(4,v,-50,-50,-,1000);
		end else begin
			MatrixBegin(4,v,-25,-50,-,1000);
		end;
	end;
  MatTypedRow(stp);
  MatOverStrike(ovst);
  Flip(0);
  MatCol(1,28,"Товар",0,ArtCode,false,INSClass);
//  MatCol(1,84,"Var",0,VARList,true,VARSClass);
//  MatCol(1,144,"Qty",0,Quant,true,0);
	if(currentCompany==18) then begin
		if (HasVarieties) then begin
			MatCol(1,124,"Кол-во",0,Quant,true,MATVARINSClass);
		end else begin
			MatCol(1,124,"Кол-во",0,Quant,true,0); 
		end;
	end else begin	
		if (HasVarieties) then begin
			MatCol(1,144,"Кол-во",0,Quant,true,MATVARINSClass);
		end else begin
			MatCol(1,144,"Кол-во",0,Quant,true,0); 
		end;
	end;
  EnterSkip(Spec);
  MatText(t=3,28,"Подпись",true);
  MatCol(t,100,"",0,Sign,false,0);
  MatText(t,160,"Дата исправления",true);
  MatCol(t,290,"Дата обн.",0,UpdDate,false,0);
  flipnr = 1;
  Flip(flipnr); flipnr = flipnr + 1;
  if (CompanyIsJWLikeCompany(currentcompany)) then begin
    MatColTL(1,184,"Ед.",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass); 
    MatCol(1,234,"Описание",0,Spec,false,0); 
    MatCol(1,-485,"Склад",0,Location,false,LocationSClass); 
    MatCol(1,-430,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
    MatCol(1,-320,"Тип склада",0,StockType,false,SetSClass); 
  end else begin
		if(currentCompany==18) then begin
			MatCol(1,154,"Товар пост.",0,VIReconComment,false,0);
			MatColTL(1,234,"Ед.",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass);
			MatCol(1,264,"Наим.",0,Spec,false,0);
		end else begin
			MatColTL(1,184,"Ед.",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass);
			MatCol(1,224,"Наим.",0,Spec,false,0);
		end;	
  end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-240,"Цена",0,UPrice,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-160,"Себестоимость",0,CostPrice,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-80,"Сумма",0,Sum,true,0); end;
  if (IsEnterprise) then begin
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Наим.",0,Spec,false,0);
  MatCol(1,-350,"Склад",0,Location,false,LocationSClass);
  MatCol(1,-280,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  MatCol(1,-150,"Срок годности",0,BestBefore,false,0);
  //MatCol(1,-60,"Статус партии",0,BatchStatus,false,BatchStatusSClass);
  MatCol(1,-60,"Кол.печати",0,PrintQuant,false,0); //Edit***************************Sasha2,11:37 19.05.2016
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Наим.",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin 
		MatColTL(1,-404,"Орг. Ценв",0,-1,ViewOnly,-1,OrdPrice,false,0);
		MatColTL(1,-324,"Изменение цены",0,-1,ViewOnly,-1,VarianceAmount,false,0);
		MatCol(1,-244,"Цена",0,UPrice,true,0);
		MatCol(1,-174,"Накл. расходы",0,Extra,true,0);
		MatCol(1,-104,"Стоимость",0,CostPrice,true,0);
	end;
  if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-34,"Налог",0,TaxTemplateCode,false,TaxTemplateSClass); end;
  end else begin
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-34,"НДС",0,VATCode,false,VATCodeSClass); end;
  end;
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Наим.",0,Spec,false,0);
  MatCol(1,-350,"Товар пост.",0,VEItemCode,false,0);
  MatColTL(1,-270,"Ед. пост.",0,M4Code,ViewOnly,5,VEUnit,false,UnitSCLass);
  MatCol(1,-200,"Кол-во пост.",0,VEQuant,true,0);
  MatCol(1,-140,"Коэффициент",0,Coefficient,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-90,"Отпускная цена",0,BasePrice,false,0); end;
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Наим.",0,Spec,false,0);
  MatCol(1,-400,"Тип склада",0,StockType,false,SetSClass);
  MatCol(1,-310,"TREO",0,TREO,false,SetSClass);
  MatCol(1,-220,"Счет склада",0,CostAcc,false,AccSClass);
  MatCol(1,-155,"Счет покупок",0,CredAcc,false,AccSClass);
  MatCol(1,-90,"Объекты",0,Objects,false,ObjSClass);
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Наим.",0,Spec,false,0);
  MatCol(1,-340,"ГТД",0,CustomsNr,false,0);
  MatCol(1,-240,"Страна",0,CountryOfOrg,false,CountrySClass);
  MatCol(1,-140,"С места",0,PosCode,false,PosSClass);
  MatCol(1,-70,"На место",0,ToPosCode,false,FreePosSClass);
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Наим.",0,Spec,false,0);
  MatCol(1,-250,"Сер. номер",0,SerialNr,false,SerialNrSClass);
  MatCol(1,-135,"Ширина",0,UnitXval,true,0);
  MatCol(1,-90,"Высота",0,UnitYval,true,0);
  MatCol(1,-45,"Глубина",0,UnitZval,true,0);
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Описание",0,Spec,false,0); 
	MatCol(1,-420,"Фрахт",0,ShipCost,true,0);
  MatCol(1,-360,"Таможня",0,CustomsCost,true,0);
  label = UserDefined("AccBlock","PUCost1");
  if (blank(label)) then begin label = "Затр. 1";end;
  MatCol(1,-300,label,0,RowCost1,false,0);
  label = UserDefined("AccBlock","PUCost2");
  if (blank(label)) then begin label = "Затр. 2";end;
  MatCol(1,-240,label,0,RowCost2,false,0);
  label = UserDefined("AccBlock","PUCost3");
  if (blank(label)) then begin label = "Затр. 3";end;
  MatCol(1,-180,label,0,RowCost3,false,0);
  label = UserDefined("AccBlock","PUCost4");
  if (blank(label)) then begin label = "Затр. 4";end;
  MatCol(1,-120,label,0,RowCost4,false,0);
  label = UserDefined("AccBlock","PUCost5");
  if (blank(label)) then begin label = "Затр. 5";end;
  MatCol(1,-60,label,0,RowCost5,false,0);
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"№ заказа",0,PONr,false,POSClass);
  MatCol(1,194,"Строка заказа",0,OrdRow,false,0);
	if(CurrentCompany!=29)then begin
		MatCol(1,-370,"Свер.зак.",0,PORecon,false,0);
		MatCol(1,-310,"Коммен.",0,POReconComment,false,0);
	end else begin
		MatCol(1,-370,"Исх. код тов.",0,ECCSTItCode,false,0);
		MatCol(1,-310,"Исх. штр-код",0,ECCSTItBarCode,false,0);
	end;
  MatCol(1,-200,"Свер.сч/ф",0,VIRecon,false,0);
	if(currentCompany!=18) then begin
		MatCol(1,110,"Коммен.",0,VIReconComment,false,0);
	end;	
  end else begin
    if (HasSerialNumbers) then begin
      Flip(flipnr); flipnr = flipnr + 1;
      MatCol(1,144,"Описание",0,Spec,false,0); 
      MatCol(1,-150,"Сер. номер",0,SerialNr,false,SerialNrSClass); 
    end;
/*
    MatCol(1,-280,"Цена ед.",0,UPrice,true,0); 
    MatCol(1,-210,"Фрахт",0,ShipCost,true,0); 
    MatCol(1,-140,"Доп. затраты",0,Extra,true,0); 
    MatCol(1,-70,"Стоимость",0,CostPrice,true,0); 
*/
  end;
  if (CompanyIsJWLikeCompany(currentcompany)) then begin
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(t=1,144,"Описание",0,Spec,false,0); 
    MatCol(t,-350,"Пост. сер. номер",0,SuppSerialNr,true,0); 
    MatCol(t,-200,"Метал",0,Metal,true,0); 
    MatCol(t,-150,"Вес",0,RowWeight,true,0); 
    MatCol(t,-100,"Размер",0,Size,true,0); 
    MatCol(t,-50,"Длина",0,Length,true,0); 
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(t=1,144,"Описание",0,Spec,false,0); 
    MatCol(t,-350,"Осн. камень",0,MajStoneDet,true,0); 
    MatCol(t,-250,"Цвет",0,Colour,true,0); 
    MatCol(t,-200,"Прозрачность",0,Clarity,true,0); 
    MatCol(t,-150,"Серт.",0,Cert,true,0); 
    MatCol(t,-100,"Мин. камень",0,MinStoneDet,true,0); 
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(t=1,144,"Описание",0,Spec,false,0); 
    MatCol(t,-400,"Марка часов",0,WatchBrand,true,0); 
    MatCol(t,-300,"Наим. стиля",0,StyleName,true,0); 
    MatCol(t,-200,"Метал часов",0,WatchMetal,true,0); 
    MatCol(t,-100,"Движение",0,Movement,true,0); 
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(t=1,144,"Описание",0,Spec,false,0); 
    MatCol(t,-400,"Брк/Стр",0,BrcStr,true,0);
    MatCol(t,-300,"Род",0,Gender,true,0); 
    MatCol(t,-200,"Проч.",0,Other,true,0); 
    MatCol(t,-100,"Проч. 2",0,Other2,true,0);
  end;
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 20;
  v = 18; 
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
      v = v + vs;
    end;
  end;
	if(currentcompany==28)then begin
		EditField(110,-81,70,"Inv/Pack list No",Normal,InvPackListNr,true,0);
		EditField(260,-81,70,"Client Code",Normal,ClientCode,true,0);
		EditField(410,-81,70,"Ref PR No",Normal,RefPrNr,true,0);
		EditField(-169,-81,118,"Project Code",Normal,PRJCode,true,0);
		EditField(110,-61,70,"AWB/CMR/RB No",Normal,AWBCMRRBNr,true,0);
		EditField(410,-61,70,"OSD Number",Normal,OSDNr,true,0);
		EditField(-169,-61,70,"Qty Of Pkgs.",Normal,QtyOfPkgs,true,0);
	end;
	
	EditField(110,-41,70,"Итого кол-во",ViewOnly,SumQuant,true,0);
//  EditField(110,-21,70,"Price Subtotal",Normal,SubTotal,true,0); //Shows the same as SumCostPrice?
	if (UserCanAction("ViewMoneyInf",true))then begin 
		EditField(230,-41,70,"Фрахт",Normal,ShipCost,true,0);
		if (UserCanAction("ConfFreightCostomsFlags",false))then begin
			CheckBox(300,-41,0,"Утв.",ShipCostOKFlag);
		end;
	end;
	if (IsEnterprise) then begin
	if (UserCanAction("ViewMoneyInf",true))then begin 
		EditField(230,-21,70,"Таможня",Normal,CustomsCost,true,0); 
		if (UserCanAction("ConfFreightCostomsFlags",false))then begin
			CheckBox(300,-21,0,"Утв.",CustomsCostOKFlag);
		end;
	end;
	end;
	if (UserCanAction("ViewMoneyInf",true))then begin EditField(410,-41,70,"НДС",Normal,VATVal,true,0); end;
	if (IsEnterprise) then begin
	if (UserCanAction("ViewMoneyInf",true))then begin EditField(410,-21,70,"Вн. налог",ViewOnly,TAX1Sum,true,0); end;
	end;
	if (CurrentUser!="SA3") then begin
		if (UserCanAction("ViewMoneyInf",true))then begin EditField(-169,-41,118,"Пром. итог",ViewOnly,SumCostPrice,true,0); end;
		if (UserCanAction("ViewMoneyInf",true))then begin EditField(-169,-21,118,"ИТОГО",ViewOnly,PayVal,true,0); end;
	end else begin
		if (UserCanAction("ViewMoneyInf",true))then begin EditField(-169,-41,118,"Пром. итог",Normal,SumCostPrice,true,0); end;
		if (UserCanAction("ViewMoneyInf",true))then begin EditField(-169,-21,118,"ИТОГО",Normal,PayVal,true,0); end;
	end;
  if (HasMultiCurrency or HasBase2) then begin
    Tile(tilenr,70,false,tilenr,FrRate); tilenr = tilenr + 1;
  vs = 20;
    if (HasBase2) then begin
      h1 = h1 + 20;
    end;
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); end;
    if (HasMultiCurrency) then begin
  if (UserCanAction("ViewMoneyInf",true))then begin
		EditField(h2,v,50,"Курс",Normal,FrRate,true,0);
		EditField(h2+65,v,50,":",Normal,ToRateB1,true,0);
	end;
    if (HasBase2) then begin
        StaticText(h2+125,v+14,"Базовая валюта 1",false);
	if (UserCanAction("ViewMoneyInf",true))then begin
		EditField(h1,v+=vs,50,"Базовая валюта 1",Normal,BaseRate1,true,0);
		EditField(h2+65,v,50,":",Normal,ToRateB2,true,0);
	end;
        StaticText(h2+125,v+14,"Базовая валюта 2",false);
	if (UserCanAction("ViewMoneyInf",true))then begin
		EditField(h1,v+=vs,50,"Базовая валюта 2",Normal,BaseRate2,true,0);
	end;
    end else begin
        StaticText(h2+125,v+14,"Осн. валюта",false);
      end;
    end else begin
			if (UserCanAction("ViewMoneyInf",true))then begin
				EditField(h1,v+=vs,50,"Осн. валюта 1",Normal,BaseRate1,true,0); 
				EditField(h1,v+=vs,50,"Осн. валюта 2",Normal,BaseRate2,true,0); 
			end;
    end;
  end;
  if (IsEnterprise) then begin
    Tile(tilenr,120,false,tilenr,Cost1); tilenr = tilenr + 1;
		vs = 20;
		label = UserDefined("AccBlock","PUCost1");
		if (blank(label)) then begin label = "Накладные 1";end;
		if (UserCanAction("ViewMoneyInf",true) and currentcompany!=28)then begin
			EditField(h=110,v=6,70,label,Normal,Cost1,false,0);
		end;
		label = UserDefined("AccBlock","PUCost2");
		if (blank(label)) then begin label = "Накладные 2";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h2=295,v,70,label,Normal,Cost2,false,0);
		end;
		label = UserDefined("AccBlock","PUCost3");
		if (blank(label)) then begin label = "Накладные 3";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h,v+=vs,70,label,Normal,Cost3,false,0);
		end;
		label = UserDefined("AccBlock","PUCost4");
		if (blank(label)) then begin label = "Накладные 4";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h2,v,70,label,Normal,Cost4,false,0);
		end;
		label = UserDefined("AccBlock","PUCost5");
		if (blank(label)) then begin label = "Накладные 5";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h,v+=vs,70,label,Normal,Cost5,false,0);
		end;
		ButtonFrame(h3=400,v=16,130,2,"Расчет накл. затрат"); 
		RadioButton(h3,v,0,0,"Стоимость",ExtraCostsCalculation); 
		RadioButton(h3,v+=16,1,0,"Вес",ExtraCostsCalculation); 
		ButtonFrame(h3=-163,v=16,123,6,"Статус утверждения");
		RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);
		RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);
		RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);
		RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);
		RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);
		RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);  
			Tile(tilenr,130,false,tilenr,FreightCode); tilenr = tilenr + 1;
		EditField(h1,v=6,80,"Трансп. компания",Normal,FreightCode,false,FreightCompanySClass);
		EditField(h1,v+=vs,-20,"Наим.",Normal,FreightCompany,false,0);
		if(currentcompany!=29)then begin
			EditField(h1,v+=vs,-20,"ИНН",Normal,FreightCompanyRegNr,false,0);
		end;
		EditField(h1,v+=vs,-20,"Инф. о машине",Normal,TruckInfo,false,0);
		EditField(h1,v+=vs,-20,"Водитель",Normal,Driver,false,0);
		EditField(h1,v+=vs,-20,"CMR",Normal,CMRText,false,0); // International transporting number
			Tile(tilenr,30,false,tilenr,Comment); tilenr = tilenr + 1;
		EditField(h1,v=6,-20,"Коммент.",Normal,Comment,false,0); 
		if(CurrentCompany==28)then begin
			EditField(h1,v+=vs,200,"Received By",Normal,ReceivedBy,false,UserSClass); 
			EditField(h1,v+=vs,200,"Checked By",Normal,CheckedBy,false,UserSClass); 
			EditField(h1,v+=vs,200,"Confirmed By",Normal,ConfirmedBy,false,UserSClass); 
			EditField(h1,v+=vs,200,"Approved By",Normal,ApprovedBy,false,UserSClass); 
		end;
  end;
  if (IsEnterprise) then begin
  SpecialMenu("Удалить пустые строки",'',4,"DelBlankRowPUDsm");
  SpecialMenu("Поиск товара",'',1,"ItemSearchDsm");
  SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  SpecialMenu("Статус поступления",'r',4,"PUStatusDsm"); 
  SpecialMenu("Открыть спецификацию партии",' ',5,"OpenBatchPUDsm");
  end;
  if (HasModNL) then begin
  SpecialMenu("Открыть запись операции",'t',4,"OpenTRFromPU");
  end;
  if (IsEnterprise) then begin
  //SpecialMenu("Открыть нал. матрицу",' ',25,"OpenVatMatrixPUDsm"); 
  end;
  SpecialMenu("Распечатать этикетки",'e',0,"PrintLabRecDsm");
	if(left(CurrentUser,2)=="SA")then begin
		SpecialMenu("Сохранить с истории",' ',0,"RHistpasteItemsPU");
	end;
  if (IsEnterprise) then begin
  //SpecialMenu("Отправить для утверждения",' ',14,"PUSendforAcceptancePUDsm");
  //SpecialMenu("Отменить запрос на утверждение",' ',2,"CancelApprovalRequestDsm"); 
  //SpecialMenu("Разделить строку",' ',7,"SplitRowPUDsm");

  //SpecialMenu("Принять складские перемещения",' ',9,"OKStockMovPUrDsm");
  end;
  SpecialMenu("Pack List",' ',8,"PackListPUDsm");
	SpecialMenu("Создать список на удаление",' ',8,"CreateNoterToDelPUDsm");
	SpecialMenu("Сохранить строки согласно списку",' ',8,"SaveItemsFromPUDsm");
	SpecialMenu("Удалить лишние строки согласно списку",' ',8,"DeleteItemsFromPUDsm");
	SpecialMenu("Добавить классификации на новый товар",' ',8,"OpenPUWindsm");
	SpecialMenu("Выгрузить таблицу в буфер обмена",'',1,"ExportToExcelPUDsm"); // Edit ************************** BPI Ukraine - KramarAlexandr - 02, 17 09 2019 y. at 11:16:38 AM

  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0); 
  if (HasModPL) then begin
		// if(currentcompany==28)then begin
			SpecialMenu("Создать счет-фактуру поставщика",'F',3,"IDVIFromPUDsm"); // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger 9:38 24.07.2019
		// end else begin
			// SpecialMenu("Создать счет-фактуру поставщика",'F',3,"VIFromPUDsm");
		// end;
	end;
  if (IsEnterprise) then begin
  //SpecialMenu("Контроль качества",'u',10,"QualConFromPUDsm");
    //  SpecialMenu("Отметка об исправлении",' ',6,"UpdateMarkPUDsm");
    SpecialMenu("Возврат товара поставщику",'B',7,"RetPUFromPUDsm");
    //  SpecialMenu("Create Stock Movement",' ',5,"StockMovFromPUSpec");
    //  SpecialMenu("Scan",' ',8,"ScanBarCodePUDsm");
    //SpecialMenu("Создать складское перемещение",' ',8,"INTransFromPUsm");
  end;
  SpecialMenu("Обновить цены",' ',1,"UpdatePricesPUDsm");
  SpecialMenu("Генерировать серийные номера",' ',2,"GenSerialNosPUDsm");
	if(CurrentCompany==28)then begin
		SpecialMenu("Создать перемещение складированных товаров",' ',2,"StockMovFromPUDsm");
		SpecialMenu("Создать OS&D",' ',2,"OSDFromPUDsm");
		
	end;
  
  EndWindow;
end;



window IDVIFromPUVClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  string 255 label;
  WindowBegin("Определите создание сч/ф поставщика",IDVIFromPUVClass,CGMnt,RcType);
  SetWRect(20,100,400,300);
  v = 6; vs = 20; h = 150;
  EditFieldTL(h,v, 80,"Поставщик",M4UStr,Normal,20,f1,false,VESClass);
  EditFieldTL(h,v+=vs, 80,"№ заказа поставщику",M4Long,ViewOnly,20,FirstVer,false,0);
  CheckBox(h,v+=20,0,"Цена",flags[0]);
  CheckBox(h,v+=16,0,"Таможня",flags[6]);
  CheckBox(h,v+=16,0,"Фрахт",flags[7]);
  label = UserDefined("AccBlock","PUCost1");
  if (blank(label)) then begin label = "Cost 1";end;
  CheckBox(h,v+=16,0,label,flags[1]);
  label = UserDefined("AccBlock","PUCost2");
  if (blank(label)) then begin label = "Cost 2";end;
  CheckBox(h,v+=16,0,label,flags[2]);
  label = UserDefined("AccBlock","PUCost3");
  if (blank(label)) then begin label = "Cost 3";end;
  CheckBox(h,v+=16,0,label,flags[3]);
  label = UserDefined("AccBlock","PUCost4");
  if (blank(label)) then begin label = "Cost 4";end;
  CheckBox(h,v+=16,0,label,flags[4]);
  label = UserDefined("AccBlock","PUCost5");
  if (blank(label)) then begin label = "Cost 5";end;
  CheckBox(h,v+=16,0,label,flags[5]);
  EndWindow;
end;




window ARDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,t,v,vs;
  WindowBegin("Прайс поинт лист",ARDClass,CGview,-);
  SetWRect(20,80,512,639);
  UseView(ARVc);
  vs = 20; h=70; h1=100; h2=220;
  EditField(h,v=10, -20, "InvoiceNr",Normal,InvoiceNr,false,0);
  EditField(h,v+=20, -20, "Date",Normal,DueDate,false,0);
  EditField(h,v+=20, -20, "RVal",Normal,RVal,false,0);
  EditField(h,v+=20, -20, "CustCode",Normal,CustCode,false,0);
  EditField(h,v+=20, -20, "ARRebDate",Normal,ARRebDate,false,0);
  EditField(h,v+=20, -20, "ARCurncyCode",Normal,ARCurncyCode,false,0);
  EditField(h,v+=20, -20, "CustName",Normal,CustName,false,0);
  EditField(h,v+=20, -20, "BookRVal",Normal,BookRVal,false,0);
  EditField(h,v+=20, -20, "OfficialSerNr",Normal,OfficialSerNr,false,0);
  EditField(h,v+=20, -20, "ARRebDate2",Normal,ARRebDate2,false,0);
  
  EndWindow;
end;

window ARLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer") 
begin
  WindowBegin("Открыть счет",ARLClass,CGmlist,-); 
  SetWRect(64,80,760,298);
  Sizeable(150,150,0,0);
  SpawnClass(ARDClass);
  UseView(ARVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Счет фактура",InvoiceNr,false,InvoiceNr); 
  RlColKey(90,90,"Срок",DueDate,false,DueDate);
  RlColKey(165,165,"Официальный н-р",OfficialSerNr,false,OfficialSerNr);
  RlColKey(300,300,"Клиент",CustCode,false,CustCode);
  RlColKey(400,400,"Название",CustName,false,CustName);
  RlColKey(-100,-100, "Баланс",RVal,true,RVal);
  RlCol(-30,-30,"Вал.",ARCurncyCode,true);
  SearchField("Поиск");
  EndWindow;
end;

window APDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,t,v,vs;
  WindowBegin("Прайс поинт лист",APDClass,CGview,-);
  SetWRect(20,80,512,639);
  UseView(APVc);
  vs = 20; h=50; h1=100; h2=220;
  EditField(h=80,v=10, 70, "InvoiceNr",Normal,InvoiceNr,false,0);
  EditField(h,v+=20, 82, "SerNr",Normal,SerNr,false,0);
  EditField(h,v+=20, 82, "Date",Normal,DueDate,false,0);
  EditField(h,v+=20, 82, "RVal",Normal,RVal,false,0);
  EditField(h,v+=20, 82, "VECode",Normal,VECode,false,0);
  EditField(h,v+=20, 82, "RebDate",Normal,RebDate,false,0);
  EditField(h,v+=20, 82, "CurncyCode",Normal,CurncyCode,false,0);
  EditField(h,v+=20, 82, "VEName",Normal,VEName,false,0);
  EditField(h,v+=20, 82, "BookRVal",Normal,BookRVal,false,0);
  EditField(h,v+=20, 82, "OPNr",Normal,OPNr,false,0);
  EditField(h,v+=20, 82, "RebDate2",Normal,RebDate2,false,0);
  
  EndWindow;
end;

window MyAPLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","iPad") 
begin
  WindowBegin("APVc",MyAPLClass,CGmlist,-); 
  SetWRect(20,80,800,298);
  Sizeable(-1,-1,0,0);
  SpawnClass(APDClass);
  UseView(APVc);
  RecordList(4,17,-21,-39);
	RlColKey(4,4,"SerNr",SerNr,false,SerNr); 
  RlColKey(111,111,"Номер",InvoiceNr,false,InvoiceNr); 
  RlColKey(200,200,"Дата сч/ф",DueDate,false,DueDate); 
  RlColKey(300,300,"Клиент",VEName,false,VEName); 
  SearchField("Поиск"); 
  
  EndWindow;
end;

window ARPayDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,t,v,vs;
  WindowBegin("ARPayVc",ARPayDClass,CGview,-);
  SetWRect(20,80,512,639);
  UseView(ARPayVc);
  vs = 20; h=50; h1=100; h2=220;
	EditField(h=80,v=10, 70, "CUPNr",Normal,CUPNr,false,0);
  EditField(h,v+=20, 82, "RVal",Normal,RVal,false,0);
  EditField(h,v+=20, 82, "PayDate",Normal,PayDate,false,0);
  EditField(h,v+=20, 82, "CustCode",Normal,CustCode,false,0);
  EditField(h,v+=20, 82, "CurncyCode",Normal,CurncyCode,false,0);
  EditField(h,v+=20, 82, "CustName",Normal,CustName,false,0);
  EditField(h,v+=20, 82, "BookRVal",Normal,BookRVal,false,0);
  EditField(h,v+=20, 82, "VATVal",Normal,VATVal,false,0);
  EditField(h,v+=20, 82, "VATCode",Normal,VATCode,false,0);
  EditField(h,v+=20, 82, "VATBookVal",Normal,VATBookVal,false,0);
  EditField(h,v+=20, 82, "BankCurncy",Normal,BankCurncy,false,0);
  EditField(h,v+=20, 82, "OrderNr",Normal,OrderNr,false,0);
  EditField(h,v+=20, 82, "TAX1Sum",Normal,TAX1Sum,false,0);
  EditField(h,v+=20, 82, "TAX1SumBook",Normal,TAX1SumBook,false,0);
  
  
  EndWindow;
end;

window ARPayLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer") 
begin
  WindowBegin("ARPayVc",ARPayLClass,CGmlist,-); 
  SetWRect(20,80,800,298);
  Sizeable(-1,-1,0,0);
  SpawnClass(ARPayDClass);
  UseView(ARPayVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Номер",CUPNr,false,CUPNr); 
  RlColKey(111,111,"Order",OrderNr,false,OrderNr); 
  RlColKey(220,200,"Клиент",CustCode,false,CustCode); 
  SearchField("Поиск"); 
  
  EndWindow;
end;

window SRDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,v,vm,vs;
  Integer f,flipnr;
  
  WindowBegin("Переоценка склада",SRDClass,CGview,-);
  SetWRect(20,80,560,350);
  Sizeable(-1,-1,0,0);
  FormName(SRForm);
  UseView(SRVc);
  vs = 20; h2 = 260; h3 = 410; h4 = 580;
  EditField(h=80,v=6, 82,"Номер",Normal,SerNr,false,TSerSClass);
  EditField(h2,v,82,"Дата операции",Normal,TransDate,false,PasteCurDate);
  if (IsEnterprise) then begin
  EditField(h3,v,100,"Основание",Normal,Reason,false,StandProblemsSClass);
  end;
  EditField(h,v+=vs,82,"Короткий код",Normal,ACShort,false,ACShortSClass);
  if (HasModNL) then begin
  EditField(h2,v,82,"Счет разницы",Normal,SRVarAcc,false,AccSClass);
  end;
  EditField(h,v+=vs,82,"Склад",Normal,Location,false,LocationSClass);
  if (HasObjects) then begin
  EditField(h2,v,200,"Объекты",Normal,Objects,false,ObjSClass);
  end;
  EnterSkip(Math);
  v = v + 42;
  vm = v + 1;
  MatrixBegin(4,v,-50,-40,-,500);
  Flip(0);
  MatCol(1,32,"Товар",0,ArtCode,false,INSClass);
  MatCol(1,94,"Кол-во",0,Qty,true,0);
  flipnr = 1;
  Flip(flipnr); flipnr = flipnr + 1;
  if (HasSerialNumbers) then begin
  MatCol(1,144,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  MatCol(1,244,"Описание",0,Spec,false,0);
  end else begin
    MatCol(1,144,"Описание",0,Spec,false,0); 
  end;
  MatCol(1,-240,"Старая цена",0,FIFO,true,0);
  MatCol(1,-160,"Новая цена",0,NewFIFO,true,0);
  MatCol(1,-80,"Разница",0,DiffFIFO,true,0);
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,144,"Описание",0,Spec,false,0);
  MatCol(1,-300,"Итоговая стоимость",0,FIFORowVal,true,0);
  MatCol(1,-200,"Новая итоговая стоимость",0,NewFIFORowVal,true,0);
  MatCol(1,-100,"Разница",0,DiffFIFORowVal,true,0);
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,194,"Описание",0,Spec,false,0);
  if (HasSerialNumbers) then begin
  MatCol(1,-310,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  end;
  if (IsEnterprise) then begin
  MatCol(1,-200,"Склад",0,Location,false,LocationSClass);
  MatCol(1,-100,"Позиция",0,PosCode,false,PosSClass);
  end else begin
    MatCol(1,-100,"Описание",0,Location,false,LocationSClass); 
  end;
  if (HasModNL or HasObjects) then begin
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,194,"Описание",0,Spec,false,0);
    if (HasModNL) then begin
  MatCol(1,-310,"Счет разницы",0,SRVarAcc,false,AccSClass);
    end;
    if (HasObjects) then begin
  MatCol(1,-200,"Объекты",0,Objects,false,ObjSClass);
    end;
    if (HasModNL) then begin
  MatCol(1,-100,"Короткий код",0,ACShort,false,ACShortSClass);
    end;
  end;
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,194,"Описание",0,Spec,false,0);
  MatCol(1,-350,"№. сч/ф пост.",0,VEInvoiceNr,false,0);
  MatCol(1,-180,"Коэф",0,Coefficient,true,0);
  MatCol(1,-135,"Ширина",0,UnitXval,true,0);
  MatCol(1,-90,"Высота",0,UnitYval,true,0);
  MatCol(1,-45,"Глубина",0,UnitZval,true,0);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 20;
  v = vm;/* 28 */ 
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
      v = v + vs;
    end;
  end;
  CheckBox(4,-20,0,"OK",OKFlag);
  EditField(h=290,-40,-52,"Комментарий",Normal,Comment,false,0);
  EditField(h=176,-20,50,"Итоговое количество",ViewOnly,TotQty,true,0);
  EditField(-128,-20,76,"Итоговая разница",ViewOnly,TotDiff,true,0);
  SpecialMenu("Статус товара",'I',0,"ItemStatusSRDsm");
  if (HasModNL) then begin
  SpecialMenu("Открыть запись операции",'t',1,"OpenTRFromSR");
  end;
  SpecialMenu("Поиск товара",'f',1,"ItemSearchDsm");
  EndWindow;
  
end;






window CUDClass:14
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,h5,l,v,vm,vs;
  string 255 label;
  WindowBegin("Контакт",CUDClass,CGview,-);
  DynamicWindow;
  SetWRect(20,80,680,441);
  Sizeable(-1,-1,0,0);
  UseView(CUVc);
  FormName(PrintCUD);  
  if (HasLocalization("GBR")) then begin 
  ActiveFieldOnNew("Code"); //dont change, otherwise automatic address lookup helper window wont show automatically //wns
  end else begin
    ActiveFieldOnNew("Name");
  end;
  CommunicateButton;
  Tile(0,95,false,"",Code);
  v = 6; h = 130; l=223; vs = 20; h1=410; h2 = 350; h3 = 430; h4 = 580; h5 = 460;
  EditField(h,v ,   95,"Код",Normal,Code,false,TSerSClass);
  EditField(h1,v,50,"Категория клиента",Normal,CustCat,false,CCatSClass);
  EditField(h,v+=vs,95,"Сокращенно",Normal,SearchKey,false,0);
  EditField(h1,v,50,"Категория поставщика",Normal,VECat,false,VGSClass);
  EditField(h,v+=vs,h1-h+50,"Наименование",Normal,Name,false,0);
	EditField(h,v+=(vs+10),95,"Фамилия",Normal,CRMLName,false,0);
	EditField(h2-60,v,95,"Имя",Normal,CRMName,false,0);
	EditField(h3 + 40,v,95,"Отчество",Normal,CRMPatr,false,0);
  CheckBox(h1+80,v=6,0,"Клиент",CUType);
  CheckBox(h1+80,v+=16,0,"Поставщик",VEType);
  CheckBox(h1+80,v+=16,0,"Гость",GuestType);
  CheckBox(h1+80,v+=16,0,"Дилер",DealerType);
  CheckBox(h1+180,v=6,0,"Сотрудник",EmployeeType);
//  HalPushButton(h1+170,v=10,h1+170+100,v+20,"CreditInfoCUDsm","Credit Info");
//  HalPushButton(h1+170,v=10,h1+170+100,v+20,"UpdCustomerAddressCUDsm","Update Address");
  TileButton(1,"Контакт");
  TileButton(2,"Доставка");
  TileButton(3,"Условия");
  TileButton(4,"Ценообразование");
  TileButton(5,"Компания");
  TileButton(6,"Счета");
  TileButton(7,"Web");
  TileButton(8,"Комментарии");
  TileButton(9,"Гость");
  TileButton(10,"Польз.поля");
  Tile(1,290,true,"1",InvAddr0);
  v=6;
  HalPushButton(h+120,v,h+120+100,v+20,"UpdCustomerAddressCUDsm","Обновить адрес");
  v=v+10;
  StaticText(h,v+13,"Юридический адрес",false);
  EditField(h,v+=vs,-20,"Город",Normal,InvAddr4,false,0);//Edit-------------------Vitalii 11:50 21.02.2018
  EditField(h,v+=vs,-20,"Улица",Normal,InvAddr0,false,0);// Edit ************************** Wednesday, 16 December 2015 11:42:19
  EditField(h,v+=vs,-20,"Дом",Normal,InvAddr1,false,0);// Edit ************************** Wednesday, 16 December 2015 11:42:42
  EditField(h,v+=vs,-20,"Квартира",Normal,InvAddr2,false,0);// Edit ************************** Wednesday, 16 December 2015 11:42:43
  EditField(h,v+=vs,-20,"Индекс",Normal,InvAddr3,false,0);// Edit ************************** Wednesday, 16 December 2015 11:42:44
  //label = UserDefined("CUVc","InvAddr4");
  EditField(h,v+=vs,50,"Страна",Normal,CountryCode,false,CountrySClass);//tsp-101118
  StaticText(h+120,v+13,"Разрешить совпад. с др. картами",false);//Edit-------------------Vitalii 15:56 04.05.2017
  EditField(h1+90,v,-20,"Отдел",Normal,Department,false,0);
  EditField(h,v+=vs,150,"Городской Телефон",Normal,Phone,false,0);
  CheckBox(h+170,v,0,"",PhoneDublFlag);
  EditField(h,v+=vs,150,"Мобильный тел. 1",Normal,Mobile,false,0);
  EditField(h,v+=vs,150,"Мобильный тел. 2",Normal,AltPhone,false,0);
  EditField(h,v+=vs,150,"Мобильный тел. 3",Normal,Fax,false,0);
  v=v-vs*2;
  EditField(h1+90,v,150,"Имя в Skype",Normal,SkypeName,false,0);
  EditField(h1+90,v+=vs,-20,"SIP",Normal,SIPCode,false,0);
  CheckBox(h+170,v,0,"",EmailDublFlag);
  EditField(h1+90,v+=vs,-20,"Префикс",Normal,Extension,false,0);
  EditField(h1+90,v+=vs,150,"E-mail",Normal,eMail,false,0);
	EditField(h,v,150,"Instagram",Normal,InstagramAcc,false,0);
  EditField(h1+90,v+=vs,-20,"WWW-адрес",Normal,wwwAddr,false,0);
	EditField(h,v,150,"Основное конт. лицо",Normal,Person,false,ContactSClass);
	if(currentcompany==28)then begin
		EditField(h1+90,v,-20,"Ref Client No",Normal,IDOldCUCode,false,0);
	end;
  EditField(h,v+=vs,-20,"Классификация",Normal,Classification,false,CClassSClass);
  RecordList2(10,v+=40,-30,-39,"ContactRelVc");
  RlColKey(4,4,"Код",ContactCode,false,ActCustContactCode);
  RlCol(55,55,"Наим.",ContactTitle,false);
  RlColKey(105,105,"Имя",ContactName,false,ActCustContactName);
  RlCol(235,235,"Телефон",ContactPhone,false);
  RlCol(335,335,"Мобильный",ContactMobile,false);
  RlCol(435,435,"Должность",JobTitle,false);
  RlCol(535,535,"E-mail",ContacteMail,false);
//  RlCol(-1,-1,"",Invalid,true);
  Tile(2,240,false,"2",DelAddr0);
  v=6;
  if (HasLocalization("GBR,LVA,EST,SWE")) then begin 
  HalPushButton(h+120,v,h+120+100,v+20,"UpdDeliveryAddressCUDsm","Обновить адрес");
  end;
  v=v+12;
  StaticText(h,v+13,"Фактический адрес",false);
  label = UserDefined("CUVc","DelAddr0");
  EditField(h,v+=vs,-20,label,Normal,DelAddr0,false,0);
  label = UserDefined("CUVc","DelAddr1");
  EditField(h,v+=vs,-20,label,Normal,DelAddr1,false,0);
  label = UserDefined("CUVc","DelAddr2");
  EditField(h,v+=vs,-20,label,Normal,DelAddr2,false,0);
  label = UserDefined("CUVc","DelAddr3");
  EditField(h,v+=vs,-20,label,Normal,DelAddr3,false,0);
  label = UserDefined("CUVc","DelAddr4");
  EditField(h,v+=vs,-20,label,Normal,DelAddr4,false,0);  
  EditField(h,v+=vs,50,"Страна",Normal,DelCountry,false,CountrySClass);
  EditField(h2+50,v,-20,"Комментарий к счету",Normal,OrderComment,false,0);
  EditField(h,v+=vs,120,"№ фрахта",Normal,FreightNr,false,0);
  EditField(h2+50,v,70,"Регион",Normal,Region,false,RegionSClass); 
  EditField(h,vm=(v+=vs),120,"Условие отгр. (кл.)",Normal,ShipDeal,false,ShipDealSClass);
  EditField(h2+50,v,70,"Условие отгр. (пост.)",Normal,VEShipDeal,false,ShipDealSClass); 
  EditField(h,v+=vs,120,"Способ отгр. (кл.)",Normal,ShipMode,false,DMSClass);
  EditField(h2+50,v,70,"Способ отгр. (пост.)",Normal,VEShipMode,false,DMSClass); 
   
  //EditField(h,v+=vs,120,"Маршрут",Normal,Sorting,false,DelRouteSClass);
  EditField(h,v+=vs,120,"Мин. дней отгр. (пост.)",Normal,PlanShipDaysMin,false,0);
  EditField(h2+50,v,70,"Макс. дней отгр. (пост.)",Normal,PlanShipDays,false,0);
	EditField(h,v+=vs,120,"дн.выполн.дост",Normal,CalculatedLeadTime,false,0);
	EditField(h2+50,v,70,"E Level",Normal,ELevel,false,0);
/* these fields were used for securities trading, this module doesnt exist in hansa anymore */
/* Two of these fields are used in Russia and Ukraine */
//  EditField(h,vm=(v+=vs),120,"Securities Acc.",Normal,SecAccount,false,0);
//  EditField(h,v+=vs,120,"Bank Account",Normal,BankAccount,false,0);//xx
//  EditField(h,v+=vs,120,"Account Operator",Normal,AccOperator,false,BankSClass);//xx
//##  EditField(h,v+=vs ,70, "Com. Matrix",Normal,ComCode,false,ComSClass);
  ButtonFrame(h5+30,v=vm,150,2,"Дата отгрузки на основе");
  RadioButton(h5+30,v,0,0,"текущей",DeliveryBasedOn);
  RadioButton(h5+30,v+=16,1,0,"запланированной",DeliveryBasedOn);  
	ButtonFrame(h5+30,v+=32,150,3,"Тип доставки");
  RadioButton(h5+30,v,0,0,"По воздуху",DeliveryWay);
  RadioButton(h5+30,v+=16,1,0,"Дорогами",DeliveryWay);  
  RadioButton(h5+30,v+=16,2,0,"Морем",DeliveryWay);  
	ButtonFrame(h5+30,v+=32,150,2,"Доставка");
  RadioButton(h5+30,v,0,0,"Со склада",DeliveryFrom);
  RadioButton(h5+30,v+=16,1,0,"С производства",DeliveryFrom);  
  Tile(3,190,false,"3",PayDeal);
  EditField(h,v=6,25,"Условие опл. (кл.)",Normal,PayDeal,false,PDSClass);
  EditField(h,v+=vs,80,"Лимит кредита (кл.)",Normal,CreditLimit,true,0);
  EditField(h,v+=vs,80,"Лимит кред.(кл.) в дн.",Normal,CreditLimitDays,false,0);
  EditField(h,v+=vs,80,"Наш № у клиента",Normal,TheirCode,false,0);  
  EditField(h,v+=vs,80,"Получатель",Normal,InvoiceToCode,false,CUSClass);
  EditField(h,v+=vs,80,"КПП",Normal,ANACode,false,0);
  EditField(h,v+=vs,80,"Ставка пени",Normal,IntRate,false,0);
  EditField(h,v+=vs,80,"Дата создания",Normal,DateCreated,false,PasteCurDate);
  EditField(h,v+=vs,80,"Основной партнер",Normal,MainPartner,false,CUSClass);
  EditField(h2,v=6,25,"Условие опл. (пост.)",Normal,VEPayDeal,false,PDSClass);
  EditField(h2,v+=vs,80,"Лимит кред. (пост.)",Normal,VECreditLimit,true,0);
  EditField(h2,v+=vs,80,"Лимит кред.(пост.) в дн.",Normal,VECreditLimitDays,false,0);
  EditField(h2,v+=vs,80,"Наш № у пост-ка",Normal,VECustID,false,0);  
  EditField(h2,v+=vs,80,"Получатель",Normal,VEInvoiceToCode,false,VESClass);
  EditField(h2,v+=vs,80,"Факторинг",Normal,VEFactoring,false,VESClass);
  EditField(h2,v+=vs,80,"Мин. сумма заказа",Normal,MinOrdSum,false,0);
  EditField(h2,v+=vs,80,"Ссылка",Normal,RefStr,false,0);
  EditField(h2,v+=vs,80,"Послед. изменение",Normal,DateChanged,false,0);
  CheckBox(h5,v=12,0,"Закрыт",blockedFlag);
  CheckBox(h5,v+=16,0,"Отложен",OnHoldFlag);
  CheckBox(h5,v+=16,0,"Напоминания",RemndrFlag);
//  CheckBox(h5,v+=16,0,"Сборы",ColectionFlag);
  CheckBox(h5,v+=16,0,"Пеня",InterestFlag);
  CheckBox(h5,v+=16,0,"Счет аванса",OnAccount);
  CheckBox(h5,v+=16,0,"Без факторинга",NoFactoringFlag);
  CheckBox(h5,v+=16,0,"Без доп.налога",NoTax1);
  CheckBox(h5,v+=16,0,"Только гр. фактур.",GroupInv);
  CheckBox(h5,v+=16,0,"Счет себе",SelfBilling);
  CheckBox(h4,v=12,0,"Клиент EGO",EGOFlag);
  CheckBox(h4,v+=16,0,"Клиент EDI",EDIFlag);
  CheckBox(h4,v+=16,0,"Доступ к БД",AllowLogin);
//  CheckBox(h4,v+=16,0,"Доступ к FTP",FTPLogin);
  CheckBox(h4,v+=16,0,"Только фискальные сч/ф",FiscalFlag);
  CheckBox(h4,v+=16,0,"Не вкл. в рассылку",NoLetterPosting);
  CheckBox(h4,v+=16,0,"Не вкл. в электр. рассылку",NoMailPosting);
  CheckBox(h4,v+=16,0,"Не вкл.налог на окр.среду",NoRepa);
  CheckBox(h4,v+=16,0,"Без регион. сборов",NoTax2);
  CheckBox(h4,v+=16,0,"F-Tax (Швеция)",FTax); 
  v=v+16;
  CheckBox(h5,v+=16,0,"Разрешить СМС",AllowSendSMS);
	CheckBox(h5,v+=16,0,"Разрешить eMail",AllowSendeMail);
	CheckBox(h5,v+=16,0,"Разрешить звонок",AllowSendCall);
	CheckBox(h5,v+=16,0,"Разрешить куръерскую почту",AllowSendkMail); 
	CheckBox(h5,v+=16,0,"Разрешить WhatsApp",AllowWhatsApp); //Edit----------------------Dima  01.04.2016
  
  
  Tile(4,110,false,"4",PLCode);
  EditField(h,v=6,  80,"Валюта (кл.)",Normal,CurncyCode,false,CurncyCodeSClass);
  EditField(h,v+=vs ,80, "Прейскурант",Normal,PLCode,false,PLDefSClass);
  EditField(h,v+=vs ,80, "Таблица скидок",Normal,RebCode,false,RebSClass);
  EditField(h,v+=vs,80,"Продавец",Normal,SalesMan,false,SalesmanSClass);
  EditField(h,v+=vs,80,"Товары по умолч.",Normal,CompItemCode,false,CompItemSClass);
  EditField(h2,v=6,80,"Валюта (пост.)",Normal,VECurncyCode,false,CurncyCodeSClass);
  EditField(h2,v+=2*vs ,80, "Таблица скидок",Normal,VERebCode,false,RebSClass);
  EditField(h2,v+=vs,80,"Группа продажи",Normal,SalesGroup,false,SalesGroupSClass);
  ButtonFrame(h5=480,v=24,170,3,"Цена");//##cc
  RadioButton(h5,v,0,0,"на дату счета",PriceBasedOn);
  RadioButton(h5,v+=16,1,0,"на дату заплан. отгрузки",PriceBasedOn);
  RadioButton(h5,v+=16,2,0,"на дату отправки",PriceBasedOn);  
  Tile(5,180,false,"5",Comment);
  EditField(h,v=6,-20,"Наимен. компании",Normal,Comment,false,0);		//Edit----------------------Dima  01.04.2016
  EditField(h,v+=vs,-20,"Предупр. (кл.)",Normal,WarnText1,false,0);
  EditField(h,v+=vs,-20,"Предупр. (пост.)",Normal,VEWarnText1,false,0);
  EditField(h,v+=vs,  50,"Язык",Normal,LangCode,false,LangSClass);
  EditField(h2-20,v,120,"ОКПО",Normal,RegNr1,false,0);
//  EditField(h,v+=vs,50,"Страна",Normal,CountryCode,false,CountrySClass);
  EditField(h2-20,v+=vs,120,"ОКОНХ",Normal,RegNr2,false,RegDefSClass);
  EditField(h,v+=vs,20,"Код НДС (кл.)",Normal,VATCode,false,VATCodeSClass);
  EditField(h+125,v,50,"Шабл. нал.,прод.",Normal,TaxTemplateCode,false,TaxTemplateSClass);
  HalPushButton(h2-20,v,h2-20+100,v+20,"UpdCustomerAddressCUDsm","Обновить адрес");
  EditField(h,v+=vs,20,"Код НДС (пост.)",Normal,VEVATCode,false,VATCodeSClass);
  EditField(h+125,v,50,"Шабл. нал.,пок.",Normal,VETaxTemplateCode,false,TaxTemplateSClass);
  ButtonFrame(h2-20,v+=vs,155,1,"Тип"); //##cc
  RadioButton(h2-20,v,0,0,"Компания",CustType);
  RadioButton(h2+60,v,1,0,"Физ. лицо",CustType);
  EditField(h,v,120,"ИНН",Normal,VATNr,false,0);
//  EditField(h,v+=vs,120,"Web-канал",Normal,WebServiceChannel,false,SetSClass);
  v = 84;
  v = VATZoneButtonsLabelsRUS(h5+50,v,150,16); //##cc
  Tile(6,130,false,"6",AccAP);
  EditField(h,v=6,80,"Счет кредиторов",Normal,AccAP,false,AccSClass);
  EditField(h,v+=vs,80,"Контрольный счет",Normal,AccCost,false,AccSClass);
  EditField(h,v+=vs,80,"Счет аванса",Normal,OnAccAccAP,false,AccSClass);
  EditField(h,v+=vs,120,"Объекты (кл.)",Normal,Objects,false,ObjSClass);
  EditField(h,v+=vs,200,"Код IBAN",Normal,IBANCode,false,0);
  EditField(h1,v=6,-20,"Р/с",Normal,BankAccount,false,0);
  EditField(h1,v+=vs,-20,"БИК",Normal,Bank,false,0);
  EditField(h1,v+=vs,-20,"Банк",Normal,AccOperator,false,BankSClass);  
  EditField(h1,v+=vs,120,"Объекты (пост.)",Normal,VEObjects,false,ObjSClass);
  EditField(h1,v+=vs,80,"Код сортировки",Normal,SortCode,false,0);
  EditField(h1,v+=vs,120,"Способы платежа удержания",Normal,WithPayMode,false,PMSClass);
  Tile(7,70,false,"7",WebConf);
  EditField(h,vm=(v=6),120,"Web-конференция",Normal,WebConf,true,0);
  EditField(h1,v,150,"Главная классификация",Normal,MainDispGroup,false,WebNGProductCatSClass);
  EditField(h,v+=vs,120,"Первая страница Web",Normal,WebStartPage,false,0);
  EditField(h1,v,150,"Отображать в WEB",Normal,WebDisplays,false,WebDisplaySClass);
  EditField(h,v+=vs,120,"Код доставки",Normal,FreightCode,false,WebFreightSClass);
  Tile(8,170,false,"8",Comment0);
  EditField(h,v=6,-20,"Комментарий",Normal,Comment0,false,0);
  EditField(h,v+=vs,-20,"",Normal,Comment1,false,0);
  EditField(h,v+=vs,-20,"",Normal,Comment2,false,0);
  EditField(h,v+=vs,-20,"Должность",Normal,Title,false,CourtesyTitlesSClass);
  EditField(h,v+=vs,-20,"Служ. обязанность",Normal,JobDesc,false,JobTitleSClass);
  EditField(h,v+=vs,-20,"Обращение 1",Normal,Salutation1,false,0);
  EditField(h,v+=vs,-20,"Обращение 2",Normal,Salutation2,false,0);
  EditField(h,v+=vs,-20,"Обращение 3",Normal,Salutation3,false,0);
  ButtonFrame(h3,v+=vs+20,260,6,"Источник информации");						//Edit----------------------Dima  01.04.2016
  CheckBox(h3,v,0,"www.italdizain.az",ItaldizainSite);
  CheckBox(h3,v+=17,0,"Instagram",Instagram);
  CheckBox(h3,v+=17,0,"Facebook",Facebook);
  CheckBox(h3,v+=17,0,"Наружная реклама",Advertising);
  CheckBox(h3,v+=17,0,"Радио",Radio);
  CheckBox(h3,v+=17,0,"Другое",OtherInformation);
  EditField(h3+90,v,180,"",Normal,OtherInformationSource,false,0);  
  Tile(9,250,false,"9",DocType);
  EditField(h,v=6,100,"Тип документа",Normal,DocType,false,0);
  EditField(h2,v,-20,"№ паспорта",Normal,PassportNr,false,0);
//  EditFieldTL(h,vm=(v+=20),100,"Гражданство",M4StrSet,Normal,423,Nationality,false,StrSetSClass);
  EditField(h,vm=(v+=20),100,"Гражданство",Normal,Nationality,false,CountrySClass);
  EditField(h,v+=20,100,"Дата рождения",Normal,BirthDate,false,0);
  EditField(h,v+=20,100,"Дата рождения суп.",Normal,SuprDate,false,0);// Edit ************************** Wednesday, 16 December 2015 11:43:31
  EditField(h,v+=20,100,"Дата свадьбы",Normal,WedDate,false,0);// Edit ************************** Wednesday, 16 December 2015 11:43:38
  EditField(h,v+=20,100,"Профессия",Normal,Profesion,false,0);   
  EditField(h,v+=20,100,"Газета",Normal,Newspaper,false,NewspaperSClass);
  EditField(h,v+=20,100,"Пароль",Normal,Passphrase,false,0);
  EditField(h,v+=vs,100,"Тур оператор",Normal,TourOperator,false,CUSClass);
  EditField(h,v+=vs,100,"Агент",Normal,Agent,false,CUSClass);
  EditField(h,v+=vs,100,"Вид оплаты",Normal,DefGuestPayMode,false,PMSClass);
  EditField(h,v+=vs,100,"Источник заказа",Normal,BookOrigin,false,BookOrgSClass);
  EditField(h,v+=vs,300,"Отметки о диете",Normal,DietRemarks,false,0);
  EditField(h,v+=vs,300,"Отметки о треб.",Normal,RequirementRemarks,false,0);
  If(left(currentuser,2)=="SA")then begin
		EditField(h,v+=vs,70,"Дата скидки др",Normal,BirthRebateLastDate,false,0);
		EditField(h,v+=vs,70,"Компания скидки",Normal,BirthRebateInComp,false,0);
		EditField(h,v+=vs,70,"Номер сч/ф",Normal,BirthRebateTransNr,false,0);
  end else begin
		EditField(h,v+=vs,70,"Дата скидки др",ViewOnly,BirthRebateLastDate,false,0);
		EditField(h,v+=vs,70,"Компания скидки",ViewOnly,BirthRebateInComp,false,0);
		EditField(h,v+=vs,70,"Номер сч/ф",ViewOnly,BirthRebateTransNr,false,0);
  end;
  
  ButtonFrame(h2,v=vm+20,100,4,"Пол");
  RadioButton(h2,v,3,0,"-",Gender); //Edit***************************Sasha2,11:35 05.07.2017
  RadioButton(h2,v+=17,0,0,"Мужской",Gender);
  RadioButton(h2,v+=17,1,0,"Женский",Gender);
  RadioButton(h2,v+=17,2,0,"Компания",Gender);// Edit ************************** Wednesday, 16 December 2015 11:17:28
  //pay attention that Gender RadioButton #3 is in use
  
  CheckBox(h2+130,v=vm+20,0,"Курит",Smoking);
  CheckBox(h2+130,v+=17,0,"В черном списке",Blacklist);
  
  ButtonFrame(h2,vm=(v+=70),100,5,"Семейное положение");
  RadioButton(h2,v,4,0,"-",MarStatus); //Edit***************************Sasha2,11:38 05.07.2017
  RadioButton(h2,v+=17,0,0,"Не женат",MarStatus);
  RadioButton(h2,v+=17,1,0,"Замужем",MarStatus);
  RadioButton(h2,v+=17,2,0,"В разводе",MarStatus);
  RadioButton(h2,v+=17,3,0,"Вдовa/-ец",MarStatus);
  //pay attention that MarStatus RadioButton #4 is in use

  ButtonFrame(h2=h2+130,v=vm,100,3,"Возраст");
  RadioButton(h2,v,1,0,"Ребенок",AgeStatus);
  RadioButton(h2,v+=17,0,0,"Взрослый",AgeStatus);
  RadioButton(h2,v+=17,2,0,"Пенсионер",AgeStatus);
  
  Tile(10,270,false,"10",UserStr1);
  v=6;h=180;
  label = UserDefined("CUVc","UserStr1");
  if (nonblank(label)) then begin
    EditField(h,v,-20,label,Normal,UserStr1,false,0);
  end;
  label = UserDefined("CUVc","UserStr2");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr2,false,0);
  end;
  label = UserDefined("CUVc","UserStr3");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr3,false,0);
  end;
  label = UserDefined("CUVc","UserStr4");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr4,false,0);
  end;
  label = UserDefined("CUVc","UserStr5");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr5,false,0);
  end;
  label = UserDefined("CUVc","UserVal1");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserVal1,false,0);
  end;
  label = UserDefined("CUVc","UserVal2");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserVal2,false,0);
  end;
  label = UserDefined("CUVc","UserVal3");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserVal3,false,0);
  end;
  label = UserDefined("CUVc","UserDate1");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserDate1,false,0);
  end;
  label = UserDefined("CUVc","UserDate2");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserDate2,false,0);
  end;
  label = UserDefined("CUVc","UserDate3");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserDate3,false,0);
  end;
  h=h+50;
  EditField(h,v+=vs,-20,"Адресная книга",Normal,AddressBooks,false,0);
  v=v+vs;
  EditField(h,v+=vs,80,"Дата создания",Normal,DateCreated,false,PasteCurDate);// Edit ************************** Friday, 27 September 2013 09:38:50
  EditField(h,v+=vs,80,"Карточка заведена в магазине(склад)",Normal,CreateLocation,false,LocationSClass);// Edit ************************** Friday, 27 September 2013 09:38:46
  EditField(h,v+=vs,80,"Карточка заведена в компании",Normal,CreateCompany,false,0);// Edit ************************** Friday, 27 September 2013 09:38:46
  EditField(h,v+=vs,-20,"Комментарий к созданию карточки",Normal,CreateComment,false,0);// Edit ************************** Friday, 27 September 2013 09:38:48
  EditField(h,v+=vs,100,"Карточка создана сотрудником",Normal,CurEmplCreator,false,UserSClass);//Edit_-_-_-_-_-_-_-_-Anton 11:59 15.05.2018
	if(left(currentuser,2)=="SA")then begin
  	EditField(h,v+=vs,100,"CRM ID",Normal,CRMid,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - Friday, 12 October 2018 10:47:42
  end else begin
  	EditField(h,v+=vs,100,"CRM ID",ViewOnly,CRMid,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - Friday, 12 October 2018 10:47:42  
  end;	
  if (UserCanReport("CustPSRn","",true)) then begin 
  SpecialMenu("Справка по клиенту",'e',0,"CUStatusCUDsm");
  end;
  SpecialMenu("Связать существующий контакт",' ',1,"AddContactCUDsm");
  SpecialMenu("Удалить связанный контакт",' ',1,"DelContactCUDsm");
  SpecialMenu("Изменить данные связанного контакта",' ',1,"EditContactCUDsm");
  if (UserCanReport("VEPSRn","",true)) then begin 
  SpecialMenu("Статус поставщика",'u',4,"VEStatusVEDsm");
  end;
  SpecialMenu("Обновить контактные лица",' ',6,"UpdContactAddrCUDsm");
  if (GuiType==kGuiCocoa) then begin
    SpecialMenu("Копировать в адресную книгу",' ',7,"CopyToLocalAddressBookDsm");
  end;
  if (GuiType==kGuiiPhone) then begin
    SpecialMenu("Поменять пароль",' ',1,"ChangePasswdCUDsm"); 
  end;
  SpecialMenu("Создать карту лояльности",' ',1,"CreateLoyaltyCardDsm"); // Edit ************************** Tuesday, 1 April 2014 14:30:37
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);    
  SpecialMenu("Создать новый контакт",' ',1,"NewContactCUDsm");
  SpecialMenu("Создать деятельность",'c',2,"NewActCUDsm");
  SpecialMenu("Создать письмо с паролем",' ',3,"RandomPassMailCUDsm");
  SpecialMenu("Создать e-mail",'m',5,"NewMailCUDsm");
  
  EndWindow;
end;

window RebDClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,l,v,vs;
  WindowBegin("Таблица скидок",RebDClass,CGview,RebView);
  UseView(RebVc);
  SetWRect(20,80,647,333);
  Sizeable(-1,-1,-1,0);
  vs=20;
  Tile(0,40,false,"",Code);
  EditField(h=90,v=6,50,"Код",Normal ,Code,false,0);
  EditField(230,v,-40,"Коммент.",Normal,Comment,false,0);
  EditField(h,v+=vs,80,"Период",Normal,FromDate,false,PasteCurDate);
  EditField(170,v,80,"-",Normal,ToDate,false,PasteCurDate);
	EditField(300,v,80,"Объект",Normal,Object,false,ObjPROMOSClass);
  EditField(440,v,-40,"Заменяет",Normal,Replaces,false,RebSClass);
  TileButtons(v,2);
  Tile(1,110,false,"1",StaffCode);
  h = 110; h1 = 200; h2 = 300; vs = 20;
  EditField(h,v=6,50,"Скидка от кол-ва",Normal,StaffCode,false,StaffSClass);
  
	StaticText(h+100,v+10,"!!!!!!!!!!!!!!!!!!!!!  ВНИМАНИЕ  !!!!!!!!!!!!!!!!!!!!!!",false);
	StaticText(h+100,v+34,"Для таблицы скидок 0% матрица переносится во все таблицы",false);  
	StaticText(h+100,v+58,"скидок в которых дата начала и конца акции совпадают",false); 
  
  EditField(h,v+=vs,50,"Основная скидка",Normal,vra0,false,0);
  /*EditField(h,v+=vs,50,"Колонка 1",Normal,vra1,false,0);
  EditField(h1,v,50,"2",Normal,vra2,false,0);
  EditField(h2,v,50,"3",Normal,vra3,false,0);
  EditField(h,v+=vs,50,"Колонка 4",Normal,vra4,false,0);
  EditField(h1,v,50,"5",Normal,vra5,false,0);
  EditField(h2,v,50,"6",Normal,vra6,false,0);
  EditField(h,v+=vs,50,"Колонка 7",Normal,vra7,false,0);
  EditField(h1,v,50,"8",Normal,vra8,false,0);
  EditField(h2,v,50,"9",Normal,vra9,false,0);*/
  Tile(2,120,true,"2",Math);
  StaticText(h=46,v=27,"Товар",false);
  StaticText(h+=64,v=27,"Товар",false);
  StaticText(h+=69,v,"На кол.",false);
  StaticText(248,v,"Колонка",false);
  h = 10; v=v+20; l = 30;
  MatrixBegin(h,v,h+240+11*l,-10,-,4999);
  MatCol(1,h=30,"Код",0,CodeType,false,SetSClass);
  MatCol(1,h=94,"Группа",0,ITCode,false,ITSClass);
  MatCol(1,h+=70,"Скидка",0,StaffCode,false,StaffSClass);
  MatCol(1,h+=70,"0",0,vra0,false,0);
  MatCol(1,h+=l,"1",0,vra1,false,0);
  MatCol(1,h+=l,"2",0,vra2,false,0);
  MatCol(1,h+=l,"3",0,vra3,false,0);
  MatCol(1,h+=l,"4",0,vra4,false,0);
  MatCol(1,h+=l,"5",0,vra5,false,0);
  MatCol(1,h+=l,"6",0,vra6,false,0);
  MatCol(1,h+=l,"7",0,vra7,false,0);
  MatCol(1,h+=l,"8",0,vra8,false,0);
  //MatCol(1,h+=l,"9",0,vra9,false,0);
	MatCol(1,h+=l,"Object",0,MtObject,false,ObjPROMOSClass);
  EndMatrix;
 	
  SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm"); // edit ----------Dima 26.11.2014

  EndWindow;
end;

window LoyPointRedeemDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs;
  WindowBegin("Использование накопительных баллов",LoyPointRedeemDClass,CGview,-);
  UseView(LoyPointsRedeemVc);
  SetWRect(20,80,470,457);
  v = 20; h=70; h2 = h + 150; h3 = h + 281; vs=20;
  EditField(h,v=6,80,"Уров.карты",Normal,LCMLevel,false,LCMemberLevelSClass);
  EditField(h2,v, 60,"Баллы",Normal,Points,true,0);
  EditField(h3,v, 60,"Сумма",Normal,Amount,true,0);
  EditField(h,v+=vs, -40,"Коммент.",Normal,Comment,false,0);
  CheckBox(h,v+=vs,0,"Рассчитывать оплату до начисления скидки",PayBefReb);// Edit ************************** Tuesday, 26 February 2013 10:13:11
  MatrixBegin(h=8,v+=40,-31,-10,-,199);
  MatCol(1,32,"Код",0,CodeType,false,SetSClass);
  MatCol(1,104,"Группа",0,ITCode,false,ITSClass);
  MatCol(1,194,"Баллы",0,Points,true,0);
  MatCol(1,274,"Сумма",0,Amount,true,0);
  EndMatrix;
  EndWindow;
end;


window TestDelAllItButtonVClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer,iPhone")
begin
  real h,h2,v,vs;
  WindowBegin("Удалить все записи?",TestDelAllItButtonVClass,CGother,RcType);
  SetWRect(20,80,420,310);
  Modality(kModalityGlobal);
	StaticText(100,20,"Действительно удалить все записи?",false);
    ColourPushButton(h=30,v+=40,h+165,v+48,"TestDelAllItButtonVClassClose","Отмена",2);
    ColourPushButton(h+=180,v,h+165,v+48,"IVDClassTouchScreenDeleteAllOk","Удалить",1);
  EndWindow;
end;

window ChangeAllBrandBPIBrandVClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vs;
  WindowBegin("Заменить бренд",ChangeAllBrandBPIBrandVClass,CGMnt,RcType);
  SetWRect(20,80,420,310);
  h = 150;
  v = 20;
  EditField(h,v, 60,"Бренд",Normal,f1,true,BPIBrandSClass);
  EditField(h,v+=20, 60,"Заменить на бренд",Normal,f2,true,BPIBrandSClass);
  EndWindow;
end;







window Replace3LevCatinGlItemsVClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vs;
  WindowBegin("Заменить 3 категорию",Replace3LevCatinGlItemsVClass,CGMnt,RcType);
  SetWRect(20,80,420,310);
  h = 150;
  v = 20;
  EditField(h,v, 100,"Заменить с: ",Normal,f1,true,BtrxThirdLevelCatSClass);
  EditField(h,v+=20, 100,"Заменить на:",Normal,f2,true,BtrxThirdLevelCatSClass);
	CheckBox(h-80,v+=20,0,"Удалить 3 категорию которая заменена",flags[1]); 
  EndWindow;
end;








window LocLoyPointRedeemDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vs;
  WindowBegin("Использование накопительных баллов по магазину",LocLoyPointRedeemDClass,CGview,-);
  UseView(LocLoyPointsRedeemVc);
  SetWRect(20,80,470,457);
  v = 20; h=70; h2 = h + 150; h3 = h + 341; vs=20;
  EditField(h,v=6, 60,"Магазин",Normal,Location,false,LocationSClass);
  EditField(h2,v,80,"Уров.карты",Normal,LCMLevel,false,LCMemberLevelSClass);
  EditField(h,v+=vs, 60,"Баллы",Normal,Points,true,0);
  EditField(h2,v, 80,"Сумма",Normal,Amount,true,0);
  EditField(h,v+=vs, -40,"Коммент.",Normal,Comment,false,0);
	CheckBox(h,v+=vs,0,"Рассчитывать оплату до начисления скидки",PayBefReb);// Edit ************************** Tuesday, 26 February 2013 10:13:11
  MatrixBegin(h=8,v+=40,-31,-10,-,199);
  MatCol(1,32,"Код",0,CodeType,false,SetSClass);
  MatCol(1,104,"Группа",0,ITCode,false,ITSClass);
  MatCol(1,194,"Баллы",0,Points,true,0);
  MatCol(1,274,"Сумма",0,Amount,true,0);
  EndMatrix;
  EndWindow;
end;

window LoyaltyPaymentNPTSSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,hm,l,v,v3,vm,vs;
  WindowBegin("Платеж накопительными баллами",LoyaltyPaymentNPTSSClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(80,200,600,480);
  vs = 20;
  EditFieldTLX(h=340,v=6,150,"Баланс",M4Val,viewonly,100,30,patM4black,vals1,true,0);
  if(currentcompany==25)then begin
  	EditFieldTLX(h,v+=40,150,"Использовать баллов",M4Val,Normal,100,30,patM4black,vals0,true,0);
  end else begin
  	EditFieldTLX(h,v+=40,150,"Использовать баллов",M4Val,viewonly,100,30,patM4black,vals0,true,0);
  end;
  v=v+40;
  EditFieldTLX(h,v+=40,150,"Будут зачисленны как",M4Val,viewonly,100,30,patM4black,vals2,true,0);

  v3 = 33; vs = 37; h3 = 210; h4 = 400; hm = 330;

  vm = -160; vs = 52; h2 = 55; v3 = 48; l = 57;

  v = 10;
  ColourPushButton(-450,v+4*vs,-450+2*h2,v+4*vs+v3,"CancelAndOverrideLogout","Отмена<BR>F2",20);
  ColourPushButton(-320,v+4*vs,-320+2*h2,v+4*vs+v3,"ProceedLoyaltyPaymentNPTSSClass","Продолжить<BR>F1",20);


 /* vm = -160; l = 57;
  v = 10;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad1","1_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad2","2_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad3","3_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad4","4_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad5","5_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad6","6_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad7","7_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad8","8_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad9","9_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyDel","Del",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad0","0_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"IVDClassToolKeyPadPoint",".",2);
  v = v+vs;
  h = hm; ColourPushButton(h,v,h+3*h2,v+v3,"NPTSPaymentToolKeyEnter","Ввод",2);*/
  EndWindow;
end;

window LoyaltyCardLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Накопительные карточки",LoyaltyCardLClass,CGmlist,-);
  SetWRect(64,80,749,298);
  SpawnClass(LoyaltyCardDClass);
  Sizeable(-1,-1,0,0);
  UseView(LoyaltyCardVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"№",SerNr,false,SerNr);
  RlColKey(124,124,"Клиент",CustCode,false,CustCode);
  RlColKey(204,204,"Наименов.",CustName,false,CustName);
  RlCol(-240,-240,"Действ-на с",StartDate,true);
  RlCol(-160,-160,"Действ-на до",ExpiryDate,true);
  RlColKey(-80,-80,"Баллов до",PointsTo,true,PointsTo);
  SearchField("Найти");
  EndWindow;
end;

window LoyaltyCardDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v,vm,vs;
  WindowBegin("Накопительная карточка",LoyaltyCardDClass,CGview,-);
  SetWRect(64,80,640,230);
  FormName(LoyaltyCardForm);
  UseView(LoyaltyCardVc);
  ActiveFieldOnNew("CustCode");
  v = 16; vs = 20; h = 120; h2 = 300; h3 = 440;
  EditField(h,vm=v, 150,"№",St_i,SerNr,false,0);
  EditField(h,v+=20,80, "Клиент",Normal,CustCode,false,CUSClass);
  EnterSkip(StartDate);
  EditField(h2,v,-40, "Наименование",Normal,CustName,false,0);
  EditField(h,v+=20,70,"Действ-на с",Normal,StartDate,false,PasteCurDate);
  EditField(h2,v,70,"Действ-на до",Normal,ExpiryDate,false,PasteCurDate);
  EditField(h,v+=20,80,"Прогр. лояльности",Normal,LCMLevel,false,LCMemberLevelSClass);
  if(usercanaction("AllowChangeLoyaltyPoints",false))then begin
  		EditField(h2,v,70,"Накопл. баллы",Normal,PointsBalance,true,0);// Edit ************************** Wednesday, 27 February 2013 10:06:26
  end else begin
  		EditField(h2,v,70,"Накопл. баллы",viewonly,PointsBalance,true,0);
  end;
  EditField(h3,v,-40,"Баллов до",Normal,PointsTo,false,LoyaltyCardSClass);
   if(usercanaction("AllowChangeLoyaltyPoints",false))then begin
		EditField(h,v+=20,80,"Начальные баллы",Normal,StartBalance,false,0);
		EditField(h2,v,80,"Скидочная матр.",Normal,RebCodeCRM,false,0);
		EditField(h,v+=20,-20,"Связанные сч/ф",Normal,IVSerNr,false,0);
		EditField(h,v+=20,-20,"Компании сч/ф",Normal,CompNr,false,0);

		EditField(h,v+=20,70,"Уровень cashback (в баллах)",Normal,CashbackLevelPoints,true,0); //Edit***************************Sasha2,10:12 23.06.2017
  	EditField(h,v+=20,70,"Суммарно накоплено баллов",Normal,PointsBalanceTotal,true,0); //Edit***************************Sasha2,10:12 23.06.2017
  end else begin
  	EditField(h,v+=20,80,"Начальные баллы",ViewOnly,StartBalance,false,0);
  	EditField(h,v+=20,-20,"Связанные сч/ф",ViewOnly,IVSerNr,false,0);
  	EditField(h,v+=20,-20,"Компании сч/ф",ViewOnly,CompNr,false,0);
  	EditField(h,v+=20,70,"Уровень cashback (в баллах)",ViewOnly,CashbackLevelPoints,true,0); //Edit***************************Sasha2,10:12 23.06.2017
  	EditField(h,v+=20,70,"Суммарно накоплено баллов",ViewOnly,PointsBalanceTotal,true,0); //Edit***************************Sasha2,10:12 23.06.2017
  end;
  EditField(h,v+=20,70,"CRMID",ViewOnly,CRMid,true,0); //Edit***************************Sasha2,10:12 23.06.2017

  CheckBox(h,v+=20,0,"Закрыта",Closed);
  SpecialMenu("Привязать счет-фактуру",'',0,"LinkIVDsm");
  EndWindow;
end;

window PLLClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Цены",PLLClass,CGmlist,-);
  SpawnClass(PLDClass);
  SetWRect(64,80,609,320);
  Sizeable(-1,-1,0,0);
  UseView(PLVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,2,"Товар",ArtCode,false,ArtCode);
  RlColKey(100,100, "Прейскурант",PLCode,false,PLCode);
  RlCol(180,180,"Клиент",CustCode,false);
  RlColKey(240,240, "Сер.ном.",SerialNr,false,SerialNr);
  RlColKey(300,300, "Комментарий",Comment,false,Comment);
  RlCol(-110,-80,"Вал.",CurncyCode,true);
  RlCol(-80,-30,"Цена",ExVatPrice,true);
  SearchField("Найти");
  EndWindow;
end;

window PLDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Цена",PLDClass,CGview,-);
  SetWRect(64,80,509,330);
  UseView(PLVc);
  v = 10; vs = 20; h = 120;
  EditField(h,v, 100,"Код товара",Normal,ArtCode,false,INSClass);
	EditField(h+200,v, 100,"Серийный номер",Normal,SerialNr,false,SerialNrSClass);// Edit ************************** Friday, 22 March 2013 10:14:04
	EditField(h+200,v+vs,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
  EditField(h,v+=vs,50,"Прейскурант",Normal,PLCode,false,PLDefSClass);
  EditField(h,v+=vs,307,"Комментарий",Normal,Comment,false,0);
  EditField(h,v+=vs ,70,"Цена",Normal,ExVatPrice,true,0);
  if (HasModNL) then begin
  EditField(h,vm=(v+=vs),70,"Счет реализации",Normal,SalesAcc,false,AccSClass);
  SpecialMenu("Проверить историю",'',0,"CheckPLRhistDsm");
end;

  if (IsEnterprise or HasStandardCRM) then begin
    EditField(h,v+=vs,70,"Клиент",Normal,CustCode,false,CUSClass); 
end;
  if (IsEnterprise) then begin
    EditField(h,v+=vs ,70,"Стоимость",Normal,CostPrice,true,0); 
    EditField(h,v+=20,70,"Обратная покупка счет начис.",Normal,BBVarAcc,false,AccSClass);
  end;
  if (IsEnterprise or HasStandardCRM) then begin
    CheckBox(80,v+=30,0,"Исп. эту цену, не исп. другую калькуляцию цены",NoOtherPricing); 
    CheckBox(80,v+=16,0,"Не пересчитывать",DonotRecalculate); 
  end;
  if (IsEnterprise) then begin
    CheckBox(80,v+=16,0,"Генер. транз. обр. покупки",BBGenTrans); 
  end;
  EndWindow;
end;

window StockMovDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,v,vm,vs;
  Integer tilenr,f,flipnr;
  
  WindowBegin("Перемещение складированных товаров",StockMovDClass,CGview,-);
  if (HasJewelleryInterface) then begin
    SetWRect(20,80,850,400);
  end else begin
  SetWRect(20,80,700,400);
  end;
  Sizeable(-1,-1,0,0);
  UseView(StockMovVc);
  ActiveFieldOnNew("SentTransDate");      
  Tile(0,90,false,"",TransDate);
	v = 6; vs = 20; h = 110; h2 = 300; h3 = 500; h4 = 610;
	if(CurrentCompany==28)then begin
		v = 6; vs = 20; h = 70; h2 = 260; h3 = 460; h4 = 610;
	end;
  EditField(h,v,80, "Номер",Normal,SerNr,false,TSerSClass);
  CheckBox(h2,v,0,"Зарезервировано",Reserved);
  EditField(h3,v,80,"Причина",Normal,Reason,false,StandProblemsSClass);
	if(CurrentCompany==28)then begin
		EditField(h4,v,80,"GRR №:",Normal,GBRCode,false,0);
	end;
  EditField(h,v+=vs,80,"Дата заказа",Normal,OrdTransDate,false,PasteCurDate);
  EditField(h2,v,80,"Дата отправки",Normal,SentTransDate,false,PasteCurDate);
  EditField(h3,v,80,"Дата получения",Normal,TransDate,false,PasteCurDate);
	if(CurrentCompany==28)then begin
		EditField(h4,v,80,"PO №:",Normal,PRCode,false,0);
	end;
  EditField(h,v+=vs,80, "Со склада",Normal,FrLocation,false,LocationSClass);
  EditField(h2,v,80,"через склад",Normal,ThrouLocation,false,LocationSClass);
  EditField(h3,v,80,"на склад",Normal,ToLocation,false,LocationSClass);
	if(CurrentCompany==28)then begin
		EditField(h4,v,80,"Ref PR №:",Normal,RfPRCode,false,0);
	end;
  tilenr = 1;
  if (IsEnterprise) or (HasATOL==false) then begin 
    TileButton(tilenr,"Позиции"); tilenr = tilenr + 1; 
  end;
  if (HasObjects) then begin
    TileButton(tilenr,"Объекты"); tilenr = tilenr + 1; 
  end else begin
    TileButton(tilenr,"Коммент."); tilenr = tilenr + 1; 
  end;
  TileButton(tilenr,"Товары"); tilenr = tilenr + 1; 
  if (HasMultiCurrency or HasBase2) then begin
    TileButton(tilenr,"Валюта"); tilenr = tilenr + 1; 
  end;
  TileButton(tilenr,"Длит-ти"); tilenr = tilenr + 1; 
  TileButton(tilenr,"Фрахт"); tilenr = tilenr + 1; 
  if (CurrentCompany==25) then begin
    TileButton(tilenr,"Coin детали"); tilenr = tilenr + 1;
  end;
  tilenr = 1;
  if (IsEnterprise) or (HasATOL==false) then begin 
    Tile(tilenr,60,false,tilenr,FrPos); tilenr = tilenr + 1;
  EditField(h,v=6,80, "С места",Normal,FrPos,false,UsedPosSClass);
  EditField(h2,v,80,"на место",Normal,ToPos,false,FreePosSClass);
  EditField(h3,v,80,"Для производства",Normal,ProdSerNr,false,ProdSClass);
  EditField(h3,v+=vs,150,"Маршрут",Normal,Sorting,false,DelRouteSClass);
  //CheckBox(h,v,0,"Вручную",ManualPick);
  //CheckBox(h,v+=16,0,"Послать на очередь погрузчика",ToForkLiftQue);
  end;
  Tile(tilenr,70,false,tilenr,Comment); tilenr = tilenr + 1;
  v = 6;
  if (HasObjects) then begin
    EditField(h,v,-20,"Объекты",Normal,Objects,false,ObjSClass); 
    v = v + vs;
  end;
  EditField(h,v,-20,"Коммент.",Normal,Comment,false,0); 
  EditField(h,v+=vs,135,"Оф. серийн. номер",Normal,OfficialSerNr,false,LegalInvNrSClass);
  EnterSkip(Math);
  Tile(tilenr,79,true,tilenr,Math); tilenr = tilenr + 1;
  v = 24;
  MatrixBegin(4,v,-50,-50,-,999);  
  Flip(0);
  flipnr = 1;
  if (HasJewelleryInterface) then begin
    MatCol(1,24,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
    EnterSkip(Quant);
    MatCol(1,130,"Товар",0,ArtCode,false,INSClass); 
    Flip(flipnr); flipnr = flipnr + 1;
    if (HasVarieties) then begin
    MatCol(1,200,"Треб. кол-во",0,OrdQuant,true,MATVARINSClass); 
    end else begin
      MatCol(1,200,"Треб. кол-во",0,OrdQuant,true,0); 
    end;
    MatCol(1,250,"Отправ. кол-во",0,SentQuant,true,0); 
    MatCol(1,300,"Получ. кол-во",0,Quant,true,0); 
    MatCol(1,350,"Описание",0,Spec,false,0); 
  end else begin
		if(CurrentCompany==28) then begin
			MatCol(1,24,"Товар",0,ArtCode,false,INSClass);
				Flip(flipnr);  flipnr = flipnr + 1;
				if (HasVarieties) then begin
					MatCol(1,106,"Треб.кол.",0,OrdQuant,true,MATVARINSClass);
				end else begin
					MatCol(1,106,"Треб.кол.",0,OrdQuant,true,0); 
				end;
			MatCol(1,153,"Отпр.кол.",0,SentQuant,true,0);
			MatCol(1,210,"Получ.кол.",0,Quant,true,0);
			MatCol(1,257,"Наименование",0,Spec,false,0);
		end else begin
			MatCol(1,24,"Товар",0,ArtCode,false,INSClass);
				Flip(flipnr);  flipnr = flipnr + 1;
				if (HasVarieties) then begin
			MatCol(1,86,"Треб.кол.",0,OrdQuant,true,MATVARINSClass);
				end else begin
					MatCol(1,86,"Треб.кол.",0,OrdQuant,true,0); 
				end;
			MatCol(1,148,"Отпр.кол.",0,SentQuant,true,0);
			MatCol(1,210,"Получ.кол.",0,Quant,true,0);
			MatCol(1,272,"Наименование",0,Spec,false,0);
		end;
  end;
	if (UserCanAction("ViewMoneyInf",true))then begin 
  MatCol(1,-260,"Старая цена",0,OldPrice,true,0);
  MatCol(1,-160,"Накл. расх.",0,ExtraSCost,true,0);
  MatCol(1,-80,"Новая цена",0,NewPrice,true,0);
	end;
  Flip(flipnr); flipnr = flipnr + 1;
  if (HasVarieties) then begin
  MatCol(1,86,"Треб.кол.",0,OrdQuant,true,MATVARINSClass);
  end else begin
    MatCol(1,86,"Треб.кол.",0,OrdQuant,true,0); 
  end;
  MatCol(1,148,"Отпр.кол.",0,SentQuant,true,0);
  MatCol(1,210,"Получ.кол.",0,Quant,true,0);
  MatCol(1,272,"Наименование",0,Spec,false,0);
	if (UserCanAction("ViewMoneyInf",true))then begin 
  MatCol(1,-260,"Старая цена",0,SentOldPrice,true,0);
  MatCol(1,-160,"Накл. расх.",0,SentExtraSCost,true,0);
  MatCol(1,-80,"Новая цена",0,SentNewPrice,true,0);
	end;
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,86,"Наименование",0,Spec,false,0);
  if (HasObjects) then begin
  MatCol(1,-380,"Объекты",0,Objects,false,ObjSClass);
  end;
  if (HasSerialNumbers) then begin
  MatCol(1,-280,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  end;
	if (UserCanAction("ViewMoneyInf",true))then begin 
  MatCol(1,-140,"Отпускн. цена",0,BasePrice,true,0);
  MatCol(1,-40,"Коэфф.",0,Coefficient,false,0);
	end;
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,86,"Наименование",0,Spec,false,0);
  if (CurrentCompany==25) then begin
    MatCol(1,-370,"Штрих-код",0,BarCode,false,0); 
  end;
  if (HasSerialNumbers) then begin
    MatCol(1,-280,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  end;
  MatCol(1,-135,"Ширина",0,UnitXval,true,0);
  MatCol(1,-90,"Высота",0,UnitYval,true,0);
  MatCol(1,-45,"Глубина",0,UnitZval,true,0);
  if (IsEnterprise) then begin
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,86,"Наименование",0,Spec,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-260,"FIFO",0,FIFORowVal,true,0); end;
  MatCol(1,-180,"С места",0,FrPosCode,false,UsedPosSClass);
  MatCol(1,-90,"На место",0,ToPosCode,false,FreePosSClass);
  end;
  DeleteRowTest;
  EndMatrix;
  vs = 20;
  v = 18; 
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
      v = v + vs;
    end;
  end;
  CheckBox(20,-52,0,"Подтверждено",OrdFlag);
  CheckBox(20,-36,0,"Отправлено",SentOKFlag);
  CheckBox(20,-20,0,"Получено",OKFlag);
	if(currentcompany==28)then begin
		EditField(200,-52,100,"Issued By",Normal,IssuedBy,true,UserSClass);
		EditField(400,-52,100,"Received By",Normal,ReceivedBy,true,UserSClass);
		EditField(600,-52,100,"Completed By",Normal,CompletedBy,false,UserSClass);
		EditField(400,-36,100,"Confirmed By",Normal,ConfirmedBy,false,UserSClass);
		EditField(600,-36,100,"TRNumber",Normal,TRNumber,false,0);
	end;
  EditField(170,-20,62,"Отпр. к-во",Normal,TotSentQty,true,0);
  EditField(310,-20,62,"Получ. к-во",Normal,TotQty,true,0);
  EditField(550,-20,100,"Неучт. накладные расходы",Normal,OtherExtraCosts,false,0);
  if (HasMultiCurrency or HasBase2) then begin
    Tile(tilenr,70,false,tilenr,FrRate); tilenr = tilenr + 1;
    h1 = 110; vs = 20;
    if (HasBase2) then begin
      h1 = h1 + 20;
    end;
    EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); 
    if (HasMultiCurrency) then begin
      EditField(h2,v,50,"Курс",Normal,FrRate,true,0); 
      EditField(h2+65,v,50,":",Normal,ToRateB1,true,0); 
      if (HasBase2) then begin
        StaticText(h2+125,v+14,"Баз. валюта 1",false); 
        EditField(h1,v+=vs,50,"Баз. валюта 1",Normal,BaseRate1,true,0); 
        EditField(h2+65,v,50,":",Normal,ToRateB2,true,0); 
        StaticText(h2+125,v+14,"Баз. валюта 2",false); 
        EditField(h1,v+=vs,50,"Баз. валюта 2",Normal,BaseRate2,true,0); 
      end else begin
        StaticText(h2+125,v+14,"Баз. валюта",false); 
      end;
    end else begin
      EditField(h1,v+=vs,50,"Баз. валюта 1",Normal,BaseRate1,true,0); 
      EditField(h1,v+=vs,50,"Баз. валюта 2",Normal,BaseRate2,true,0); 
    end;
  end;
  Tile(tilenr,110,false,tilenr,PlanSendDate); tilenr = tilenr + 1;
  vs = 20; h1 = 130; h2 = 340; h3 = 590;//##cc 
  EditField(h,v=6,80,"План. дата отпр.",Normal,PlanSendDate,false,PasteCurDate);
  EnterSkip(PlanSendTime);
  EditField(h2,v,40,"План. длит., дней",ViewOnly,PlanDurationDays,false,0);
  EditField(h,v+=vs,80,"План. время отпр.",Normal,PlanSendTime,false,PasteCurTime);
  EnterSkip(PlanArrDate);
  EditField(h2,v,80,"План. длит., часов",ViewOnly,PlanDurationTime,false,0);
  EditField(h3,v=6,80,"План. дата прибытия",Normal,PlanArrDate,false,PasteCurDate);
  EditField(h3,v+=vs,80,"План. время прибытия",Normal,PlanArrTime,false,PasteCurTime);
  EditField(h,vm=(v+=32),80,"Фактич. дата отпр.",Normal,ActSendDate,false,PasteCurDate);
  EnterSkip(ActSendTime);
  EditField(h2,v,40,"Фактич. длит., дней",ViewOnly,ActDurationDays,false,0);
  EditField(h,v+=vs,80,"Фактич время отпр.",Normal,ActSendTime,false,PasteCurTime);
  EnterSkip(ActArrDate);
  EditField(h2,v,80,"Фактич. длит., часов",ViewOnly,ActDurationTime,false,0);
  EditField(h3,v=vm,80,"Фактич. дата прибытия",Normal,ActArrDate,false,PasteCurDate);
  EditField(h3,v+=vs,80,"Фактич. время прибытия",Normal,ActArrTime,false,PasteCurTime);
  Tile(tilenr,110,false,tilenr,FreightCode); tilenr = tilenr + 1;
  vs = 20; h2 = 255;
  EditField(h=130,v=6,60,"Трансп. компания",Normal,FreightCode,false,FreightCompanySClass);
  EditField(h2,v,-40,"ИНН",Normal,FreightCompanyRegNr,false,0);
  EditField(h,v+=vs,-40,"Название",Normal,FreightCompany,false,0);
  EditField(h,v+=vs,-40,"Инф-ия о машине",Normal,TruckInfo,false,0);
  EditField(h,v+=vs,-40,"Водитель",Normal,Driver,false,0);
  EditField(h,v+=vs,-40,"CMR",Normal,CMRText,false,0);
  if (CurrentCompany==25) then begin
    Tile(tilenr,110,false,tilenr,FileNameCoin); tilenr = tilenr + 1;
    ButtonFrame(h=80,v=35,150,3,"Тип Coin");
    RadioButton(h,v,0,0,"Обычный",TypeCoin);
    RadioButton(h,v+=16,1,0,"Брак",TypeCoin);
    RadioButton(h,v+=16,2,0,"Недостача",TypeCoin);
		RadioButton(h,v+=16,3,0,"Перемещение между магазинами",TypeCoin);
		RadioButton(h,v+=16,4,0,"Лишний товар",TypeCoin);
		RadioButton(h,v+=16,5,0,"Перемещение по FOB",TypeCoin);
    CheckBox(h,v+=20,0,"Отправить Coin",SentCoin);
   
    EditField(h2=400,vm=30,150,"Дата отправки",Normal,SentDateCoin,false,0);
    EditField(h2,vm+=20,150,"Файл",Normal,FileNameCoin,false,0);
    EditField(h2,vm+=20,150,"Pack List",Normal,TransBillCoin,false,TransportBillSClass);
  end;
  SpecialMenu("Стоимость в старой цене за единицу",'=',0,"StockMovFillFIFODsm");
  SpecialMenu("Статус товара",'I',1,"ItemStatusStockMovDsm");// Edit ************************** Wednesday, 22 May 2013 15:42:04
  SpecialMenu("Поиск товара",'f',1,"ItemSearchDsm");
	SpecialMenu("Выгрузиь таблицу в Exel",' ',1,"ExportToExcelStockMoveDsm");
  if (HasModNL) then begin
  SpecialMenu("Открыть запись операции отправки",' ',2,"OpenTRFromStockMovSent");
  SpecialMenu("Открыть запись операции получения",'t',3,"OpenTRFromStockMov");
  end;
  if (IsEnterprise) then begin 
    SpecialMenu("Контроль качества",'u',2,"QualConFromStockMovDsm");
    SpecialMenu("Розничные цены товаров",' ',2,"StockMovPricingDsm");
    SpecialMenu("Статус перемещения",' ',2,"StockMovCostSumDsm");
    SpecialMenu("Pack List",' ',8,"PackListSMDsm");// Edit ************************** Tuesday, 1 October 2013 10:56:40
    SpecialMenu("Отчет по траку",' ',8,"PackListReportDsm");
    SpecialMenu("Распечатать этикетки",'e',0,"PrintLabRecDsm"); //Edit***************************Sasha2,12:54 24.12.2015
  end;
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);
  if(usercanaction("AllowBackStockMov",false))then begin
		SpecialMenu("Создать обратное перемещение",'',2,"BackStockMovDsm");// Edit ************************** Thursday, 28 March 2013 17:03:51
  end;
  
  EndWindow;
end;




window SDDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,v,vm,vs;
  Integer f,flipnr;

  WindowBegin("Списание со склада",SDDClass,CGview,-);
  SetWRect(20,80,560,350);
  Sizeable(-1,-1,0,0);
  FormName(SDForm);
  UseView(SDVc);
  ActiveFieldOnNew("TransDate");
  vs = 20; h2 = 260; h3 = 430; h4 = 580;
  EditField(h=80,v=6, 82,"Номер",Normal,SerNr,false,TSerSClass);
  EditField(h2,v,82,"Дата операции",Normal,TransDate,false,PasteCurDate);
  if (IsEnterprise) then begin
    EditField(h3,v,100,"Причина",Normal,Reason,false,StandProblemsSClass);
    CheckBox(h4,v,0,"OK",OKFlag);
		CheckBox(h4,v+2*vs,0,"Резерв",Reservf);
  end;
  if (IsEnterprise) then begin
    EditField(h,v+=vs,82,"Счёт оприх.",Normal,CostAcc,false,AccSClass);
    EditField(h2,v,82,"Класс",Normal,SDClass,false,OrderClassSClass);
    EditField(h3,v,100,"Ссылка",Normal,RefStr,false,0);
    v = v + vs;
  end else begin
    if (HasModNL) then begin
      EditField(h3,v,82,"Счёт издержек",Normal,CostAcc,false,AccSClass);         
    end;
    CheckBox(h4,v,0,"OK",OKFlag);
		CheckBox(h4,v+2*vs,0,"Резерв",Reservf);

    v = v + vs;
  end;
  if (HasMultiLocations) then begin
    EditField(h,v,82,"Склад",Normal,Location,false,LocationSClass);
  end;
  if (HasAdvancedAccounting) then begin
    EditField(h2,v,82,"Кратк. код",Normal,ACShort,false,ACShortSClass);
  end;
  if (HasModTS or IsEnterprise) then begin
    EditField(h3,v,100,"Проект",Normal,PRCode,false,PRSClass);
  end;
  v = v + vs;
  if (HasApprovals) then begin
    SoftEditField(h,v,82,"Статус утв.",ViewOnly,"AcceptanceStatusFlag",false,0,M4Str,255);
  end;

  if (HasObjects) then begin
    EditField(h2,v,270,"Объекты",Normal,Objects,false,ObjSClass);
  end;
  EnterSkip(Math);
//  CheckBox(450,6,0,"OK",OKFlag);
  v = v + 40;
  if (IsEnterprise) then begin
    vm = v + 1;
    MatrixBegin(4,v,-50,-35,-,1000);
  end else begin
    MatrixBegin(4,v,-40,-25,-,1000);
  end;
  Flip(0);
  if (HasJewelleryInterface) then begin
    MatCol(1,24,"Серийный номер",0,SerialNr,false,SerialNrSClass);
    EnterSkip(Quant);
    MatCol(1,130,"Товар",0,ArtCode,false,INSClass);
    if (HasVarieties) then begin
      MatCol(1,192,"К-во",0,Qty,true,MATVARINSClass);
    end else begin
      MatCol(1,192,"К-во",0,Qty,true,0);
    end;
    MatCol(1,254,"Описание",0,Spec,false,0);
  end else begin
    MatCol(1,32,"Товар",0,ArtCode,false,INSClass);
//  MatCol(1,94,"Var",0,VARList,false,VARSClass);
//  MatCol(1,144,"Qty",0,Qty,true,0);
		if(currentCompany==28) then begin
			if (HasVarieties) then begin
				MatCol(1,124,"К-во",0,Qty,true,MATVARINSClass);
			end else begin
				MatCol(1,124,"К-во",0,Qty,true,0);
			end;
			MatCol(1,164,"Описание",0,Spec,false,0);
		end else begin 	
			if (HasVarieties) then begin
				MatCol(1,94,"К-во",0,Qty,true,MATVARINSClass);
			end else begin
				MatCol(1,94,"К-во",0,Qty,true,0);
			end;
			MatCol(1,154,"Описание",0,Spec,false,0);
		end;	
  end;
  flipnr = 1;
  Flip(flipnr); flipnr = flipnr + 1;
  if (HasJewelleryInterface==false) and (HasSerialNumbers) then begin
    MatCol(1,-280,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  end;
  if (HasMultiLocations) then begin
    MatCol(1,-160,"Местопол.",0,Location,false,LocationSClass);
  end;
  if (HasPositions) then begin
    MatCol(1,-100,"Позиция",0,PosCode,false,UsedPosSClass);
  end;
  if (IsEnterprise) then begin
		if (UserCanAction("ViewMoneyInf",true))then begin
			MatCol(1,-40,"Коэф.",0,Coefficient,false,0);
		end;
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(1,-270,"Кратк. код",0,ACShort,false,ACShortSClass);
		if (UserCanAction("ViewMoneyInf",true))then begin
			MatCol(1,-200,"Счёт стоим.",0,CostAcc,false,AccSClass);
		end;
    MatCol(1,-100,"Объекты",0,Objects,false,ObjSClass);
    Flip(flipnr); flipnr = flipnr + 1;
    if (UserCanAction("ViewMoneyInf",true))then begin  
			MatCol(1,-210,"FIFO",0,FIFO,true,0);
			MatCol(1,-125,"FIFO по стр.",0,FIFORowVal,true,0);
			MatCol(1,-40,"Коэф.",0,Coefficient,true,0);
		end;
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(1,-240,"Рецепт",0,Recepy,false,RecSClass);
    if (StandardHansa==false) then begin
      MatCol(1,-180,"Проект",0,PRCodeRow,false,PRSClass);
    end;
		if (UserCanAction("ViewMoneyInf",true))then begin  
			MatCol(1,-120,"Баз. цена",0,BasePrice,true,0);
			MatCol(1,-40,"Коэф.",0,Coefficient,false,0);
		end;
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(1,-140,"Ширина",0,UnitXval,true,0);
    MatCol(1,-95,"Высота",0,UnitYval,true,0);
    MatCol(1,-50,"Глубина",0,UnitZval,true,0);
  end else begin
    if (HasModNL) then begin
      if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-200,"Счёт ст-ти",0,CostAcc,false,AccSClass); end;
    end;
      if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-100,"Стоим-ть ед.",0,FIFO,true,0); end;
  end;
  InsertRowTest;
  DeleteRowTest;
  RowMenuBegin("");         
  RowMenuItem(0,"Статус товара",'I','I',0,"ItemStatusSDDsm");         
  if (HasQualityControl) then begin
    RowMenuItem(0,"Контроль качества",'u','u',0,"QualConFromSDDsm");         
  end;
  EndRowMenu;
  EndMatrix;
  vs = 22;
  v = vm;/* 28 */
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1));
      v = v + vs;
    end;
  end;
//  CheckBox(20,-20,0,"OK",OKFlag);
  EditField(h=150,-20,70,"Общ. кол-во",ViewOnly,TotQty,false,0);
  EditField(h=290,-20,-40,"Коммент.",Normal,Comment,false,0);
/*
//oldapprovals  
  if (HasApprovals) then begin
    Tile(2,200,true,"1",AcceptanceStatus);
    if (HasApprovals) then begin
      SoftEditField(h3=-163,v=16,123,"Статус утверждения",ViewOnly,"AcceptanceStatusFlag",false,0,M4Str,255);
    end;
    ButtonFrame(h3=-163,v=16,123,6,"Статус утверждения");
    RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);
  end;
*/    
  if (HasAdvancedStock) then begin
    SpecialMenu("Статус списания со склада",'r',4,"SDStatusDsm");
  end;
  if (HasIntegratedNL) then begin
    SpecialMenu("Открыть запись операции",'t',1,"OpenTRFromSD");
  end;
  SpecialMenu("Поиск товара",'f',1,"ItemSearchDsm");
	if(currentuser=="SA") then begin
		SpecialMenu("Ручное создание поступления",' ',2,"CreatePUConsDsm"); 
	end;
  if (HasApprovals) then begin
    SpecialMenu("Запросить утверждение",' ',6,"SDSendforAcceptanceSDDsm"); 
    SpecialMenu("Отменить запрос утверждения",' ',2,"CancelApprovalRequestDsm"); 
	SpecialMenu("Выгрузить таблицу в буфер обмена",'',1,"ExportToExcelSDDsm"); // Edit ************************** BPI Baku - Irkan Ahmadov- 02, 25 06 2020y. at 11:16:38 AM
  end;
  EndWindow;
end;





window AmendLineNPTSSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,hm,l,v,v3,vm,vs;
  WindowBegin("Редактировать строку",AmendLineNPTSSClass,CGother,RcType);
//  Modality(kModalityGlobal);
  UseView(RcVc);
  SetWRect(80,200,700,520);
  vs = 20;
  EditFieldTL(h=100,v=6,70,"Товар",M4UStr,ViewOnly,20,AccStr,false,0);
  EditFieldTL(h,v+=vs,-20,"Наименов.",M4Str,Normal,255,f1,false,0);
  //if(CompanyIsJWLikeCompany(currentcompany))then begin
		//EditFieldTL(h,v+=vs,70,"К-во",M423Val,ViewOnly,0,vals0,true,0);
  //end else begin
  	EditFieldTL(h,v+=vs,70,"К-во",M423Val,Normal,0,vals0,true,0);
  //end;
  if(usercanaction("AllowEditPOSRowIV",true))then begin
		EditFieldTL(h,v+=vs,70,"Цена",M4Val,Normal,0,vals1,true,0);
		EditFieldTL(h,v+=vs,70,"Скидка",M41Val,Normal,0,vals2,true,0);
		EditFieldTL(h,v+=vs,70,"Сумма",M4Val,Normal,0,vals3,true,0);
  end else begin
		EditFieldTL(h,v+=vs,70,"Цена",M4Val,ViewOnly,0,vals1,true,0);
		EditFieldTL(h,v+=vs,70,"Скидка",M41Val,ViewOnly,0,vals2,true,0);
		EditFieldTL(h,v+=vs,70,"Сумма",M4Val,ViewOnly,0,vals3,true,0);

  end;

  v = -385; h2 = 55; v3 = 48; vs = 52;
  ColourPushButton(-580,-60,-580+3*h2,-60+v3,"CancelAndOverrideLogout","Отмена",20);
  ColourPushButton(-410,-60,-410+3*h2,-60+v3,"ProceedAmendLineNPTSSClass","Продолжить",20);

//  ColourPushButton(h=10,v=-50,h+100,v+40,"CancelAndOverrideLogout","Cancel<BR>F2",20);
//  ColourPushButton(h+=120,v,h+100,v+40,"ProceedAmendLineNPTSSClass","Proceed<BR>F1",20);
//  ColourPushButton(h+=120,v,h+100,v+40,"CashPayTouchScreenKeypad","Keypad<BR>F3",2);

  hm = 383;

  h2 = 80; v3 = 33; vs = 37; h3 = 210; h4 = 400;

  vm = -160; vs = 52; h2 = 55; v3 = 48; l = 57;
  v = v + 117+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad1","1_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad2","2_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad3","3_",2);
  h = h+l+10; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyDel","Del",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad4","4_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad5","5_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad6","6_",2);
  h = h+l+10; ColourPushButton(h,v,h+h2,v+3*v3+8,"NPTSPaymentToolKeyEnter","OK",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad7","7_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad8","8_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad9","9_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPM","+/-",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad0","0_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"IVDClassToolKeyPadPoint",".",2);

  EndWindow;
end;

window IPDClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,t,v,vm,vs;
  record CYBlock CYb;
  Integer f,flipnr;

  BlockLoad(CYb);
  WindowBegin("Платеж клиента",IPDClass,CGview,-);
	if(!UserCanAction("SimpleIPDclass",false))then begin
		SetWRect(20,80,700,380);
		Sizeable(-1,-1,0,0);
		UseView(IPVc);
		ActiveFieldOnNew("TransDate");
		h = 100; h2 = 262; h3 = 470;v = 6;
		if (HasNumberSeries) then begin
		EditField(h,v, 80,"Сер. номер",St_i,SerNr,false,TSerSClass);
		end else begin
			EditField(h,v,80,"Номер",St_i,SerNr,false,0); 
		end;
		EditField(h2,v,82,"Дата опер.",Normal,TransDate,false,PasteCurDate);
		EnterSkip(PayMode);
		if (IsEnterprise) then begin
		EditField(h3,v,-40,"Ссылка",Normal,RecNumber,false,0);
		end else begin
			CheckBox(h4=-100,v,0,"OK",OKFlag); 
		end;
		EditField(h,v+=20,30,"Способ оплаты",Normal,PayMode,false,PMSClass);
		EnterSkip(Math);
		//EditField(h2,v,80,"Комментарий",Normal,Comment,false,0);
		if(currentcompany==9)then begin
		EditField(h2,v,80,"Комментарий",Normal,Comment,false,0);
		EditField(h3,v,-40,"Подарочный ваучер",Normal,GiftVoucher,false,0);
		end else begin
		EditField(h2,v,-40,"Комментарий",Normal,Comment,false,0);
		EditField(h,v+=20,-40,"Комментарий",Normal,Comment2,false,0);
		end;
		if (IsEnterprise) then begin
		EditField(h,v+=20,80,"Код авториз.",ViewOnly,AuthorizationCode,false,0);
		EditField(h+150,v,80,"Лок. маш.",Normal,MachineName,false,LocalMachineSClass);
			CheckBox(-350,v,0,"Инф. о клиенте в записи операций",ARonTR); 
			CheckBox(h4=-100,v,0,"OK",OKFlag); 
		end;
		
		if(left(currentuser,2)=="SA")then begin
		  EditField(h,v+=20,100,"TaxTransactionCode",Normal,TaxTransactionCode,false,0);
      EditField(h,v+=20,100,"TaxTransactionDate",Normal,TaxTransactionDate,false,0);
      EditField(h,v+=20,100,"TaxParentDocument",Normal,TaxParentDocument,false,0);
		end;
		
		EnterSkip(Math);
		if (HasMultiCurrency) then begin
		EditField(-267,-21,40,"Валюта",Normal,PayCurCode,false,CurncyCodeSClass);
		end;
		EditField(-142,-21,-40,"Получено",Normal,CurPayVal,true,0);
		h=4; v=81;
		if(left(currentuser,2)=="SA")then begin
		  v=v+60;
		end;
		if (IsEnterprise or HasMultiCurrency or (HasLocalization("RUS") and HasModSL)) then begin //!!TRANSLATE
		MatrixBegin(h,v+=25,-50,-24,-,299);
		end else begin
			MatrixBegin(h,v+=25,-30,-24,-,99);
		end;
		vm = v;
		MatTypedRow(stp);
		MatOverStrike(ovst);
		Flip(0);
		if (BuildProductCode=="StandardAccounts") then begin 
			if (HasLocalization("POL")) then begin 
				MatCol(t=kReceiptRowTypeNormal,30,"№ сч/ф",0,InvoiceOfficialSerNr,false,ARSClass); 
			end else begin
		MatCol(t=kReceiptRowTypeNormal,30,"№ сч/ф",0,InvoiceNr,false,ARSClass);
			end;
		end else begin
			MatCol(t=kReceiptRowTypeNormal,30,"№ сч/ф",0,InvoiceNr,false,ARSClass); 
		end;
		EnterSkip(RecVal);
		MatCol(t,125,"Клиент",0,CustCode,false,CUSClass);
		if (BuildProductCode=="StandardAccounts") then begin 
			if (HasLocalization("POL")) then begin 
				MatCol(t=kReceiptRowTypeSettlementDiscount,30,"",0,InvoiceOfficialSerNr,false,ARSClass); 
			end else begin
		MatCol(t=kReceiptRowTypeSettlementDiscount,30,"",0,InvoiceNr,false,ARSClass);
			end;
		end else begin
			MatCol(t=kReceiptRowTypeSettlementDiscount,30,"",0,InvoiceNr,false,ARSClass); 
		end;
		MatText(t,125,"Скидка",false);
		if (HasObjects) then begin
			MatCol(t,190,"Объект",0,Objects,false,ObjSClass); 
		end;
		MatCol(t,-390,"Вал.сч/ф",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал. банка",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		if (BuildProductCode=="StandardAccounts") then begin 
			if (HasLocalization("POL")) then begin 
				EnterSkip(InvoiceOfficialSerNr);
				MatCol(t=kReceiptRowTypeWriteoff,30,"",0,InvoiceOfficialSerNr,false,ARSClass); 
			end else begin
		EnterSkip(InvoiceNr);
		MatCol(t=kReceiptRowTypeWriteoff,30,"",0,InvoiceNr,false,ARSClass);
			end;
		end else begin
			EnterSkip(InvoiceNr);
			MatCol(t=kReceiptRowTypeWriteoff,30,"",0,InvoiceNr,false,ARSClass); 
		end;
		MatText(t,125,"Списание",false); 
		MatCol(t,-460,"",0,WriteOffAcc,false,AccSClass);
		MatCol(t=kReceiptRowTypeBankFee,30,"",0,InvoiceNr,false,ARSClass);
		MatText(t,105,"Ком.банка",false);
		MatCol(t,-390,"Вал.сч/ф",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"Сумма банка",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		flipnr = 1;
		Flip(flipnr); flipnr = flipnr + 1;
		EnterSkip(PayDate);
		MatCol(t=kReceiptRowTypeNormal,200,"Текст",0,CustName,false,0);
		if (IsEnterprise) then begin
		MatCol(t,-350,"Дата оплаты",0,PayDate,false,0);
		end;
		if (HasObjects and IsEnterprise==false) then begin
			MatCol(t,190,"Объект",0,Objects,false,ObjSClass); 
		end;
		EnterSkip(RecVal);
		if (HasMultiCurrency) then begin
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		end else begin
			MatCol(t,-270,"Открыть знач. сч/ф",0,InvOutstand,false,0); 
			MatCol(t,-180,"Знач. сч/ф",0,InvVal,true,0); 
			MatCol(t,-90,"Получ. знач.",0,RecVal,true,0); 
			MatCol(t=kReceiptRowTypeWriteoff,-270,"Открыть знач. сч/ф",0,InvOutstand,false,0); 
			MatCol(t,-180,"Знач. сч/ф",0,InvVal,true,0); 
			MatCol(t,-90,"Получ. знач.",0,RecVal,true,0); 
		end;
		if (HasMultiCurrency) then begin
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,190,"Текст",0,CustName,false,0);
		MatCol(t,-350,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-310,"Сумма неопл.сч/ф",0,InvOutstand,false,0);
		MatCol(t,-220,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		end;
		if (IsEnterprise) then begin
		MatCol(t,-90,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,190,"Текст",0,CustName,false,0);
		MatCol(t,-270,"Сп.опл.",0,PayMode,false,PMSClass);
		MatCol(t,-220,"№ чека",0,ChequeNr,false,0);
		MatCol(t,-130," Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал. ",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,190,"Текст",0,CustName,false,0);
		MatCol(t,-320,"№ счета",0,OrderNr,false,ORSClass);
		MatCol(t,-230,"№ предоп.",0,CUPNr,false,ARPaySClass);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0); 
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,190,"Текст",0,CustName,false,0);
		if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
		MatCol(1,-310,"Налог",0,TaxTemplateCode,false,TaxTemplateSClass); 
		end else begin
		MatCol(1,-310,"НДС",0,VATCode,false,VATCodeSClass); 
		end;
		MatCol(t,-270,"Сумма НДС",0,VATVal,false,0);
		MatCol(t,-200,"Экстра НДС",0,TAX1Sum,false,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал. ",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,190,"Текст",0,CustName,false,0);
		MatCol(t,-260,"Объекты",0,Objects,false,ObjSClass);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,190,"Счет округл.",0,RoundOffAcc,false,AccSClass);
		MatCol(t,-360,"Округление",0,RoundOff,true,0);
		MatCol(t,-300,"Взнос",0,InstNr,false,ARInstallSClass);
		MatCol(t,-170,"Ссылка",0,rkRecNumber,false,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,190,"Дебиторы",0,ARAcc,false,AccSClass);
		MatCol(t,-320,"№ кред.договор.",0,CredManNr,false,CredManSClass);
		MatCol(t,-220,"Комментарий",0,Comment,false,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=kReceiptRowTypeNormal,200,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-410,"На р/с",0,BankVal,true,0);
	//  MatCol(t,-340,"Bank Fee",0,BankFeeVal,true,0);
		MatCol(t,-280,"Сум.бан. в вал.1",0,ToRateB1BankVal,true,0);
		MatCol(t,-210,"Сум.бан. в вал.1",0,B1BankVal,true,0);
		MatCol(t,-105,"Сум.бан. в вал.2",0,B2BankVal,true,0);
	//  MatCol(t,-200,"Fee %",0,BankFeePrc,true,0); /* What was this ?? */
	//  MatCol(t,-70,"Coef. Value",0,Coef,true,0);
		MatCol(t=kReceiptRowTypeWriteoff,-390,"Вал.",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=1,-470,"Вал.",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-430,"На р/с",0,BankVal,true,0);
		MatCol(t,-350,"Курс",0,FrRateBankVal,true,0);
		MatCol(t,-310,"К б. вал.1",0,ToRateB1BankVal,true,0);
		MatCol(t,-240,"К б. вал.2",0,ToRateB2BankVal,true,0);
		MatCol(t,-170,"Баз.вал. 1",0,BaseRate1BankVal,true,0);
		MatCol(t,-90,"Баз.вал. 2",0,BaseRate2BankVal,true,0);
		MatCol(t,-10,"Получено",0,RecVal,true,0);
			Flip(flipnr); flipnr = flipnr + 1;
		MatCol(t=1,200,"TransactionCode",0,TaxTransactionCode,true,0);
		MatCol(t,300,"TransactionDate",0,TaxTransactionDate,true,0);
		MatCol(t,400,"ParentDocument",0,TaxParentDocument,true,0);
		
		
		end else begin
			if (BuildProductCode=="StandardAccounts") then begin //!!TRANSLATE
				if (HasLocalization("RUS")) and (HasModSL) then begin //!!TRANSLATE
					Flip(flipnr); flipnr = flipnr + 1;
					MatCol(t=kReceiptRowTypeNormal,190,"Text",0,CustName,false,0); //!!TRANSLATE
					if (HasModSO) then begin
						MatCol(t,-200,"Order No.",0,OrderNr,false,ORSClass); //!!TRANSLATE
					end;
					MatCol(t,-100,"Prepayment No.",0,CUPNr,false,ARPaySClass); //!!TRANSLATE
				end;
			end;
		end;
		InsertRowTest;
		DeleteRowTest;
		EndMatrix;
		vs = 22;
		v = v + 1; 
		if (flipnr>2) then begin
			for (f=1;f<flipnr;f=f+1) begin
				VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
				v = v + vs;
			end;
		end;
		vs = 20;
	end else begin
		SetWRect(20,80,400,1000);
		//Sizeable(-1,-1,0,0);
		UseView(IPVc);
		ActiveFieldOnNew("TransDate");
		h = 100; h2 = 262; h3 = 470;v = 6;
		if (HasNumberSeries) then begin
		EditField(h,v, 80,"Сер. номер",St_i,SerNr,false,TSerSClass);
		end else begin
			EditField(h,v,80,"Номер",St_i,SerNr,false,0); 
		end;
		EditField(h2,v,82,"Дата опер.",Normal,TransDate,false,PasteCurDate);
		EnterSkip(PayMode);
		EditField(h,v+=20,30,"Способ оплаты",Normal,PayMode,false,PMSClass);
		CheckBox(h2,v,0,"OK",OKFlag); 
		EnterSkip(Math);
		EnterSkip(Math);
		EditField(-142,500,-40,"Получено",Normal,CurPayVal,true,0);
		h=4; v=81;
		if (IsEnterprise or HasMultiCurrency or (HasLocalization("RUS") and HasModSL)) then begin //!!TRANSLATE
		MatrixBegin(h,v+=25,-50,500,-,50);
		end else begin
			MatrixBegin(h,v+=25,-30,500,-,50);
		end;
		vm = v;
		MatTypedRow(stp);
		MatOverStrike(ovst);
		Flip(0);
		MatCol(t=kReceiptRowTypeNormal,30,"№ сч/ф",0,InvoiceOfficialSerNr,false,0); 
		EnterSkip(RecVal);
		MatCol(t,-150,"Получено/Выплачено",0,RecVal,true,0);
		if (BuildProductCode=="StandardAccounts") then begin 
			if (HasLocalization("POL")) then begin 
				MatCol(t=kReceiptRowTypeSettlementDiscount,30,"",0,InvoiceOfficialSerNr,false,ARSClass); 
			end else begin
		MatCol(t=kReceiptRowTypeSettlementDiscount,30,"",0,InvoiceNr,false,ARSClass);
			end;
		end else begin
			MatCol(t=kReceiptRowTypeSettlementDiscount,30,"",0,InvoiceNr,false,ARSClass); 
		end;
		MatText(t,125,"Скидка",false);
		if (HasObjects) then begin
			MatCol(t,190,"Объект",0,Objects,false,ObjSClass); 
		end;
		MatCol(t,-390,"Вал.сч/ф",0,InvCurncy,true,0);
		MatCol(t,-350,"Сумма сч/ф",0,InvVal,true,0);
		MatCol(t,-260,"Вал. банка",0,BankCurncy,true,CurncyCodeSClass);
		MatCol(t,-220,"На р/с",0,BankVal,true,0);
		MatCol(t,-130,"Вал.",0,RecCurncy,true,CurncyCodeSClass);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		if (BuildProductCode=="StandardAccounts") then begin 
			if (HasLocalization("POL")) then begin 
				EnterSkip(InvoiceOfficialSerNr);
				MatCol(t=kReceiptRowTypeWriteoff,30,"",0,InvoiceOfficialSerNr,false,ARSClass); 
			end else begin
		EnterSkip(InvoiceNr);
		MatCol(t=kReceiptRowTypeWriteoff,30,"",0,InvoiceNr,false,ARSClass);
			end;
		end else begin
			EnterSkip(InvoiceNr);
			MatCol(t=kReceiptRowTypeWriteoff,30,"",0,InvoiceNr,false,ARSClass); 
		end;
		MatText(t,125,"Списание",false); 
		MatCol(t,-460,"",0,WriteOffAcc,false,AccSClass);
		MatCol(t=kReceiptRowTypeBankFee,30,"",0,InvoiceNr,false,ARSClass);
		
		MatCol(t,-150,"Получено",0,RecVal,true,0);
		flipnr = 1;
		Flip(flipnr); flipnr = flipnr + 1;
		EnterSkip(PayDate);
		if (IsEnterprise) then begin
		end;
		if (HasObjects and IsEnterprise==false) then begin
		end;
		EnterSkip(RecVal);
		MatCol(t,-90,"Получено",0,RecVal,true,0);
		
		
		
		InsertRowTest;
		DeleteRowTest;
		EndMatrix;
		vs = 22;
		v = v + 1; 
		if (flipnr>2) then begin
			for (f=1;f<flipnr;f=f+1) begin
				VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
				v = v + vs;
			end;
		end;
		vs = 20;
	end;
	
  if (IsEnterprise) then begin
    SpecialMenu("Доб. скидку",' ',0,"CashDiscountIPDsm"); 
  end;
  SpecialMenu("Доб. спис.",' ',1,"NewWriteoffIPDsm"); 
  if (IsEnterprise) then begin
  //SpecialMenu("Выдать чек на аванс",'f',1,"FiscalAvanceDsm");// Edit ************************** BPI Ukraine - KramarAlexandr - 04, 21 01 2021 y. at 2:17:11 PM
	//SpecialMenu("Выдать чек на аванс v2",' ',1,"FiscalAvanceDsmv2");
  SpecialMenu("Добавить комиссию банка",' ',2,"NewFeeIPDsm");  
  SpecialMenu("Добавить удержания",' ',8,"IPPasteWithholdingIPDsm");
  SpecialMenu("Распределить чеки",' ',13,"DistributeChequesIPDsm"); 
  SpecialMenu("Распределить сумму",' ',3,"IPExpandIPDsm");
  SpecialMenu("Рассчитать сумму",'=',4,"CalculateFieldIPDsm");
  SpecialMenu("Списать аванс",' ',5,"WriteofPrepayIPDsm");
  SpecialMenu("Проверить сумму платежа",' ',6,"IPInfoIPDsm");  
  end;
  if (HasModNL) then begin
  SpecialMenu("Открыть запись операции",'t',9,"OpenTRFromIP");
  end;
  if (IsEnterprise) then begin
    SpecialMenu("Открыть налоговую матрицу",' ',25,"OpenVatMatrixIPDsm");  
  end;
  if (IsEnterprise) then begin
    SpecialMenu("Платёж кредитной картой",' ',15,"CCPayIPDsm");
    SpecialMenu("Выписка банка",' ',16,"BankStIPDsm");
    SpecialMenu("Распечатать ПКО-РКО",' ',8,"PrintCashInOutIPDsm");
  end;
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);  
  if (IsEnterprise) then begin
    SpecialMenu("Отменить печать чека",' ',0,"APIv2SendRollBackIPDsm");
    SpecialMenu("Создать деятельность",'c',14,"ActFromIPDsm");
    SpecialMenu("Создать приходный ордер",' ',11,"CLInFromIPDsm");
    SpecialMenu("Создать чек",' ',9,"CreateCheckIPDsm"); 
    SpecialMenu("Создать счет-фактуру на аванс",' ',7,"DownPayFromIPDsm");
    SpecialMenu("Создать E-Mail",'m',18,"CreateMailFromIPDsm");
    if (HasLocalization("UKR")) then begin
      SpecialMenu("Создать первое событие",' ',12,"FirstEventIPDsm");
    end;
    SpecialMenu("Создать коррекцию НДС книги продаж",' ',17,"VATCorrectionIPDsm");
    if (IsEnterprise) or ((HasLocalization("RUS")) and (HasModSO)) then begin //!!TRANSLATE
      SpecialMenu("Создать сч/ф на предоплату",' ',10,"IVFromPrepIPDsm");
    end;
  end;
  
  SpecialMenu("Отправить в налог погашение долга",' ',10,"SendTaxIP");
  
  EndWindow;
end;

window Attach2DClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h4,v,vs;
  WindowBegin("Фа2йл",Attach2DClass,CGview,-);
  UseView(Attach2Vc);
  SetWRect(20,80,500,300);
  vs = 20;h = 100;h2 =  330;h4 = 500; v = 6;
  EditField(h,v,100,"Номер",St_i,SerNr,false,0);
  EditField(h,v+=vs,200,"Наименование",Normal,FileName,false,0);
  EditField(h,v+=vs,200,"Размер файла",Normal,FileSize,false,0);  
  if (IsEnterprise) then begin

  EditField(h,v+=vs,200,"PackTyp",Normal,PackTyp,false,0);  
  EditField(h,v+=vs,200,"Uploading",Normal,Uploading,false,0);  
  EditField(h,v+=vs,200,"Type",Normal,Type,false,0);  
  EditField(h,v+=vs,200,"Type",Normal,ContentId,false,0);  
end;
  SpecMenuItem("Загрузить файл",' ',mOpsDownloadFile);
  EndWindow;
end;

window IN2SClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  WindowBegin("Выберите товар",IN2SClass,CGSlist,-);
  SetWRect(0,0,920,298+20);
  Sizeable(-1,-1,0,0);
  UseView(INVc);
  SpawnClass(INDClass);
  v = 24; vs = 20;
  
  StaticText(179,v-8,"Товары",false);
  StaticText(250,v-8,"Классификация",false);
  StaticText(350,v-8,"$subsetname",false);
  v = v+10;
  
  StringList(9,19,150,-9);
  RecordList(170,39,-21,-39);
  RlColKey(4,4,"Код",Code,false,DICode);
  RlColKey(75,75,"Альт. код",AlternativeCode,false,DIAlternativeCode);
  RlColKey(220,220,"Наимен.",Name,false,DIName);
  RlColKey(-350,-350,"Классификация",DispGroups,false,0);
  RlCol(-220,-220,"Цвет",Colour,false);
  RlCol(-140,-140,"Размер",Size,false);
  CalculatedColumn(-50,-50,"На складе","INSClassInStock",true); 
  // RlCol(-30,-30,"Price",UPrice1,true);
  h = 6; v = -58;
  HalPushButton(h,v,h+60,v+20,"IN2SClassTop","Наверх");
  h = h+72;
  HalPushButton(h,v,h+60,v+20,"IN2SClassBack","Назад");
  
  SearchField("Найти");
  SpecialMenu("Справка по товару",'I',0,"INStatusINSsm");
  SpecialMenu("Найти",'F',1,"INSearchSsm");
  SpecialMenu("Товары-заменители",'l',2,"AltItemINSsm");
  SpecialMenu("Сопутствующие товары",'r',2,"CrossItemINSsm");
  EndWindow;
end;

window CUNPTDSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  integer i,rwcnt;
  real h,h1,h2,h3,h4,h5,l,v,vs;
  record NPTSNewCUFieldsBlock NPTSNCUFb;
  row NPTSNewCUFieldsBlock NPTSNCUFbrw;
  WindowBegin("Контакт",CUNPTDSClass,CGview,-);
  DynamicWindow;
  SetWRect(20,80,680,441);
  Sizeable(-1,-1,0,0); 
  UseView(CUVc);
  v = 6; h = 130; l=223; vs = 20; h1=410; h2 = 340; h3 = 430; h4 = 580; h5 = 460;
  ActiveFieldOnNew("Code"); //dont change, otherwise automatic address lookup helper window wont show automatically //wns
  
 /* EditField(h,v ,   95,"Код",Normal,Code,false,TSerSClass);// Edit ************************** Thursday, 24 October 2013 15:16:39
  
  EditField(h,v+=vs,h1-h+50,"Наименов.",Normal,Name,false,0);
	CheckBox(h+350,v=20,0,"Разрешить СМС",AllowSendSMS);
	CheckBox(h+350,v=v+vs,0,"Разрешить eMail",AllowSendeMail);
	CheckBox(h+350,v=v+vs,0,"Разрешить звонок",AllowSendCall);
	CheckBox(h+350,v=v+vs,0,"Разрешить куръерскую почту",AllowSendkMail);
	
  BlockLoad(NPTSNCUFb);
  rwcnt = MatRowCnt(NPTSNCUFb);
  for (i=0;i<rwcnt;i=i+1) begin
    MatRowGet(NPTSNCUFb,i,NPTSNCUFbrw);
    EditField2(h,v+=vs,h1-h+50,NPTSNCUFbrw.FieldName,NPTSNCUFbrw.EditState,NPTSNCUFbrw.FieldName,false,0);
  end;*/
  h=h+30;
  EditField(h,v ,   95,"Код",Normal,Code,false,TSerSClass);// Edit ************************** Thursday, 24 October 2013 15:16:39
  
  EditField(h,v+=vs,h1-h+50,"Имя Фамилия Отчество",Normal,Name,false,0);
	//EditField(h,v+=(vs+10),95,"Фамилия",Normal,CRMLName,false,0);
	//EditField(h2-60,v,95,"Имя",Normal,CRMName,false,0);
	//EditField(h3 + 20,v,95,"Отчество",Normal,CRMPatr,false,0);
  EditField(h,v+=vs,h1-h+50,"Род занятий",Normal,Profesion,false,0);
  EditField(h,v+=vs,80,"Дата рождения",Normal,BirthDate,false,PasteCurDate);
  
  EditField(h,v+=vs,80,"Дата рождения супруга(ги)",Normal,SuprDate,false,PasteCurDate);
  EditField(h,v+=vs,80,"Дата свадьбы",Normal,WedDate,false,PasteCurDate);
  
	CheckBox(h+350,v=20,0,"Разрешить СМС",AllowSendSMS);
	CheckBox(h+350,v=v+vs,0,"Разрешить eMail",AllowSendeMail);
	CheckBox(h+350,v=v+vs,0,"Разрешить звонок",AllowSendCall);
	CheckBox(h+350,v=v+vs,0,"Разрешить куръерскую почту",AllowSendkMail);
	
	ButtonFrame(h+350,v=100,100,3,"");
  RadioButton(h+350,v,0,0,"Г-н",Gender);
  RadioButton(h+350,v+=17,1,0,"Г-жа",Gender);
  RadioButton(h+350,v+=17,2,0,"Компания",Gender);// Edit ************************** Wednesday, 16 December 2015 11:17:28
	
	v=120;
	
	EditField(h,v+=vs,95,"Телефон дом.",Normal,Phone,false,0);// Edit ************************** Wednesday, 16 December 2015 11:25:09
	EditField(h,v+=vs,95,"Телефон моб.",Normal,Mobile,false,0);// Edit ************************** Wednesday, 16 December 2015 11:25:09
	EditField(h,v+=vs,95,"e-Mail",Normal,eMail,false,0);// Edit ************************** Wednesday, 16 December 2015 11:25:09
	EditField(h,v+=vs,95,"Instagram",Normal,InstagramAcc,false,0);//EDIT_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-Anton 17:13 04.07.2018
	
	EditField(h,v+=vs,95,"Улица",Normal,InvAddr0,false,0);// Edit ************************** Wednesday, 16 December 2015 11:25:09
	EditField(h,v+=vs,95,"Дом",Normal,InvAddr1,false,0);// Edit ************************** Wednesday, 16 December 2015 11:25:09
	EditField(h,v+=vs,95,"Квартира",Normal,InvAddr2,false,0);// Edit ************************** Wednesday, 16 December 2015 11:25:09
	EditField(h,v+=vs,95,"Индекс",Normal,InvAddr3,false,0);// Edit ************************** Wednesday, 16 December 2015 11:25:09
  EditField(h,v+=vs,80,"Карточка заведена в магазине(склад)",Normal,CreateLocation,false,LocationSClass);// Edit ************************** Friday, 27 September 2013 09:38:46
	EditField(h,v+=vs,100,"Карточка создана сотрудником",Normal,CurEmplCreator,false,UserSClass);//Edit_-_-_-_-_-_-_-_-Anton 11:59 15.05.2018

	/*
  BlockLoad(NPTSNCUFb);
  rwcnt = MatRowCnt(NPTSNCUFb);
  for (i=0;i<rwcnt;i=i+1) begin
    MatRowGet(NPTSNCUFb,i,NPTSNCUFbrw);
    EditField2(h,v+=vs,h1-h+50,NPTSNCUFbrw.FieldName,NPTSNCUFbrw.EditState,NPTSNCUFbrw.FieldName,false,0);
  end;*/
  SpecialMenu("Создать карту лояльности",' ',1,"CreateLoyaltyCardDsm");
  
  EndWindow;
end;

window SHDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,t,v,vm,vs;
  Integer tilenr,f,flipnr;

  WindowBegin("Отгрузка",SHDClass,CGview,-);
  SetWRect(20,80,750,460);
  Sizeable(-1,-1,0,0);
  UseView(SHVc);
  vs = 20;
  Tile(0,74,false,"",SerNr);
  EditField(75,vm=(v=6),95,"Но.",Normal,SerNr,false,TSerSClass);
  EditField(75,v+=20,95,"Клиент",ViewOnly,CustCode,false,0);
  EditField(h=255,v=vm,135,"Наим.",Normal,Addr0,false,0);
	EditField(485,v=vm,95,"PR Nr.",Normal,PRNr,false,0);
  v = v + vs;
  if (IsEnterprise) then begin
    EditField(h,vm=v,135,"Офиц. номер",Normal,OfficialSerNr,false,LegalInvNrSClass); 
  EditField(h+230,vm,95,"TREO Но.",Normal,TREONr,false,0);  
  end;
  CheckBox(h4=-100,v,0,"OK",OKFlag);
  tilenr = 1;
  if (IsEnterprise) then begin
    TileButton(tilenr,"Условия"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Товары"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Условия дост."); tilenr = tilenr + 1; 
    TileButton(tilenr,"Упаковка"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Фрахт"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Адрес дост."); tilenr = tilenr + 1; 
    TileButton(tilenr,"Коммент."); tilenr = tilenr + 1; 
  end else begin
    TileButton(tilenr,"Коммент."); tilenr = tilenr + 1; 
    TileButton(tilenr,"Товары"); tilenr = tilenr + 1;
    TileButton(tilenr,"Адрес"); tilenr = tilenr + 1; 
  end;
  tilenr = 1;
  Tile(tilenr,70,false,tilenr,ShipDate); tilenr = tilenr + 1;
  vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;
  EditField(h1,vm=(v=6),82,"Дата",Normal,ShipDate,false,PasteCurDate);
  if (HasMultiLocations) then begin
    v = v + vs;
    EditField(h1,v,82,"Местополож.",Normal,Location,false,LocationSClass); 
  end;
  if (IsEnterprise) then begin
    v = v + vs;
    EditField(h1,v,82,"Готовность к отгр.",Normal,Sorting,false,DelRouteSClass); 
  end;
  if (HasObjects) then begin
  EditField(h2,v=vm,135,"Объекты",Normal,Objects,false,ObjSClass);
  end;
  if (IsEnterprise) then begin
    v = v + vs;
    EditField(h2,v,135,"Филиал",ViewOnly,BranchID,false,0); 
  end;
  if (HasMultiLocations or IsEnterprise) then begin
    v = v + vs;
  end;
  if (IsEnterprise) then begin
    EditField(h2,v,135,"Проект",Normal,PRCode,false,0);
		if(currentcompany==28)then begin
			EditField(h3,v,135,"Подпись",Normal,Sign,false,UserSClass);
		end;
  end;
  if (HasObjects) then begin
    EditField(h3,v=vm,80,"Номер заказа",ViewOnly,OrderNr,false,0); 
  end else begin
    if (IsEnterprise==false) then begin
      EditField(h2,v=vm,135,"Номер заказа",ViewOnly,OrderNr,false,0); 
    end;
  end;
  if (IsEnterprise) then begin
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h3,v+=vs,80,"Вид счета",Normal,SHClass,false,OrderClassSClass); end;
  CheckBox(h4,v=6,0,"Тел. сообщение",Check1);
  end;
  if (IsEnterprise==false) then begin
    if (HasMultiLocations) then begin
      EditField(h1,v+=2*vs,-40,"Коммент.",Normal,Comment,false,0); 
    end else begin
      EditField(h1,v+=vs,-40,"Коммент.",Normal,Comment,false,0); 
    end;
  end;
  Tile(tilenr,190,true,tilenr,Math); tilenr = tilenr + 1;
  v = 20;
  MatrixBegin(4,v,-50,-35,-,1000);
  MatTypedRow(stp);
  Flip(0);
  MatCol(1,32,"Товар",0,ArtCode,false,INSClass);
//  MatCol(1,94,"Var",0,VARList,false,VARSClass);
//  MatCol(1,144,"Description",0,Spec,false,0);
  MatCol(1,144,"Наимен.",0,Spec,false,0);
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,32,"Товар",0,ArtCode,false,INSClass);
//  MatCol(t,94,"Var",0,VARList,false,VARSClass);
//  MatCol(t,144,"Description",0,Spec,false,0);
  MatCol(t,94,"Наимен.",0,Spec,false,0);
  flipnr = 1;
  Flip(flipnr); flipnr = flipnr + 1;
	if (CurrentCompany==29) then begin
		// MatCol(1,-230,"Вн.код.тов.",0,ItemCompCode,false,0); 
	end else begin
		if (IsEnterprise) then begin
			MatCol(1,-230,"Номер товара клиента",0,CustArtCode,false,CUINSClass); 
		end;
	end;
  MatCol(1,-150,"Заказано",0,Ordered,true,0);
  MatCol(1,-98,"На складе",0,InStock,true,0);
  MatCol(1,-50,"Доступно",0,Ship,true,0);
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,-150,"Заказано",0,Ordered,true,0);
  if (IsEnterprise) then begin
  MatCol(t,-230,"Код товара клиента",0,CustArtCode,false,CUINSClass); 
  end;
  MatCol(t,-98,"На складе",0,InStock,true,0);
  MatCol(t,-50,"Доступно",0,Ship,true,0);
  Flip(flipnr); flipnr = flipnr + 1;
  if (IsEnterprise==false) then begin
    if (HasSerialNumbers) then begin
      MatCol(1,-350,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
    end;
    if (HasObjects) then begin
      MatCol(1,-250,"Объекты",0,Objects,false,ObjSClass); 
    end;
    MatCol(1,-98,"Знач. склада",0,FIFORowVal,false,0); 
  end else begin
  MatCol(1,-350,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  MatCol(1,-250,"Срок годности",0,BestBefore,false,0);
  MatCol(1,-150,"Склад",0,Location,false,LocationSClass);
  MatCol(1,-50,"Место",0,PosCode,false,UsedPosSClass);
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,-350,"Серийный номер",0,SerialNr,false,SerialNrSClass);
  MatCol(t,-250,"Срок годности",0,BestBefore,false,0);
  MatCol(t,-150,"Склад",0,Location,false,LocationSClass);
  MatCol(t,-50,"Место",0,PosCode,false,UsedPosSClass);
    Flip(flipnr); flipnr = flipnr + 1;
  if (UserCanAction("ViewMoneyInf",true))then begin
		MatCol(1,-400,"Цена обратной закупки",0,BBCostPrice,false,0); 
		MatCol(1,-320,"FIFO по строке",0,FIFORowVal,false,0);
		MatCol(1,-220,"Ср. взв., осн. вал-2",0,WAB2,false,0);
		MatCol(1,-120,"Отпускная цена",0,BasePrice,false,0);
		MatCol(1,-40,"Коэфф.",0,Coefficient,false,0); 
		MatCol(t=kInvoiceRowTypeStructuredItemComponent,-400,"BuyBack Pr.",0,BBCostPrice,false,0);
		MatCol(t,-320,"FIFO по строке",0,FIFORowVal,false,0);
		MatCol(t,-220,"Ср. взв., осн. вал-2",0,WAB2,false,0);
		MatCol(t,-120,"Отпускная цена",0,BasePrice,false,0);
		MatCol(t,-40,"Коэфф.",0,Coefficient,false,0);
	end;
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,-400,"Структура",0,Recepy,false,0);
  MatCol(1,-320,"Источник",0,Source,false,SourceSClass);
  MatCol(1,-240,"Отфактурирован",0,Invd,false,0); 
  MatCol(1,-160,"Дата отправки",0,DespatchRowDate,false,PasteCurDate); 
  MatCol(1,-80,"Время отправки",0,DespatchRowTime,false,PasteCurTime); 
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,-400,"Структура",0,Recepy,false,0);
  MatCol(t,-300,"Источник",0,Source,false,SourceSClass);
  MatCol(t,-240,"Отфактурирован",0,Invd,false,0); 
  MatCol(t,-160,"Дата отправки",0,DespatchRowDate,false,PasteCurDate); 
  MatCol(t,-80,"Время отправки",0,DespatchRowTime,false,PasteCurTime); 
    Flip(flipnr); flipnr = flipnr + 1;
	if (UserCanAction("ViewMoneyInf",true))then begin
		MatCol(1,-400,"Счет реал.",0,SalesAcc,false,AccSClass);
		MatCol(1,-330,"Счет стоим.",0,CostAcc,false,AccSClass);
	end;
	MatCol(1,-250,"Объекты",0,Objects,false,ObjSClass);
  MatCol(1,-135,"Шир.",0,UnitXval,true,0);
  MatCol(1,-90,"Выс.",0,UnitYval,true,0);
  MatCol(1,-45,"Выс.",0,UnitZval,true,0);
	if (UserCanAction("ViewMoneyInf",true))then begin
		MatCol(t=kInvoiceRowTypeStructuredItemComponent,-400,"Счет реал.",0,SalesAcc,false,AccSClass);
		MatCol(t,-330,"Счет стоим.",0,CostAcc,false,AccSClass);
	end;
  MatCol(t,-250,"Объекты",0,Objects,false,ObjSClass);
  MatCol(t,-135,"Шир.",0,UnitXval,true,0);
  MatCol(t,-90,"Выс.",0,UnitYval,true,0);
  MatCol(t,-45,"Выс.",0,UnitZval,true,0);
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,-300,"Упаковок",0,RowPackages,false,0);
  MatCol(1,-220,"Тип",0,PackageType,false,PackTypeSClass);
  MatCol(1,-170,"Описание",0,PackageDesc,false,0);
  MatCol(1,-70,"OrdRow",0,OrdRow,false,0);
  MatCol(t=kInvoiceRowTypeStructuredItemComponent,-300,"Упаковок",0,RowPackages,false,0);
  MatCol(t,-220,"Тип",0,PackageType,false,PackTypeSClass);
  MatCol(t,-170,"Описание",0,PackageDesc,false,0);
  MatCol(t,-70,"OrdRow",0,OrdRow,false,0);
  end;
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 22;
  v = 21; 
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
      v = v + vs;
    end;
  end;

//  CheckBox(20,-20,0,"OK",OKFlag);
  EditField(-131,-20,80,"Общее кол-во",ViewOnly,TotQty,true,0); 
  if (IsEnterprise) then begin
    Tile(tilenr,90,false,tilenr,ShipMode); tilenr = tilenr + 1;
  vs = 20;
  EditField(h1,v=vm,82,"Способ отгр.",Normal,ShipMode,false,DMSClass);
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h1,v+=vs,80,"Сумма налога",ViewOnly,TAX1Sum,true,0); end;
  EditField(h1,v+=vs,80,"Заявлен. значение",Normal,DeclaredVal,true,0);
  EditField(h1,v+=vs,-20,"E-Shipment status",ViewOnly,EShipStatus,false,0);
  EditField(h2,v=vm,80,"Итого кол-во",ViewOnly,TotQty,true,0);
  EditField(h2,v+=vs,80,"Итого вес",Normal,TotWeight,true,0);
  EditField(h2,v+=vs,80,"Итого объем",Normal,TotVolume,true,0);
  CheckBox(473,v=vm,0,"Использовать адрес для выст. счета",Check2);
  CheckBox(473,v+=16,0,"Создана электронная отгрузка",EShipmentCreated);
  CheckBox(473,v+=16,0,"Собрана электронная отгрузка",EShipCollected);
    Tile(tilenr,110,false,tilenr,Packages); tilenr = tilenr + 1;
  EditField(h1,v=6,82,"Трансп. №",Normal,TransportNumber,false,0);
  EditField(h1,v+=vs,82,"Упаковки",Normal,Packages,true,0);
  EditField(h1,v+=vs,82,"Языка",Normal,LangCode,false,LangSClass);
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h1,v+=vs,82,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); end;
  EditField(h1,v+=vs,-20,"Инстр.по трансп.",Normal,TransportDirect,false,0);
  EditField(h2,v=6,135,"Из города",Normal,FromCity,false,0);
  EditField(h2,v+=vs,135,"В город",Normal,ToCity,false,0);
  EditField(h2,v+=vs,135,"Из дока",Normal,FromDock,false,0);
  EditField(h2,v+=vs,135,"В док",Normal,ToDock,false,0);
  HalPushButton(473,6,600,26,"UpdateSHPackages","Упаковка");
    Tile(tilenr,130,false,tilenr,FreightCode); tilenr = tilenr + 1;
  EditField(h1,v=6,80,"Трансп. компания",Normal,FreightCode,false,FreightCompanySClass);
  EditField(h1,v+=vs,-20,"Наим.",Normal,FreightCompany,false,0);
  EditField(h1,v+=vs,-20,"ИНН",Normal,FreightCompanyRegNr,false,0);
  EditField(h1,v+=vs,-20,"Инф. о машине",Normal,TruckInfo,false,0);
  EditField(h1,v+=vs,-20,"Водитель",Normal,Driver,false,0);
  EditField(h1,v+=vs,-20,"CMR",Normal,CMRText,false,0); // International transporting number
  end;
  Tile(tilenr,150,false,tilenr,Addr1); tilenr = tilenr + 1;
  vs = 20;
  if (IsEnterprise) then begin
  EditField(h1,v=6,80,"Код адреса",Normal,DelAddrCode,false,DelAddr3SClass);
  EditField(h1,v+=vs,-20,"Отгрузка",Normal,Addr1,false,0);
  EditField(h1,v+=vs,-20,"Адрес",Normal,Addr2,false,0);
  end else begin
    EditField(h1,v=6,-20,"Адрес",Normal,Addr1,false,0); 
    EditField(h1,v+=vs,-20,"",Normal,Addr2,false,0); 
  end;
  EditField(h1,v+=vs,-20,"",Normal,Addr3,false,0);
  EditField(h1,v+=vs,-20,"",Normal,DelAddr3,false,0);
  EditField(h1,v+=vs,-20,"",Normal,DelAddr4,false,0);
  if (IsEnterprise) then begin
  EditField(h1,v+=vs,80,"Страны",Normal,DelCountry,false,CountrySClass);
  EditField(h3,v,-20,"Регион",Normal,Region,false,RegionSClass); 
    Tile(tilenr,30,false,tilenr,Comment); tilenr = tilenr + 1;
  EditField(h1,v=6,-20,"Комментарий",Normal,Comment,false,0);
  end;
	if(currentcompany==18) then begin
		SpecialMenu("Поверить генерацию заказа поставщика",'l',0,"CheckPOCreate");
	end;
  SpecialMenu("Печать этикеток фрахта",'l',0,"PrintSHLabSHDsm");
  if (IsEnterprise) then begin
  SpecialMenu("Пересчитать вес",'w',1,"SHCalcWeightDsm");
  end;
  SpecialMenu("Статус товара",'I',2,"ItemStatusSHDsm");
  if (HasModNL) then begin
  SpecialMenu("Открыть запись операции",'t',3,"OpenTRFromSH");
  end;
  if (IsEnterprise) then begin
  SpecialMenu("Экспорт ASG",' ',4,"ASGEnSHDsm"); /* Specific for Sweden */
  SpecialMenu("Winedi Export",' ',4,"WinEDIEnSHDsm"); /* Specific for Norway */
  SpecialMenu("Заполнить серийные номера партий",' ',6,"INBatchSHSpec");
  SpecialMenu("Разделить строку",' ',7,"SplitRowSHDsm");
  SpecialMenu("Утвердить складские перемещения",' ',8,"OKStockMovSHrDsm");
  SpecialMenu("Список комплектаций по складу",' ',9,"PickingListDsm");
//  SpecialMenu("Calculate Manually",' ',10,"CalcSHMan"); /* Specific for one customer in Portugal, you may comment it out */
  SpecialMenu("Зарегестрировать электронную отгрузку",' ',9,"EShipRegisterDsm");
  SpecialMenu("Выгрузить таблицу в буфер обмена",'',1,"ExportToExcelSHDsm"); // Edit ************************** BPI Baku - Irkan Ahmadov- 02, 25 06 2020y. at 11:16:38 AM

    if (GuiType==kGuiiPhone) then begin
      SpecialMenu("Sign",' ',10,"SignSHDsm"); //!!TRANSLATE
    end;
  end;
	SpecialMenu("Pack List",' ',8,"PackListSHDsm");
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);
  SpecialMenu("Создать возврат товаров",'B',5,"RetFromSHSpec");  
  
  EndWindow;
end;

window StockMovLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Перемещения складированных товаров",StockMovLClass,CGmlist,-);
  SpawnClass(StockMovDClass);
  SetWRect(64,80,800,298);
  Sizeable(-1,-1,0,0);
  UseView(StockMovVc);
  FormName(PrintStockMovL);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,  "Номер",SerNr,false,SerNr);
  RlColKey(81,81,"Отпр.",SentOKFlag,false,SentOKFlag);
  RlColKey(111,111,"Получ.",OKFlag,false,OKFlag);
  RlColKey(151,151,"Дата отгрузки",SentTransDate,false,SentTransDate);
  RlColKey(223,223,"Дата получения",TransDate,false,TransDate);
  RlColKey(295,295,"Со склада",FrLocation,false,FrLocOK); 
  RlColKey(370,370,"Через склад",ThrouLocation,false,ToThrouLocOK);
  RlColKey(450,450,"На склад",ToLocation,false,ToLocOK);
  if (IsEnterprise) then begin 
  RlColKey(530,530, "Трак",TruckInfo,false,TruckInfo);
  RlColKey(590,590, "Комментарий",Comment,false,Comment);
  end else begin
    RlColKey(530,530, "Коммент.",Comment,false,Comment); 
  end;
  SpecialMenu("Получить",'G',0,"OKStockMovLsm");
  SearchField("Найти");
  EndWindow;
end;

window CLInDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,l,t,v,vs;
  WindowBegin("Приход в кассу",CLInDClass,CGview,-);
  SetWRect(20,80,700,480);
  UseView(CLInVc);
  ActiveFieldOnNew("TransDate");
//  Sizeable(-1,-1,0,0);
  vs = 20; h = 130; h2=h+200; h3 = 472;
  Tile(0,70,false,"",SerNr);
  EditField(h,v=6,80,"Номер",St_i,SerNr,false,TSerSClass);
  EditField(h2,v,82,"Дата",Normal,TransDate,false,PasteCurDate);
  EditField(h,v+=vs,135,"№ для печати",Normal,OfficialSerNr,false,LegalCLInNrSClass);
  TileButton(1,"Суммы");
  TileButton(2,"Валюта");
  TileButton(3,"Платежи");
//  CheckBox(400,v,0,"OK",OKFlag);
  Tile(1,300,false,"",PayMode);
  EditField(h,v=6,30,"Способ опл.",Normal,PayMode,false,PMSClass);
  EditField(h2,v,50,"Сотрудник",Normal,Person,false,UserSClass);
  CheckBox(400,v,0,"Инфор. в зап.опер.",ARonTR);
  EditField(h,v+=vs,120,"Корресп.",Normal,CorspCode,false,CLCorspSClass);
  EditField(h2,v,-20,"Коммент.",Normal,CorspComment,false,0);
  EditField(h,v+=vs,120,"Клиент",Normal,CUCode,false,CUSClass);
  EditField(h2,v,100,"Ссылка",Normal,RefStr,false,0);
  EditField(h,v+=vs,-20,"Наименование",Normal,CUName,false,0);
  EditField(h,v+=vs,-20,"Адрес",Normal,Addr0,false,0);
  EditField(h,v+=vs,-20,"",Normal,Addr1,false,0);
  EditField(h,v+=vs,-20,"",Normal,Addr2,false,0);
  EditField(h,v+=vs,-20,"",Normal,Addr3,false,0);
  EditField(h,v+=vs,-20,"",Normal,Addr4,false,0);
  EditField(h,v+=vs,-20,"Основание",Normal,Comment,false,0);
  EditField(h,v+=vs,-20,"Объекты",Normal,Objects,false,ObjSClass);
  CheckBox(20,-20,0,"OK",OKFlag);
  EditField(h,v+=vs,100,"Итого",Normal,Total,true,0);
  EditField(h2,v,50,"Код НДС",Normal,VATCode,false,VATCodeSClass);
  EditField(h3,v,50,"Язык",Normal,LangCode,true,LangSClass);
  EditField(h,v+=vs,100,"Нетто",Normal,NetVal,true,0);
  EditField(h2,v,80,"НДС",Normal,VATVal,true,0);
  EditField(h3,v,50,"НСП",Normal,TAX1Sum,true,0);
  Tile(2,70,false,"2",CurncyCode);
  vs = 20;
  EditField(h=110,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
  EditField(h2=295,v,50,"Курс",Normal,FrRate,true,0);
  EditField(h3=360,v,50,":",Normal,ToRateB1,true,0);
  StaticText(h3+60,v+12,"Осн. валюта 1",false);
  EditField(h,v+=vs,50,"Осн. валюта 1",Normal,BaseRate1,true,0);
  EditField(h3,v,50,":",Normal,ToRateB2,true,0);
  StaticText(h3+60,v+12,"Осн. валюта 2",false);
  EditField(h,v+=vs,50,"Осн. валюта 2",Normal,BaseRate2,true,0);
  Tile(3,200,false,"3",Math);
  h = 8; v=24; l = 35;
  MatrixBegin(4,v,-50,-10,-,99);
  MatTypedRow(stp);
  MatCol(t=1,h=34,"Тип",0,Type,false,SetSClass);
  MatCol(t,h+=120,"Комментарий",0,Comment,false,0);
  //MatCol(t,h+=120,"Номер",0,TransNr,false,ARSClass);
  //MatCol(t,h+=70,"Счет",0,OrderNr,false,ORSClass);
  //MatCol(t,h+=70,"Объекты",0,Objects,false,ObjSClass);
  //MatCol(t,-180,"Компания",ViewOnly,Company,false,0);// Edit ************************** Wednesday, 12 March 2014 16:01:14
  MatCol(t,-180,"Корресп.",ViewOnly,CorspCode,false,CLCorspSClass);
  MatCol(t,-80,"Сумма",0,Sum,true,0);
  MatText(t=2,h=34,"Скидка",true);
  MatCol(t,h+=80,"",0,Type,false,0);
  MatCol(t,h+=200,"",0,TransNr,false,0);
  //MatCol(t,-180,"Компания",ViewOnly,Company,false,0);// Edit ************************** Wednesday, 12 March 2014 16:00:17
  MatCol(t,-180,"Корресп.",ViewOnly,CorspCode,false,CLCorspSClass);
  MatCol(t,-80,"Сумма",0,Sum,true,0);
  Flip(2);
  MatCol(t=1,h=34,"Тип",0,Type,false,SetSClass);
  //MatCol(t,h+=120,"Корресп.",ViewOnly,CorspCode,false,CLCorspSClass);// Edit ************************** Wednesday, 12 March 2014 15:59:55
  MatCol(t,h+=120,"Компания",ViewOnly,Company,false,0);
  MatCol(t,h+=120,"Номер",0,TransNr,false,ARSClass);// Edit ************************** Tuesday, 6 May 2014 14:51:30
  MatCol(t,h+=70,"Счет",0,OrderNr,false,ORSClass);// Edit ************************** Tuesday, 6 May 2014 14:51:29
  MatCol(t,h+=70,"Объекты",0,Objects,false,ObjSClass);// Edit ************************** Tuesday, 6 May 2014 14:51:28
  //MatCol(t,h+=70,"Комментарий",0,Comment,false,0);// Edit ************************** Tuesday, 6 May 2014 14:51:42
  MatText(t=2,h=34,"Скидка",true);
  MatCol(t,h+=120,"Корресп.",ViewOnly,CorspCode,false,CLCorspSClass);
  MatCol(t,h+=70,"Коммент.",0,Comment,false,0);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 22;
  v=v+ 1; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");  
  SpecialMenu("Открыть запись операции",'t',0,"OpenTRFromCLIn");
  if (UserCanReport("CLInColIVRn","",true)) then begin 
  SpecialMenu("Показать счета-фактуры",' ',0,"ShowColIVDsm");
end;
  EndWindow;
end;

window CLOutLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Расход из кассы",CLOutLClass,CGmlist,-);
  SpawnClass(CLOutDClass);
  Sizeable(-1,-1,0,0);
  SetWRect(64,80,600,298);
  UseView(CLOutVc);
  FormName(PrintCLOutL);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Номер",SerNr,false,SerNr);
  RlColKey(84,84,"OK",OKFlag,false,OKFlag);
  RlColKey(114,114,"Дата",TransDate,false,TransDate);
  RlColKey(194,194,"Основание",Comment,false,Comment);
  RlCol(-100,-100,"Сумма",Total,true);
  if (HasMultiCurrency or HasBase2) then begin
  RlCol(-30,-30,"Вал.",CurncyCode,true);
  end;
  RlCol(-1,-1,"",Invalid,true);
  SearchField("Поиск");
   SpecialMenu("Iмпорт из 1с",'',10,"BlankImportDsm");
   SpecialMenu("Iмпорт конвертации валют 1с",'',10,"TransactionImportDsm");
  if (HasLimitedAccess) then begin
    BrowseSubsetButton(-40,-15);
  end;
  EndWindow;
end;

window CLOutDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,l,t,v,vs;
  WindowBegin("Расход из кассы",CLOutDClass,CGview,-);
  SetWRect(20,80,700,440);
  UseView(CLOutVc);
  ActiveFieldOnNew("TransDate");
//  Sizeable(-1,-1,0,0);
  vs = 20; h = 100; h2=h+200; h3 = 430;
  Tile(0,50,false,"",SerNr);
  EditField(h,v=6,80,"Номер",St_i,SerNr,false,TSerSClass);
  EditField(h+150,v,82,"Дата",Normal,TransDate,false,PasteCurDate);
//  EditField(h3,v,82,"Касса",ViewOnly,LocalMachineCode,false,0);
  TileButton(1,"Суммы");
  TileButton(2,"Валюта");
  TileButton(3,"Платежи");
//  CheckBox(400,v,0,"OK",OKFlag);
  Tile(1,270,false,"",PayMode);
  EditField(h,v=6,30,"Способ опл.",Normal,PayMode,false,PMSClass);
  EditField(h2,v,50,"Сотрудник",Normal,Person,false,UserSClass);
  CheckBox(400,v,0,"Инф-ия в зап.опер.",ARonTR);
  EditField(h,v+=vs,120,"Корресп.",Normal,CorspCode,false,CLCorspSClass);
  EditField(h2,v,-20,"Коммент.",Normal,CorspComment,false,0);
  EditField(h,v+=vs,120,"Поставщик",Normal,CUCode,false,VESClass);
  EditField(h2,v,100,"Ссылка",Normal,RefStr,false,0);  
  EditField(h,v+=vs,-20,"Наименование",Normal,CUName,false,0);
  EditField(h,v+=vs,-20,"Адрес",Normal,Addr0,false,0);
  EditField(h,v+=vs,-20,"",Normal,Addr1,false,0);
  EditField(h,v+=vs,-20,"",Normal,Addr2,false,0);
  EditField(h,v+=vs,-20,"",Normal,Addr3,false,0);
  EditField(h,v+=vs,-20,"AFF объект",Normal,Addr4,false,ObjSClass);// Edit ************************** BPI Ukraine - KramarAlexandr - 04, 11 02 2021 y. at 9:20:45 AM
  EditField(h,v+=vs,-20,"Основание",Normal,Comment,false,0);
  EditField(h,v+=vs,-20,"Объекты",Normal,Objects,false,ObjSClass);  
  CheckBox(20,-20,0,"OK",OKFlag);
  EditField(h,v+=vs,100,"Итого",Normal,Total,true,0);
  EditField(h2,v,50,"Код НДС",Normal,VATCode,false,VATCodeSClass);
  EditField(h3,v,50,"Язык",Normal,LangCode,true,LangSClass);
  EditField(h,v+=vs,100,"Нетто",Normal,NetVal,true,0);
  EditField(h2,v,80,"НДС",Normal,VATVal,true,0);
  EditField(h3,v,50,"НСП",Normal,TAX1Sum,true,0);
  Tile(2,70,false,"2",CurncyCode);
  vs = 20;
  EditField(h=110,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
  EditField(h2=295,v,50,"Курс",Normal,FrRate,true,0);
  EditField(h3=360,v,50,":",Normal,ToRateB1,true,0);
  StaticText(h3+60,v+12,"Осн. валюта 1",false);
  EditField(h,v+=vs,50,"Осн. валюта 1",Normal,BaseRate1,true,0);
  EditField(h3,v,50,":",Normal,ToRateB2,true,0);
  StaticText(h3+60,v+12,"Осн. валюта 2",false);
  EditField(h,v+=vs,50,"Осн. валюта 2",Normal,BaseRate2,true,0);  
  Tile(3,300,false,"3",Math);
  h = 8; v=24; l = 35;
  MatrixBegin(4,v,-50,-10,-,99);
  Flip(1);
  MatTypedRow(stp);
  MatCol(t=1,h=34,"Тип",0,Type,false,SetSClass);
  MatCol(t,h+=120,"Комментарий",0,Comment,false,0);
  //MatCol(t,h+=120,"Номер",0,TransNr,false,ARSClass);
  //MatCol(t,h+=70,"Счет",0,OrderNr,false,ORSClass);
  //MatCol(t,h+=70,"Объекты",0,Objects,false,ObjSClass);
  //MatCol(t,-180,"Компания",ViewOnly,Company,false,0);// Edit ************************** Wednesday, 12 March 2014 16:02:00
  MatCol(t,-180,"Корресп.",ViewOnly,CorspCode,false,CLCorspSClass);// Edit ************************** Wednesday, 12 March 2014 16:02:01
  MatCol(t,-80,"Сумма",0,Sum,true,0);
  MatText(t=2,h=34,"Скидка",true);
  MatCol(t,h+=80,"",0,Type,false,0);
  MatCol(t,h+=200,"",0,TransNr,false,0);
  //MatCol(t,-180,"Компания",ViewOnly,Company,false,0);// Edit ************************** Wednesday, 12 March 2014 15:47:28
  MatCol(t,-180,"Корресп.",ViewOnly,CorspCode,false,CLCorspSClass);
  MatCol(t,-80,"Сумма",0,Sum,true,0);
  Flip(2);
  MatCol(t=1,h=34,"Тип",0,Type,false,SetSClass);
  //MatCol(t,h+=120,"Корресп.",ViewOnly,CorspCode,false,CLCorspSClass);// Edit ************************** Wednesday, 12 March 2014 15:47:29
  MatCol(t,h+=120,"Компания",ViewOnly,Company,false,0);// Edit ************************** Wednesday, 12 March 2014 15:47:29
  MatCol(t,h+=120,"Номер",0,TransNr,false,ARSClass);
  MatCol(t,h+=70,"Счет",0,OrderNr,false,ORSClass);
  MatCol(t,h+=70,"Объекты",0,Objects,false,ObjSClass);
  //MatCol(t,h+=70,"Комментарий",0,Comment,false,0);
  MatText(t=2,h=34,"Скидка",true);
  MatCol(t,-180,"Компания",ViewOnly,Company,false,0);
  MatCol(t,-80,"Сумма",0,Sum,true,0);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 22;
  v=v+ 1; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
  SpecialMenu("Открыть запись операции",'t',0,"OpenTRFromCLOut");
  if (UserCanReport("CLOutColVIRn","",true)) then begin 
  SpecialMenu("Показать счета-фактуры",' ',1,"ShowColVIDsm");
end;
  EndWindow;
end;

window ItemHistDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,v;
  WindowBegin("Item History",ItemHistDClass,CGview,-);
  UseView(ItemHistVc);
  SetWRect(64,80,800,430);
  Sizeable(-1,-1,0,0);
  h = 130; h1=h+250; h2=h1+230;
  Tile(0,90,false,"",SerNr);
  EditField(h,v=6,100,"No.",Normal,SerNr,false,0);
  EditField(h1,v,80,"Trans. Date",Normal,TransDate,false,0);
  EditField(h2,v,80,"FIFO Date",Normal,FIFODate,false,0);
  EditField(h,v+=20,100,"Register",Normal,FileName,false,0);
  EditField(h1,v,100,"Record No.",Normal,TransNr,false,0);
  EditField(h2,v,50,"Row No.",Normal,Row,false,0);
  EditField(h,v+=20,100,"Source",Normal,Source,false,0);
  TileButton(1,"Item");
  TileButton(2,"Values");
  TileButton(3,"Remaining");
  TileButton(4,"Curncy Cost");
  Tile(1,70,false,"1",ArtCode);
  EditField(h,v=6,160,"Item Code",Normal,ArtCode,false,0);
  EditField(h1,v,100,"Variety",Normal,Variety,false,0);
  EditField(h2,v,100,"Serial No.",Normal,SerialNr,false,0);
  EditField(h,v+=20,100,"Location",Normal,Location,false,0);
  EditField(h1,v,100,"Position",Normal,Position,false,0);
  EditField(h,v+=20,100,"Quantity",Normal,Qty,true,0);
  EditField(h1,v,100,"Quantity 2",Normal,Qty2,true,0);
  Tile(2,70,false,"2",WATotCostPerLoc);
  EditField(h,v=6,100,"WA Per Location",Normal,WATotCostPerLoc,true,0);
  EditField(h1,v,100,"WA Total",Normal,WATotCost,true,0);
  EditField(h2,v,100,"Tot Cost Price",Normal,TotCostPrice,true,0);
  EditField(h,v+=20,100,"Cost Price Per Location",Normal,CPTotCostPerLoc,true,0);
  EditField(h1,v,100,"Cost Price Total",Normal,CPTotCost,true,0);
  EditField(h,v+=20,100,"Base Price Per Location",Normal,BPTotCostPerLoc,true,0);
  EditField(h1,v,100,"Base Price Total",Normal,BPTotCost,true,0);
  Tile(3,70,false,"3",RemQty);
  EditField(h,v=6,100,"Remaining Qty",Normal,RemQty,true,0);
  EditField(h,v+=20,100,"Remaining Cost Price",Normal,RemCostPrice,true,0);
  EditField(h,v+=20,100,"No. per Location",Normal,SerNrPerLoc,true,0);
  CheckBox(h1,v=6,0,"Update Stock",StockAffectf);
  CheckBox(h1,v+=20,0,"Consignment Stock",ConsigStock);
  CheckBox(h1,v+=20,0,"Will be Purged",WillBePurged);
  CheckBox(h2,v=6,0,"TREO Stock",TREOStock);
  Tile(4,70,false,"4",RemQty);
  EditField(h,v=6,100,"Cost in Curncy",Normal,TotCostPriceCurncy,true,0);
  EditField(h,v+=20,100,"Rem Cost In Curncy",Normal,RemCostPriceCurncy,true,0);
  EditField(h,v+=20,100,"Curncy Code",Normal,CurncyCode,true,0);
  SpecialMenu("Open Connected Register",'t',0,"OpenRegisterFromItemHistDsm");
  EndWindow;
end;

window ItemHistLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Item History",ItemHistLClass,CGmlist,-);
  SpawnClass(ItemHistDClass);
  SetWRect(20,80,1100,298);
  Sizeable(-1,-1,0,0);
  UseView(ItemHistVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,2,"Item Code",ArtCode,false,ArtCode);
  RlColKey(80,80, "File Name1",FileName,false,FNTransNr);// Edit ************************** Thursday, 20 November 2014 09:42:10
  RlCol(160,160, "Trans. No.",TransNr,false);
  RlCol(240,240, "Row",Row,false);
  RlColKey(300,300, "Trans. Date",TransDate,false,TransDate);
  RlCol(400,400, "Qty",Qty,true);
  RlColKey(470,470, "Rem. Qty",RemQty,true,ActiveQty);
  RlCol(540,540, "Location",Location,false);
  RlColKey(600,600, "FIFO Date",FIFODate,false,ArtCodeFD);
//  RlCol(600,600, "Variety",Variety,false);
  RlColKey(680,680, "SerNr",SerNr,false,SerNr);
  RlColKey(740,740, "Source",Source,false,Source);
  RlCol(820,820, "Cost",TotCostPrice,true);
  RlCol(900,900, "Rem Cost",RemCostPrice,true);
  //RlCol(960,960, "Variety",Variety,false);
  //RlCol(1040,1040, "Purge",WillBePurged,false);
  RlCol(1000,1000, "RemCurPrice",RemCostPriceCurncy,false);
  RlCol(1100,1100, "TotCurPrice",TotCostPriceCurncy,false);
  RlCol(1200,1200, "Curncy",CurncyCode,false);
  RlCol(1250,1250, "InFile",InFileName,false);
  RlCol(1300,1300, "InDate",InDate,false);
  RlCol(-1,-1,"",Invalid,true);
  SearchField("Search");
  EndWindow;
end;







window DIDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h1,h2,v,vs;
  WindowBegin("Классификация товара",DIDClass,CGview,DIView);
  SetWRect(64,80,540,200);
//  Sizeable(-1,-1,0,0);
  UseView(DIVc);
  vs = 20; h1 = 120; h2 = 280; //Edit***************************Sasha2,13:47 15.12.2014
  EditField(h1,v=6,40,"Код",Normal,Code,false,0);
  EditField(h1,v+=vs,-20,"Наименование(ENG)",Normal,Name,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,-20,"Наименование(RUS)",Normal,Name_RU,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,-20,"Наименование(AZE)",Normal,Name_AZ,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  if (IsEnterprise) then begin
  EditField(h1,v+=vs,50,"Тип",Normal,CType,false,CTypeSClass);
  EditField(h2,v,100,"Категория",Normal,CCat,false,0);
  EditField(h1,v+=vs,200,"Классификация",Normal,DispGroups,false,DISClass);
  EditField(h1,v+=vs,100,"Цвет",Normal,colnr,false,SetSClass);
  end;
  EndWindow;
end;

window DIColorDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h1,h2,v,vs;
  WindowBegin("Классификация цвета товара",DIColorDClass,CGview,DIView);
  SetWRect(64,80,540,200);
//  Sizeable(-1,-1,0,0);
  UseView(DIVc);
  vs = 20; h1 = 120; h2 = 280; //Edit***************************Sasha2,13:47 15.12.2014
  EditField(h1,v=6,100,"Код",ViewOnly,Code,false,0);
  EditField(h1,v+=vs,200,"Наименование(ENG)",Normal,Name,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,200,"Наименование(RUS)",Normal,Name_RU,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,200,"Наименование(AZE)",Normal,Name_AZ,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  if (IsEnterprise) then begin
  EditField(h1,v+=vs,50,"Тип",ViewOnly,CType,false,0);
  EditField(h2,v,100,"Категория",Normal,CCat,false,0);
  EditField(h1,v+=vs,200,"Классификация",Normal,DispGroups,false,DISClass);
  EditField(h1,v+=vs,100,"Цвет",Normal,colnr,false,SetSClass);
  end;
  EndWindow;
end;

window DIBrandDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h1,h2,v,vs;
  WindowBegin("Классификация Бренда товара",DIColorDClass,CGview,DIView);
  SetWRect(64,80,540,200);
//  Sizeable(-1,-1,0,0);
  UseView(DIVc);
  vs = 20; h1 = 120; h2 = 280; //Edit***************************Sasha2,13:47 15.12.2014
  EditField(h1,v=6,100,"Код",ViewOnly,Code,false,0);
  EditField(h1,v+=vs,200,"Наименование(ENG)",Normal,Name,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,200,"Наименование(RUS)",Normal,Name_RU,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,200,"Наименование(AZE)",Normal,Name_AZ,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  if (IsEnterprise) then begin
  EditField(h1,v+=vs,50,"Тип",ViewOnly,CType,false,0);
  EditField(h2,v,100,"Категория",Normal,CCat,false,0);
  EditField(h1,v+=vs,200,"Классификация",Normal,DispGroups,false,DISClass);
  EditField(h1,v+=vs,100,"Цвет",Normal,colnr,false,SetSClass);
  end;
  EndWindow;
end;

window DIModelDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h1,h2,v,vs;
  WindowBegin("Классификация модели товара",DIModelDClass,CGview,DIView);
  SetWRect(64,80,540,200);
//  Sizeable(-1,-1,0,0);
  UseView(DIVc);
  vs = 20; h1 = 120; h2 = 280; //Edit***************************Sasha2,13:47 15.12.2014
  EditField(h1,v=6,100,"Код",ViewOnly,Code,false,0);
  EditField(h1,v+=vs,200,"Наименование(ENG)",Normal,Name,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,200,"Наименование(RUS)",Normal,Name_RU,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  EditField(h1,v+=vs,200,"Наименование(AZE)",Normal,Name_AZ,false,0); //Edit***************************Sasha2,16:16 28.11.2014
  if (IsEnterprise) then begin
  EditField(h1,v+=vs,50,"Тип",ViewOnly,CType,false,0);
  EditField(h2,v,100,"Категория",Normal,CCat,false,0);
  EditField(h1,v+=vs,200,"Классификация",Normal,DispGroups,false,DISClass);
  EditField(h1,v+=vs,100,"Цвет",Normal,colnr,false,SetSClass);
  end;
  EndWindow;
end;


window OldDILClass:1
  wtag("language","ENG"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Item Classifications",DILClass,CGmlist,DIView);
  //SpawnClass(DIDClass);
  SetWRect(64,80,509,298);
  Sizeable(-1,-1,0,0);
  UseView(OldDIVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Code",Code,false,Code);
  if (HasAdvancedCRM) then begin
    RlColKey(84,84,"Type",CType,false,CType);
  end;
  RlColKey(164,164,"Name",Name,false,Name);
  SearchField("Search");
  EndWindow;
end;



window LocationDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,l,v,vm,vs;
  Integer tilenr;
  
  WindowBegin("Склад",LocationDClass,CGview,-);
  SetWRect(64,80,570,520);
  UseView(LocationVc);
  v = 10; vs = 20; h = 120; h2 = 340; l = -60;
  if (IsEnterprise) then begin
  Tile(0,50+24,false,"",Code);
  end;
  EditField(h,v,120,"Код",Normal,Code,false,0);
  if (IsEnterprise) then begin
  EditField(h2,v,l,"Группа",Normal,Group,false,LocGrSClass);
  end;
  EditField(h,v+=vs,l,"Наимен.",Normal,Name,false,0);
  if (IsEnterprise) then begin
    tilenr = 1;
    TileButton(tilenr,"Адрес"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Склад"); tilenr = tilenr + 1; 
    tilenr = 1;
    Tile(tilenr,350,false,tilenr,Addr0); tilenr = tilenr + 1;
    EditField(h,v=6,l,"Склад",Normal,Addr0,false,0); 
  end else begin
    EditField(h,v+=vs,l,"Склад",Normal,Addr0,false,0); 
  end;
  EditField(h,v+=vs,l,"",Normal,Addr1,false,0);
  EditField(h,v+=vs,l,"",Normal,Addr2,false,0);
  EditField(h,v+=vs,l,"",Normal,Addr3,false,0);
  EditField(h,v+=vs,l,"",Normal,Addr4,false,0);
  EditField(h,v+=vs,l,"Контакт. лицо",Normal,Contact,false,0);
  EditField(h,v+=vs,l,"Телефон",Normal,Phone,false,0);
  EditField(h,v+=vs,l,"Факс",Normal,Fax,false,0);
  EditField(h,v+=vs,l,"E-mail",Normal,Email,false,0);
  if (IsEnterprise) then begin
  EditField(h,v+=vs,l,"Классификация",Normal,Classification,false,LocClSClass);
  EditField(h,v+=vs,100,"Ответственный",Normal,RespPerson,false,UserSClass);
  EditField(h2,v,l,"Доступ резервир.",Normal,ReservLocAccess,false,ReservLocAccessSClass);
  end;
  if (HasModNL) then begin
  EditField(h,v+=vs,100,"Счет склада",Normal,StockAcc,false,AccSClass);
  end;
  if (HasObjects) then begin
  EditField(h2,v,l,"Объект",Normal,Objects,false,ObjSClass);
  end;
  if (IsEnterprise) then begin
//  EditField(h,v+=vs,100,"Прейскурант",Normal,PriceList,false,PLDefSClass);
  EditField(h,v+=vs,100,"Склад закупок",Normal,PurLoc,false,LocationSClass);
  EditField(h2,v,l,"Отгр. на счет",Normal,ShipToAccount,false,0);
  EditField(h,v+=vs,100,"Через склад",Normal,ThrouLocation,false,LocationSClass); 
  EditField(h2,v,100,"Счет дебиторов",Normal,ARAcc,false,AccSClass);// Edit ************************** Monday, 15 September 2014 10:11:05
  //EditField(h2,v+=vs,100,"Счет реализации",Normal,SalesAcc,false,AccSClass);// Edit ************************** Monday, 15 September 2014 10:11:05
  CheckBox(h,vm=(v+=30),0,"Игнорировать хронологию",IgnoreChronology);
  CheckBox(h,v+=vs,0,"Требовать место",RequirePos);
  CheckBox(h,v+=vs,0,"Закрыто",Closed); 
  ButtonFrame(h2,v=vm+10,100,2,"Tип");
  RadioButton(h2,v,0,0,"другое",Type);
  RadioButton(h2,v+=16,1,0,"производство",Type);   
  end;
  if (IsEnterprise) then begin
    Tile(tilenr,310,false,tilenr,WHMPalletArea); tilenr = tilenr + 1;
  EditField(h=200,v=6,l=100,"Участок пустых паллет",Normal,WHMPalletArea,false,LocAreaSClass);
  EditField(h,v+=vs,l,"Участок погрузки",Normal,WHMPickArea,false,LocAreaSClass);
  EditField(h,v+=vs,l,"Место для поступлений",Normal,WHMDefPUPosCode,false,PosSClass);
  EditField(h,v+=vs,l,"Место для производства",Normal,WHMDefProdPosCode,false,PosSClass);
  EditField(h,v+=vs,l,"Место упаковочной машины",Normal,WHMWraperPosCode,false,PosSClass);
  EditField(h,v+=vs,l,"Место передачи для погрузки",Normal,WHMDeliveryPosCode,false,PosSClass);//the same as WraperPosCode at ethe moment
  EditField(h,v+=vs,l,"Участок доставки",Normal,WHMDeliveryArea,false,LocAreaSClass);
  EditField(h,v+=vs,l,"Экспресс-счета",Normal,WHMExpressOrderClass,false,OrderClassSClass);
  EditField(h,v+=vs,l,"Поставщик по умолчанию",Normal,WHMDefPUVECode,false,VESClass);
  EditField(h,v+=vs,l,"Coin store number",Normal,CoinStoreNr,false,0);
  EditField(h,v+=vs,l,"FOB поставщик",Normal,FOBSuplier,false,CUSClass);
	EditField(h,v+=vs,l,"Склад консигнации",Normal,ConsigStockCode,false,LocationSClass);
	EditField(h,v+=vs,l,"Склад брака",Normal,DefectStockCode,false,LocationSClass);
	if(currentuser!="SA1")then begin
		EditField(h,v+=vs,-20,"CRMID",Viewonly,CRMid,false,0);
	end else begin
		EditField(h,v+=vs,-20,"CRMID",Normal,CRMid,false,0);
	end;
  
  CheckBox(h,v+=24,0,"Требовать место",RequirePos);
  CheckBox(h,v+=16,0,"Начинать с наиболее высокого места",WHMHighestPosCodeFirst);
  ButtonFrame(h,v+=40,140,3,"Система погрузчика");
  RadioButton(h,v,0,0,"Выкл.",WHMForkLiftSystem);
  RadioButton(h,v+=16,1,0,"Вкл.",WHMForkLiftSystem);
  RadioButton(h,v+=16,2,0,"Вкл., режим погрузки выкл.",WHMForkLiftSystem);
  end;
  EndWindow;
end;

window ResRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm;
  WindowBegin("Определите отчет о прибыли и убытках",ResRClass,CGRcW,RcType);
  SetWRect(20,80,527,370);
  PeriodField(h=100,v=6,"Период");
  if (IsEnterprise) then begin
  EditFieldTL(h,v+=20,150,"Период бюджета",M4UStr,Normal,21,Stext,false,PerSClass);
  end;
  if (HasObjects) then begin
  EditFieldTL(h,v+=20,150,"Объект",M4UStr,Normal,60 ,ObjStr,false,ObjSClass);
  EditFieldTL(h,v+=20,50,"Тип объекта",M4UStr,Normal,5 ,ObjType,false,OTSClass);
  CheckBox(180,v,0,"Включая объекты без типа",flags[2]);
  end;
  if (HasMultiCurrency) then begin
  EditField(h,v+=20,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
  end;
  if (HasLanguages) then begin
  EditField(h,v+=20,50,"Язык",Normal,Language,false,LangSClass);  
  end;
  if (HasObjects) then begin
  EditFieldTL(h,v+=20,150,"Искл. объект",M4UStr,Normal,60,f6,false,ObjSClass);
  end;
  EditFieldTL(345,v+=25,70,"Отображать отчет по курсу",M4Val,Normal,0,vals3,false,0);	//Edit----------------------Dima  04.02.2016
  EditFieldTL(345,v+=20,70,"Отображать отчет по курсу на пред.год",M4Val,Normal,0,vals4,false,0);	//Edit***************************Sasha2,16:12 02.03.2016
  EditFieldTL(345,6,120,"Заголовок",M4Str,Normal,60 ,f1,false,0);
  ButtonFrame(h=30,vm=(v+=41),123,5,"Счета");
  RadioButton(h,v,0,0,"все",AccSpec);
  RadioButton(h,v+=16,1,0,"только использ.",AccSpec);
  if (IsEnterprise) then begin
  RadioButton(h,v+=16,2,0,"только группы",AccSpec);
  RadioButton(h,v+=16,3,0,"только исп.группы",AccSpec);
  RadioButton(h,v+=16,4,0,"с сальдо",AccSpec);
  end;
  EndFrame;
  ButtonFrame(h+=148,v=vm,123,6,"Представление");
  RadioButton(h,v,0,0,"точное",Notation);
  RadioButton(h,v+=16,4,0,"без десятичных",Notation);
  RadioButton(h,v+=16,1,0,"тысячи",Notation);
  RadioButton(h,v+=16,2,0,"миллионы",Notation);
  if (IsEnterprise) then begin
  RadioButton(h,v+=16,3,0,"% оборот",Notation);
    CheckBox(h,v+=16,0,"Сравнение в %",flags[1]);		
  end;
  EndFrame;
	CheckBox(h,v+=20,0,"Глобальный",sorting);
	EditField(h+150,v,70,"Об/ком",Normal,f9,false,CompObjSClass);
  ButtonFrame(h+=148,v=vm,140,2,"Сравнение");// Edit ************************** Monday, 13 October 2014 09:57:57
  RadioButton(h,v,0,0,"накопленное",Comparison);
  RadioButton(h,v+=16,1,0,"предыдущ. год",Comparison);
	
  //RadioButton(h,v+=16,4,0,"предыдущ. результат",Comparison);
  //if (IsEnterprise) then begin
  //RadioButton(h,v+=16,2,0,"бюджет",Comparison);
  //RadioButton(h,v+=16,3,0,"пересмотр. бюджет",Comparison);
  //end;
  EndFrame;
  //CheckBox(h+100,v-16,0,"Add",flags[6]);//fir internal use only
  if (HasBase2) then begin
  ButtonFrame(h,v+=40,123,2,"Значения в");
  RadioButton(h,v,0,0,"В осн. валюте 1",basecurncy);
  RadioButton(h,v+=16,1,0,"В осн. валюте 2",basecurncy);
  end;
  if (IsEnterprise) then begin
    CheckBox(h=30,v=(v+=20),0,"Включая симуляции",SimVerf);
  CheckBox(h,v+=16,0,"Список ном. зап. оп.",flags[4]);
  CheckBox(h,v+=16,0,"Без заголовка",flags[5]);
end;
  EndWindow;
end;

window CorspRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,v,vs;
  WindowBegin("Определите корреспондирующие счета",CorspRClass,CGRcW,RcType);
  SetWRect(20,80,500,160);
  vs = 20;
  PeriodField(h=180,v=6,"Период");
  EditFieldTL(h,v+=vs,150,"Основной счет",M4UStr,Normal,20,AccStr,false,AccSClass);// Edit ************************** Monday, 13 October 2014 16:59:58
  EditFieldTL(h,v+=vs,150,"Корресп. счет",M4UStr,Normal,20,f2,false,AccSClass);// Edit ************************** Monday, 13 October 2014 16:59:59
  EditFieldTL(h,v+=vs,150,"Объект",M4UStr,Normal,20,ObjStr,false,ObjSClass);// Edit ************************** Wednesday, 26 November 2014 10:29:46
  CheckBox(h1=200,v+=30,0,"Только сальдо",ArtMode);
  CheckBox(h1,v+=16,0,"Список номеров записей операций",flags[4]);
  EndWindow;
end;

window UserDefRepLinesDClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v;
  WindowBegin("Строка отчета",UserDefRepLinesDClass,CGview,-);
  BrowseButtons(false);
  UseView(UserDefRepLinesVc);


  SetWRect(20,80,720,760);
  EditField(h=100,v=6,50,"Номер",Normal,IdKey,false,0);
  EditField(h2=250,v,150,"Наимен.",ViewOnly,shortname,false,0);
  EditField(h,v+=20,300,"Комментарий",Normal,Comment,false,0);
  if (IsEnterprise) then begin
  EditField(500,v,-40,"Допол. код",Normal,SpecCode,false,0);
  // Edit Start ---------------------------------------------- Edit Start
	//Tuesday, 21 October 2014 11:58:43
	
  ButtonFrame(430,v+=40,200,4,"Тип строки");
  RadioButton(430,v,0,0,"Стандарт",CustType);
  RadioButton(430,v+=16,1,0,"Баланс на начало периода",CustType);
  RadioButton(430,v+=16,2,0,"Оборот I полугодие",CustType);
  RadioButton(430,v+=16,3,0,"Оборот II полугодие",CustType);
  
	// Edit End ---------------------------------------------- Edit End
	
  end;
  EditField(h,50,300,"Счета",Normal,Desc,false,AccSClass);
  EditField(h,70,300,"",Normal,Desc2,false,AccSClass);
  EditField(h,90,300,"",Normal,Desc3,false,AccSClass);
  if (IsEnterprise) then begin
  EditField(h,110,80,"Кор. счет",Normal,CorspAcc,false,AccSClass);
  EditField(h+150,110,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);// Edit ************************** Thursday, 5 March 2015 14:49:32
  end;
  ButtonFrame(h=15,v=150,100,4,"Тип");
  RadioButton(h,v    ,kRsTypeAccounts,0,"счета",RsType);
  RadioButton(h,v+=16,kRsTypeSum,0,"сумма",RsType);
  RadioButton(h,v+=16,kRsTypeText,0,"текст",RsType);
  RadioButton(h,v+=16,kRsTypePageBreak,0,"Разделитель",RsType);
  ButtonFrame(h=150,v=150,100,5,"Вид счета");
  RadioButton(h,v    ,0,0,"Актив",AccType);
  RadioButton(h,v+=16,1,0,"Пассив",AccType);
  RadioButton(h,v+=16,2,0,"Капитал",AccType);
  RadioButton(h,v+=16,3,0,"Доходы",AccType);
  RadioButton(h,v+=16,4,0,"Расходы",AccType);
  ButtonFrame(h=285,v=150,100,3,"Сторона");
  RadioButton(h,v    ,0,0,"Нормальный",DCSide);
  RadioButton(h,v+=16,1,0,"Дебет",DCSide);
  RadioButton(h,v+=16,2,0,"Кредит",DCSide);
  
  CheckBox(h,v+=26,0,"Детализация по объектам",ObjDetail);// Edit ************************** Friday, 22 January 2016 10:47:18
  CheckBox(h,v+=16,0,"Вывести себестоимость проданного товара",SalesOfGoodsUse);//Edit-------------------Vitalii 17:31 28.08.2017
  CheckBox(h,v+=16,0,"Retail",SalesOfGoodsUseRetail);// Edit ************************** BPI Ukraine - KramarAlexandr - Monday, 5 November 2018 09:57:01

	
  ButtonFrame(h=410,v=150,100,3,"Актив/Пассив");
  RadioButton(h,v    ,0,0,"Нормальный",DCSaldo);
  RadioButton(h,v+=16,1,0,"Только дебет",DCSaldo);
  RadioButton(h,v+=16,2,0,"Только кредит",DCSaldo);
  if (HasLanguages) then begin
  MatrixBegin(4,v=276,-32,-20,INTextRowType,99);
  MatCol(1,24,"Язык",0,LangCode,false,LangSClass);
  MatCol(1,94,"Текст",0,Text,false,0);
  EndMatrix;
  end;
  EndWindow;
end;
  
  window CLCorspDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v;
  WindowBegin("Способ корреспонденции",CLCorspDClass,CGview,CLCorspView);
  SetWRect(64,80,509,150);
  UseView(CLCorspVc);
  EditField(120,v=6,140,"Код",St_i,Code,false,0);
  CheckBox(300,v,0,"Закрыт",Closed);
  EditField(120,v+=20,300,"Комментарий",Normal,Comment,false,0);
  EditField(120,v+=20,80,"Счет",Normal,AccNumber,false,AccSClass);
  EditField(120,v+=20,300,"Объекты",Normal,Objects,false,ObjSClass);// Edit ************************** Thursday, 30 October 2014 09:41:58
  EndWindow;
end;

window CLCorspLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Способы корреспонденции",CLCorspLClass,CGmlist,CLCorspView);
  SetWRect(64,80,509,298);
  SpawnClass(CLCorspDClass);
  Sizeable(-1,-1,0,0);
  UseView(CLCorspVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,  "Код",Code,false,Code);
  RlColKey(141,141,"Комментарий",Comment,false,Comment);
  RlCol(300,300,"Объекты",Objects,false);// Edit ************************** Thursday, 30 October 2014 09:50:50
  SearchField("Найти");
  EndWindow;
end;



window OSDLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Лишние,недостающие,поврежденные товары",OSDLClass,CGmlist,-);
  SetWRect(20,80,850,500);
  SpawnClass(OSDDClass);
  Sizeable(-1,-1,0,0);
  UseView(OSDVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,  "Код",Code,false,Code);
	RlCol(110,110,"OK",OKFlag,false);
  RlCol(141,141,"Комментарий",Comment,false);
	RlColKey(300,300,"Дата",TransDate,false,Date);
  RlColKey(400,400,"Номер зак.",PONr,false,PONr);
	RlColKey(500,500,"Дата зак.",PODate,false,PODate);
	RlCol(-200,-200,"Поставщик",VendorCode,false);
	RlCol(-100,-100,"Наим.",VendorName,false);
  SearchField("Найти");
  EndWindow;
end;



window OSDDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,l,t,v,vs,f;
	integer flipnr;
  WindowBegin("Лишние,недостающие,поврежденные товары",OSDDClass,CGview,-);
  SetWRect(20,80,850,540);
  UseView(OSDVc);
	FormName(PrintOSDD);
  ActiveFieldOnNew("TransDate");
	Sizeable(-1,-1,0,0);
  vs = 20; h = 100; h2 = 300; h3 = 420; h4 = 620;
	EditField(h,v=20, 100,"OS&D Nr",Normal,Code,false,OSDCodeSClass);
  EditField(h2,v, 100,"OS&D Date",Normal,TransDate,false,PasteCurDate);
  CheckBox(-60,v,0,"OK",OKFlag);
  EditField(h,v+=vs, 100,"PO Nr",Normal,PONr,false,0);
  EditField(h2,v, 100,"PO Date",Normal,PODate,false,PasteCurDate);
  EditField(h,v+=vs, 100,"Ref PR Nr",Normal,RefPRNr,false,0);
  EditField(h2,v, 100,"Project Code",Normal,PrjCode,false,0);
	EditField(h,v+=vs, 100,"Vendor",Normal,VendorCode,false,VESClass);
  EditField(h2-90,v, 190,"",Normal,VendorName,false,0);
	EditField(h,v+=vs, 300,"Contact",Normal,Contact,false,0);
	EditField(h,v+=vs, 100,"Phone",Normal,Phone,false,0);
	EditField(h2,v, 100,"Fax",Normal,Fax,false,0);
	EditField(h3+50,v, 100,"GRR Nr",Normal,GBRNr,false,0);
	EditField(h,v+=vs, 620,"Remarks",Normal,Comment,false,0);
	
	
	v=25;
	
	ButtonFrame(h3,v,80,4,"Type");
		RadioButton(h3,v+=10,0,0,"Shortage",OSDType);
		RadioButton(h3,v+=vs,1,0,"Damaged",OSDType);
		RadioButton(h3,v+=vs,2,0,"Overage",OSDType);	
		
	v=25;
		
	ButtonFrame(h3+110,v,80,4,"Action");
		RadioButton(h3+110,v+=10,0,0,"Reorder",OSDAction);
		RadioButton(h3+110,v+=vs,1,0,"Restoration",OSDAction);
		RadioButton(h3+110,v+=vs,2,0,"No action",OSDAction);	
	
	v=25;
	
	ButtonFrame(h3+220,v,200,6,"Responsible For");
		RadioButton(h3+220,v,0,0,"Manufacturer",OSDRespFor);
		RadioButton(h3+220,v+=vs,1,0,"Shipper",OSDRespFor);
		RadioButton(h3+220,v+=vs,2,0,"Company",OSDRespFor);	
		RadioButton(h3+220,v+=vs,3,0,"Client",OSDRespFor);
		RadioButton(h3+220,v+=vs,4,0,"On clarification (Undetermined)",OSDRespFor);	
		
		
  MatrixBegin(h-95,v=180,-40,-105,-,99);
		Flip(0);
		MatCol(1,24,"Item",0,ArtCode,false,INSClass);
		flipnr = 1;
    Flip(flipnr); flipnr = flipnr + 1;
		MatCol(1,110,"Qty",0,Quant,false,0);
		if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,140,"UOM",0,UnitCode,false,0); end;
		MatCol(1,170,"Article",0,Article,false,0);
		MatCol(1,270,"Name",0,Spec,false,0);
		MatCol(1,-390,"Colour/Size",0,Classification,false,0);
		if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-240,"Price",0,Price,false,0); end;
		if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-160,"Cost Pr AZN",0,CostPrice,false,0); end;
		if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-80,"Sum AZN",0,Sum,false,0); end;
		Flip(flipnr); flipnr = flipnr + 1;
		MatCol(1,110,"Description",0,Description,false,0);
		DeleteRowTest;
    InsertRowTest;
  EndMatrix; 
	
	vs = 20;
  v = 180; 
	if (flipnr>2) then begin
		for (f=1;f<flipnr;f=f+1) begin
			VTab(-25,v,-6,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
			v = v + vs;
		end;
	end;
	
	if (UserCanAction("ViewMoneyInf",true))then begin EditField(h4+50,-95, 100,"Total",Normal,Total,false,0); end;
		
	EditField(h+50,-65, 200,"Received By",Normal,ReceivedBy,false,UserSClass);
	EditField(h4-50,-65, 200,"Date Recieved",Normal,DateRecvd,false,PasteCurDate);
	EditField(h+50,-35, 200,"Approved By",Normal,ApprovedBy,false,UserSClass);
	EditField(h4-50,-35, 200,"Completed By",Normal,CompletedBy,false,UserSClass);
		
  EndWindow;
	
	
	
end;





window CLCorspSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Выберите способ корреспонденции",CLCorspSClass,CGslist,CLCorspView);
  SetWRect(240,80,950,250);
  Sizeable(-1,-1,0,0);
  UseView(CLCorspVc);
  SpawnClass(CLCorspDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,  "Код",Code,false,Code);
  RlColKey(141,141,"Комментарий",Comment,false,Comment);
  RlCol(-100,-100,"Объекты",Objects,false);// Edit ************************** Thursday, 30 October 2014 09:50:54
  SearchField("Найти");
  EndWindow;
end;

window AddObjTRVClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  WindowBegin("Определите добавление объекта в записи операций",AddObjTRVClass,CGMnt,RcType);
  SetWRect(20,80,400,200);
  
  PeriodField(h=150,v=6,"Период");
  vs=20;
  EditFieldTL(h,v+=vs,200,"Объект",M4UStr,Normal,60,f1,false,ObjSClass);
  EditFieldTL(h,v+=vs,200,"Убрать объект из счета",M4UStr,Normal,60,f3,false,ObjSClass);
  EditFieldTL(h,v+=vs,200,"Заменить на объект",M4UStr,Normal,60,f4,false,ObjSClass);
  EditFieldTL(h,v+=vs,200,"Счет",M4UStr,Normal,60,f2,false,AccSClass);// Edit ************************** Saturday, 1 November 2014 13:01:08
  CheckBox(h,v+=20,0,"Пропустить все проверки",flags[0]);
  EndWindow;
end;

window GCDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vm,vs;
  WindowBegin("Выпущенный подарочный сертификат",GCDClass,CGview,-);
  SetWRect(64,80,550,200);
  UseView(GCVc);
  FormName(GCForm);
  v = 6; vs = 20; h = 80; h2 = 240;
  EditField(h,vm=v, 55,"Номер",Normal,SerNr,false,TSerSClass);
  EditField(h2,v, 70,"Сумма",Normal,Amount,true,0);
  CheckBox(-90,v,0,"OK",OKFlag);
  EditField(h,v+=vs, 70,"Дата опер.",Normal,TransDate,false,PasteCurDate);
  EditField(h2,v, 70,"Действ. до",Normal,ExpiryDate,false,PasteCurDate);
  EditField(h,v+=vs, 100,"Штрих-код",Normal,BarCode,false,0);
  EditField(h,v+=vs, -20,"Коммент.",Normal,Comment,false,0);
  CheckBox(-90,v,0,"Закрыт",Closed);	//Edit----------------------Dima  25.02.2015
  EndWindow;
end;


window GCSDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vm,vs;
  WindowBegin("Проданный подарочный сертификат",GCSDClass,CGview,-);
  SetWRect(64,80,470,250);
  UseView(GCSVc);
  v = 6; vs = 20; h = 80; h2 = 270;
  EditField(h,vm=v, 55,"Номер",Normal,SerNr,false,TSerSClass);
  EditField(h2,v, 70,"Сумма",Normal,Amount,true,0);
  EditField(h,v+=vs, 70,"Дата опер.",Normal,TransDate,false,PasteCurDate);
  EditField(h2,v, 70,"Действ. до",Normal,ExpiryDate,false,PasteCurDate);
  EditField(h,v+=vs, -20,"Коммент.",Normal,Comment,false,0);  
  EditField(h,v+=vs, 100,"Штрих-код",Normal,BarCode,false,0);  
  if(left(currentuser,2)=="SA")then begin
		EditField(h2,v, 70,"Баланс",Normal,Balance,true,0);
  end else begin
  	EditField(h2,v, 70,"Баланс",ViewOnly,Balance,true,0);
  end;
  CheckBox(-90,v+=vs,0,"Закрыт",Closed);	//Edit----------------------Dima  25.02.2015
  EndWindow;
end;

window ARSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  Boolean testf;

  WindowBegin("Выберите неоплаченные сч/ф",ARSClass,CGslist,-);
  SetWRect(64,80,710,298);
  Sizeable(150,150,0,0);
  UseView(ARVc);
  RecordList(4,17,-21,-39);
  testf = true;
  if (Left(BuildProductCode,8)=="Standard") then begin 
    if (HasLocalization("POL")) then begin 
      RlColKey(4,4,"Счет фактура",OfficialSerNr,false,OfficialSerNr); 
      RlColKey(114,114,"Срок оплаты",DueDate,false,DueDate); 
      testf = false;
    end;
  end;
  if (testf) then begin
  RlColKey(4,4,    "№ сч/ф",InvoiceNr,false,InvoiceNr);
  RlColKey(70,70,  "Дата опл.",DueDate,false,DueDate);
  end;
  if (IsEnterprise) then begin
    RlColKey(151,151,"Оф. номер",OfficialSerNr,false,OfficialSerNr);
    RlColKey(260,260,"Клиент",CustCode,false,CustCode); 
    RlColKey(340,340,"Наим.",CustName,false,CustName); 
  end else begin
    testf = true;
    if (Left(BuildProductCode,8)=="Standard") then begin 
      if (HasLocalization("POL")) then begin
        RlColKey(194,194,"Клиент",CustCode,false,CustCode); 
        RlColKey(274,274,"Наименование",CustName,false,CustName); 
        testf = false;
      end;
    end;
    if (testf) then begin
  RlColKey(141,141,"Клиент",CustCode,false,CustCode);   
  RlColKey(220,220,"Наименование",CustName,false,CustName); 
    end;
  end;
  RlColKey(-120,-120, "Сумма",RVal,true,RVal);
  CalculatedColumn(-60,-60,"Магазин","InvoiceFromLocation_AR",true);
  SearchField("Поиск");
  EndWindow;
end;



window APSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Выберите неоплаченный сч/ф поставщика",APSClass,CGslist,-);
  SetWRect(20,80,1200,420);
  Sizeable(-1,-1,0,0);
  UseView(APVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,1,    "Номер",SerNr,false,SerNr);
  RlColKey(71,71,  "№ сч/ф поставщ.",InvoiceNr,false,InvoiceNr);
  RlCol   (196,196,"Сотр.",RefStr,false);
  RlColKey(280,280,"Срок оплаты",DueDate,false,DueDate);
  RlCol   (355,355,"Дата скидки",RebDate,false); 
  RlColKey(430,430,"Поставщик",VECode,false,VECode); 
  RlColKey(500,500,"Наимен.",VEName,false,VEName); 
  RlColKey(-200,-200,"Остаток",RVal,false,RVal);
  CalculatedColumn(-100,-100,"Объект","InvoiceFromLocation_AP",true);
  SearchField("Найти");
  EndWindow;
end;


window ARPaySClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Выберите предоплату - все",ARPaySClass,CGslist,-);
  SetWRect(20,80,780,298);
  Sizeable(150,150,0,0);
  UseView(ARPayVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,    "Номер",CUPNr,false,CUPNr);
  if (HasmodSO==false) then begin
  RlColKey(90,90,  "Дата опл.",PayDate,false,PayDate); 
  RlColKey(165,165,"Клиент",CustCode,false,CustCode); 
  RlColKey(300,300,"Наим.",CustName,false,CustName); 
  RlCol(-150,-150, "Сумма",RVal,true); 
  end else begin
  RlColKey(90,90,    "№ сч.",OrderNr,false,OrderNr);
  RlColKey(180,180,  "Дата опл.",PayDate,false,PayDate);
  RlColKey(255,255,"Клиент",CustCode,false,CustCode);
  RlColKey(310,310,"Наим.",CustName,false,CustName);
  RlCol(-290,-290, "НДС",VATVal,true);
  RlCol(-230,-230, "Сумма",RVal,true);
  RlCol(-170,-170, "Заброн.",BookRVal,true);
  end;
  RlCol(-120,-120, "Валюта",CurncyCode,false);
  CalculatedColumn(-80,-80,"Объект","IPLocationThroughInvoice",true);
  SearchField("Найти");
  EndWindow;
end;



window OPPSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Выберите открытую предоплату",OPPSClass,CGslist,-);
  SetWRect(20,80,750,355);
  Sizeable(-1,-1,0,0);
  UseView(OPPVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,1,    "Номер",SerNr,false,SerNr);
  RlColKey(90,90,    "№ сч.",OrderNr,false,OrderNr);
  RlColKey(180,180,"Дата оплаты",PayDate,false,PayDate);
  RlColKey(250,250,"Пост.",VECode,false,VECode);
  RlColKey(310,310,"Наим.",VEName,false,VEName);
  RlCol(-290,-290, "НДС",VATVal,true);
  RlCol(-230,-230, "Сумма",PPVal,true);
  RlCol(-170,-170, "Заказанная",BookRVal,true);
  RlCol(-110,-110, "Вал.",CurncyCode,false);
  CalculatedColumn(-80,-80,"Объект","OPLocationThroughInvoice",true);
  SearchField("Найти");
  EndWindow;
end;

window STCompRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Определите сравнение инвентаризации",STCompRClass,CGRcW,RcType);
  SetWRect(20,80,470,400);
  v = 6; vs = 20; h = 140;
  EditFieldTL(h,v, 150,"Товар",   M4UStr,Normal,50,f1,false,INSClass);
  if (HasItemGroups) then begin
    EditFieldTL(h,v+=vs, 150,"Группа",   M4UStr,Normal,5,f3,false,ITSClass);
  end;
  if (HasItemClassification) then begin
    EditFieldTL(h,v+=vs, 150,"Классификация товара", M4UStr,Normal,60,f4,false,DISClass);
    EditFieldTL(h,v+=vs, 80,"Вид классификации",M4UStr,Normal,60,f5,false,CTypeSClass);
  end;
  if (HasMultiLocations) then begin
    EditFieldTL(h,v+=vs, 150,"Склад",   M4Code,Normal,10,AccStr,false,LocationSClass);
  end;
  if (HasPositions) then begin
    EditFieldTL(h,v+=vs, 150,"Место",   M4Code,Normal,10,LastAcc,false,PosSClass);
  end;
  EditFieldTL(h,v+=vs, 80,"Дата",   M4Date,Normal,0,RegDate,false,PasteCurDate);
  if (IsEnterprise) then begin
    EditFieldTL(h,v+=vs, 80,"Отклонение ст-сти >",M4Val,Normal,0,vals0,true,0); 
  end;
	EditFieldTL(h,v+=vs, 80,"BPIBrand",M4UStr,Normal,60,f6,false,BPIBrandSClass);
  ButtonFrame(h=30,vm=(v+=50),390,3,"Если товара нет в списке Инвентаризаций на указанную дату");
  RadioButton(h,v,0,0,"его кол-во на складе равно 0",flags[3]);
//  RadioButton(h,v+=16,1,0,"If Item not on last #Stocktaking# assume 0 in #Stock#",flags[3]);
  RadioButton(h,v+=16,2,0,"подсчит.кол-во равно 0",flags[3]);
  RadioButton(h,v+=16,3,0,"не показывать товар",flags[3]);
  if (IsEnterprise) then begin
    ButtonFrame(h,vm=(v+=40),150,3,"Сортировка");
    RadioButton(h,v,0,0,"Товар",flags[2]);
    RadioButton(h,v+=16,1,0,"Группа товара",flags[2]);
    RadioButton(h,v+=16,2,0,"Код полки",flags[2]);

    ButtonFrame(h=230,v=vm,155,3,"Функция");
    RadioButton(h,v,0,0,"Показать кол-ва",flags[1]);
    RadioButton(h,v+=16,1,0,"Показывать цены",flags[1]);
    RadioButton(h,v+=16,2,0,"Код полки",flags[1]);
  end;

  CheckBox(h=30,vm=(v+=28),0,"Показать кол-во 2",flags[0]);
  if (IsEnterprise) then begin
    CheckBox(h,v+=16,0,"На серийный номер (используя Статус Серийного номера на сегодняшний день)",flags[5]);
    CheckBox(h=160,v=vm,0,"Не показывать тов-ры если изменен. к-во равно 0",flags[4]);
  end;
  if (CompanyIsJWLikeCompany(currentcompany)) then begin		//Jewelry
  	CheckBox(h=30,v+=45,0,"Исключить обычные товары",flags[6]);
		CheckBox(h,v+=vs,0,"Исключить товары консигн.",flags[7]);
		CheckBox(h,v+=vs,0,"Исключить товары малоцен.",flags[8]);  
	end;
  EndWindow;
end;


window TRDClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  Integer f,flipnr;

  WindowBegin("Запись операции",TRDClass,CGview,-);
  if (HasExtraNLComment) then begin
  SetWRect(20,80,900,400);
  end else begin
  SetWRect(20,80,640,400);
  end;
  UseView(TRVc);
  Sizeable(-1,-1,0,0);
  FormName(PrintTRD);
  ActiveFieldOnNew("TransDate");      
  vs=20;
  if (HasNumberSeries) then begin
  EditField(80,v=6,80, "Номер",Normal,Number,false,TSerSClass);
  end else begin
    EditField(80,v=6,80,"Номер",Normal,Number,false,0); 
  end;
  EditField(240,v,82,"Дата",Normal,TransDate,false,PasteCurDate);
  EnterSkip(Comment);
  if (IsEnterprise) then begin
		EditField(396,v,-40,"Ссылка",Normal,RefStr,false,0);
//  EditField(570,v,80,"Doc No.",Normal,SeqNr,false,0);
  end;
  EditField(80,v+=vs,-40,"Комм.",Normal,Comment,false,0);
//  CheckBox(450,v,0,"E_xported",Expf);
  EnterSkip(Math);
  if (HasBase2) then begin
  EditField(120,  -41,85,"Разница осн.1",ViewOnly,DiffVal,true,0);
  EditField(300,  -41,85,"Подпись",ViewOnly,Sign,true,0);// Edit ************************** Tuesday, 6 October 2015 10:06:11
  
  end else begin
    EditField(120,-41,85,"Разница",ViewOnly,DiffVal,true,0); 
  end;
  if (HasMultiCurrency or HasBase2 or HasMultiCurrency) then begin
    EditField(-265,-41,88,"Итого",ViewOnly,DSum,true,0); 
    EditField(-172,-41,87,"",ViewOnly,CSum,true,0); 
  if (HasBase2) then begin
  EditField(120,  -21,85,"Разница осн.2",ViewOnly,Diff2Val,true,0);
      EditField(-265,-21,88,"Баланс",ViewOnly,DSum2,true,0);
      EditField(-172,-21,87,"",ViewOnly,CSum2,true,0); 
    end;
  end else begin
    EditField(-240,-41,88,"Итого",ViewOnly,DSum,true,0); 
    EditField(-147,-41,87,"",ViewOnly,CSum,true,0); 
    if (HasBase2) then begin
      EditField(120, -21,86,"Разница базы 2",ViewOnly,Diff2Val,true,0); 
      EditField(-240,-21,88,"Итого",ViewOnly,DSum2,true,0); 
      EditField(-147,-21,87,"",ViewOnly,CSum2,true,0); 
    end;
  end;
  h=4; v=v+(vs+17);
  if (HasMultiCurrency or HasBase2 or HasMultiCurrency) then begin
  MatrixBegin(5,vm=v,-50,-46,-,3000);
  end else begin
    MatrixBegin(5,vm=v,-25,-46,-,3000);
  end;
  MatTypedRow(stp);
  MatOverStrike(ovst);
  Flip(0);
  flipnr = 1;
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,32,"Счет",0,AccNumber,false,AccSClass); 
  if (HasObjects) then begin
  MatCol(1,98,"Объекты",0,Objects,false,ObjSClass);
//  MatCol(1,-400,"Short.",0,ACShort,false,ACShortSClass); // what the hell is this? Karl
  if (HasExtraNLComment) then begin
  MatCol(1,-550,"Комментарий",0,Comment,false,0); // -349 
  MatCol(1,-380,"Дополнительный комментарий",0,ExtraComment,false,0); // -349 
  end else begin
  MatCol(1,-400,"Комментарий",0,Comment,false,0); // -349
  end;
  end else begin
//  MatCol(1,-400,"Short.",0,ACShort,false,ACShortSClass); // what the hell is this? Karl
    if (HasExtraNLComment) then begin
      MatCol(1,-550,"Описание",0,Comment,false,0); // -349 
      MatCol(1,-380,"Доп. описание",0,ExtraComment,false,0); // -349 
    end else begin
      MatCol(1,-550,"Описание",0,Comment,false,0); // -349 
    end;
  end;
  if (HasMultiCurrency) then begin
  MatCol(1,-210,"Дт осн.1",0,DebVal,true,0);
  MatCol(1,-120,"Кт осн.1",0,CredVal,true,0);
  end else begin
    MatCol(1,-210,"Дебет",0,DebVal,true,0); 
    MatCol(1,-120,"Кредит",0,CredVal,true,0); 
  end;
  MatCol(1,-30,"НДС",0,VATCode,false,VATCodeSClass);
  MatText(2,32,"Подпись",true);
  MatColTL(2,108,"",0,M4Code,ViewOnly,0,Sign,false,0);
  MatText(2,160,"Дата старой записи",true);
  MatColTL(2,290,"",0,-1,ViewOnly,-1,OldTransDate,false,0);
  MatText(3,32,"Исправлено записью",true);
  MatColTL(3,215,"",0,M4AppCode,ViewOnly,0,CorrNr,false,0);
  MatText(3,315,"Дата исправления",true);
  MatCol(3,385,"",0,CorrDate,false,0);
  MatText(4,32,"Исправление записи",true);
  MatColTL(4,215,"",0,M4AppCode,Normal,0,CorrNr,false,0);
  if (HasBase2) then begin
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,32,"Счет",0,AccNumber,false,AccSClass);
    if (HasObjects) then begin
  MatCol(1,98,"Объекты",0,Objects,false,ObjSClass);
    end else begin
      MatCol(1,-550,"Описание",0,Comment,false,0); 
    end;
  MatCol(1,-400,"Дт осн.1",0,DebVal,true,0);
  MatCol(1,-300,"Кт осн.1",0,CredVal,true,0);
  MatCol(1,-200,"Дт осн.2",0,DebVal2,true,0);
  MatCol(1,-100,"Кт осн.2",0,CredVal2,true,0);
  MatText(2,32,"Подпись",true);
  MatCol(2,108,"",0,Sign,false,0);
  MatText(2,160,"Дата старой записи",true);
  MatColTL(2,290,"",0,-1,ViewOnly,-1,OldTransDate,false,0);
  MatText(3,32,"Исправлено записью",true);
  MatColTL(3,215,"",0,M4AppCode,ViewOnly,0,CorrNr,false,0);
  MatText(3,315,"Дата исправления",true);
  MatCol(3,385,"",0,CorrDate,false,0);
  MatText(4,32,"Исправление записи",true);
  MatColTL(4,215,"",0,M4AppCode,Normal,0,CorrNr,false,0);
  end;
  if (HasMultiCurrency) then begin
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(1,32,"Счет",0,AccNumber,false,AccSClass);
  if (HasObjects) then begin
    MatCol(1,98,"Объекты",0,Objects,false,ObjSClass);
  end else begin
    MatCol(1,-550,"Описание",0,Comment,false,0); 
  end;
  MatCol(1,-480,"Клиент",0,CustCode,true,CUSClass); //Edit***************************Sasha2,12:16 23.01.2017
  if (HasBase2) then begin
    MatCol(1,-410,"Осн.1 Дт",0,DebVal,true,0);
    MatCol(1,-330,"Осн.1 Кт",0,CredVal,true,0);
  end else begin
    MatCol(1,-410,"Дебет",0,DebVal,true,0); 
    MatCol(1,-330,"Кредит",0,CredVal,true,0); 
  end;
  MatCol(1,-250,"Валюта",0,Curncy,false,CurncyCodeSClass);
  MatCol(1,-200,"Дт в валюте",0,CurDebVal,true,0);
  MatCol(1,-100,"Кт в валюте",0,CurCredVal,true,0);
  MatText(2,32,"Подпись",true);
  MatCol(2,108,"",0,Sign,false,0);
  MatText(2,160,"Дата старой записи",true);
  MatColTL(2,290,"",0,-1,ViewOnly,-1,OldTransDate,false,0);
  MatText(3,32,"Исправлено записью",true);
  MatColTL(3,215,"",0,M4AppCode,ViewOnly,0,CorrNr,false,0);
  MatText(3,315,"Дата исправления",true);
  MatCol(3,385,"",0,CorrDate,false,0);
  MatText(4,32,"Исправление записи",true);
  MatColTL(4,215,"",0,M4AppCode,Normal,0,CorrNr,false,0);
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,32,"Счет",0,AccNumber,false,AccSClass);
    if (HasObjects) then begin
  MatCol(1,98,"Объекты",0,Objects,false,ObjSClass);
    end else begin
      MatCol(1,-550,"Описание",0,Comment,false,0); 
    end;
    if (HasBase2) then begin
      MatCol(1,-400,"Валюта",0,Curncy,false,CurncyCodeSClass);
  MatCol(1,-350,"Курс осн.1",0,BaseRate1,true,0);
  MatCol(1,-280,"Курс осн.2",0,BaseRate2,true,0);
    end else begin
      MatCol(1,-300,"Валюта",0,Curncy,false,CurncyCodeSClass); 
    end;
  MatCol(1,-210,"За...ед.",0,FrRate,true,0);
  MatCol(1,-140,"по кур.1",0,ToRateB1,true,0);
    if (HasBase2) then begin
  MatCol(1,-70,"по кур.2",0,ToRateB2,true,0);
    end;
  MatText(2,32,"Подпись",true);
  MatCol(2,108,"",0,Sign,false,0);
  MatText(2,160,"Дата старой записи",true);
  MatColTL(2,290,"",0,-1,ViewOnly,-1,OldTransDate,false,0);
  MatText(3,32,"Исправлено записью",true);
  MatColTL(3,215,"",0,M4AppCode,ViewOnly,0,CorrNr,false,0);
  MatText(3,315,"Дата исправления",true);
  MatCol(3,385,"",0,CorrDate,false,0);
  MatText(4,32,"Исправление записи",true);
  MatColTL(4,215,"",0,M4AppCode,Normal,0,CorrNr,false,0);
  end;
  if (IsEnterprise) then begin
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,32,"T",0,Typ,false,SetSClass);
  MatCol(1,52,"Номер",0,SerNr,false,ARSClass);
  MatCol(1,112,"Срок опл.",0,DueDate,false,PasteCurDate);
  MatCol(1,184,"Наимен.",0,CompCode,false,CUSClass);
  if (HasExtraNLComment) then begin
  MatCol(1,-550,"Комментарий",0,Comment,false,0); 
  MatCol(1,-380,"Дополнительный комментарий",0,ExtraComment,false,0); 
  end else begin
  MatCol(1,-400,"Коммент.",0,Comment,false,0);
  end;
  MatCol(1,-290,"Счет",0,AccNumber,false,AccSClass);
  MatCol(1,-210,"Дебет",0,DebVal,true,0);
  MatCol(1,-120,"Кредит",0,CredVal,true,0);
  MatCol(1,-30,"НДС",0,VATCode,false,VATCodeSClass);
  MatText(2,32,"Подпись",true);
  MatCol(2,108,"",0,Sign,false,0);
  MatText(2,160,"Дата старой записи",true);
  MatColTL(2,290,"",0,-1,ViewOnly,-1,OldTransDate,false,0);
  MatText(3,32,"Исправлено записью",true);
  MatColTL(3,215,"",0,M4AppCode,ViewOnly,0,CorrNr,false,0);
  MatText(3,315,"Дата исправления",true);
  MatCol(3,385,"",0,CorrDate,false,0);
  MatText(4,32,"Исправление записи",true);
  MatColTL(4,215,"",0,M4AppCode,Normal,0,CorrNr,false,0);
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,32,"Счет",0,AccNumber,false,AccSClass);
    if (HasObjects) then begin
  MatCol(1,98,"Объект",0,Objects,false,ObjSClass);
    end;
  if (HasExtraNLComment) then begin
  MatCol(1,-550,"Комментарий",0,Comment,false,0); 
  MatCol(1,-380,"Дополнительный комментарий",0,ExtraComment,false,0); 
  end else begin
  MatCol(1,-420," Коммент.",0,Comment,false,0);
  end;
  MatCol(1,-330,"Номинал",0,NomVal,true,0);
  MatCol(1,-230,"Дебет",0,DebVal,true,0);
  MatCol(1,-130,"Кредит",0,CredVal,true,0);
  MatCol(1,-30,"Корр.",0,CorspSer,false,0);
  MatText(2,32,"Подпись",true);
  MatCol(2,108,"",0,Sign,false,0);
  MatText(2,160,"Дата старой записи",true);
  MatColTL(2,290,"",0,-1,ViewOnly,-1,OldTransDate,false,0);
  MatText(3,32,"Исправлено записью",true);
  MatColTL(3,215,"",0,M4AppCode,ViewOnly,0,CorrNr,false,0);
  MatText(3,315,"Дата рег-ции",true);
  MatCol(3,385,"",0,CorrDate,false,0);
  MatText(4,32,"Исправление на запись",true);
  MatColTL(4,215,"",0,M4AppCode,Normal,0,CorrNr,false,0);
    Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,32,"Счет",0,AccNumber,false,AccSClass);
    if (HasObjects) then begin
  MatCol(1,98,"Объекты",0,Objects,false,ObjSClass);
    end;
  if (HasExtraNLComment) then begin
  MatCol(1,-550,"Комментарий",0,Comment,false,0); 
  MatCol(1,-380,"Дополнительный комментарий",0,ExtraComment,false,0); 
  end else begin
  MatCol(1,-420,"Комментарий",0,Comment,false,0);
  end;
  MatCol(1,-260,"Налог. счет",0,TAccNumber,false,TAccSClass);
  MatCol(1,-180,"Количество",0,Qty,true,0);
  MatCol(1,-100,"CorrespNr",0,CorrespNr,false,0);
  MatCol(1,-50,"RowNr",0,RowNr,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 01, 21 05 2018 y. о 16:55:31
  MatText(2,32,"Подпись",true);
  MatCol(2,108,"",0,Sign,false,0);
  MatText(2,160,"Дата старой записи",true);
  MatColTL(2,290,"",0,-1,ViewOnly,-1,OldTransDate,false,0);
  MatText(3,32,"Исправлено записью",true);
  MatColTL(3,215,"",0,M4AppCode,ViewOnly,0,CorrNr,false,0);
  MatText(3,315,"Дата рег-ции",true);
  MatCol(3,385,"",0,CorrDate,false,0);
  MatText(4,32,"Исправление на запись",true);
  MatColTL(4,215,"",0,M4AppCode,Normal,0,CorrNr,false,0);
  end;
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 20;
  v = vm + 1; 
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
      v = v + vs;
    end;
  end;
  SpecialMenu("Сбалансировать",'B',0,"BalanceTRDsm");
  SpecialMenu("Поменять дебет и кредит",' ',1,"SwapDCTRDsm");
  SpecialMenu("Отметка об изменении",' ',2,"UpdateMarkTRDsm");
  SpecialMenu("Отметка об исправлении",' ',3,"CorrectionMarkTRDsm");
  SpecialMenu("Рассчитать поле",'F',4,"CalcFieldTRDsm");
  SpecialMenu("Поменять знак",' ',5,"ChangeSignTRDsm");
  SpecialMenu("Открыть запись подсистемы",'t',6,"OpenSubsystemTRDsm");
  f = 7;
  if (HasMultiCurrency) then begin
  SpecialMenu("Обновить курсы валют",' ',f,"UpdCurRateTRDsm");
  f = f + 1;
  end;
  if (currentuser=="SA") then begin //Edit-------------------Vitalii 17:07 08.02.2016
    SpecialMenu("Создать отрицательное нач. сальдо",' ',f,"CreateNegBalTRDsm");
  end;
  EndWindow;
end;

window USDClass:5
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,v,vm,vs;
  WindowBegin("Сотрудник",USDClass,CGview,UserView);
  SetWRect(64,80,509,380);
  Sizeable(-1,-1,0,0);
  UseView(UserVc);
  Tile(0,70,false,"",Code);
  vs = 20; h=150; h2 = 290; h3 = 350;
  EditField(h,v=6, 55,"Код",St_i,Code,false,0);
  EditField(h,v+=vs,300,"ФИО",Normal,Name,false,0); 
  TileButton(1,"Доступ");
  TileButton(2,"Сер. номера");
  TileButton(3,"Продажи");
  TileButton(4,"Счета");
  TileButton(5,"Калькуляция проектов");
  TileButton(6,"Web");
  TileButton(7,"Ввод времени");
  TileButton(8,"Дата и числа");
  CheckBox(h2,6,0,"Закрыт",Closed);
  CheckBox(h2+100,6,0,"Без лицензии",Unlicensed);         
  CheckBox(h2+200,6,0,"Консультант",IsSalesMan);// Edit ************************** Monday, 30 October 2017 17:15:02
  CheckBox(h2+200,v,0,"FiscalV2",FiscalV2);
	Tile(1,210,false,"1",AccessGroup);
  EditField(h,v=6,300,"Группа доступа",Normal,AccessGroup,false,AccessSClass);
  EditField(h,v+=vs,100,"Нач. уровень доступа",Normal,StartLevel,false,SetSClass);
  EditField(h,v+=vs,100,"Простая функция",Normal,OneFunction,false,OneFunctionSClass);
  EditField(h,v+=vs,100,"Группа продажи",Normal,SalesGroup,false,SalesGroupSClass);
  EditField(h,v+=vs,100,"Язык",Normal,LangCode,false,LangSClass);
  EditField(h,v+=vs,100,"Ограничение клиента",Normal,CanUseOS,false,SetSClass);
  EditField(h,v+=vs,100,"Кода контакта",Normal,CustCode,false,ContactCUSClass);
	EditField(h,v+=vs,100,"Demand Planner Comp.",Normal,DemandPlannComp,false,0);
	EditField(h,v+=vs,100,"CRM ID",Normal,CRMid,false,0);
	EditField(h,v+=vs,100,"Hansa e-mail",Normal,LoginEmailAddr,false,0);
	EditField(h,v+=vs,100,"Kassa IP Adress",Normal,KassaIPAddr,false,0);
  ButtonFrame(h2,v=44,165,3,"Ограниченный доступ");
  RadioButton(h2,v,kLimitedAccessNoLimitation,0,"без ограничений",limitedAccess);
  RadioButton(h2,v+=16,kLimitedAccessGroupOnly,0,"только группа",limitedAccess);
  RadioButton(h2,v+=16,kLimitedAccessUserOnly,0,"только пользователь",limitedAccess);
if (HansaWorld) then begin
  ButtonFrame(h2,v+=40,195,4,"Тип пользователя");
  RadioButton(h2,v,0,kTypeOfUserNamed,"Именнованный",TypeOfUser);
  RadioButton(h2,v+=16,kTypeOfUserConcurrent,0,"Конкурентный",TypeOfUser);
  RadioButton(h2,v+=16,kTypeOfUserBusinessCommunicator,0,"Business Communicator (named)",TypeOfUser);
  RadioButton(h2,v+=16,kTypeOfUserTimekeeper,0,"Контролер времени",TypeOfUser);
  CheckBox(h2,v+=25,0,"Срок действия пароля не ограничен",PasswordNeverExpires);
end; 
  Pict_Field(-175,8,-5,178,"");
  if (GuiType==kGuiCocoa) then begin
    PushButton(-160,182,-80,202,ToolImagePicker,"Добавить картинку");  
  end;
//  CheckBox(h2,v+=25,0,"Доступ к FTP",FTPLogin);
//  CheckBox(h2,v+=vs,0,"Только голосовой вход",OnlyVoiceLogin); // No code for this
  Tile(2,150,false,"2",LastOrdNr);
  EditField(h,vm=(v=6),65,"№ счетов кл.",Normal,LastOrdNr,false,0);
  EditField(h,v+=vs,65,"№ отгрузки",Normal,LastShipNr,false,0);
  EditField(h,v+=vs,65,"№ сч/ф кл.",Normal,LastInvNr,false,0);
  EditField(h,v+=vs,65,"№ поступлений",Normal,LastPurNr,false,0);
  EditField(h,v+=vs,65,"№ прих. орд.",Normal,LastCLInNr,false,0);
  EditField(h,v+=vs,65,"№ сч/ф на нал.",Normal,LastIVCashNr,false,0);
  EditField(h,v+=vs,65,"Счет ресторана",Normal,LastRestAccNr,false,0);
//  EditField(h,v+=vs,100,"Official Inv. No.",Normal,LastOfficialSerNr,false,0);
  EditField(h3,v=vm,65,"№ платежей кл.",Normal,LastPayNr,false,0);
  EditField(h3,v+=vs,65,"№ записей опер.",Normal,LastTRNr,false,0);
  EditField(h3,v+=vs,65,"№ сч/ф пост.",Normal,LastVINr,false,0);
  EditField(h3,v+=vs,65,"№ платежей пост.",Normal,LastOPNr,false,0);
  EditField(h3,v+=vs,65,"№ заказа пост.",Normal,LastPONr,false,0); 
  EditField(h3,v+=vs,65,"№ расход. орд.",Normal,LastCLOutNr,false,0);
  EditField(h3,v+=vs,120,"Лич. код",Normal,IDCode,false,0);
  Tile(3,170,false,"3",Bonus);
  EditField(h,vm=(v=6),65,"Премия",Normal,Bonus,true,0);
  EditField(h3,v,120,"Ссылка",Normal,CurOurContact,false,0);
  EditField(h3+260,v,-20,"Миним. прейскурант",Normal,MinPLCode,false,PLDefSClass);
  EditField(h,v+=vs,65,"Склад",Normal,Location,false,LocationSClass);
  EditField(h3,v,120,"Отдел",Normal,Department,false,DepSClass);
  EditField(h,v+=vs,65,"Склад обслуживания",Normal,ServLocation,false,LocationSClass);
  EditField(h3,v,120,"Телефон 1",Normal,Phone1,false,0);
  EditField(h,v+=vs,65,"Склад резерв. заказа",Normal,ReservLocation,false,LocationSClass);
  EditField(h3,v,120,"Телефон 2",Normal,Phone2,false,0);
  EditField(h,v+=vs,-20,"Доступ резерв. заказа",Normal,ReservLocAccess,false,ReservLocAccessSClass);
  EditField(h,v+=vs,-20,"E-mail",Normal,emailAddr,false,0);
  EditField(h,v+=vs,-20,"Спецификация",Normal,Spec,false,0);
  EditField(h,v+=vs,-20,"Комментарий",Normal,Comment,false,0);
  EditField(h,v+=vs,100,"Должность",Normal,Job,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 03, 11 12 2019 y. at 4:09:26 PM
  EditField(h,v+=vs,-20,"Склады отчетов",Normal,UserLocations,false,LocationSClass);// Edit ************************** Tuesday, 28 May 2013 14:17:14
  EditField(h,v+=vs,-20,"Бренд",Normal,Brand,false,DI2SClass);		//Edit----------------------Dima  24.02.2016
//  EditField(h,v+=vs,65,"Счет расходов",Normal,CostAcc,false,AccSClass);
  Tile(4,50,false,"4",PersAcc);
  EditField(h,vm=(v=6),65,"Счет",Normal,PersAcc,false,AccSClass);
  EditField(h3,v,-20,"Объект",Normal,PersObjx,false,ObjSClass);
  EditField(h,v+=vs,120,"Название банка",Normal,BankName,false,BankSClass);
  EditField(h3,v,-20,"Счет банка",Normal,BankAcc,false,0);
  EditField(h3,v+=vs,70,"Разрешить редактировать закрыты период с даты:",Normal,OpenClosePerDate,false,PasteCurDate);// Edit ************************** BPI Ukraine - KramarAlexandr - Thursday, 30 May 2019 15:35:11
//  EditField(h,v+=vs,65,"Expense A/C",Normal,CostAcc,false,AccSClass);
  Tile(5,170,true,"5",JobGroup);
  EditField(h,vm=(v=6),55,"Рабочая группа",Normal,JobGroup,false,EGSClass);
  EditField(h,v+=vs,80,"Затраты в час",Normal,CostPrHour,false,0);
  EditField(h,vm=(v+=vs),80,"Стоимость за час",Normal,PricePrHour,false,0);
  EnterSkip(Math);
  CheckBox(h2,v=20,0,"Разрешить только короткие коды",DisAllowOther);  
//  CheckBox(h2,v,0,"Limited Access",limitedAccess);
  v = v+50;
  MatrixBegin(h-50,v=(vm+40),h+350,-7,-,99);
  MatCol(1,24,"Код",0,Code,false,0);
  MatCol(1,110,"Проект",0,PRCode,false,PRSClass);
  MatCol(1,200,"Комментарий",0,Comment,false,0);
  EndMatrix; 
  Tile(6,30,false,"6",WebConf);
  EditField(h,vm=(v=6),65,"Web-конференция",Normal,WebConf,true,0);
  EditField(h3,v,65,"Первая страница Web",Normal,WebStartPage,false,0);
  Tile(7,50,false,"7",Supervisor);
  v = 6;
  EditField(h,vm=v,80,"Руководитель",Normal,Supervisor,false,UserSClass);
  EditField(h,v+=20,80,"Дата создания",ViewOnly,DateCreated,false,0);
  CheckBox(h2,v=vm,0,"Требовать ввода времени",ForceTimeEntry);  
  Tile(8,210,false,"8",LeadingZDay);
  h = 70; h1 = h + 210; h2 = h + 330;
  
  if (GuiType==kGuiCocoa) then begin
    CheckBox(h,v,0,"Использовать настройки пользователя",UserEditCtlf);
  end else begin
    StaticText(190,v+=vs,"Стиль окна",true);
    DropDownMenu(200,v=6,282,"WindowType",320);  
    CheckBox(h,v+=20,0,"Использовать настройки пользователя",UserEditCtlf);
  end;  
  ButtonFrame(h,vm=(v+=42),200,5,"Формат даты");
  RadioButton(h,v,0,0,"месяц, день, год",DateOrder);
  RadioButton(h,v+=16,1,0,"день, месяц, год",DateOrder);
  RadioButton(h,v+=16,2,0,"год, месяц, день",DateOrder);
  RadioButton(h,v+=16,m4_hijri,0,"хиджры",DateOrder); // We have some enum already in BCD that goes from 0 to 5..
  RadioButton(h,v+=16,m4_persian_date,0,"персидский",dateOrder);
  CheckBox(h,v+=24,0,"Две цифры даты",LeadingZDay); 
  CheckBox(h1,v,0,"Выводить разделитель тысяч",thousSepf);
  CheckBox(h,v+=16,0,"Две цифры месяца",LeadingZMonth);
  CheckBox(h,v+=16,0,"Четыре цифры года",LeadingCentury);
  EditField(h2,v=vm,20,"Разделитель даты",Normal,DateSep,false,0);
  EditField(h2,v+=20,20,"Разделитель целых",Normal,DecimalPt,false,0);
  EditField(h2,v+=20,20,"Разделитель тысяч",Normal,ThousandSep,false,0);
  SpecialMenu("Создать объект",'o',1,"CreateObjUserDsm");
  EndWindow;
end;



window SerBalDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;
  WindowBegin("Item Status",SerBalDClass,CGview,-);
  SetWRect(64,80,450,420);
  UseView(SerBalVc);
  h = 120;
  EditField(h,v=6,50,"Item",Normal,Item,false,0);
  EditField(h,v+=20,50,"Location",Normal,Location,false,0);
  EditField(h,v+=20,50,"Serial",Normal,Serial,false,0);
  EditField(h,v+=20,50,"Quant",Normal,Quant,false,0);
  EditField(h,v+=20,50,"CostPrice",Normal,CostPrice,false,0);
  EndWindow;
end;

window DemoMsgWClass:3
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  boolean haskey,isreg;
  real h,l,v,vs;
  string 255 regcode,regname;
  WindowBegin(DemoMsgWClassTitle_RUS(isreg,haskey),DemoMsgWClass,CGother,RcType);
  DynamicWindow;
  SetWRect(20,80,620,360);
  h = 30; v = 50; vs = 24; l = 180;
  
  if (DemoDays>0) then begin
    if (haskey) then begin
      StaticText(h,v=20,"Ключ будет обновляться автоматически. Текущий ключ действителен до " & DemoDays & " дня(-ей) (" & AddDay(CurrentDate,DemoDays) & ")",false);
    end else begin
      if (DemoDays>20) then begin
        StaticText(h,v=20,"Эта база перейдет в ограниченный режим через " & DemoDays & " дня(-ей) (" & AddDay(CurrentDate,DemoDays) & ")",false);
      end else begin
        StaticText(h,v=20,"Это база данных перейдет в ограниченный режим через " & DemoDays & " дня(-ей) ",false);
      end;
    end;
  end else begin
    StaticText(h,v=20,"Эта база данных работает в ограниченном режиме",false);
  end;
    
  /*if (isreg) then begin
    HalPushButton(h,v+=vs,h + l,v + vs,"GetInternetEnabler","Получить новый ключ");
    StaticText(h + l + 30,v + 14,"(Получить новый ключ, действительный в течение 3 месяцев)",false);
  end;
  
  if (nonblank(regcode)) then begin
    HalPushButton(h,v+=vs,h + l,v + vs,"ReRegisterInHWStep1","Обновить регистрацию");
    if (nonblank(regname)) then begin
      StaticText(h + l + 30,v + 14,"(Зарегистрировано как " & regname & ")",false);
    end else begin
      StaticText(h + l + 30,v + 14,"(Нет имени...)",false);
    end;
  end else begin
    HalPushButton(h,v+=vs,h + l,v + vs,"RegisterInHWStep1","Зарегистрировать этот продукт");
    StaticText(h + l + 30,v + 14,"(Не зарегистрирован)",false);
  end;
  
  if (nonblank(regcode)) then begin
    HalPushButton(h,v+=vs,h + l,v + vs,"OpenInternetEnablers","Конфигурировать Интернет-ключ");
    if (isreg) then begin
      StaticText(h + l + 30,v + 14,"(Уже сконфигурирован)",false);
    end else begin
      StaticText(h + l + 30,v + 14,"(Ещё не сконфигурирован)",false);
    end;
  end;*/
  
  /*if (isreg) then begin

    PushButton(h,v+=vs,h + l,v + vs,ToolPayForRegistered,"Оплата");
    StaticText(h + l + 30,v + 14,"(Открыть безопасный сайт, где Вы сможете оплатить продукт)",false);
  end;*/

  PushButton(h,v+=vs,h + l,v + vs,ToolClose,"Закрыть окно");

  EndWindow;
end;

window ERDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,v;
  WindowBegin("Курс обмена",ERDClass,CGview,ERView);
  SetWRect(64,80,509,237);
  UseView(ERVc);
  h=100;h2=167;h3=230;
  if (IsEnterprise) then begin
  Tile(0,70,false,"",CurncyCode);
  end;
  EditField(h,v=6,50,"Валюта",St_i,CurncyCode,false,CurncyCodeSClass);
  EditField(h,v+=20,85,"Дата",Normal,Date,false,PasteCurDate);
  if (CompanyIsJWLikeCompany(currentcompany)) then begin //Edit***************************Sasha2,11:58 03.05.2017 {
    CheckBox(h3-20,v,0,"Распространить на все ювел.компании",RateShareFlag);
  end; //Edit***************************Sasha2,11:58 03.05.2017 }
	if (currentcompany==18) then begin //Edit***************************Sasha2,11:58 03.05.2017 {
    CheckBox(h,v+=20,0,"Распространить на все ювел.компании и Creative",RateShareFlag);
  end;  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger10:48 18.07.2018
  if (IsEnterprise) then begin
  TileButton(1,"Курс");
  TileButton(2,"Forex");
  Tile(1,70,false,"1",ToRate1);
    v = 6;
  end else begin
    v = v + 20;
  end;
  EditField(h,v,50,"Курс",Normal,FrRate,true,0); 
  EditField(h2,v,50,":",Normal,ToRate1,true,0); 
  if (HasBase2) then begin
  StaticText(h3,v+12,"Осн. валюта 1",false);
  EditField(h2,v+=20,50,":",Normal,ToRate2,true,0);
  StaticText(h3,v+12,"Осн. валюта 2",false);
  end else begin
    StaticText(h3,v+14,"Осн. валюта",false); 
  end;
  if (IsEnterprise) then begin
  Tile(2,70,false,"1",SalesRateTo1);
  EditField(h,v=6,50,"Курс продаж",Normal,FrRate,true,0);
  EditField(h2,v,50,":",Normal,SalesRateTo1,true,0);
    if (HasBase2) then begin
      StaticText(h3,v+14,"Осн. валюта 1",false);
    end;
  EditField(h,v+=20,50,"Курс покупок",Normal,FrRate,true,0);
  EditField(h2,v,50,":",Normal,PurchaseRateTo1,true,0);
    if (HasBase2) then begin
      StaticText(h3,v+14,"Осн. валюта 1",false);
    end;
  end;
 EndWindow;
end;

window EnterSalesmanNPTSOClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,hm,l,v,v3,vm,vs;
  WindowBegin("Введите продавца",EnterSalesmanNPTSOClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(80,200,550,480);
  vs = 20;
  EditFieldTL(h=110,v=6,150,"Продавец",M4Str,Normal,10,f1,false,SalesmanSClass);

  v3 = 33; vs = 37; h3 = 210; h4 = 400; hm = 280;

  vm = -160; vs = 52; h2 = 55; v3 = 48; l = 57;

  v = 10;
  ColourPushButton(-450,v+4*vs,-450+2*h2,v+4*vs+v3,"CancelNPTSCashPaymentTClass","Cancel<BR>F2",20);
  ColourPushButton(-320,v+4*vs,-320+2*h2,v+4*vs+v3,"ProceedEnterSalesmanNPTSOClass","Proceed<BR>F1",20);


  vm = -160; l = 57;
  v = 10;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad1","1_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad2","2_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad3","3_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad4","4_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad5","5_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad6","6_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad7","7_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad8","8_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad9","9_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyDel","Del",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad0","0_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"IVDClassToolKeyPadPoint",".",2);
  v = v+vs;
  h = hm; ColourPushButton(h,v,h+3*h2,v+v3,"NPTSPaymentToolKeyEnter","Enter",2);
  EndWindow;
end;


window ReEnterSalesmanNPTSOClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,hm,l,v,v3,vm,vs;
  WindowBegin("Введите продавца",ReEnterSalesmanNPTSOClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(80,80,550,480);
  vs = 20;
  EditFieldTL(h=110,v=6,150,"Продавец",M4Str,Normal,10,f1,false,SalesmanSClass);

  v3 = 33; vs = 37; h3 = 210; h4 = 400; hm = 280;

  vm = -160; vs = 52; h2 = 55; v3 = 48; l = 57;

  v = 10;
  ColourPushButton(-450,v+4*vs,-450+2*h2,v+4*vs+v3,"CancelNPTSCashPaymentTClass","Cancel<BR>F2",20);
  ColourPushButton(-320,v+4*vs,-320+2*h2,v+4*vs+v3,"ProceedReEnterSalesmanNPTSOClass","Proceed<BR>F1",20);


  vm = -160; l = 57;
  v = 10;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad1","1_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad2","2_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad3","3_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad4","4_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad5","5_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad6","6_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad7","7_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad8","8_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad9","9_",2);
  v = v+vs;
  h = hm-2; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyDel","Del",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"NPTSPaymentToolKeyPad0","0_",2);
  h = h+l; ColourPushButton(h,v,h+h2,v+v3,"IVDClassToolKeyPadPoint",".",2);
  v = v+vs;
  h = hm; ColourPushButton(h,v,h+3*h2,v+v3,"NPTSPaymentToolKeyEnter","Enter",2);
  EndWindow;
end;



window PODClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,h5,v,vm,vt,vs,w,w2;
  integer colour;
  record CYBlock CYb;
  string 255 label;
  Integer tilenr,flipnr,f;
	record NewClassifChBlock NCCb;
	record ConsCompBlock CCB;
	
	BlockLoad(CCB);
	
  if(currentcompany!=28)then begin
    vs = 20;
    BlockLoad(CYb);
    WindowBegin("Заказ поставщику",PODClass,CGview,-); 
    SetWRect(20,80,750,460);
    DynamicWindow;
    Sizeable(-1,-1,0,0);
    UseView(POVc);
    CommunicateButton;
    ActiveFieldOnNew("VECode");    
    Tile(0,74,false,"",VECode);
    EditField(75,vm=(v=6),95,"Номер",Normal,SerNr,false,TSerSClass);
    EditField(75,v+=20,95,"Поставщик",Normal,VECode,false,VESClass);
    EnterSkip(PayDeal);
    EditField(h=300,v=vm,-40,"Наим.",Normal,Addr0,false,0);
    if (IsEnterprise) then begin
    //EditField(h,vm=(v+=20),95,"Подписи",Normal,OKPersons,false,UserSClass);// Edit ************************** Thursday, 12 September 2013 13:42:23
    EditField(h,vm=(v+=20),95,"Код счета клиента",Normal,InvAddr4,false,0);// Edit ************************** Thursday, 12 September 2013 13:42:24
    EditField(h+180,vm,95,"Заказ готов",Normal,OrderDoneDate,false,PasteCurDate);// Edit ************************** Thursday, 12 September 2013 13:42:24
    CheckBox(h+280,vm,0,"",OrderDoneFlag);
    
    CheckBox(h4=-100,v,0,"ОК",OKFlag);
    end else begin
      CheckBox(h4=-100,v+=vs,0,"OK",OKFlag); 
    end;
    tilenr = 1;
    TileButton(tilenr,"Условия"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Товары"); tilenr = tilenr + 1; 
    if (HasMultiCurrency or HasBase2) then begin
      TileButton(tilenr,"Валюта"); tilenr = tilenr + 1; 
    end;
    if (HasModIN) then begin
      TileButton(tilenr,"Усл. отгрузки"); tilenr = tilenr + 1; 
    end;
    TileButton(tilenr,"Комментарий"); tilenr = tilenr + 1; 
    TileButton(tilenr,"Адрес зак."); tilenr = tilenr + 1; 
    TileButton(tilenr,"Адрес дост."); tilenr = tilenr + 1; 
    if (IsEnterprise) then begin
      TileButton(tilenr,"Доп. затр."); tilenr = tilenr + 1; 
    end;
		// if(currentcompany==18)then begin
			TileButton(tilenr,"Логистика"); tilenr = tilenr + 1; 
		// end;
    tilenr = 1;
    Tile(tilenr,90,false,tilenr,TransDate); tilenr = tilenr + 1;
    vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;
    EditField(h1,vm=(v=6),82,"Дата",Normal,TransDate,false,PasteCurDate);
		if (CurrentCompany!=18) then begin
			EditField(h1,v+=vs,25,"Условия оплаты",Normal,PayDeal,false,PDSClass);
		end else begin
			EditField(h1,v+=vs,25,"Условия оплаты",Normal,PayDeal,false,CCOPPTSCLass);
		end;
    if (IsEnterprise) then begin
    EditField(h1,v+=vs,82,"Действителен до",Normal,ValidUntil,false,PasteCurDate);
    end;
    if (HasModIN) then begin
    EditField(h1,v+=vs,82,"Заплан. отгрузка",Normal,PlanShip,false,PasteCurDate);
    end;
    EditField(h2,v=vm,135,"Наша ссылка",Normal,OurContact,false,0);
    EditField(h2,v+=vs,135,"Внимание",Normal,VEContact,false,ContactSClass);
    if (HasObjects) then begin
    EditField(h2,v+=vs,135,"Объекты",Normal,Objects,false,ObjSClass);
    end;
    if (HasModIN) then begin
    EditField(h2,v+=vs,135,"Рекомендатель",Normal,Reference,false,0);
    end;
    EditField(h3,v=vm,80,"Продавец",Normal,SalesMan,false,SalesmanSClass);
    if (HasModTS) then begin
    //EditField(h3,v+=vs,80,"Проект",Normal,PRCode,false,PRSClass);// Edit ************************** Wednesday, 13 November 2013 16:26:09
    EditField(h3,v+=vs,80,"Дата подтвержд.",Normal,OKDate,false,PasteCurDate);
    end;
    if (IsEnterprise) then begin
    EditField(h3,v+=vs,80,"Вид заказа пост.",Normal,POClass,false,POrderClassSClass);
    EditField(h3,v+=vs,80,"Тип счета",ViewOnly,OrderType,false,0);
		EditField(h3+50,v+=vs,80,"FOB-обьект скл.отпр.",Normal,ItemFromOtherSTockObj,false,ObjSClass);
    end;
    CheckBox(h4-20,v=6,0,"Закрыт",Closed);
    CheckBox(h4-20,v+=16,0,"Цена вкл. НДС",InclVAT);
    CheckBox(h4-20,v+16,0,"Разр. чужой код",AllowOtherVEItem);

    EnterSkip(Math);
    Tile(tilenr,120,true,tilenr,Math); tilenr = tilenr + 1;
    if (HasMultiCurrency or HasBase2) then begin
      EditField(50,-41,30,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
      EditField(150,-41,30,"Пров. вал.",Normal,CheckCurncyCode,false,CurncyCodeSClass);// Edit ************************** Wednesday, 10 December 2014 15:59:35
    end;
		if(CCB.OKFlagPOr) then begin
			if (IsEnterprise) then begin
			EditField(110,-21,70,"Паллеты",ViewOnly,TotPalletNr,true,0);
			if (UserCanAction("ConfFreightCostomsFlags",false))then begin
				CheckBox(190,-41,0,"Утв.",ShipCostOKFlag);
				CheckBox(190,-21,0,"Утв.",CustomsCostOKFlag);
			end;
			EditField(300,-41,70,"Фрахт",Normal,ShipCost,true,0);
			EditField(300,-21,70,"Таможня",Normal,CustomsCost,true,0);
			end;
			EditField(450,-41,70,"НДС",ViewOnly,Sum3,true,0);
			if (IsEnterprise) then begin
			EditField(450,-21,70,"Внеш. налог",ViewOnly,TAX1Sum,false,0);
			end;
			EditField(-130,-41,118,"Пром. итог",ViewOnly,Sum1,true,0);
			EditField(-130,-21,118,"Итого",ViewOnly,Sum4,true,0);
			//  CheckBox(20,-21,0,"Утв.",OKFlag);
		end else begin	
			if (IsEnterprise) then begin
			EditField(110,-21,70,"Паллеты",ViewOnly,TotPalletNr,true,0);
			EditField(260,-41,70,"Фрахт",Normal,ShipCost,true,0);
			EditField(260,-21,70,"Таможня",Normal,CustomsCost,true,0);
			end;
			EditField(410,-41,70,"НДС",ViewOnly,Sum3,true,0);
			if (IsEnterprise) then begin
			EditField(410,-21,70,"Внеш. налог",ViewOnly,TAX1Sum,false,0);
			end;
			EditField(-169,-41,118,"Пром. итог",ViewOnly,Sum1,true,0);
			EditField(-169,-21,118,"Итого",ViewOnly,Sum4,true,0);
			//  CheckBox(20,-21,0,"Утв.",OKFlag);
		end;
    v = 24;
		if(CurrentCompany==18) then begin
			if (CurrentUser=="SA" or CurrentUser=="SA1") then begin
				if (HasModIN or HasModPL or HasObjects) then begin
					MatrixBegin(3,v,-50,-44,-,1000);
				end else begin
					MatrixBegin(3,v,-25,-44,-,1000);
				end;
			end else begin
				if (HasModIN or HasModPL or HasObjects) then begin
					MatrixBegin(3,v,-50,-44,-,400);
				end else begin
					MatrixBegin(3,v,-25,-44,-,400);
				end;
			end;
			MatTypedRow(stp);
			Flip(0);
			MatCol(1,28,"Товар",0,ArtCode,false,INSClass);
			if(currentCompany==18) then begin
				MatCol(1,110,"Товар пост.",0,VEArtCode,false,0);
			end else begin	
				MatCol(1,110,"Товар пост.",0,VEArtCode,false,0);
			end;	
		//  MatCol(1,84,"Var",0,VARList,true,VARSClass);
		//  MatCol(1,144,"Qty",0,Quant,true,0);

			EnterSkip(ArtCode);
		//  MatCol(1,194,"Наимен.",0,Spec,false,0);
			flipnr = 1;
			Flip(flipnr); flipnr = flipnr + 1;
			if (HasVarieties) then begin
			MatCol(1,210,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,210,"Кол-во",0,Quant,true,0); 
			end;
			MatColTL(1,250,"Ед.",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass);
			
			MatCol(1,280,"Наименование",0,Spec,false,0);
			//if (HasJewelleryInterface) then beg
				MatCol(1,-280,"Обыч./кл.",0,ItemConsgType,false,SetSClass); // Edit_______________________________ABR 25.06.19
			//end;
			MatCol(1,-210,"Цена",0,Price,true,0);
			MatCol(1,-146,"%",0,vRebate,true,0);
			MatCol(1,-120,"Сумма",0,Sum,true,0);
			if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
			MatCol(1,-40,"Ш.н.",0,TaxTemplateCode,false,TaxTemplateSClass);
			end else begin
			MatCol(1,-40,"НДС",0,VATCode,false,VATCodeSClass);
			end;
			if (HasObjects) then begin
				Flip(flipnr); flipnr = flipnr + 1;
			MatCol(1,210,"Наименование",0,Spec,false,0);
				if (IsEnterprise) then begin
			MatCol(1,-320,"Счет опр.",0,CostAcc,false,AccSClass);
				end;
			if(CCB.OKFlag!=0) then begin
				MatCol(1,-270,"Тип товара",0,ConsgType,false,SetSClass); // Edit ************************** Wednesday, 17 December 2014 12:36:49	
			end;	
			MatCol(1,-210,"Объекты",0,Objects,false,ObjSClass);
				if (IsEnterprise) then begin
			MatColTL(1,-120,"Ед.пост.",0,M4Code,ViewOnly,5,VEUnit,false,UnitSCLass);//MatCol(1,-100,"S. Unit",0,VEUnit,false,UnitSCLass);
			MatCol(1,-60,"Кол. пост.",0,VEQuant,true,0);
				end;
			end;
			if (HasModIN) then begin
				Flip(flipnr); flipnr = flipnr + 1;
				if (HasVarieties) then begin
			MatCol(1,190,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,190,"Кол-во",0,Quant,true,0); 
			end;
			MatCol(1,214,"Наименование",0,Spec,false,0);
			MatCol(1,-270,"Пост. 1",0,Shipd1,true,0);
			MatCol(1,-210,"Пост. 2",0,Shipd2,true,0);
				if (HasModPL) then begin
			MatCol(1,-150,"Сч/ф",0,Invd,true,0);
				end;
				if (IsEnterprise) then begin
			MatCol(1,-90,"№ паллеты",0,PalletNr,true,0);
			MatCol(1,-50,"Проект",0,PRCode,true,PRSClass);
			MatCol(1,-20,"№ ТР.",0,WSNr,true,0);
				end;
			end;
			if (IsEnterprise) then begin
				Flip(flipnr); flipnr = flipnr + 1;
				if (HasVarieties) then begin
			MatCol(1,190,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,190,"Кол-во",0,Quant,true,0); 
			end;
			MatCol(1,221,"Наименование",0,Spec,false,0);
			MatCol(1,-287,"Обыч./клиент",0,ItemConsgType,false,SetSClass); // Edit_______________________________ABR 25.06.19
			MatCol(1,-240,"TREO",0,TREO,false,SetSClass);
			if(CurrentCompany==18 or CompanyIsJWLikeCompany(CurrentCompany))then begin
				MatCol(1,-200,"Вес",0,WeightRow,false,0);
				MatCol(1,-130,"Кар. камня",0,CaratRow,false,0);
				MatCol(1,-60,"Кар. россыпи",0,CaratplacerRow,false,0); // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger 16:21 11.07.2019
				//MatCol(1,-80,"Запл. отгрузка",0,PlanShipRow,true,PasteCurDate);
			end else begin
				MatCol(1,-90,"Вал. бренда",0,BrndCurrCode,true,CurncyCodeSClass);
				MatCol(1,-45,"Запл. отгрузка",0,PlanShipRow,true,PasteCurDate);
			end;
			//MatCol(1,-100,"Комментарий",0,Comment,true,0);// Edit ************************** Friday, 22 March 2013 15:44:30
				Flip(flipnr); flipnr = flipnr + 1;
				if (HasVarieties) then begin
			MatCol(1,190,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,190,"Кол-во",0,Quant,true,0); 
			end;
			MatCol(1,224,"Наименование",0,Spec,false,0);
			MatCol(1,-360,"Фрахт",0,ShipCost,true,0);
			MatCol(1,-300,"Таможня",0,CustomsCost,true,0);
			label = UserDefined("AccBlock","PUCost1");
			if (blank(label)) then begin label = "Затр. 1";end;
			MatCol(1,-240,label,0,RowCost1,true,0);
			label = UserDefined("AccBlock","PUCost2");
			if (blank(label)) then begin label = "Затр. 2";end;
			MatCol(1,-180,label,0,RowCost2,true,0);
			label = UserDefined("AccBlock","PUCost3");
			if (blank(label)) then begin label = "Затр. 3";end;
			MatCol(1,-120,label,0,RowCost3,true,0);
			label = UserDefined("AccBlock","PUCost4");
			if (blank(label)) then begin label = "Затр. 4";end;
			MatCol(1,-60,label,0,RowCost4,true,0);
			label = UserDefined("AccBlock","PUCost5");
			if (blank(label)) then begin label = "Затр. 5";end;
			MatCol(1,-30,label,0,RowCost5,true,0);
			end;
			
			Flip(flipnr); flipnr = flipnr + 1;
			switch(currentcompany)begin
			case 1:
						MatCol(1,264,"Наименование",0,Spec,false,0);
						if (HasVarieties) then begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
						 if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-110,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-110,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-40,"PP №",0,PPNum,true,0);
			case 11:
						MatCol(1,264,"Наименование",0,Spec,false,0);
						if (HasVarieties) then begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
						 if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-110,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-110,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-40,"PP №",0,PPNum,true,0);
			
			case 2:
						MatCol(1,264,"Наименование",0,Spec,false,0);
						if (HasVarieties) then begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-110,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-110,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-40,"Цена",0,Price,true,0);
			case 3:
						MatCol(1,264,"Наименование",0,Spec,false,0);
						MatCol(1,360,"Код поставщика",0,Comment,false,0);
						if (HasVarieties) then begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-110,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-110,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-40,"Цена",0,Price,true,0);
			case 10:
						MatCol(1,264,"Наименование",0,Spec,false,0);
						MatCol(1,360,"Код поставщика",0,Comment,false,0);
						if (HasVarieties) then begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-110,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-110,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-40,"Цена",0,Price,true,0);			
			case 17:
						MatCol(1,264,"Наименование",0,Spec,false,0);
						MatCol(1,360,"Код поставщика",0,Comment,false,0);
						if (HasVarieties) then begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-240,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
						MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-110,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-110,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-40,"Цена",0,Price,true,0);
						
				otherwise begin
					MatCol(1,264,"Наименование",0,Spec,false,0);
					if (HasVarieties) then begin
						MatCol(1,-240,"Кол-во",0,VEQuant,true,MATVARINSClass);
					end else begin
						MatCol(1,-240,"Кол-во",0,VEQuant,true,0); 
					end;

					MatCol(1,-190,"EAN Код",0,EAN13Code,false,0);
					if(NCCb.ClassifCheck==1)then begin
						MatColTL(1,-110,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
					end else begin
						MatCol(1,-110,"Классификация",0,xClassification,false,DISClass);
					end;
					MatCol(1,-40,"Цена",0,Price,true,0);
				end;
			end;
			
			switch(currentcompany)begin
			case 1:
			case 2:
			case 3:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-350,"Коллекция",0,Reference,false,0);
						MatCol(1,-300,"Браслет/ремешок",0,BrcStr,false,0);
						MatCol(1,-240,"Цвет циферблата",0,Gender,false,0);
						MatCol(1,-180,"Вес",0,RowWeight,false,0);
						MatCol(1,-120,"Метал",0,Metal,false,0);
						MatCol(1,-60,"Каратность",0,MajStoneDet,true,0);
			case 4:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
			case 12:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
			case 10:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-350,"Коллекция",0,Reference,false,0);
						MatCol(1,-300,"Браслет/ремешок",0,BrcStr,false,0);
						MatCol(1,-240,"Цвет циферблата",0,Gender,false,0);
						MatCol(1,-180,"Вес",0,RowWeight,false,0);
						MatCol(1,-120,"Метал",0,Metal,false,0);
						MatCol(1,-60,"Каратность",0,MajStoneDet,true,0);
			case 16:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-250,"PP №",0,PPNum,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
										
			case 17:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-350,"Коллекция",0,Reference,false,0);
						MatCol(1,-300,"Браслет/ремешок",0,BrcStr,false,0);
						MatCol(1,-240,"Цвет циферблата",0,Gender,false,0);
						MatCol(1,-180,"Вес",0,RowWeight,false,0);
						MatCol(1,-120,"Метал",0,Metal,false,0);
						MatCol(1,-60,"Каратность",0,MajStoneDet,true,0);
			case 15:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-240,"Коллекция",0,Reference,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
			otherwise begin
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,264,"Наименование",0,Spec,false,0);
						MatCol(1,-90,"Размер",0,Size,false,0);
						MatCol(1,-40,"Цвет",0,Colour,false,0);
			end;
			end;
				
			DeleteRowTest;
			InsertRowTest;
			EndMatrix;
		end else begin 
			if (HasModIN or HasModPL or HasObjects) then begin
				MatrixBegin(3,v,-50,-44,-,1000);
			end else begin
				MatrixBegin(3,v,-25,-44,-,1000);
			end;
			MatTypedRow(stp);
			Flip(0);
			MatCol(1,28,"Товар",0,ArtCode,false,INSClass);
		//  MatCol(1,84,"Var",0,VARList,true,VARSClass);
		//  MatCol(1,144,"Qty",0,Quant,true,0);

			EnterSkip(ArtCode);
		//  MatCol(1,194,"Наимен.",0,Spec,false,0);
			flipnr = 1;
			Flip(flipnr); flipnr = flipnr + 1;
			if (HasVarieties) then begin
			MatCol(1,145,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,145,"Кол-во",0,Quant,true,0); 
			end;
			MatColTL(1,195,"Ед.",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass);
			
			MatCol(1,224,"Наименование",0,Spec,false,0);
			//if (HasJewelleryInterface) then begin
			if(CCB.OKFlag!=0) then begin
				MatCol(1,-260,"Обыч./кл.",0,ItemConsgType,false,SetSClass); // Edit_______________________________ABR 25.06.19
			end else begin
				MatCol(1,-337,"Тип товара",0,ConsgType,false,SetSClass); // Edit ************************** Wednesday, 17 December 2014 12:36:49
			end;	
			//end;
			MatCol(1,-197,"Цена",0,Price,true,0);
			MatCol(1,-131,"%",0,vRebate,true,0);
			MatCol(1,-96,"Сумма",0,Sum,true,0);
			if (CYb.UseTaxTemplatesforTaxCalc!=0) then begin
			MatCol(1,-30,"Ш.н.",0,TaxTemplateCode,false,TaxTemplateSClass);
			end else begin
			MatCol(1,-30,"НДС",0,VATCode,false,VATCodeSClass);
			end;
			if (HasObjects) then begin
				Flip(flipnr); flipnr = flipnr + 1;
			MatCol(1,150,"Наименование",0,Spec,false,0);
				if (IsEnterprise) then begin
			MatCol(1,-330,"Счет опр.",0,CostAcc,false,AccSClass);
				end;
			if(CCB.OKFlag!=0) then begin
				MatCol(1,-290,"Тип товара",0,ConsgType,false,SetSClass); // Edit ************************** Wednesday, 17 December 2014 12:36:49	
			end;	
			MatCol(1,-240,"Объекты",0,Objects,false,ObjSClass);
				if (IsEnterprise) then begin
			MatCol(1,-170,"Товар пост.",0,VEArtCode,false,PISClass);
			MatColTL(1,-100,"Ед.пост.",0,M4Code,ViewOnly,5,VEUnit,false,UnitSCLass);//MatCol(1,-100,"S. Unit",0,VEUnit,false,UnitSCLass);
			MatCol(1,-50,"Кол. пост.",0,VEQuant,true,0);
				end;
			end;
			if (HasModIN) then begin
				Flip(flipnr); flipnr = flipnr + 1;
				if (HasVarieties) then begin
			MatCol(1,94,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,94,"Кол-во",0,Quant,true,0); 
			end;
			MatCol(1,164,"Наименование",0,Spec,false,0);
			MatCol(1,-330,"Пост. 1",0,Shipd1,true,0);
			MatCol(1,-270,"Пост. 2",0,Shipd2,true,0);
				if (HasModPL) then begin
			MatCol(1,-210,"Сч/ф",0,Invd,true,0);
				end;
				if (IsEnterprise) then begin
			MatCol(1,-150,"№ паллеты",0,PalletNr,true,0);
			MatCol(1,-90,"Проект",0,PRCode,true,PRSClass);
			MatCol(1,-40,"№ ТР.",0,WSNr,true,0);
				end;
			end;
			if (IsEnterprise) then begin
				Flip(flipnr); flipnr = flipnr + 1;
				if (HasVarieties) then begin
			MatCol(1,94,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,94,"Кол-во",0,Quant,true,0); 
			end;
			MatCol(1,164,"Наименование",0,Spec,false,0);
			MatCol(1,-347,"Обыч./клиент",0,ItemConsgType,false,SetSClass); // Edit_______________________________ABR 25.06.19
			MatCol(1,-300,"TREO",0,TREO,false,SetSClass);
			if(CurrentCompany==18 or CompanyIsJWLikeCompany(CurrentCompany))then begin
				MatCol(1,-260,"Вес",0,WeightRow,false,0);
				MatCol(1,-190,"Кар. камня",0,CaratRow,false,0);
				MatCol(1,-120,"Кар. росс.",0,CaratplacerRow,false,0); // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger 16:21 11.07.2019
				MatCol(1,-45,"Вал. бр.",0,BrndCurrCode,true,CurncyCodeSClass);
				//MatCol(1,-80,"Запл. отгрузка",0,PlanShipRow,true,PasteCurDate);
			end else begin
				MatCol(1,-150,"Вал. бр.",0,BrndCurrCode,true,CurncyCodeSClass);
				MatCol(1,-90,"Запл. отгрузка",0,PlanShipRow,true,PasteCurDate);
			end;
			//MatCol(1,-100,"Комментарий",0,Comment,true,0);// Edit ************************** Friday, 22 March 2013 15:44:30
				Flip(flipnr); flipnr = flipnr + 1;
				if (HasVarieties) then begin
			MatCol(1,94,"Кол-во",0,Quant,true,MATVARINSClass);
			end else begin
				MatCol(1,94,"Кол-во",0,Quant,true,0); 
			end;
			MatCol(1,164,"Наименование",0,Spec,false,0);
			MatCol(1,-420,"Фрахт",0,ShipCost,true,0);
			MatCol(1,-360,"Таможня",0,CustomsCost,true,0);
			label = UserDefined("AccBlock","PUCost1");
			if (blank(label)) then begin label = "Затр. 1";end;
			MatCol(1,-300,label,0,RowCost1,true,0);
			label = UserDefined("AccBlock","PUCost2");
			if (blank(label)) then begin label = "Затр. 2";end;
			MatCol(1,-240,label,0,RowCost2,true,0);
			label = UserDefined("AccBlock","PUCost3");
			if (blank(label)) then begin label = "Затр. 3";end;
			MatCol(1,-180,label,0,RowCost3,true,0);
			label = UserDefined("AccBlock","PUCost4");
			if (blank(label)) then begin label = "Затр. 4";end;
			MatCol(1,-120,label,0,RowCost4,true,0);
			label = UserDefined("AccBlock","PUCost5");
			if (blank(label)) then begin label = "Затр. 5";end;
			MatCol(1,-60,label,0,RowCost5,true,0);
			end;
			
			Flip(flipnr); flipnr = flipnr + 1;
			switch(currentcompany)begin
			case 1:
						MatCol(1,194,"Наименование",0,Spec,false,0);
						if (HasVarieties) then begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
						 if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-170,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-170,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-60,"PP №",0,PPNum,true,0);
			case 11:
						MatCol(1,194,"Наименование",0,Spec,false,0);
						if (HasVarieties) then begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
						 if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-170,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-170,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-60,"PP №",0,PPNum,true,0);
			
			case 2:
						MatCol(1,194,"Наименование",0,Spec,false,0);
						if (HasVarieties) then begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-170,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-170,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-60,"Цена",0,Price,true,0);
			case 3:
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,300,"Код поставщика",0,Comment,false,0);
						if (HasVarieties) then begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-170,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-170,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-60,"Цена",0,Price,true,0);
			case 10:
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,300,"Код поставщика",0,Comment,false,0);
						if (HasVarieties) then begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-170,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-170,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-60,"Цена",0,Price,true,0);			
			case 17:
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,300,"Код поставщика",0,Comment,false,0);
						if (HasVarieties) then begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,MATVARINSClass);
						end else begin
							MatCol(1,-300,"Кол-во",0,VEQuant,true,0); 
						end;
			
						MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
						MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
						if(NCCb.ClassifCheck==1)then begin
							MatColTL(1,-170,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
						end else begin
							MatCol(1,-170,"Классификация",0,xClassification,false,DISClass);
						end;
						MatCol(1,-60,"Цена",0,Price,true,0);
						
				otherwise begin
					MatCol(1,194,"Наименование",0,Spec,false,0);
					if (HasVarieties) then begin
						MatCol(1,-300,"Кол-во",0,VEQuant,true,MATVARINSClass);
					end else begin
						MatCol(1,-300,"Кол-во",0,VEQuant,true,0); 
					end;

					MatCol(1,-250,"EAN Код",0,EAN13Code,false,0);
					if(NCCb.ClassifCheck==1)then begin
						MatColTL(1,-170,"Классификация",0,M4String,ViewOnly,0,xClassification,false,DISClass);
					end else begin
						MatCol(1,-170,"Классификация",0,xClassification,false,DISClass);
					end;
					MatCol(1,-60,"Цена",0,Price,true,0);
				end;
			end;
			
			switch(currentcompany)begin
			case 1:
			case 2:
			case 3:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-350,"Коллекция",0,Reference,false,0);
						MatCol(1,-300,"Браслет/ремешок",0,BrcStr,false,0);
						MatCol(1,-240,"Цвет циферблата",0,Gender,false,0);
						MatCol(1,-180,"Вес",0,RowWeight,false,0);
						MatCol(1,-120,"Метал",0,Metal,false,0);
						MatCol(1,-60,"Каратность",0,MajStoneDet,true,0);
			case 4:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
			case 12:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
			case 10:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-350,"Коллекция",0,Reference,false,0);
						MatCol(1,-300,"Браслет/ремешок",0,BrcStr,false,0);
						MatCol(1,-240,"Цвет циферблата",0,Gender,false,0);
						MatCol(1,-180,"Вес",0,RowWeight,false,0);
						MatCol(1,-120,"Метал",0,Metal,false,0);
						MatCol(1,-60,"Каратность",0,MajStoneDet,true,0);
			case 16:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-250,"PP №",0,PPNum,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
										
			case 17:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-350,"Коллекция",0,Reference,false,0);
						MatCol(1,-300,"Браслет/ремешок",0,BrcStr,false,0);
						MatCol(1,-240,"Цвет циферблата",0,Gender,false,0);
						MatCol(1,-180,"Вес",0,RowWeight,false,0);
						MatCol(1,-120,"Метал",0,Metal,false,0);
						MatCol(1,-60,"Каратность",0,MajStoneDet,true,0);
			case 15:
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-240,"Коллекция",0,Reference,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
			otherwise begin
						Flip(flipnr); flipnr = flipnr + 1;
						MatCol(1,194,"Наименование",0,Spec,false,0);
						MatCol(1,-160,"Размер",0,Size,false,0);
						MatCol(1,-100,"Цвет",0,Colour,false,0);
			end;
			end;
				
			DeleteRowTest;
			InsertRowTest;
			EndMatrix;
		end;	
    vs = 20;
    v = 18; 
    if (flipnr>2) then begin
      for (f=1;f<flipnr;f=f+1) begin
        VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
        v = v + vs;
      end;
    end;
    if (HasMultiCurrency or HasBase2) then begin
      Tile(tilenr,70,false,tilenr,FrRate); tilenr = tilenr + 1;
      vs = 20; h = 110; h2 = 295;
      if (HasBase2) then begin
        h1 = h1 + 20;
      end;
      EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); 
      if (HasMultiCurrency) then begin
    EditField(h2,v,50,"Курс",Normal,FrRate,true,0);
    EditField(h2+65,v,50,":",Normal,ToRateB1,true,0);
        if (HasBase2) then begin
          StaticText(h2+125,v+14,"Базовая валюта 1",false); 
    EditField(h1,v+=vs,50,"Базовая валюта 1",Normal,BaseRate1,true,0);
    EditField(h2+65,v,50,":",Normal,ToRateB2,true,0);
          StaticText(h2+125,v+14,"Базовая валюта 2",false);
    EditField(h1,v+=vs,50,"Базовая валюта 2",Normal,BaseRate2,true,0);
        end else begin
          StaticText(h2+125,v+14,"Базовая валюта",false); 
        end;
      end else begin
        EditField(h1,v+=vs,50,"Базовая валюта 1",Normal,BaseRate1,true,0); 
        EditField(h1,v+=vs,50,"Базовая валюта 2",Normal,BaseRate2,true,0); 
      end;
    end;

    if (HasModIN) then begin
      Tile(tilenr,90,false,tilenr,ShipDeal); tilenr = tilenr + 1;
    vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;
    EditField(h1,v=6,80,"Условия доставки",Normal,ShipDeal,false,ShipDealSClass);
      if (IsEnterprise) then begin
    EditField(h1,v+=vs,80,"Метод доставки",Normal,ShipMode,false,DMSClass);
      end;
      if (HasMultiLocations) then begin
    EditField(h1,v+=vs,80,"Склад",Normal,Location,false,LocationSClass);
      end;
      if (IsEnterprise) then begin
    EditField(h1,v+=vs,80,"Подразделение",ViewOnly,BranchID,false,AllCUSClass);
  //  EditField(h2,v=vm,80,"Итого кол-во",ViewOnly,TotQty,true,0);
  //  EditField(h2,v+=vs,80,"Итого",ViewOnly,TotWeight,true,0);
  //  EditField(h2,v+=vs,80,"Итого объем",ViewOnly,TotVolume,true,0);
    EditField(h2,v=vm,80,"Заказ на обсл.",Normal,SVONr,false,0);
    EditField(h2,v+=vs,80,"№ зак. на работу",Normal,WONr,false,0);
    EditField(h2,v+=vs,80,"№ процесса",Normal,POCQStatNr,true,POCQStatSClass);
    EditField(h2,v+=vs,80,"№ контракта",ViewOnly,POCOSerNr,true,0);
    CheckBox(473,v=vm,0,"Счет перед поступл. товара",InvBeforePU);
      end;
    end;
    if (IsEnterprise) then begin
      Tile(tilenr,90,false,tilenr,LangCode); tilenr = tilenr + 1;
      EditField(h1,v=6,80,"Дискон. матрица",Normal,RebCode,false,RebSClass); 
    EditField(h1,v+=vs,80,"Факторинг",Normal,VEFactoring,false,VESClass);
    EditField(h1,v+=vs,80,"№ заказа",Normal,OrdNr,false,0);
    EditField(h1,v+=vs,-20,"Комментарий",Normal,Comment,false,0);
    EditField(h2,v=vm,80,"Группа продаж",Normal,SalesGroup,false,SalesGroupSClass);
    EditField(h2,v+=vs,80,"Сч/ф на",Normal,InvoiceToCode,false,VESClass);
    EditField(h2,v+=vs,80,"Ст-сть покупки",Normal,CostPerUnit,true,0);
    EditField(h3,v=vm,80,"Язык",Normal,LangCode,false,LangSClass);
    end else begin
      Tile(tilenr,20,false,tilenr,Comment); tilenr = tilenr + 1;
      EditField(h1,v=6,-20,"Коммент.",Normal,Comment,false,0); 
    end;
    Tile(tilenr,230,false,tilenr,Addr1); tilenr = tilenr + 1;
    label = UserDefined("CUVc","InvAddr0");
    if (blank(label)) then begin label = "Заказ"; end;
    EditField(h=110,v=6,-20,label,Normal,Addr1,false,0);
    label = UserDefined("CUVc","InvAddr1");
    if (blank(label)) then begin label = "Адрес"; end;
    EditField(h,v+=vs, -20,label,Normal,Addr2,false,0);
    label = UserDefined("CUVc","InvAddr2");
    EditField(h,v+=vs, -20,label,Normal,Addr3,false,0);
    label = UserDefined("CUVc","InvAddr3");
    EditField(h,v+=vs, -20,label,Normal,InvAddr3,false,0);
    label = UserDefined("CUVc","InvAddr4");
    //EditField(h,vm=(v+=vs), -20,label,Normal,InvAddr4,false,0);// Edit ************************** Thursday, 12 September 2013 13:45:26
    vm=(v+=vs);
    if (HasApprovals) then begin
    ButtonFrame(h3=h+4,v=(vm+=40),123,6,"Статус утверждения");
    RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);
    RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);  
    end;
    if (IsEnterprise) then begin
    v = VATZoneButtonsLabelsRUS(h3=290,v=vm,140,16);
    EditField(h2=-170,v=vm,150,"Регион",Normal,Region,false,RegionSClass); 
  //  EditField(h2,v+=vs,150,"VAT Reg. No.",Normal,VATNr,false,0);
  //  EditField(h2,v+=vs,150,"Telephone",Normal,Phone,false,0);
  //  EditField(h2,v+=vs,150,"Fax",Normal,Fax,false,0);
    end;
    Tile(tilenr,130,false,tilenr,ShipAddr0); tilenr = tilenr + 1;
    EditField(h,v=6,-20,"Доставка",Normal,ShipAddr0,false,0);
    EditField(h,v+=vs,-20,"Адрес",Normal,ShipAddr1,false,0); 
    EditField(h,v+=vs,-20,"",Normal,ShipAddr2,false,0); 
    EditField(h,v+=vs,-20,"",Normal,ShipAddr3,false,0); 
    EditField(h,v+=vs,-20,"",Normal,DelAddr3,false,0); 
    EditField(h,v+=vs,-20,"",Normal,DelAddr4,false,0); 
    if (IsEnterprise) then begin
      Tile(tilenr,70,false,tilenr,Cost1); tilenr = tilenr + 1;
			vs = 20; h2 = 290; h3 = 530;
			label = UserDefined("AccBlock","PUCost1");
			if (blank(label)) then begin label = "Накладные 1";end;
			EditField(h1,v=6,70,label,Normal,Cost1,true,0);
			label = UserDefined("AccBlock","PUCost2");
			if (blank(label)) then begin label = "Накладные 2";end;
			EditField(h2,v,70,label,Normal,Cost2,true,0);
			label = UserDefined("AccBlock","PUCost3");
			if (blank(label)) then begin label = "Накладные 3";end;
			EditField(h1,v+=vs,70,label,Normal,Cost3,true,0);
			label = UserDefined("AccBlock","PUCost4");
			if (blank(label)) then begin label = "Накладные 4";end;
			EditField(h2,v,70,label,Normal,Cost4,true,0);
			label = UserDefined("AccBlock","PUCost5");
			if (blank(label)) then begin label = "Накладные 5";end;
			EditField(h1,v+=vs,70,label,Normal,Cost5,true,0);
			EnterSkip(TransDate);
			// CheckBox(h2,v=45,0,"Ручной ввод затрат на конс.",ConsManualCost);// Edit ************************** BPI Ukraine - KramarAlexandr - 01, 22 07 2019 y. at 9:59:02 AM
			ButtonFrame(h3,v=16,130,2,"Расчет накл. затрат"); 
			RadioButton(h3,v,0,0,"Стоимость",ExtraCostsCalculation); 
			RadioButton(h3,v+=16,1,0,"Вес",ExtraCostsCalculation);
			CheckBox(h3-160,v=6,0,"Доп затр. в пост.",ExtraCostInPU);
    end;
		// if(currentcompany==18)then begin
			Tile(tilenr,70,false,tilenr,IDPrjNum); tilenr = tilenr + 1;
			h1 = 120;
			w = 120;
			vs = 20;
			vm = 20;
			// EditField(h1,v=vm,w,"Project Code",Normal,IDPrjNum,false,IDProjectSCLass);
			EditField(h1,v=vm,w,"Project Code",Normal,IDPrjNum,false,BtrxProjectsSClass);
			EditField(h1,v+=vs,w,"Proforma Inv #",Normal,IDProfInvNum,false,0);
			EditField(h1,v+=20,w,"Manufacturer",Normal,VECode,false,VESClass);
			EditField(h1,v+=vs,w,"Mfr Finish Date",Normal,IDMfrFinDate,false,PasteCurDate);
			EditField(h1,v+=vs,w,"Old Mfr Finish Confirm",Normal,IDOldMfrFinConfirmDate,false,PasteCurDate);
			EditField(h1,v+=vs,w-30,"Mfr Finish Confirm",Normal,IDMfrFinConfirmDate,false,PasteCurDate);
			CheckBox(h1+w-15,v+2,0,"",IDMfrFinConfirmFlag);
			EditField(h1,v+=vs,w,"PO Status",Normal,IDStatus,false,IDPOStatusSCLass);
			h3 = h1 + w + 200;
			w2 = 110;
			EditField(h1,v+=vs,w,"Promised Date",Normal,PlanShipDate,false,PasteCurDate);
			// EditField(h1,v+=vs,w,"Volume,m3",Normal,TotVolume,false,0);    
			
			vs = 20;
			w = 120;
			h4 = h3 + w + 20;
			h5 = h4 + 50;
			EditField(h3,v=vm,w,"Purchase Cost",Normal,Sum4,false,0);
			// StaticText(h4,v+14,"Paid",false);
			// StaticText(h5+10,v+14,"Date",false);
			w2 = 70;
			// EditFieldTL(h3,v+=vs,w-w2-10,"Prepayment",M40Val,Normal,10,IDPrepayProc,false,0);
			// StaticText(h3+w-w2-8,v+12,"%",false);
			// EditField(h3+w+9-w2,v,w2-9,"",Normal,IDPrepay,false,0);
			// CheckBox(h4,v+2,0,"",IDPrepayPaid);
			// EditField(h5-15,v,70,"",Normal,IDPrepayDate,false,PasteCurDate);
			
			// EditFieldTL(h3,v+=vs,w-w2-10,"Balance Payment",M40Val,Normal,10,IDBalPayProc,false,0);
			// StaticText(h3+w-w2-8,v+12,"%",false);
			// EditField(h3+w+9-w2,v,w2-9,"",Normal,IDBalPay,false,0);
			
			// StaticText(h4,v+14,"Credit Acct",false);
			// CheckBox(h5+20,v,0,"",IDCreditAccFlag);
			w = 120;
			EditField(h3,v+=vs,w,"Bank Name",Normal,IDBankName,false,IDBankNameSClass);
			EditField(h3,v+=vs,w,"Freight",Normal,IDFreight,false,IDFreightSClass);
			EditField(h3,v+=vs,w-80,"Payment Terms",Normal,PayDeal,false,CCOPPTSCLass);
			EditField(h3+40,v,w-40,"",ViewOnly,IDPayDealText,false,0);
			EditField(h3,v+=vs,w,"Days for balance payment",Normal,DaysForBallancePayment,false,0);
			if (left(CurrentUser,2)=="SA") then begin
				EditField(h3,v+=vs,w,"Old partial TOTAL",Normal,PartDelSum4,false,0);
			end else begin
				EditField(h3,v+=vs,w,"Old partial TOTAL",ViewOnly,PartDelSum4,false,0);
			end;
			// EditField(h3,v+=vs,w,"Weight,kg",Normal,TotWeight,false,0);
		// end;
    SpecialMenu("Создать консолидированный заказ",' ',0,"ORFromPOConsDsm");// Edit ************************** BPI Ukraine - KramarAlexandr - 03, 26 06 2019 y. at 2:25:53 PM
    if (HasApprovals) then begin
      SpecialMenu("Отправить для подтверждения",' ',6,"POSendforAcceptancePODsm");
      SpecialMenu("Отменить запрос на утверждение",' ',2,"CancelApprovalRequestDsm"); 
			SpecialMenu("Создать список на удаление",' ',8,"CreateNoterToDelPODsm");
			SpecialMenu("Сохранить строки согласно списку",' ',8,"SaveItemsFromPODsm");
			SpecialMenu("Удалить лишние строки согласно списку",' ',8,"DeleteItemsFromPODsm");
			SpecialMenu("Add items to PR (IDEA)",' ',8,"IDPasteItemsToPRDsm");
			if(currentcompany==18)then begin
				SpecialMenu("Open Shipment Data Window",'',10,"OpenPOShipmDataDsm");
			end;
    end;
    if (HasModIN) then begin
      SpecialMenu("Статус товара",'I',2,"ItemStatusPODsm");
    end;
    SpecialMenu("Поиск товара",'',1,"ItemSearchDsm");
    SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");// Edit ************************** Thursday, 18 December 2014 11:54:59
    if (IsEnterprise) then begin
      SpecialMenu("Цены предыдущей покупки",' ',4,"POLastPPrsm");
    end;
    SpecialMenu("Статус заказа поставщику",'r',5,"POStatRnPODsm");
    if (IsEnterprise) then begin
      SpecialMenu("Резервирования",' ',6,"POReservPODsm");
      //SpecialMenu("Открыть нал. матрицу",' ',25,"OpenVatMatrixPODsm"); 
    end;
		SpecialMenu("Выгрузить таблицу в буфер обмена",'',1,"ExportToExcelPODsm");
    if(CompanyIsJWLikeCompany(currentcompany))then begin
      SpecialMenu("Просмотреть расчитанные розничные цены",' ',25,"ShowRRPPricesDsm"); // Edit ************************** Tuesday, 28 May 2013 10:23:02
    end;
    if(currentcompany==10)then begin
      SpecialMenu("Просмотреть расчитанные розничные цены",' ',25,"ShowRRPPricesDsm"); // Edit ************************** Tuesday, 28 May 2013 10:23:02
    end;
    if(currentcompany==13)then begin
      SpecialMenu("Просмотреть расчитанные розничные цены",' ',25,"ShowRRPPricesDsm"); // Edit ************************** Tuesday, 28 May 2013 10:23:02
    end;
    SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);
    if (HasModIN) then begin
      SpecialMenu("Создать поступление",'L',0,"PUFromPODsm");
    end;
    if (IsEnterprise) then begin
      SpecialMenu("Создать возврат товаров",'B',6,"RetPUFromPODsm");
      SpecialMenu("Создать уведомл. об отгр.",'l',0,"DropSHFromPODsm");
    end;
    if (HasModPL) then begin
      SpecialMenu("Создать счет-фактуру",'F',1,"VIFromPODsm"); 
			SpecialMenu("Создать счет-фактуру на фрахт от бренда",'F',1,"VIForBrndShipCFromPODsm");
    end;
    if (HaseMail) then begin
      SpecialMenu("Создать e-mail",'m',3,"CreateMailFromPODsm");
    end;
  end else begin
    BlockLoad(CYb);
    WindowBegin("Заказ поставщику",PODClass,CGview,-); 
    SetWRect(20,80,920,460);
    DynamicWindow;
    Sizeable(-1,-1,0,0);
    AutoSizeWindow(false);
    UseView(POVc);
    CommunicateButton;
    ActiveFieldOnNew("VECode");    
    Tile(0,310,false,"",VECode);
    h1 = 100;
    w = 120;
    vs = 20;
    CheckBox(-40,v=(vm=6),0,"OK",OKFlag);
    EditField(h1,v=vm,w,"PO Number",Normal,Reference,false,0);
    EditField(h1,v+=vs,w,"Ref PR Number",Normal,IDRefPRNum,false,ORIDSClass);
		if (left(CurrentUser,2)!="SA") then begin
			EditField(h1,v+=vs,w,"#",ViewOnly,SerNr,false,0);
		end else begin
			EditField(h1,v+=vs,w,"#",Normal,SerNr,false,0);
		end;
    EditField(h1,v+=vs,w,"Project Code",Normal,IDPrjNum,false,IDProjectSCLass);
    EditField(h1,v+=vs,w,"Proforma Inv #",Normal,IDProfInvNum,false,0);
    EditField(h1,v+=20,w,"Manufacturer",Normal,VECode,false,VESClass);
    EditField(h1,v+=vs,w,"Mfr Finish Date",Normal,IDMfrFinDate,false,PasteCurDate);
		EditField(h1,v+=vs,w,"Old Mfr Finish Confirm",Normal,IDOldMfrFinConfirmDate,false,PasteCurDate);
    EditField(h1,v+=vs,w-30,"Mfr Finish Confirm",Normal,IDMfrFinConfirmDate,false,PasteCurDate);
    CheckBox(h1+w-15,v+2,0,"",IDMfrFinConfirmFlag);
    EditField(h1,v+=vs,w,"PO Status",Normal,IDStatus,false,IDPOStatusSCLass);
    
    h2 = h1 + w + 100;
    w2 = 110;
    EditField(h2,v=vm,w2,"PO Date",Normal,TransDate,false,PasteCurDate);
    EditField(h2,v+=vs,w2,"Promised Date",Normal,PlanShipDate,false,PasteCurDate);
    EditField(h2,v+=vs,w2,"Requester",Normal,IDReguester,false,IDReguesterSCLass);
    EditField(h2,v+=vs,w2,"",Normal,IDCustCode,false,CUSClass);
    EditField(h2,v+=vs,w2,"Designer",Normal,SalesMan,false,SalesmanSClass);
    EditField(h2,v+=20,w2,"Freight",Normal,IDFreight,false,IDFreightSClass);
    EditField(h2,v+=vs,w2,"Shipper",Normal,IDShipper,false,CUSClass);
    EditField(h2,v+=vs,w2,"Incoterms",Normal,IDIncoterms,false,IDIncotermsSClass);
    EditField(h2,v+=vs,w2-80,"Payment Terms",Normal,PayDeal,false,CCOPPTSCLass);
		EditField(h2+40,v,w2-40,"",ViewOnly,IDPayDealText,false,0);
    if (left(CurrentUser,2)=="SA") then begin
			EditField(h2,v+=vs,w2,"ID PO Ref.",Normal,IDGDEAPORef,false,0);
		end else begin
			v = v + vs;
		end;
		w2 = w + h2 - h1 - 10;
    h3 = h2 + w + 20;
    EditField(h1,v+=vs,w2,"Status Details",Normal,IDStatusDetail,false,0);
		EditField(h1,v+=vs,w2,"Objects",Normal,Objects,false,ObjSClass);
    vt = v;
    EditField(h1,v+=vs,w2,"Remarks",Normal,Comment,false,0);
    w = 60;
    EditField(h1,v+=vs,w,"Volume,m3",Normal,IDVolume,false,0);
    h2 = h1 + w + 90;
    EditField(h2,v,w,"Weight,kg",Normal,IDWeight,false,0);
		if(currentuser=="SA")then begin
			h2 = h1 + w + 90 + 120;
			EditField(h2,v,w,"StPODate",Normal,UpdStatDate,false,PasteCurDate);
		end;
    
    w = 120;
    vs = 22;
    
    colour = 10;
    ColourPushButton(h3,v=vm,h3+w,v+=vs,"IDOpenPRFromPO","PR Form",colour);
    ColourPushButton(h3,v+2,h3+w,v+=vs,"IDAppendPRBtnClick","Append PR",colour);
		ColourPushButton(h3,v+2,h3+w,v+=vs,"PasteItemsToPR","Add items to PR",colour);
    colour = 20;
    ColourPushButton(h3,v+2,h3+w,v+=vs,"","PO General Reports",colour);
    ColourPushButton(h3,v+2,h3+w,v+=(vs+22),"","PO Report - Urgent Requests",colour);
    ColourPushButton(h3,v+2,h3+w,v+=vs,"","Purchase Manegement",colour);
    
    h4 = h3 + w + 5;
    h3 = h3 + w - 30;
    w = 130;
    ColourPushButton(h4,v=vm,h4+w,v+=vs,"","PO Status Report",colour);
    ColourPushButton(h4,v+2,h4+w,v+=vs,"","PO Payment Reports",colour);
    ColourPushButton(h4,v+2,h4+w,v+=(vs+22),"","PO Payment Mfr Debt Acct",colour);
    ColourPushButton(h4,v+2,h4+w,v+=vs,"","PO Shipment Reports",colour);
    ColourPushButton(h4,v+2,h4+w,v+=(vs+22),"","Shipment Report with PO Status",colour);
    
    h5 = h4 + w + 5;
    w = 110;
    ColourPushButton(h5,v=vm,h5+w,v+=(vs+22),"","PO-s with Wrong Status",colour);
    ColourPushButton(h5,v+2,h5+w,v+=(vs+22),"","PO Payment Not Completed",colour);
    ColourPushButton(h5,v+2,h5+w,v+=(vs+22),"","Mfr Debt Acct Wrong Paid",colour);
    ColourPushButton(h5,v+2,h5+w,v+=vs,"","Print GRO Report",colour);
    
    vs = 20;
    w = 120;
    h4 = h3 + w + 20;
    h5 = h4 + 50;
		if (UserCanAction("SkipInfForStockInf",true))then begin
			EditField(h3,v=vt-vs,w,"Purchase Cost",Normal,Sum4,false,0);
			StaticText(h4,v+14,"Paid",false);
			StaticText(h5+10,v+14,"Date",false);
			w2 = 70;
			EditFieldTL(h3,v+=vs,w-w2-10,"Prepayment",M40Val,Normal,10,IDPrepayProc,false,0);
			StaticText(h3+w-w2-7,v+12,"%",false);
			EditField(h3+w+5-w2,v,w2-5,"",Normal,IDPrepay,false,0);
			CheckBox(h4,v+2,0,"",IDPrepayPaid);
			EditField(h5-15,v,70,"",Normal,IDPrepayDate,false,PasteCurDate);
			
			EditFieldTL(h3,v+=vs,w-w2-10,"Balance Payment",M40Val,Normal,10,IDBalPayProc,false,0);
			StaticText(h3+w-w2-7,v+12,"%",false);
			EditField(h3+w+5-w2,v,w2-5,"",Normal,IDBalPay,false,0);
			
			StaticText(h4,v+14,"Credit Acct",false);
			CheckBox(h5+20,v,0,"",IDCreditAccFlag);
			w = 100;
			EditField(h3,v+=vs,w,"Bank Name",Normal,IDBankName,false,IDBankNameSClass);
			EditField(h5+20,v,80,"FOB-obj. скл.отпр.",Normal,ItemFromOtherSTockObj,false,ObjSClass);
    end;
    tilenr = 1;
    TileButton(tilenr,"Товары"); tilenr = tilenr + 1; 
		if (UserCanAction("SkipInfForStockInf",true))then begin
			if (HasMultiCurrency or HasBase2) then begin
				TileButton(tilenr,"Валюта"); tilenr = tilenr + 1; 
			end;
			if (HasModIN) then begin
				TileButton(tilenr,"Усл. отгрузки"); tilenr = tilenr + 1; 
			end;
			TileButton(tilenr,"Комментарий"); tilenr = tilenr + 1; 
			TileButton(tilenr,"Адрес зак."); tilenr = tilenr + 1; 
			TileButton(tilenr,"Адрес дост."); tilenr = tilenr + 1; 
			if (IsEnterprise) then begin
				TileButton(tilenr,"Доп. затр."); tilenr = tilenr + 1; 
			end;
		end;
    tilenr = 1;
    Tile(tilenr,120,true,tilenr,Math); tilenr = tilenr + 1;
		if (UserCanAction("SkipInfForStockInf",true))then begin
			if (HasMultiCurrency or HasBase2) then begin
				EditField(h1,-21,40,"Currency",Normal,CurncyCode,false,CurncyCodeSClass);
				EditField(h1+120,-21,40,"Check cur.",Normal,CheckCurncyCode,false,CurncyCodeSClass);
			end;
			EditField(-369,-41,60,"Freight",Normal,ShipCost,true,0);
			if (UserCanAction("ConfFreightCostomsFlags",false))then begin
				CheckBox(-298,-41,0,"Conf.",ShipCostOKFlag);
			end;
			EditField(-169,-41,60,"Customs",Normal,CustomsCost,true,0);
			if (UserCanAction("ConfFreightCostomsFlags",false))then begin
				CheckBox(-98,-41,0,"Conf.",CustomsCostOKFlag);
			end;
			EditField(-369,-21,118,"Items Total",Normal,IDSum4,true,0);
			EditField(-169,-21,118,"Total",Normal,Sum4,true,0);
		end;
    v = 24;
    MatrixBegin(3,v,-25,-44,-,1000);
    MatTypedRow(stp);
    Flip(0);
    h = 30;
    MatCol(1,h,"SN",0,ArtCode,false,INSClass);
  
    EnterSkip(ArtCode);
    flipnr = 1;
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(1,h+=90,"Description",0,Spec,false,0);
    MatCol(1,h=-500,"Article",0,IDAltCode,false,0);
    MatColTL(1,h+=90,"UOM",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass);
    if (HasVarieties) then begin
      MatCol(1,h+=35,"Qty",0,Quant,true,MATVARINSClass);
    end else begin
      MatCol(1,h+=35,"Qty",0,Quant,true,0); 
    end;
    
    //MatCol(1,h+=30,"Unit Val, USD",0,PriceFactor,true,0);
		if (UserCanAction("SkipInfForStockInf",true))then begin MatCol(1,h+=30,"Unit Val",0,Price,true,0); end;
		MatCol(1,h+=70,"%",0,vRebate,true,0);
		MatCol(1,h+=35,"Sum",0,Sum,true,0);
    MatCol(1,h+=70,"Prmsd Dt",0,IDPrmsdDt,true,0);
    MatCol(1,h+=75,"Product Code",0,IDProductCode,false,0);
    
    DeleteRowTest;
    InsertRowTest;
    EndMatrix;
    vs = 20;
    v = 18; 
    if (flipnr>2) then begin
      for (f=1;f<flipnr;f=f+1) begin
        VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
        v = v + vs;
      end;
    end;
		if (UserCanAction("SkipInfForStockInf",true))then begin
			if (HasMultiCurrency or HasBase2) then begin
				Tile(tilenr,70,false,tilenr,FrRate); tilenr = tilenr + 1;
				vs = 20; h = 110; h2 = 295;
				if (HasBase2) then begin
					h1 = h1 + 20;
				end;
				EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); 
				if (HasMultiCurrency) then begin
					EditField(h2,v,50,"Курс",Normal,FrRate,true,0);
					EditField(h2+65,v,50,":",Normal,ToRateB1,true,0);
					if (HasBase2) then begin
						StaticText(h2+125,v+14,"Базовая валюта 1",false); 
						EditField(h1,v+=vs,50,"Базовая валюта 1",Normal,BaseRate1,true,0);
						EditField(h2+65,v,50,":",Normal,ToRateB2,true,0);
						StaticText(h2+125,v+14,"Базовая валюта 2",false);
						EditField(h1,v+=vs,50,"Базовая валюта 2",Normal,BaseRate2,true,0);
					end else begin
						StaticText(h2+125,v+14,"Базовая валюта",false); 
					end;
				end else begin
					EditField(h1,v+=vs,50,"Базовая валюта 1",Normal,BaseRate1,true,0); 
					EditField(h1,v+=vs,50,"Базовая валюта 2",Normal,BaseRate2,true,0); 
				end;
			end;
			if (HasModIN) then begin
				Tile(tilenr,90,false,tilenr,ShipDeal); tilenr = tilenr + 1;
				vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -100;
				EditField(h1,v=6,80,"Условия доставки",Normal,ShipDeal,false,ShipDealSClass);
				if (IsEnterprise) then begin
					EditField(h1,v+=vs,80,"Метод доставки",Normal,ShipMode,false,DMSClass);
				end;
				if (HasMultiLocations) then begin
					EditField(h1,v+=vs,80,"Склад",Normal,Location,false,LocationSClass);
				end;
				if (IsEnterprise) then begin
					EditField(h1,v+=vs,80,"Подразделение",ViewOnly,BranchID,false,AllCUSClass);
					EditField(h2,v=vm,80,"Заказ на обсл.",Normal,SVONr,false,0);
					EditField(h2,v+=vs,80,"№ зак. на работу",Normal,WONr,false,0);
					EditField(h2,v+=vs,80,"№ процесса",Normal,POCQStatNr,true,POCQStatSClass);
					EditField(h2,v+=vs,80,"№ контракта",ViewOnly,POCOSerNr,true,0);
					CheckBox(473,v=vm,0,"Счет перед поступл. товара",InvBeforePU);
				end;
			end;
			if (IsEnterprise) then begin
				Tile(tilenr,90,false,tilenr,LangCode); tilenr = tilenr + 1;
				EditField(h1,v=6,80,"Дискон. матрица",Normal,RebCode,false,RebSClass); 
				EditField(h1,v+=vs,80,"Факторинг",Normal,VEFactoring,false,VESClass);
				EditField(h1,v+=vs,80,"№ заказа",Normal,OrdNr,false,0);
				EditField(h1,v+=vs,-20,"Комментарий",Normal,Comment,false,0);
				EditField(h2,v=vm,80,"Группа продаж",Normal,SalesGroup,false,SalesGroupSClass);
				EditField(h2,v+=vs,80,"Сч/ф на",Normal,InvoiceToCode,false,VESClass);
				EditField(h2,v+=vs,80,"Ст-сть покупки",Normal,CostPerUnit,true,0);
				EditField(h3,v=vm,80,"Язык",Normal,LangCode,false,LangSClass);
			end else begin
				Tile(tilenr,20,false,tilenr,Comment); tilenr = tilenr + 1;
				EditField(h1,v=6,-20,"Коммент.",Normal,Comment,false,0); 
			end;
			Tile(tilenr,230,false,tilenr,Addr1); tilenr = tilenr + 1;
			label = UserDefined("CUVc","InvAddr0");
			if (blank(label)) then begin label = "Заказ"; end;
			EditField(h=110,v=6,-20,label,Normal,Addr1,false,0);
			label = UserDefined("CUVc","InvAddr1");
			if (blank(label)) then begin label = "Адрес"; end;
			EditField(h,v+=vs, -20,label,Normal,Addr2,false,0);
			label = UserDefined("CUVc","InvAddr2");
			EditField(h,v+=vs, -20,label,Normal,Addr3,false,0);
			label = UserDefined("CUVc","InvAddr3");
			EditField(h,v+=vs, -20,label,Normal,InvAddr3,false,0);
			label = UserDefined("CUVc","InvAddr4");
			vm=(v+=vs);
			if (HasApprovals) then begin
				ButtonFrame(h3=h+4,v=(vm+=40),123,6,"Статус утверждения");
				RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);
				RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);
				RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);
				RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);
				RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);
				RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);  
			end;
			if (IsEnterprise) then begin
				v = VATZoneButtonsLabelsRUS(h3=290,v=vm,140,16);
				EditField(h2=-170,v=vm,150,"Регион",Normal,Region,false,RegionSClass); 
			end;
			Tile(tilenr,130,false,tilenr,ShipAddr0); tilenr = tilenr + 1;
			EditField(h,v=6,-20,"Доставка",Normal,ShipAddr0,false,0);
			EditField(h,v+=vs,-20,"Адрес",Normal,ShipAddr1,false,0); 
			EditField(h,v+=vs,-20,"",Normal,ShipAddr2,false,0); 
			EditField(h,v+=vs,-20,"",Normal,ShipAddr3,false,0); 
			EditField(h,v+=vs,-20,"",Normal,DelAddr3,false,0); 
			EditField(h,v+=vs,-20,"",Normal,DelAddr4,false,0); 
			if (IsEnterprise) then begin
				Tile(tilenr,70,false,tilenr,Cost1); tilenr = tilenr + 1;
				vs = 20; h2 = 290; h3 = 530;
				label = UserDefined("AccBlock","PUCost1");
				if (blank(label)) then begin label = "Накладные 1";end;
				EditField(h1,v=6,70,label,Normal,Cost1,true,0);
				label = UserDefined("AccBlock","PUCost2");
				if (blank(label)) then begin label = "Накладные 2";end;
				EditField(h2,v,70,label,Normal,Cost2,true,0);
				label = UserDefined("AccBlock","PUCost3");
				if (blank(label)) then begin label = "Накладные 3";end;
				EditField(h1,v+=vs,70,label,Normal,Cost3,true,0);
				label = UserDefined("AccBlock","PUCost4");
				if (blank(label)) then begin label = "Накладные 4";end;
				EditField(h2,v,70,label,Normal,Cost4,true,0);
				label = UserDefined("AccBlock","PUCost5");
				if (blank(label)) then begin label = "Накладные 5";end;
				EditField(h1,v+=vs,70,label,Normal,Cost5,true,0);
				EnterSkip(TransDate);
				ButtonFrame(h3,v=16,130,2,"Расчет накл. затрат"); 
				RadioButton(h3,v,0,0,"Стоимость",ExtraCostsCalculation); 
				RadioButton(h3,v+=16,1,0,"Вес",ExtraCostsCalculation);
				CheckBox(h3-160,v=6,0,"Доп затр. в пост.",ExtraCostInPU);
			end;
		end;
    
    if (HasApprovals) then begin
      SpecialMenu("Отправить для подтверждения",' ',6,"POSendforAcceptancePODsm");
      SpecialMenu("Отменить запрос на утверждение",' ',2,"CancelApprovalRequestDsm"); 
    end;
    if (HasModIN) then begin
      SpecialMenu("Статус товара",'I',2,"ItemStatusPODsm");
    end;
    SpecialMenu("Поиск товара",'',1,"ItemSearchDsm");
    SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");// Edit ************************** Thursday, 18 December 2014 11:54:59
		SpecialMenu("Выгрузить таблицу в буфер обмена",'',1,"ExportToExcelPODsm");

    if (IsEnterprise) then begin
      SpecialMenu("Цены предыдущей покупки",' ',4,"POLastPPrsm");
    end;
    SpecialMenu("Статус заказа поставщику",'r',5,"POStatRnPODsm");
    if (IsEnterprise) then begin
      SpecialMenu("Резервирования",' ',6,"POReservPODsm");
    end;
    if(CompanyIsJWLikeCompany(currentcompany))then begin
      SpecialMenu("Просмотреть расчитанные розничные цены",' ',25,"ShowRRPPricesDsm"); // Edit ************************** Tuesday, 28 May 2013 10:23:02
    end;
    SpecialMenu("Open Shipment Data Window",'',10,"OpenPOShipmDataDsm");
    SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);
    if (HasModIN) then begin
      SpecialMenu("Создать поступление",'L',0,"PUFromPODsm");
    end;
    if (IsEnterprise) then begin
      SpecialMenu("Создать возврат товаров",'B',6,"RetPUFromPODsm");
      SpecialMenu("Создать уведомл. об отгр.",'l',0,"DropSHFromPODsm");
    end;
    if (HasModPL) then begin
      SpecialMenu("Создать счет-фактуру",'F',1,"VIFromPODsm");
    end;
    if (HaseMail) then begin
      SpecialMenu("Создать e-mail",'m',3,"CreateMailFromPODsm");
    end;
  end;
  EndWindow;
end;

window StockTakeDClass:5
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer,android,iPad,iPhone") 
begin
  real h,h2,v,vm,vs;
  Integer f,flipnr,t;
  Integer icn;

  icn = StringToInt(USetStr(912));
  WindowBegin("Инвентаризация",StockTakeDClass,CGview,-); 
  SetWRect(20,80,560,350);
  Sizeable(-1,-1,0,0);
  UseView(StockTakeVc);
  if (GUIType==kGuiAndroid) or (GUIType==kGUIiPhone) then begin
    if (GUIType==kGuiAndroid) then begin
      WindowTitleBar(6002,icn,6003,"Инвентаризация"); 
    end;
  h = 10; h2 = 165;
  vs = 38;
  EditField(h,v=6,145,"Номер",Normal,SerNr,false,0);
  EditField(h2,v,145,"Склад",Normal,Location,false,LocationSClass);
  EditField(h,v+=vs,300,"Дата операции",Normal,TransDate,false,PasteCurDate);
  EditField(h,v+=vs,-10,"Комментарий",Normal,Comment,false,0);
  CheckBox(40,v+=vs,0,"OK",OKFlag);
  EnterSkip(Math);
  v = v + 42;
  MatrixBegin(0,v,-1,-1,-,5000);
  
  MatCell(t=1,10,6,120,19,ArtCode,false,12,patM4black);
  MatCell(t,130,6,280,19,SerialNr,false,12,patM4black);
  MatCell(t,10,26,190,39,Spec,false,12,patM4black);
  MatCell(t,200,26,280,39,Qty,true,12,patM4black);
  
  //MatCol(1,-340,"Position",0,Position,false,PosSClass);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  end else begin
  vs = 20; h2 = 300;
  EditField(h=100,v=6, 82,"Номер",Normal,SerNr,false,TSerSClass);
  EditField(h2,v,82,"Дата операции",Normal,TransDate,false,PasteCurDate);
    if (IsEnterprise) then begin
      CheckBox(-100,v,0,"OK",OKFlag); 
    end;
    if (HasMultiLocations) then begin
  EditField(h,v+=vs,82,"Склад",Normal,Location,false,LocationSClass);
    end;
  EnterSkip(Math);
//  CheckBox(420,v=6,0,"Установить складские остатки в текущие остатки",SetStockValue);
//  CheckBox(420,v+=vs,0,"Переписать предыдущие",OverrideBackdated);
  v = v + 42;
  vm = v + 1;
  MatrixBegin(4,v,-50,-35,-,5000);
    Flip(0); flipnr = flipnr + 1;
    if (HasJewelleryInterface) then begin
      MatCol(1,24,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
      EnterSkip(Quant);
      MatCol(1,130,"Товар",0,ArtCode,false,INSClass); 
      if (HasVarieties) then begin
      MatCol(1,192,"Рассч.",0,Qty,true,MATVARINSClass); 
      end else begin
        MatCol(1,192,"Рассч.",0,Qty,true,0); 
      end;
      if (IsEnterprise) then begin
        MatCol(1,254,"На складе",0,InStock,true,0); 
        MatCol(1,314,"Описание",0,Spec,false,0); 
      end else begin
        MatCol(1,254,"Описание",0,Spec,false,0); 
      end;
    end else begin
  MatCol(1,32,"Товар",0,ArtCode,false,INSClass);
//  MatCol(1,94,"Var",0,VARList,false,VARSClass);
//  MatCol(1,144,"Qty",0,Qty,true,0);
      if (HasVarieties) then begin
  MatCol(1,94,"К-во",0,Qty,true,MATVARINSClass);
      end else begin
        MatCol(1,94,"Рассч.",0,Qty,true,0); 
      end;
      if (IsEnterprise) then begin
  MatCol(1,154,"На скл.",0,InStock,true,0);
  MatCol(1,214,"Наименование",0,Spec,false,0);
      end else begin
        MatCol(1,154,"Описание",0,Spec,false,0); 
      end;  
    end;
    if (IsEnterprise) then begin
      Flip(flipnr); flipnr = flipnr + 1;
      if (HasJewelleryInterface==false) then begin
        MatCol(1,-280,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
      end;
      MatCol(1,-160,"Склад",0,Location,false,LocationSClass); 
      MatCol(1,-100,"Позиция",0,Position,false,PosSClass); 
      MatCol(1,-40,"Коэфф.",0,Coefficient,false,0); 
      Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,-125,"Отпускная цена",0,BasePrice,true,0);
  MatCol(1,-40,"Коэф",0,Coefficient,false,0);
      Flip(flipnr); flipnr = flipnr + 1;
      MatCol(1,-140,"Ширина",0,UnitXval,true,0); 
      MatCol(1,-95,"Высота",0,UnitYval,true,0); 
      MatCol(1,-50,"Глубина",0,UnitZval,true,0); 
    end;
  DeleteRowTest;
  EndMatrix;
    vs = 20; v=vm;
  
    if (flipnr>2) then begin
      for (f=1;f<flipnr;f=f+1) begin
        VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
        v = v + vs;
      end;
    end;
    if (IsEnterprise==false) then begin
      CheckBox(20,-30,0,"OK",OKFlag); 
    end;
    EditField(h=150,-30,-35,"Коммент.",Normal,Comment,false,0); 
    if (IsEnterprise) then begin
	SpecialMenu("Обнулить кол-во на складе",' ',1,"BlankSLMn");
  SpecialMenu("Заполнить текущую стоимость",' ',1,"StockTakeFillFIFODsm");
  SpecialMenu("Поиск товара",'f',1,"ItemSearchDsm");
  SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
//  SpecialMenu("Import Data from Digitag",'f',1,"StockTakeDigitagDsm");
end;
  end;
  EndWindow;
end;



window AlarmWClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real f,h,v,vs;
  WindowBegin("Оповещение",AlarmWClass,CGother,RcType);
	Modality(1);
  UseView(RcVc);
  CloseOnCancel;
  SetWRect(20,80,490,170);
  h = 100; v = 20; vs = 30; f = 100;
  EditFieldTL(h,v,-40,"Сообщение",M4Str,ViewOnly,60,f1,false,0);
  HalPushButton(h,v+=vs,h+f,25,"AlarmWClassOpenAct","Открыть деятельность");
  HalPushButton(h=-40-f,v,-40,25,"AlarmWClassClose","Закрыть");
  EndWindow;
end;

window RebateCardWClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real f,h,v,vs;
  WindowBegin("Отсканируйте скидочную карту",RebateCardWClass,CGother,RcType);
	Modality(1);
  UseView(RcVc);
  CloseOnCancel;
  SetWRect(20,80,490,170);
  h = 120; v = 20; vs = 30; f = 100;
  EditFieldTL(h,v,-40,"Отсканируйте карту",M4Str,Normal,100,f2,false,0);
  EndWindow;
end;




/*
window ActDClass:13
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real fs,h,h2,h3,h4,v,vm,vs;
  string 255 label;
  WindowBegin("Деятельность",ActDClass,CGview,ActView);
    SetWRect(64,80,760,500);
    BrowseButtons(false);
    Sizeable(-1,-1,0,0);
    UseView(ActVc);
    ActiveFieldOnNew("Comment");    
    FormName(ActDocForm);
    v = 6; vs = 20; h = 100; h2 = 270; h3 = 420; h4 = 450; fs = 100;
    CommunicateButton;
    Tile(0,110,false,"",Comment);
    EditField(h,vm=6,-40,"Комментарий",Normal,Comment,false,0);
    EditField(h,v+=vs,80,"Вид",Normal,ActType,false,ActTypeSClass);//ActType2SClass
    EnterSkip(StartTime);
    EditField(h,v+=vs,80,"Язык",Normal,LangCode,false,LangSClass);
    EditField(h,v+=vs,80,"Приоритет",Normal,PrioLevel,false,0);
    EditField(h2,v=vm+vs,-40,"",Normal,ActTypeComment,false,0);
    EditField(h2,v+=vs,140,"Сотрудники",Normal,MainPersons,false,UserSClass);
    EditField(h4,v,-40,"Cc",Normal,CCPersons,false,UserSClass);
    EditField(h2,v+=vs,80,"Контролер",Normal,Supervisor,false,UserSClass);
    EditField(h4,v,60,"Результат",Normal,ActResult,false,ActTypeSClass);
    TileButton(1,"Время");
    TileButton(2,"Клиент");
    TileButton(3,"Текст");
    TileButton(4,"Под-задачи");
    TileButton(5,"Оповещение");
    TileButton(6,"Ресурсы");
    TileButton(7,"Обслуживание");
    TileButton(8,"Опред. пользователем");
    CheckBox(-150,v,0,"Личное",PrivateFlag);
    CheckBox(-80,v,0,"Выполнено",OKFlag);
    Tile(1,90,false,"1",StartTime);
    h = 100; h2 = 270;
    EditField(h,v=6,60,"Время начала",Normal,StartTime,false,PasteCurTime);
    EditField(h,v+=vs,60,"Время оконч.",Normal,EndTime,false,PasteCurTime);
    EditField(h,v+=vs,60,"Итого времени",Normal,CostTime,false,PasteCurTime);
//    EditField(h,v+=vs,60,"New Dur.",Normal,TestDuration,false,0);
    EditField(h2,v=6 ,80,"Дата начала",Normal,TransDate,false,PasteCurDate);
    EditField(h2,v+=vs,80,"Дата оконч.",Normal,EndDate,false,PasteCurDate);
    EditField(h2,v+=vs,80,"Класс времени",Normal,TimeClass,false,TimeClassSClass);
    v = 18;
    ButtonFrame(h3=h2+120,vm=v,120,4,"Тип задач");
    RadioButton(h3,v,kTodoFlagCalendar,0,"Календарь",TodoFlag);
    RadioButton(h3,v+=16,kTodoFlagTodo,0,"План",TodoFlag);
    RadioButton(h3,v+=16,kTodoFlagTimedTodo,0,"План на время",TodoFlag);
    RadioButton(h3,v+=16,kTodoFlagWorkHours,0,"Рабочие часы",TodoFlag);
  //  RadioButton(h3,v+=16,kTodoFlagBanner,0,"Banner",TodoFlag); // When will we do something behind this radio button?
    h3 = h3+160;
    ButtonFrame(h3,v=vm,120,3,"Календарь");
    RadioButton(h3,v,kCalTimeFlagTime,0,"Время",CalTimeFlag);
    RadioButton(h3,v+=16,kCalTimeFlagProfile,0,"Прогноз",CalTimeFlag);
    RadioButton(h3,v+=16,kCalTimeFlagNoshow,0,"Не показывать",CalTimeFlag);
    EnterSkip(PRCode);
    Tile(2,70,false,"2",PRCode);
    EditField(h,vm=(v=6),80,"Проект",Normal,PRCode,false,PRSClass);
    EditField(h,v+=vs,80,"Клиент",Normal,CUCode,false,AllCUSClass);
    EditField(h,v+=vs,80,"Товар сч/ф",Normal,ItemCode,false,INSClass);
    EnterSkip(Math);
    EditField(h2,v=vm,-40,"Наименование",Normal,CUName,false,0);
    EditField(h2,v+=vs,-40,"Телефон",Normal,Phone,false,0);
    EditField(h2,v+=vs,-40,"Контакт",Normal,Contact,false,ContactSClass);
    Tile(3,100,true,"3",Math);
    MatrixBegin(4,v=24,-32,-30,ActRowType,199);
    MatCol(1,24,"Код",0,TextCode,false,TextTypeSClass);
    MatCol(1,84,"Текст",0,Text,false,0);
    //MatColMLT(1,84,"Text",0,Text,false,0);
    EndMatrix;
    HalPushButton(-140,-30,-60,-10,"ActDEndActivity","Завершить");
    Tile(4,200,true,"4",Comment);
    v = 10;
    HalPushButton(h,v,h+100,v+20,"ActDClassCreateSubTask","НовПодзадача");
    v = v + vs;
    RecordList2(10,v+=vs,-30,-39,"ActVc");
    RlColKey(4,4,"Задача",Comment,false,ActComment);
    RlColKey(-50,-50,"Все",Comment,false,Comment);
    Tile(5,140,false,"5",-);
    h3 = 40;
    ButtonFrame(h3,v=18,130,4,"Тип оповещения");
    RadioButton(h3,v,0,0,"Нет",AlarmType);
    RadioButton(h3,v+=16,1,0,"Сообщение",AlarmType);
    RadioButton(h3,v+=16,2,0,"SMS",AlarmType);
    RadioButton(h3,v+=16,3,0,"E-mail",AlarmType);
    ButtonFrame(h3+=160,v=18,130,7,"Оповещение");
    RadioButton(h3,v,0,0,"Минут до",AlarmWhen);
    RadioButton(h3,v+=16,1,0,"Часов до",AlarmWhen);
    RadioButton(h3,v+=16,2,0,"Дней до",AlarmWhen);
    RadioButton(h3,v+=16,3,0,"Минут после",AlarmWhen);
    RadioButton(h3,v+=16,4,0,"Часов после",AlarmWhen);
    RadioButton(h3,v+=16,5,0,"Дней после",AlarmWhen);
    EditField(h3+75,v+=17,50,"Единиц до",Normal,AlarmUnits,false,0);
    ButtonFrame(h4=h3+160,v=18,130,4,"Символ");
    RadioButton(h4,v,1,0,"Звонок",SymbNr);
    RadioButton(h4,v+=16,2,0,"Встреча",SymbNr);
    RadioButton(h4,v+=16,3,0,"Офис",SymbNr);
    RadioButton(h4,v+=16,0,0,"Другое",SymbNr);
    Tile(6,30,false,"6",Resources);
    EditField(h,v=6,300,"Ресурсы",Normal,Resources,false,ResSClass);
    EditField(h+400,v, fs,"Актив",Normal,InventoryNr,false,AT2UnitSClass);
    Tile(7,70,false,"7",SVOSerNr);
    EditField(h,v=6, fs,"Серийный №",Normal,SerialNr,false,SVOSerSClass);
    EditField(h+200,v,fs,"Товар",Normal,ArtCode,false,INSClass);
    EditField(h+400,v, fs,"Опер. пр-ва",Normal,ProdOpSerNr,false,0);
    EditField(h,v+=vs, fs,"Заказ на обсл.",Normal,SVOSerNr,false,SVOSClass);
    EditField(h+200,v,fs,"Товар сч/ф",Normal,ItemCode,false,INSClass);
    EditField(h+400,v, fs,"Производство",Normal,ProdSerNr,false,0);
    EditField(h,v+=vs, fs,"С наимен. файла",ViewOnly,FromFileName,false,0);
    EditField(h+200,v, fs,"С №",ViewOnly,FromSerNr,false,0);
    EditField(h+400,v, fs,"Соб.инд.туриз.",ViewOnly,RsrtEventSerNr,false,0);
    Tile(8,240,false,"8",-);
    fs = 80;
    h = 180;
    label = UserDefined("ActVc","UserStr1");
    if (nonblank(label)) then begin
      EditField(h,v=6 ,-20,label,Normal,UserStr1,false,0);
    end;
    label = UserDefined("ActVc","UserStr2");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,-20,label,Normal,UserStr2,false,0);
    end;
    label = UserDefined("ActVc","UserStr3");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,-20,label,Normal,UserStr3,false,0);
    end;
    label = UserDefined("ActVc","UserStr4");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,-20,label,Normal,UserStr4,false,0);
    end;
    label = UserDefined("ActVc","UserStr5");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,-20,label,Normal,UserStr5,false,0);
    end;
    label = UserDefined("ActVc","UserVal1");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,50,label,Normal,UserVal1,true,0);
    end;
    label = UserDefined("ActVc","UserVal2");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,50,label,Normal,UserVal2,true,0);
    end;
    label = UserDefined("ActVc","UserVal3");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,50,label,Normal,UserVal3,true,0);
    end;
    label = UserDefined("ActVc","UserDate1");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,80,label,Normal,UserDate1,true,PasteCurDate);
    end;
    label = UserDefined("ActVc","UserDate2");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,80,label,Normal,UserDate2,true,PasteCurDate);
    end;
    label = UserDefined("ActVc","UserDate3");
    if (nonblank(label)) then begin
      EditField(h,v+=vs,80,label,Normal,UserDate3,true,PasteCurDate);
    end;
    
    if (UserCanAction("EnabINF",false)) then begin
      SpecialMenu("Информация о ключе",' ',5,"EnablerInfoDsm");
    end;
    if (UserCanReport("CustPSRn","",true)) then begin 
    SpecialMenu("Статус клиента",'e',6,"CUStatusActDsm");
    end;
    SpecialMenu("Послать приглашение",' ',7,"SendInvitationDsm");
    SpecialMenu("Открыть запись операции",'t',0,"OpenTRFromAct");
    SpecialMenu("Открыть основную задачу",'o',4,"OpenMainTaskActDsm");    
    if (GuiType==kGuiCocoa) then begin
      SpecialMenu("Копировать в iCal",' ',7,"CopyToLocalCalendarDsm");
    end;    
    if (GuiType==kGuiiPhone) then begin
      SpecialMenu("Sign",' ',8,"SignActDsm"); //!!TRANSLATE
    end;
    SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);  
    SpecialMenu("Создать e-mail",'m',1,"MailFromActDsm");
    SpecialMenu("Создать письмо",'l',2,"LetFromActDsm");
    SpecialMenu("Создать счет",'G',3,"ORFromActDsm");
    SpecialMenu("Создать коммерческое предложение",' ',4,"QTFromActDsm");
    SpecialMenu("Создать путевой лист",' ',8,"WayListFromActDsm"); 
    
    EndWindow;
end;*/

window PLDefDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,l,v;
  WindowBegin("Прейскурант",PLDefDClass,CGview,-);
  UseView(PLDefVc);
  SetWRect(20,80,650,570);
  EditField(h=110,v=10,50,"Код",St_i,Code,false,0);
  EditField(250,v,-40,"Комментарий",Normal,Comment,false,0);
  if (IsEnterprise) then begin
  EditField(h,v+=20,80,"Период",Normal,StartDate,false,PasteCurDate);
  EditField(250,v,80,"-",Normal,EndDate,false,PasteCurDate);
  EditField(400,v,80,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
  EditField(h,v+=20,80,"Время",Normal,StartTime,false,PasteCurTime);
  EditField(250,v,80,"-",Normal,EndTime,false,PasteCurTime);
  EditField(h,v+=20,80,"Заменить",Normal,PLReplCode,false,PLDefSClass);
  EditField(h,v+=20,80,"Поставщик обрат. закупки",Normal,BBVECode,false,VESClass);
  EditField(h,v+=20,80,"Счет начисл. обрат. закупки",Normal,BBVarAcc,false,AccSClass);
  end else begin
    if (HasMultiCurrency) then begin
      EditField(h,v+=20,80,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); 
    end;
  end;
//  EditField(230,v,80,"Код НДС",Normal,VATCode,false,VATCodeSClass);
  if (IsEnterprise or HasAdvancedPricing) then begin
  h = 7; v=v+19; l = 35;
  MatrixBegin(h,v+=22,h+420,-11,-,2000);
//  StaticText(h=45,v-5,"Код",false);
  MatCol(1,h=34,"Тип строки",0,CodeType,false,SetSClass);
  MatColTL(1,h+=84,"Товар/Группа товара",0,-1,Normal,60,ItemCode,false,ITSClass);
  MatCol(1,h+=84,"Классификация",60,DispGroups,false,DISClass);
  MatCol(1,-100,"Формула цены",5,Formula,false,PFormSClass);
  MatCol(1,-30,"НДС",5,VATCode,false,VATCodeSClass);
  EndMatrix;
  ButtonFrame(h=460,v=83,150,3,"НДС");
  end else begin
    ButtonFrame(h=350,v+=40,150,3,"НДС");
  end;
  RadioButton(h,v,0,0,"не включать",InclVAT);
  if (IsEnterprise) then begin
  RadioButton(h,v+=16,1,0,"Включать, вкл. внешний налог",InclVAT);
  end;
  RadioButton(h,v+=16,2,0,"Включать",InclVAT);  
  EndFrame;
  if (HasAdvancedPricing) then begin
  ButtonFrame(h=460,v+=40,150,3,"Тип");
  RadioButton(h,v,0,0,"со скидками",DepPrice);
  RadioButton(h,v+=16,1,0,"со скидками от кол-ва",DepPrice);
    if (IsEnterprise) then begin
    RadioButton(h,v+=16,2,0,"Обратная закупка",DepPrice);
  end;
  EndFrame;
  end;
  SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  EndWindow;
end;





window OrderClassDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vm,vs;
  WindowBegin("Вид счёта",OrderClassDClass,CGview,OrderClassView);
  SetWRect(74,80,550,300);
//  Sizeable(-1,-1,0,0);
  UseView(OrderClassVc);
  vs=20;
  if (HasTREO) then begin
    Tile(0,90,false,"1",Code);
  end else begin
    Tile(0,70,false,"1",Code);   // From dict
  end;
  EditField(h=80,v=6, 100, "Код",Normal,Code,false,0);
	if(currentcompany==28)then begin EditField(h=320,v=6, -30, "Код последнего счета",Normal,IDLastORNr,false,0); end;
  EditField(h=80,v+=20,-30,"Комментарий",Normal,Comment,false,0);
  if (HasTREO) then begin
    CheckBox(h,v+=20,0,"TREO",TREOFlag);
  end;
  TileButton(1,"Деятельность");
  TileButton(2,"Счета");
  Tile(1,90,false,"1",OrderActCode);
  ButtonFrame(h,vm=(v=16),205,3,"Деят. из счета:");
  RadioButton(h,v,0,0,"не создавать деят-ть",OrderAct);
  RadioButton(h,v+=16,1,0,"продавец из счета",OrderAct);
  RadioButton(h,v+=16,2,0,"продавец:",OrderAct);
  if (GuiType==kGuiiPhone) then begin
    EditField(h2=h+120,v+1, 82,"",Normal,OrderActUser,false,UserSClass);
  end else begin
    EditField(h2=h+120,v+1, 82,"",Normal,OrderActUser,false,UserSClass);
  end;
  EditField(h2,v+=vs+5, 82,"Вид деят.",Normal,OrderActCode,false,ActTypeSClass);
  Tile(2,70,false,"2",DownpayInvDebtorsAcc);
  ButtonFrame(h,vm=(v=20),210,2,"Счёт-фактура на аванс");
  EditField(h2,v=v-2, 82,"Счёт дебиторов",Normal,DownpayInvDebtorsAcc,false,AccSClass);
  EditField(h2,v+=20-2, 82,"Счёт депозита",Normal,DownpayInvDepositAcc,false,AccSClass);
  EndWindow;
end;




window IntORDClass:1		//	Edit by Victor 19.11.14
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,t,v,vm,vs;
  WindowBegin("Внутренний заказ",IntORDClass,CGview,-);
  SetWRect(20,80,615,350);
  Sizeable(-1,-1,0,0);
  UseView(IntORVc);
  FormName(IntORForm);
  ActiveFieldOnNew("OurUser");      
  h = 100; h2 = 230; h3 = 450; vs = 20;
  Tile(0,50+44,false,"",OurUser);
  EditField(75,vm=(v=6),95,"Номер",Normal,SerNr,false,TSerSClass);
  EditField(75,v+=20,95,"Сотрудник",ViewOnly,OurUser,false,UserSClass);
  EditField(75,v+=20,95,"Поставщик",Normal,VECode,false,VESClass);// Edit ************************** Tuesday, 16 December 2014 13:54:39
  EditField(75+250,v,95,"Заказ поставщику",Normal,PORdSerNr,false,0);// Edit ************************** Tuesday, 16 December 2014 13:54:39
  
  EnterSkip(PlanShip);
  EditField(h2=250,v=vm,-40,"ФИО",Normal,Name,false,0);
  EditField(h2,vm=(v+=20),95,"Отдел",Normal,Department,false,DepSClass);
  CheckBox(h2+120,vm,0,"Закрыт",Closed);
  TileButton(1,"Условия");
  TileButton(2,"Товары");
  TileButton(3,"Адрес отгрузки");
  TileButton(4,"Комментарий");
  Tile(1,70,false,"1",PlanShip);
  vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = 600;
  EditField(h1,v=6,82,"Дата",Normal,TransDate,false,PasteCurDate);
  EditField(h1,v+=vs,82,"Запл. отгр.",Normal,PlanShip,false,PasteCurDate);
  EditField(h1,v+=vs,82,"Со склада",Normal,FrLocation,false,LocationSClass);
  EditField(h2,v=6,82,"Усл. отгр.",Normal,ShipDeal,false,ShipDealSClass);
  EditField(h2,v+=vs,82,"Способ отгр.",Normal,ShipMode,false,DMSClass);
  EditField(h2,v+=vs,82,"На склад",Normal,Location,false,LocationSClass);
  EditField(h3,v=6,82,"Класс внутр. заказ.",Normal,IntORClass,false,IntORClassSClass);
  EditField(h3,v+=vs,82,"Язык",Normal,LangCode,false,LangSClass);
  EditField(h3,v+=vs,135,"Ссылка",Normal,Reference,false,0);
//  EditField(h,v+=vs,280,"Авторизировано",ViewOnly,OKPersons,false,UserSClass);
  EnterSkip(Math2);
  Tile(2,120,true,"2",Math2);
  EditField(110,-21,70,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);	// new field	Edit by Victor 19.11.14
  EditField(-144,-21,90,"ИТОГО",ViewOnly,Total,true,0);
  v = 24;
  MatrixBegin(3,v,-50,-27,-,1000);
  MatOverStrike(ovst);
  Flip(0);
  MatCol(1,24,"Товар",0,ArtCode,false,INSClass);
  
  EnterSkip(ArtCode);
  Flip(1);
  if (HasVarieties) then begin	//	Edit by Victor 19.11.14
  	MatCol(1,94,"Кол-во",0,Quant,true,MATVARINSClass);
  end else begin
    MatCol(1,94,"Кол-во",0,Quant,true,0); 
  end;	// end edit
  MatCol(1,144,"Обработ.",0,Shipd1,true,0);
  MatCol(1,194,"Отгр.",0,Shipd2,true,0);
  MatCol(1,244,"Описание",0,Spec,false,0);
  MatCol(1,-180,"Стоимость",0,Price,true,0);
  MatCol(1,-90,"Итого ст-ть",0,Sum,true,0);
  Flip(2);
  MatCol(t=1,144,"Описание",0,Spec,false,0);
  MatCol(t,-400,"Альтернативный код",0,AlternativeCode,false,0);	// new field	Edit by Victor 19.11.14
  MatCol(t,-304,"Сер. №",0,SerialNr,false,SerialNrSClass);
  MatCol(t,-204,"Счет стоим.",0,CostAcc,false,AccSClass);
  MatCol(t,-124,"Объекты",0,Objects,false,ObjSClass);
  MatCol(1,-70,"Структура",0,Recepy,false,RecSClass);
  Flip(3);
  MatCol(t=1,144,"Опис.",0,Spec,false,0);
  MatCol(1,-280,"Испол.",0,Shipd1,false,0);
  MatCol(1,-210,"Достав.",0,Shipd2,false,0);
  MatCol(t,-140,"Отправ.",0,Sent,true,0);
  MatCol(t,-70,"Заказ/П.",0,POOrd,true,0);
  Flip(4);//	Edit by Victor 19.11.14
  MatCol(1,144,"Наименование",0,Spec,false,0);//	Edit by Victor 19.11.14
  /*if (HasVarieties) then begin //Edit***************************Sasha2,16:37 14.01.2015 {
		MatCol(1,-110,"Кол-во",0,Quant,true,MATVARINSClass);
	end else begin
		MatCol(1,-110,"Кол-во",0,Quant,true,0); 
	end;*/ //Edit***************************Sasha2,16:38 14.01.2015 }
	if (currentcompany==1) then begin //Edit***************************Sasha2,16:38 14.01.2015 {
    if (HasVarieties) then begin
  		MatCol(1,-110,"Кол-во",0,Quant,true,MATVARINSClass);
  	end else begin
  		MatCol(1,-110,"Кол-во",0,Quant,true,0); 
  	end;
	end else begin
    if (HasVarieties) then begin
  		MatCol(1,-310,"Кол-во",0,Quant,true,MATVARINSClass);
  	end else begin
  		MatCol(1,-310,"Кол-во",0,Quant,true,0); 
  	end;
	  MatCol(1,-260,"EAN Код",0,EAN13Code,false,0);// Edit ************************** Tuesday, 16 December 2014 13:56:02
    MatCol(1,-170,"Модель",0,xClassification,false,DISClass);// Edit ************************** Tuesday, 16 December 2014 13:56:03
	end; //Edit***************************Sasha2,16:38 14.01.2015 }
	MatCol(1,-60,"Цена",0,Price,true,0);
	if (currentcompany==8) then begin
	 Flip(5);	//	Edit by Victor 19.11.14
	 MatCol(1,194,"Наименование",0,Spec,false,0);
	 MatCol(1,-160,"Размер",0,Size,false,0);
	 MatCol(1,-100,"Цвет",0,Colour,false,0);//	end Edit by Victor 19.11.14 // Edit ************************** Tuesday, 16 December 2014 13:56:49
  end;
  DeleteRowTest;
  EndMatrix;
  vs = 20;
  v = 18; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,3,"C");
  v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,4,"D");
  if (currentcompany==8) then begin //Edit***************************Sasha2,17:53 14.01.2015
    v=v+vs;  VTab(-35,v,-16,v+vs,ToolFlip,5,"E");
  end;
  Tile(3,170,false,"3",ShipAddr0);
  EditField(h,v=6,-20,"Отгрузка",Normal,ShipAddr0,false,0);
  EditField(h,v+=vs,-20,"Адрес",Normal,ShipAddr1,false,0);
  EditField(h,v+=vs,-20,"",Normal,ShipAddr2,false,0);
  EditField(h,v+=vs,-20,"",Normal,ShipAddr3,false,0);
  EditField(h,v+=vs,-20,"",Normal,DelAddr3,false,0);
  EditField(h,v+=vs,-20,"",Normal,DelAddr4,false,0);
  EditField(h2=-170,v+=vs,150,"Телефон",Normal,Phone,false,0);
  EditField(h2,v+=vs,150,"Факс",Normal,Fax,false,0);
  Tile(4,120,false,"4",Math); vs = 20;
  StaticText(h-6,v=20,"Комментарии",true);
  TextField(h,v-5,-170,-10,Math,0);
  ButtonFrame(h3=-150,v=16,123,6,"Статус утверждения");
  RadioButton(h3,v,kAcceptanceStateNotRequired,0,"не обязательно",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateNotStarted,0,"не начато",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateNotRequested,0,"не запрошено",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStatePending,0,"в ожидании",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateApproved,0,"утверждено",AcceptanceStatus);
  RadioButton(h3,v+=16,kAcceptanceStateRejected,0,"отклонено",AcceptanceStatus);  
//  SpecialMenu("Авторизировать",' ',2,"AuthorizeIntORDsm");changed to below
  SpecialMenu("Отправить для утверждения",' ',6,"IntORSendforAcceptanceIntORDsm");
  SpecialMenu("Отменить запрос на утверждение",' ',2,"CancelApprovalRequestDsm"); 
  SpecialMenu("Статус внутреннего заказа",'r',5,"IntORStatIntORDsm");
  SpecialMenu("Поиск товара",'',1,"ItemSearchDsm");
  SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  SpecialMenu("Резервирования",' ',15,"IntORReservIntORDsm");
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);  
  SpecialMenu("Перемещение товаров",' ',0,"StockMovFromIntORDsm");
  SpecialMenu("Списание со склада",' ',1,"SDFromIntORDsm");
  SpecialMenu("Заказ поставщику",' ',2,"POFromIntORDsm");
  
  EndWindow;
end;

window RetPUDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,v,vm,vs;
  Integer tilenr,f,flipnr,mode;
  
  WindowBegin("Возврат товаров поставщику",RetPUDClass,CGview,-);
  SetWRect(20,80,750,460);
  Sizeable(-1,-1,0,0);
  UseView(RetPUVc);
  FormName(RetPurchaseForm);
  Tile(0,74,false,"",SerNr);
  v = 6; vs = 20;
  
  if (CurrentUser=="SA" or CurrentUser=="SA1"  or UserCanAction("DoNonLinkedRetPU",false)) then begin //Edit***************************Sasha2,17:40 26.07.2016
    mode = Normal;
  end else begin
    mode = ViewOnly;
  end;
  
  EditField(75,vm=(v=6),95,"Но.",Normal,SerNr,false,TSerSClass);
	if(left(CurrentUser,2)=="SA" or UserCanAction("DoNonLinkedRetPU",false))then begin
		EditField(75,v+=20,95,"Поставщик",Normal,VECode,false,VESClass);
	end else begin
		EditField(75,v+=20,95,"Поставщик",ViewOnly,VECode,false,0);
	end;
  EditField(h=255,v=vm,-40,"Наим.",ViewOnly,VEName,false,0);
  EditField(h,vm=(v+=20),135,"Офиц. номер",Normal,OfficialSerNr,false,LegalInvNrSClass); 
  v=v+20;
  CheckBox(h4=-100,v=vm,0,"OK",OKFlag);
  if (CurrentCompany==25) then begin
    CheckBox(h4=-100,v+=20,0,"Отправить Coin",SentCoin); //Edit***************************Sasha2,14:48 26.07.2016 
  end;
  tilenr = 1;
  TileButton(tilenr,"Условия"); tilenr = tilenr + 1; 
  TileButton(tilenr,"Товары"); tilenr = tilenr + 1; 
  if (HasMultiCurrency) then begin
    TileButton(tilenr,"Валюта"); tilenr = tilenr + 1; 
  end;
  TileButton(tilenr,"Адрес"); tilenr = tilenr + 1; 
  TileButton(tilenr,"Фрахт"); tilenr = tilenr + 1; 
  TileButton(tilenr,"Коммент."); tilenr = tilenr + 1; 
  if (CurrentCompany==25) then begin
    TileButton(tilenr,"Coin детали"); tilenr = tilenr + 1; //Edit***************************Sasha2,15:42 26.07.2016
  end;
//  TileButton(tilenr,"Extra Costs");
  tilenr = 1;
  Tile(tilenr,70,false,tilenr,TransDate); tilenr = tilenr + 1;
  vs = 20; h1 = 110; h2 = 300; h3 = 530; h4 = -100;
  EditField(h1,vm=(v=6),82,"Дата",Normal,TransDate,false,PasteCurDate);
  EditField(h1,v+=vs,82,"Склад",Normal,Location,false,LocationSClass);
  if (IsEnterprise) then begin
  EditField(h1,v+=vs,82,"Причина",Normal,Reason,false,StandProblemsSClass);  
  end;
  if (UserCanAction("ViewMoneyInf",true))then begin  EditField(h2,v=vm,125, "Но. счета поставщ.",ViewOnly,PONr,false,0); end;
  EditField(h2,v+=vs,125,"Маршрут",Normal,Sorting,false,DelRouteSClass); 
	if (Currentuser=="SA" or Currentuser=="SA1") then begin
		EditField(h2,v+=vs,125,"Объекты",Normal,Objects,false,ObjSClass); 
	end;
  ButtonFrame(h3=h3-70,v=16,140,2,"Уменьшить количество");
  RadioButton(h3,v,0,0,"Только полученные",Type);
  RadioButton(h3,v+=16,1,0,"Заказанные и полученные",Type);
  CheckBox(h4,v=vm,0,"Цена вкл. НДС",InclVAT);
//  CheckBox(h4,v+=vs,0,"Update Stock",UpdStockFlag);
  EnterSkip(Math);
  Tile(tilenr,79,true,tilenr,Math); tilenr = tilenr + 1;
  v = 24;
  MatrixBegin(4,v,-50,-22,-,1000);
  Flip(0);
  //if (HasJewelleryInterface) then begin		//Edit----------------------Dima  17.07.2015
 //  MatCol(1,24,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
  //  EnterSkip(Quant);
  //  MatCol(1,130,"Товар",0,ArtCode,false,INSClass); 
  //end else begin
  MatCol(1,24,"Товар",0,ArtCode,false,INSClass);
  MatCol(1,120,"Кол-во",0,Quant,true,0);
  //end;
  flipnr = 1;
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,174,"Наим.",0,Spec,false,0);
  if (HasJewelleryInterface) then begin
    MatCol(1,-280,"Склад",0,Location,false,0); 
  end;
  MatCol(1,-220,"Товар поставщика",0,VEItemCode,false,0);
  MatCol(1,-80,"Коэфф-нт",0,Coefficient,true,0);
  if (HasModNL or HasObjects) then begin
    Flip(flipnr); flipnr = flipnr + 1;
    MatCol(1,174,"Описание",0,Spec,false,0);
    MatCol(1,-320,"Штрих-код",0,BarCode,false,0); //Edit***************************Sasha2,17:44 26.07.2016 
    if (HasModNL) then begin
      MatCol(1,-190,"Счет стоимости",0,CostAcc,false,0); 
      MatCol(1,-130,"Счет покупки",0,CredAcc,false,0); 
    end;
    if (HasObjects) then begin
      MatCol(1,-60,"Объекты",0,Objects,false,ObjSClass); 
    end;
  end;
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,174,"Наим.",0,Spec,false,0);
  MatCol(1,-360,"Склад",0,Location,false,0);
//  MatColTL(1,-310,"Location",0,M4UStr,Normal,0,Location,false,0);
  if (UserCanAction("ViewMoneyInf",true))then begin MatColTL(1,-300,"Цена затрат сч/ф",0,-1,ViewOnly,-1,PUCostPrice,false,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatColTL(1,-220,"Изм. цены",0,-1,ViewOnly,-1,VarianceAmount,false,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-160,"FIFO",0,FIFO,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-90,"FIFO по строке",0,FIFORowVal,true,0); end;
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,174,"Наим.",0,Spec,false,0);
  if (IsEnterprise) then begin
  MatCol(1,-300,"Место",0,PosCode,false,UsedPosSClass);
  end;
  if (HasSerialNumbers) then begin
  MatCol(1,-235,"Серийный №",0,SerialNr,false,SerialNrSClass);
  end;
  MatCol(1,-135,"Шир.",0,UnitXval,true,0);
  MatCol(1,-90,"Выс.",0,UnitYval,true,0);
  MatCol(1,-45,"Глуб.",0,UnitZval,true,0);
  Flip(flipnr); flipnr = flipnr + 1;
  MatCol(1,164,"Наим.",0,Spec,false,0);
  MatCol(1,-260,"№ поступ.",0,PUNr,false,PUSClass);
  MatCol(1,-190,"Строка поступ.",0,PURow,false,0);
  MatCol(1,-130,"№ зак. пост.",0,PONr,false,POSClass);
  MatCol(1,-60,"Строка зак. пост.",0,OrdRow,false,0);
  /*  
  Flip(5);
  MatCol(1,164,"Description",0,Spec,false,0);
  MatCol(1,-420,"Fr. Cost",0,ShipCost,true,0);
  MatCol(1,-360,"Customs",0,CustomsCost,true,0);
  label = UserDefined("AccBlock","PUCost1");
  if (blank(label)) then begin label = "Cost 1";end;
  MatCol(1,-300,label,0,RowCost1,false,0);
  label = UserDefined("AccBlock","PUCost2");
  if (blank(label)) then begin label = "Cost 2";end;
  MatCol(1,-240,label,0,RowCost2,false,0);
  label = UserDefined("AccBlock","PUCost3");
  if (blank(label)) then begin label = "Cost 3";end;
  MatCol(1,-180,label,0,RowCost3,false,0);
  label = UserDefined("AccBlock","PUCost4");
  if (blank(label)) then begin label = "Cost 4";end;
  MatCol(1,-120,label,0,RowCost4,false,0);
  label = UserDefined("AccBlock","PUCost5");
  if (blank(label)) then begin label = "Cost 5";end;
  MatCol(1,-60,label,0,RowCost5,false,0);
*/  
  DeleteRowTest;
  InsertRowTest;
  EndMatrix;
  vs = 20;
  v = 18;/* 28 */ 
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
      v = v + vs;
    end;
  end;
  
//  CheckBox(20,-20,0,"OK",OKFlag);
//  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,4,"D");
  EditField(133,-20,60,"Кол-во итого",ViewOnly,SumQuant,true,0);
//  EditField(-450,-20,70,"Фрахт",Normal,ShipCost,true,0);
//  EditField(-300,-20,70,"Таможни",Normal,CustomsCost,true,0);
  if (UserCanAction("ViewMoneyInf",true))then begin  EditField(-130,-20,70,"ИТОГО",ViewOnly,SumCostPrice,true,0); end;
  if (HasMultiCurrency or HasBase2) then begin
    Tile(tilenr,70,false,tilenr,FrRate); tilenr = tilenr + 1;
    h1 = 110; vs = 20;
    if (HasBase2) then begin
      h1 = h1 + 20;
    end;
    if (UserCanAction("ViewMoneyInf",true))then begin  EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass); end;
    if (HasMultiCurrency) then begin
  EditField(h2,v,50,"Курс",Normal,FrRate,true,0);
  EditField(h2+65,v,50,":",Normal,ToRateB1,true,0);
      if (HasBase2) then begin
        StaticText(h2+125,v+14,"Баз. валюта 1",false); 
  if (UserCanAction("ViewMoneyInf",true))then begin  EditField(h1,v+=vs,50,"Баз. валюта 1",Normal,BaseRate1,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h2+65,v,50,":",Normal,ToRateB2,true,0); end;
        StaticText(h2+125,v+14,"Базовая валюта 2",false);
  if (UserCanAction("ViewMoneyInf",true))then begin EditField(h1,v+=vs,50,"Базовая валюта 2",Normal,BaseRate2,true,0); end;
      end else begin
        StaticText(h2+125,v+14,"Баз. валюта",false); 
      end;
    end else begin
    if (UserCanAction("ViewMoneyInf",true))then begin  EditField(h1,v+=vs,50,"Баз. валюта 1",Normal,BaseRate1,true,0); end;
    if (UserCanAction("ViewMoneyInf",true))then begin  EditField(h1,v+=vs,50,"Баз. валюта 2",Normal,BaseRate2,true,0); end;
    end;
  end;
  Tile(tilenr,130,false,tilenr,DelAddr0); tilenr = tilenr + 1;
  EditField(h1,v=6,80,"Код адреса",Normal,DelAddrCode,false,DelAddr3SClass);
  EditField(h1,v+=vs,-20,"Отгрузка",Normal,DelAddr0,false,0);
  EditField(h1,v+=vs,-20,"Адрес",Normal,DelAddr1,false,0);
  EditField(h1,v+=vs,-20,"",Normal,DelAddr2,false,0);
  EditField(h1,v+=vs,-20,"",Normal,DelAddr3,false,0);
  EditField(h1,v+=vs,-20,"",Normal,DelAddr4,false,0);
  Tile(tilenr,130,false,tilenr,FreightCode); tilenr = tilenr + 1;
  EditField(h1,v=6,80,"Трансп. компания",Normal,FreightCode,false,FreightCompanySClass);
  EditField(h1,v+=vs,-20,"Наим.",Normal,FreightCompany,false,0);
  EditField(h1,v+=vs,-20,"ИНН",Normal,FreightCompanyRegNr,false,0);
  EditField(h1,v+=vs,-20,"Инф. о машине",Normal,TruckInfo,false,0);
  EditField(h1,v+=vs,-20,"Водитель",Normal,Driver,false,0);
  EditField(h1,v+=vs,-20,"CMR",Normal,CMRText,false,0); // International transporting number
  Tile(tilenr,30,false,tilenr,Comment); tilenr = tilenr + 1;
  EditField(h1,v=6,-20,"Комментарий",Normal,Comment,false,0);
  if (CurrentCompany==25) then begin //Edit***************************Sasha2,15:49 26.07.2016
    Tile(tilenr,30,false,tilenr,TransBillCoin); tilenr = tilenr + 1;
    EditField(h1,v=6,90,"PackList",Normal,TransBillCoin,false,TransportBillSClass);
    EditFieldTL(h1,v+=vs,90,"Package EAN num",M4Str,mode,0,PackageEANNum,false,0);
    EditFieldTL(h1,v+=vs,90,"Дата выгрузки",M4Date,mode,0,SentDateCoin,false,0);
    EditFieldTL(h1,v+=vs,160,"Файл выгрузки",M4Str,mode,30,FileNameCoin,false,0);
  end;
/*  
  Tile(7,70,false,"7",Cost1);
  vs = 20;
  label = UserDefined("AccBlock","PUCost1");
  if (blank(label)) then begin label = "Extra Cost 1";end;
  EditField(h=110,v=6,70,label,Normal,Cost1,false,0);
  label = UserDefined("AccBlock","PUCost2");
  if (blank(label)) then begin label = "Extra Cost 2";end;
  EditField(h2=295,v,70,label,Normal,Cost2,false,0);
  label = UserDefined("AccBlock","PUCost3");
  if (blank(label)) then begin label = "Extra Cost 3";end;
  EditField(h,v+=vs,70,label,Normal,Cost3,false,0);
  label = UserDefined("AccBlock","PUCost4");
  if (blank(label)) then begin label = "Extra Cost 4";end;
  EditField(h2,v,70,label,Normal,Cost4,false,0);
  label = UserDefined("AccBlock","PUCost5");
  if (blank(label)) then begin label = "Extra Cost 5";end;
  EditField(h,v+=vs,70,label,Normal,Cost5,false,0);
*/  
  if (HasModNL) then begin
    SpecialMenu("Открыть запись операции",'t',1,"OpenTRFromRetPU");
  end;
  
  SpecialMenu("Создать список на удаление",' ',8,"CreateNoterToERptPUDsm");
  SpecialMenu("Удалить лишние строки согласно списку",' ',8,"DeleteItemsFromRetPUDsm");
  SpecialMenu("Сохранить строки согласно списку",' ',8,"SaveItemsFromRetPUDsm");
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);  
  SpecialMenu("Выписать кредитный счет",'F',0,"CredVIFromRetPUDsm"); 
  if (IsEnterprise) then begin
    SpecialMenu("Контроль качества",'u',10,"QualConFromRetPUDsm");
  end;
  
  EndWindow;
end;

window NPTSNewCUFieldsTCLass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;
  WindowBegin("Поля для создания нового клиента",NPTSNewCUFieldsTCLass,CGHbl,HBlRecType);
  SetBlid(NPTSNewCUFieldsBlock);
  SetWRect(20,80,420,400);
  h = 8; v = 20;
  MatrixBegin(h,v,-25,-1,-,99);
//  MatColTL(1,24,"Field Name",0,M4AppCode,Normal,-1,FieldName,false,SetSClass);

  MatCol(1,24,"Нименов. поля",0,FieldName,false,0);
  MatCol(1,104,"Тип",0,EditState,false,SetSClass);
  MatCol(1,200,"Комментарий",0,FieldComment,false,0);
  EndMatrix;
  EndWindow;
end;

window RetDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,v,vm,vs;
  WindowBegin("Возврат товаров от клиента",RetDClass,CGview,-);
  SetWRect(20,80,750,460);
  Sizeable(-1,-1,0,0);
  UseView(RetVc);
  ActiveFieldOnNew("CustCode");
  Tile(0,74,false,"",TransDate);
  v = 6; vs = 20;
  EditField(75,vm=(v=6),95,"Но.",Normal,SerNr,false,TSerSClass);
  EditField(75,v+=20,95,"Клиент",Normal,CustCode,false,CUSClass);
  EditField(h=275,v=vm,-40,"Наимен.",Normal,CustName,false,0);
  EditField(h,vm=(v+=20),135,"Оф. номер",Normal,OfficialSerNr,false,LegalInvNrSClass);
	EditField(h+210,v,82, "Employee",Normal,EMCode,false,UserSClass);
  CheckBox(h4=-100,v,0,"ОК",OKFlag);
  TileButton(1,"Условия");
  TileButton(2,"Товары");
  TileButton(3,"Валюта");
  TileButton(4,"Комментарий");
  Tile(1,90,false,"1",Location);
  vs = 20; h1 = 110; h2 = 290; h3 = 530; h4 = -110;
  EditField(h1,vm=(v=6),82,"Дата",Normal,TransDate,false,PasteCurDate);
  EditField(h1,v+=vs,82,"Склад",Normal,Location,false,LocationSClass);
  EditField(h1,v+=vs,82,"Основание",Normal,Reason,false,StandProblemsSClass);
  EditField(h1,v+=vs,82,"Объекты",Normal,Objects,false,ObjSClass);
	if (left(CurrentUser,2)=="SA") then begin
		EditField(h2,v=vm,135,"Номер счета",Normal,OrdNr,false,0);
		EditField(h2,v+=vs,135,"Номер отгр.",Normal,SHNr,false,0);
	end else begin
		EditField(h2,v=vm,135,"Номер счета",ViewOnly,OrdNr,false,0);
		EditField(h2,v+=vs,135,"Номер отгр.",ViewOnly,SHNr,false,0);
	end;
  EditField(h2,v+=vs,135,"№ зак. на обсл.",ViewOnly,SVONr,false,0);
  EditField(h2,v+=vs,135,"№ табл. работ",ViewOnly,WSNr,false,0);
  EnterSkip(Math);
  ButtonFrame(h3=h3-70,v=vm+10,140,2,"Уменьшить количество");
  RadioButton(h3,v,0,0,"Только отгруженные",Type);
  RadioButton(h3,v+=16,1,0,"Заказанные и отгруж.",Type);
  CheckBox(h4,v=vm+10,0,"Обновить склад",UpdStockFlag);
  CheckBox(h4,v+=16,0,"Цена вкл. НДС",InclVAT);
  CheckBox(h4,v+=16,0,"Без кр. сч/ф",Closed);
  Tile(2,79,true,"2",Math);
  v = 24;
  MatrixBegin(4,v,-50,-22,-,199);
  Flip(0);
	if(CurrentCompany==28) then begin
		MatCol(1,24,"Товар",0,ArtCode,false,INSClass);
	//  MatCol(1,84,"Var",0,VARList,true,VARSClass);
	//  MatCol(1,144,"Qty",0,Quant,true,0);
		MatCol(1,124,"Кол-во",0,Quant,true,0);
		Flip(1);
	//  MatCol(1,194,"Description",0,Spec,false,0);
		MatCol(1,174,"Наимен.",0,Spec,false,0);
	end else begin
		MatCol(1,24,"Товар",0,ArtCode,false,INSClass);
	//  MatCol(1,84,"Var",0,VARList,true,VARSClass);
	//  MatCol(1,144,"Qty",0,Quant,true,0);
		MatCol(1,94,"Кол-во",0,Quant,true,0);
		Flip(1);
	//  MatCol(1,194,"Description",0,Spec,false,0);
		MatCol(1,144,"Наимен.",0,Spec,false,0);
	end;
  MatCol(1,-228,"Цена",0,UPrice,true,0);
  MatCol(1,-160,"Накладные расходы",0,Extra,true,0);
  MatCol(1,-80,"Стоимость",0,CostPrice,true,0);
  Flip(2);
  MatCol(1,134,"Объекты",0,Objects,false,ObjSClass);
  MatCol(1,264,"Сч/ф",0,Invd,false,0);
  MatColTL(1,-300,"Склад",0,M4UStr,ViewOnly,0,Location,false,0);
  MatCol(1,-240,"Счет склада",0,CostAcc,false,AccSClass); // Edit ************************** Thursday, 22 January 2015 11:25:13
  //MatColTL(1,-240,"Счет склада",0,M4UStr,Normal,0,CostAcc,false,AccSClass);
  MatCol(1,-180,"Серийный №",0,SerialNr,false,SerialNrSClass);
  MatCol(1,-80,"Срок годности",0,BestBefore,false,0);
  Flip(3);
  MatCol(1,144,"Объекты",0,Objects,false,ObjSClass);
  MatCol(1,-450,"Стоим. обратной закупки",0,BBCostPrice,false,0);//##cc
  MatCol(1,-290,"Место",0,PosCode,false,FreePosSClass);//##cc
  MatColTL(1,-240,"Структура",0,M4Ustr,ViewOnly,0,Recepy,false,0);
  MatCol(1,-180,"Ширина",0,UnitXval,true,0);
  MatCol(1,-120,"Высота",0,UnitYval,true,0);
  MatCol(1,-60,"Глубина",0,UnitZval,true,0);
  Flip(4);
  MatCol(1,144,"Описание",0,Spec,false,0);
  MatCol(1,-225,"Тип товара",0,WSIVType,false,SetSClass);
  MatCol(1,-150,"Осн. серийн. номер",0,MotherNr,false,SerialNrSClass);
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
  vs = 20;
  v = 18; VTab(-35,v,-16,v+vs,ToolFlip,1,"A");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,2,"B");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,3,"C");
  v=v+ vs; VTab(-35,v,-16,v+vs,ToolFlip,4,"D");
  //  CheckBox(20,-20,0,"OK",OKFlag);
  EditField(110,-20,50,"Total Qty",ViewOnly,SumQuant,true,0);
  Tile(3,70,false,"3",FrRate);
  vs = 20;
  EditField(h1,v=6,50,"Валюта",Normal,CurncyCode,false,CurncyCodeSClass);
  EditField(h2,v,50,"Курс",Normal,FrRate,true,0);
  EditField(h2+65,v,50,":",Normal,ToRateB1,true,0);
  StaticText(h2+125,v+12,"Базовая валюта 1",false);
  EditField(h1,v+=vs,50,"Базовая валюта 1",Normal,BaseRate1,true,0);
  EditField(h2+65,v,50,":",Normal,ToRateB2,true,0);
  StaticText(h2+125,v+12,"Базовая валюта 2",false);
  EditField(h1,v+=vs,50,"Базовая валюта 2",Normal,BaseRate2,true,0);
  Tile(4,30,false,"4",Comment);
  EditField(h1,v=6,-20,"Комментарий",Normal,Comment,false,0);
  SpecialMenu("Поиск товара",'',1,"ItemSearchDsm");
  SpecialMenu("Поиск в текущей таблице",'f',1,"TableSearchDsm");
  SpecialMenu("Открыть запись операции",'t',0,"OpenTRFromRet");
  
  SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);  
  SpecialMenu("Выписать кредитный счет",'F',1,"CreditIVFromRetsm");
  SpecialMenu("Контроль качества",'u',10,"QualConFromRetDsm");
  
  EndWindow;
end;

window PointsHistLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("История баллов",PointsHistLClass,CGmlist,-);
  SetWRect(64,80,549,298);
  SpawnClass(PointsHistDClass);
  Sizeable(-1,-1,0,0);
  UseView(PointsHistVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"№ карт-ки",LMCardNr,false,CardDate);
  RlCol(84,84,"№ транз-ии",TransNr,false);
  RlCol(164,164,"Регистр",FileName,false);
  RlCol(-170,-170,"Дата транцакц.",TransDate,true);
  RlColKey(-80,-80,"Баллы от",PointsFrom,true,PointsFrom);
  SearchField("Найти");
  EndWindow;
end;

window IStatRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Новый Определите статистику товар/продавец",IStatRClass,CGRcW,RcType);
  SetWRect(20,80,400,300);
  vs=20;
  PeriodField(h=120,v=6,"Период");
  /*if(CurrentCompany>=1 and CurrentCompany<=3)then begin // Edit ***** 11 June 2013 09:35:00 Larisa
    EditFieldTL(h,v+=vs, 150,"Счета-фактуры",M4UStr,Normal,50,f3,false,0);
  end; // Edit ***** 11 June 2013 09:35:00 Larisa*/
  EditFieldTL(h,v+=vs, 150,"Продавец",   M4UStr,Normal,50,f1,false,UserSClass);
  EditFieldTL(h,v+=vs, 150,"Склад",   M4UStr,Normal,20,AccStr,false,LocationSClass);
  EditFieldTL(h,v+=vs, 150,"Товар",   M4UStr,Normal,50,f2,false,INSClass);
  /*if(CurrentCompany>=1 and CurrentCompany<=3)then begin // Edit ***** 11 June 2013 09:35:00 Larisa
    EditFieldTL(h,v+=vs, 150,"Группы товаров",M4UStr,Normal,30,Stext,false,ITSClass);
  end; // Edit ***** 11 June 2013 09:35:00 Larisa*/
  EditFieldTL(h,v+=vs, 150,"Классиф. товара", M4UStr,Normal,60,f4,false,DISClass);
  /*if(CurrentCompany>=1 and CurrentCompany<=3)then begin // Edit ***** 10 June 2013 10:53:00 Larisa
    EditFieldTL(h,v+=vs, 150,"Клиенты",M4UStr,Normal,41,ObjStr,false,CUSClass);
  	EditFieldTL(h,v+=vs, 150,"Категория",M4UStr,Normal,60,LastAcc,false,CCatSClass);
  	ButtonFrame(h=120,vm=(v+=40),200,2,"Сортировать");
  	RadioButton(h,v,0,0,"товар/продавец",flags[3]);
  	RadioButton(h,v+=16,1,0,"продавец/товар",flags[3]);
  end; // Edit ***** 10 June 2013 10:53:00 Larisa*/
  EndWindow;
end;

window Cust2STRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Определите статистику скидок",Cust2STRClass,CGRcW,RcType);
  SetWRect(20,80,450,400);
  vs = 20;
  EditFieldTL(h=180,v=6, 150,"Клиент",   M4UStr,Normal,30,f1,false,CUSClass);
  EditFieldTL(h,v+=vs, 150,"Товар",   M4UStr,Normal,41,f2,false,INSClass);
  //if(CurrentCompany>=1 and CurrentCompany<=3)then begin // Edit ***** 13 June 2013 09:37:00 Larisa
    EditFieldTL(h,v+=vs, 50,"Группа товаров",   M4UStr,Normal,20,FirstAcc,false,ITSClass);
 // end; // Edit ***** 13 June 2013 09:37:00 Larisa
  EditFieldTL(h,v+=vs ,100,"Классификация товара",M4UStr,Normal,20,f4,false,DISClass);
  /*if(CurrentCompany>=1 and CurrentCompany<=3)then begin // Edit ***** 13 June 2013 09:37:00 Larisa
      EditFieldTL(h,v+=vs, 150,"Филиал",   M4UStr,Normal,20,f5,false,CUSClass);
      EditFieldTL(h,v+=vs, 100,"Класс сч. ресторана",   M4UStr,Normal,10,LastAcc,false,RestAccClassSClass);
  end; // Edit ***** 13 June 2013 09:37:00 Larisa*/
  //if(CurrentCompany>=4 and CurrentCompany<=6)then begin // Edit ***** 12 June 2013 14:22:00 Larisa
    EditFieldTL(h,v+=vs, 150,"Склад",   M4UStr,Normal,20,f6,false,LocationSClass); // Edit ***** 12 June 2013 11:36:00 Larisa
  //end; // Edit ***** 12 June 2013 14:22:00 Larisa
  EditFieldTL(h,v+=vs ,100,"Продавец (от клиента)",M4UStr,Normal,10,AccStr,false,UserSClass);
  PeriodField(h,v+=vs,"Период");
  /*if(CurrentCompany>=1 and CurrentCompany<=3)then begin // Edit ***** 13 June 2013 09:37:00 Larisa
    EditFieldTL(h,v+=vs, 50,"Категория",   M4UStr,Normal,5,f3,false,CCatSClass);
    EditFieldTL(h,v+=vs ,100,"Объект (из сч/ф)",M4UStr,Normal,20,ObjStr,false,ObjSClass);
    EditFieldTL(h,v+=vs ,100,"Мин. оборот",M4Val,Normal,0,vals0,true,0);
    EditFieldTL(h,v+=vs ,100,"Мин. прибыль",M4Val,Normal,0,vals1,true,0);
  end; // Edit ***** 13 June 2013 09:37:00 Larisa*/
  ButtonFrame(h=30,vm=(v+=40),123,2,"Функция");
  RadioButton(h,v,0,0,"Сводный",flags[2]);
  RadioButton(h,v+=16,1,0,"Подробный",flags[2]);
  /*if(CurrentCompany>=1 and CurrentCompany<=3)then begin // Edit ***** 13 June 2013 09:41:00 Larisa
    ButtonFrame(h,v=(vm+60),123,2,"Сортировать по");
    RadioButton(h,v,0,0,"клиентам",flags[1]);
    RadioButton(h,v+=16,1,0,"прибыли",flags[1]);
    ButtonFrame(h=227,v=vm,123,2,"Функция");
    RadioButton(h,v,0,0,"Цена продажи",flags[3]);
    RadioButton(h,v+=16,1,0,"Базовая цена",flags[3]);
  end; // Edit ***** 13 June 2013 09:41:00 Larisa*/
  EndWindow;
end;

window CuArtSTRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;

  if (false) then begin
		/*WindowBegin("Определите статистику клиент/товар",CuArtSTRClass,CGRcW,RcType);
		SetWRect(20,80,460,330);
		vs = 20;
		EditFieldTL(h=160,v=6, 150,"Клиенты",   M4UStr,Normal,50,f1,false,CUSClass);
		EditFieldTL(h,v+=20, 150,"Категории",   M4UStr,Normal,30,ObjStr,false,CCatSClass);
		if (HasContactClassification) then begin
			EditFieldTL(h,v+=20, 150,"Классификация", M4UStr,Normal,60,f4,false,CClassSClass);
		end;
		EditFieldTL(h,v+=20, 150,"Товар",   M4UStr,Normal,41,f2,false,INSClass);
		if (IsEnterprise) then begin
			EditFieldTL(h,v+=20, 150,"Группа товара",   M4UStr,Normal,20,f3,false,ITSClass);
		end;
		if (HasItemClassification) then begin
			EditFieldTL(h,v+=20, 150,"Классификация товара", M4UStr,Normal,60,f5,false,DISClass); 
		end;
		if (IsEnterprise) then begin
			EditFieldTL(h,v+=vs, 150,"Филиал",   M4UStr,Normal,20,f6,false,CUSClass);
			EditFieldTL(h,v+=vs, 100,"Класс сч. рест.",   M4UStr,Normal,10,LastAcc,false,RestAccClassSClass);
		end;
		EditFieldTL(h,v+=20, 150,"Период",M4UStr,Normal,21,Period2Str,false,PerSClass);
		EditFieldTL(h,v+=20, 150,"Период для сравнения",M4UStr,Normal,21,Stext,false,PerSClass);
		if (HasObjects) then begin
			EditFieldTL(h,v+=20, 150,"Объект клиента",M4UStr,Normal,20,AccStr,false,ObjSClass);
		end;
		if (IsEnterprise) then begin
			EditFieldTL(h,v+=20, 100,"Страна клиента",M4UStr,Normal,5,TransStr,false,CountrySClass);
			CheckBox(h,v+=20,0,"Показать только группы товаров",flags[1]);
			CheckBox(h,v+=16,0,"Показать варианты",flags[2]);
		end;
		EndWindow;*/
  end else begin
		WindowBegin("Определите статистику клиент/товар",CuArtSTRClass,CGRcW,RcType);
		SetWRect(20,80,460,330);
		vs = 20;
		EditFieldTL(h=160,v=6, 150,"Клиенты",   M4UStr,Normal,50,f1,false,CUSClass);
		EditFieldTL(h,v+=20, 150,"Товар",   M4UStr,Normal,41,f2,false,INSClass);
		EditFieldTL(h,v+=20, 150,"Группа товара",   M4UStr,Normal,20,f3,false,ITSClass);
		EditFieldTL(h,v+=20, 150,"Классификация товара", M4UStr,Normal,60,f5,false,DISClass);
		EditFieldTL(h,v+=20, 150,"Период",M4UStr,Normal,21,Period2Str,false,PerSClass);
		EditFieldTL(h,v+=20, 150,"Склад",   M4UStr,Normal,20,AccStr,false,LocationSClass);
		EndWindow;
  end;
end;

window CustSalesRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;

 
  WindowBegin("Определите статистику продаж по клиентам",CustSalesRClass,CGRcW,RcType);
  SetWRect(20,80,450,300);
  h = 150; vs = 20;
  PeriodField(h,v=6,"Период");
  EditFieldTL(h,v+=vs, 150,"Клиенты",   M4UStr,Normal,50,f1,false,CUSClass);
  EditFieldTL(h,v+=vs, 150,"Категория",   M4UStr,Normal,5,f2,false,CCatSClass);  
  EditFieldTL(h,v+=vs,150,"Классификация",M4UStr,Normal,30,f5,false,CClassSClass);
	EditFieldTL(h,v+=20, 150,"Склад",   M4UStr,Normal,20,AccStr,false,LocationSClass);
  EditFieldTL(h,v+=vs, 50,"Показать клиентов:",   M4Long,Normal,0,long1,false,0);
  ButtonFrame(h,vm=(v+=41),133,3,"Функция");
  RadioButton(h,v,0,0,"Наибольшая сумма",ArtMode);
  RadioButton(h,v+=16,1,0,"Наименьшая сумма",ArtMode);
  RadioButton(h,v+=16,2,0,"Наиб. прибыль",ArtMode);
  CheckBox(h,v+=30,0,"Включить клиентов без продаж",flags[1]);
  EndWindow;
end;

window ItemSalesRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Определите статистику продаж по товарам",ItemSalesRClass,CGRcW,RcType);
  SetWRect(20,80,400,300);
  h = 130; vs = 20;
  PeriodField(h,v=6,"Период");
  EditFieldTL(h,v+=vs, 150,"Склад",   M4UStr,Normal,20,AccStr,false,LocationSClass); // Edit ***** 18 June 2013 16:09:00 Larisa
  EditFieldTL(h,v+=vs, 150,"Товары",   M4UStr,Normal,50,f1,false,INSClass);
  EditFieldTL(h,v+=vs, 150,"Группа",   M4UStr,Normal,5,f2,false,ITSClass);
	EditFieldTL(h,v+=vs, 150,"Классиф. товара", M4UStr,Normal,60,f4,false,DISClass); 
	EditFieldTL(h,v+=vs, 150,"Бренд", M4UStr,Normal,60,f5,false,DI2SClass); 
  /*EditFieldTL(h,v+=vs, 50,"Показать товаров:",   M4Long,Normal,0,long1,false,0); // Edit ***** 19 June 2013 09:16:00 Larisa
  if (StandardHansa==false) then begin
    EditFieldTL(h,v+=vs, 150,"Филиал",   M4UStr,Normal,20,f6,false,CUSClass);
    EditFieldTL(h,v+=vs, 100,"Класс сч. ресторана",   M4UStr,Normal,10,LastAcc,false,RestAccClassSClass);
  end;*/ // Edit ***** 19 June 2013 09:16:00 Larisa
  ButtonFrame(h=30,vm=(v+=41),150,1,"Сортировка");
  RadioButton(h,v,0,0,"Наибольший оборот",ArtMode);
  RadioButton(h,v+=16,1,0,"Наиболее продаваемые",ArtMode); // Edit ***** 19 June 2013 15:13:00 Larisa
  RadioButton(h,v+=16,2,0,"Наименее продаваемые",ArtMode);
  RadioButton(h,v+=16,3,0,"Не продаваемые",ArtMode);	// Edit by Victor 21.11.14
  CheckBox(h+110,v,0,"В наличии",flags[2]);
  
  CheckBox(h,v+=30,0,"Включить непроданные товары",flags[1]); // Edit ***** 19 June 2013 09:16:00 Larisa
  //CheckBox(h,v+=16,0,"Показывать варианты",flags[2]); // Edit ***** 19 June 2013 09:16:00 Larisa
  EndWindow;
end;

window CustSTRClass:3
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  WindowBegin("Определите статистику по клиентам",CustSTRClass,CGRcW,RcType);
  SetWRect(20,80,410,340);
  vs = 20;
  
  h = 160;

  PeriodField(h,v=6,"Период");
  EditFieldTL(h,v+=vs, 150,"Клиенты",   M4UStr,Normal,30,f1,false,CUSClass);
  //EditFieldTL(h,v+=vs, 150,"Категории",   M4UStr,Normal,30,f3,false,CCatSClass);
  //EditFieldTL(h,v+=vs,150,"Классификация",M4UStr,Normal,30,Stext,false,CClassSClass);
  EditFieldTL(h,v+=vs, 150,"Товар",   M4UStr,Normal,41,f2,false,INSClass);
	EditFieldTL(h,v+=20, 150,"Склад",   M4UStr,Normal,20,FirstAcc,false,LocationSClass);
	EditFieldTL(h,v+=vs ,100,"Продавец (от кл.)",M4UStr,Normal,10,AccStr,false,UserSClass);
	//EditFieldTL(h,v+=vs ,100,"Группа продажи (от кл.)",M4UStr,Normal,5,Language,false,SalesGroupSClass);
	//EditFieldTL(h,v+=vs ,100,"Мин. оборот",M4Val,Normal,0,vals0,true,0);
	//EditFieldTL(h,v+=vs ,100,"Мин. прибыль",M4Val,Normal,0,vals1,true,0);
	//EditFieldTL(h,v+=vs, 150,"Объект клиента",M4UStr,Normal,20,ObjStr,false,ObjSClass);
	//EditFieldTL(h,v+=vs, 100,"Страна клиента",M4UStr,Normal,5,TransStr,false,CountrySClass);
	ButtonFrame(h,v+=40,130,2,"Сортировать по");
	RadioButton(h,v,0,0,"номеру",flags[1]);
	RadioButton(h,v+=16,1,0,"наименованию",flags[1]);
    //CheckBox(h,v+=26,0,"Только инф. о клиенте",flags[2]); //Edit ************************** Sasha2, Thursday, 20 June 2013
  EndWindow;
end;

window BayAcivityRClass:1 
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  WindowBegin("Определите отчет активности по клиентам",BayAcivityRClass,CGRcW,RcType);
  SetWRect(20,80,410,340);
  vs = 20;
  h = 160;

  EditFieldTL(h,v+=vs, 150,"Карта",   M4UStr,Normal,30,f1,false,LoyaltyCardSClass);
  EditFieldTL(h,v+=vs, 150,"Код клиента",   M4UStr,Normal,30,f2,false,CUSClass);
  EditFieldTL(h,v+=vs, 150,"Класс-ция контакта",   M4UStr,Normal,30,f3,false,CClassSClass);
	
  EndWindow;
end;

window SearchContactRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  WindowBegin("Поиск контактных лиц",SearchContactRClass,CGRcW,RcType);
  SetWRect(64,80,509,298);
  vs =20;h=100;v=5;
  EditFieldTL(h,6 ,-20,"Искать",M4Str,Normal,40,f1,false,0);
  ButtonFrame(h,v=50,123,7,"Искать в");
  RadioButton(h,v,2,0,"ФИО",ArtMode);
  RadioButton(h,v+=16,1,0,"наименовании",ArtMode);
  RadioButton(h,v+=16,3,0,"коде",ArtMode);
  RadioButton(h,v+=16,4,0,"должности",ArtMode);
  if (IsEnterprise) then begin
    RadioButton(h,v+=16,5,0,"отделе",ArtMode);
  end;
  RadioButton(h,v+=16,6,0,"Телефон",ArtMode);
  RadioButton(h,v+=16,7,0,"Важная дата",ArtMode);
  RadioButton(h,v+=16,0,0,"Любое поле",ArtMode);
  EndWindow;
end;

window IVJ2RClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Specify Invoice Journal (for Hungary)",IVJ2RClass,CGRcW,RcType);
  SetWRect(20,80,500,380);
  vs = 20;
  EditFieldTL(150,v=6, 150,"Invoice No.",   M4Str,Normal,30,f1,false,0);
  PeriodField(150,v+=vs,"Period");
  EditFieldTL(150,v+=vs ,150,"Customer",M4UStr,Normal,50,f2,false,CUSClass);
  EditFieldTL(150,v+=vs ,70,"Customer Category",M4UStr,Normal,5,f3,false,CCatSClass);
  EditFieldTL(150,v+=vs ,100,"Salesman",M4UStr,Normal,10,AccStr,false,UserSClass);
  EditFieldTL(150,v+=vs,250,"Object",M4UStr,Normal,60,ObjStr,false,ObjSClass);
  EditFieldTL(150,v+=vs,50,"Object Type",M4UStr,Normal,5,ObjType,false,OTSClass);
  EditFieldTL(150,v+=vs,50,"Projekt",M4UStr,Normal,20,FirstAcc,false,PRSClass);
  ButtonFrame(h=12,vm=(v+=41),123,4,"Invoice Type");
  CheckBox(h,v,0,"Invoices",flags[3]);
  CheckBox(h,v+=16,0,"Cash Notes",flags[4]);
  CheckBox(h,v+=16,0,"C_redit Notes",flags[5]);
  CheckBox(h,v+=16,0,"I_nterest Inv.",flags[6]);
  ButtonFrame(h+=148,v=vm,123,2,"Status");
  CheckBox(h,v,0,"Not OKed",flags[1]);
  CheckBox(h,v+=16,0,"O_Ked",flags[2]);
  EndWindow;
end;

window IVJRClass:3
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,hs,v,v3,vm,vs,l;
 
  WindowBegin("Определите журнал сч/ф",IVJRClass,CGRcW,RcType);
    SetWRect(20,80,520,390);
    vs = 20;
    hs=148;
   if (IsEnterprise) then begin
    Tile(0,20,false,"",f1);
   end;
   if (HasLocalization("POL")) then begin 
     EditFieldTL(h=150,v=6,150,"Официальный номер",M4UStr,Normal,41,f6,false,0); 
   end else begin
    EditFieldTL(h=150,v=6, 150,"Номер сч/ф",   M4Str,Normal,30,f1,false,0);
   end;
   if (IsEnterprise) then begin
    TileButtons(v,2);
    Tile(1,380,false,"1",f2);
    v = 6;
     vm = v;
   end else begin
     v = v + vs;
   end;
   PeriodField(h,v,"Период"); 
   EditFieldTL(h,v+=vs, 150,"Период кредит. сч/ф",M4UStr,Normal,21,Period2Str2,false,PerSClass); 
    EditFieldTL(h,v+=vs ,150,"Клиент",M4UStr,Normal,50,f2,false,CUSClass);
   if (HasModSL) then begin
    EditFieldTL(h,v+=vs ,70,"Категория",M4UStr,Normal,5,f3,false,CCatSClass);
   end;
   if (HasContactClassification) then begin
    EditFieldTL(h,v+=vs ,70,"Виды классификации",M4UStr,Normal,60,f5,false,CTypeSClass);
    EditFieldTL(h,v+=vs ,70,"Классификация",M4UStr,Normal,30,f4,false,CClassSClass);
   end;
   if (IsEnterprise) then begin
    EditFieldTL(h,v+=vs ,100,"Продавец",M4UStr,Normal,10,AccStr,false,UserSClass);
   end;
   if (HasObjects) then begin
    EditFieldTL(h,v+=vs,250,"Объект",M4UStr,Normal,60,ObjStr,false,ObjSClass);
    EditFieldTL(h,v+=vs,50,"Тип объекта",M4UStr,Normal,5,ObjType,false,OTSClass);
   end;
   if (HasModTS) then begin
    EditFieldTL(h,v+=vs,50,"Проект",M4UStr,Normal,20,FirstAcc,false,PRSClass);
   end;
   if (HasMultiLocations) then begin
    EditFieldTL(h,v+=vs,100,"Склад",M4UStr,Normal,60,LastAcc,false,LocationSClass);
   end;
   if (IsEnterprise) then begin
    EditFieldTL(h,v+=vs,50,"Условия оплаты",M4UStr,Normal,5,TransStr,false,PDSClass);
    EditFieldTL(h,v+=vs,250,"№ для печати",M4UStr,Normal,41,f6,false,0);
    EditFieldTL(h,v3=(v+=vs),50,"Миним. сумма",M4Val,Normal,0,vals0,false,0);
   end;
   if (IsEnterprise) then begin
     h = 320;
     v = vm + 10;
   end else begin
     v = v + 40;
     v3 = v + 20;
     vm = v;
   end;
   ButtonFrame(h,v,123,5,"Статус"); 
    CheckBox(h,v,0,"Неутвержденные",flags[1]);
    CheckBox(h,v+=16,0,"Утвержденные",flags[2]);
   if (IsEnterprise) then begin
    RadioButton(h,v+=16,0,0,"Вкл. спорные",flags[7]);
    RadioButton(h,v+=16,1,0,"Искл. спорные",flags[7]);
    RadioButton(h,v+=16,2,0,"Только спорные",flags[7]);  
   end;
   EndFrame;

   v3 = v3 + 41;
   v = v3;
   if (IsEnterprise) then begin
     vm = v;
   end;
   ButtonFrame(h=148,v,123,3,"Функция"); 
    RadioButton(h,v,0,0,"Сводный",ArtMode);
    RadioButton(h,v+=16,1,0,"Подробный",ArtMode);
   if (HasMultiCurrency) then begin
    RadioButton(h,v+=16,4,0,"Сводный с валют.",ArtMode);
   end;
   EndFrame;
   if (IsEnterprise==false and HasBase2) then begin
     CheckBox(h,v+=42,0,"Пок-ть осн. валюта 1 & 2 Итоги",flags[12]); 
   end;

   if (IsEnterprise) then begin
     h2 = 320;
     l = 160;
   end else begin
     h2 = h + 148;
     l = 123;
   end;
   ButtonFrame(h2,v=vm,l,5,"Сортировка"); 
   if (HasModNL) then begin
    RadioButton(h2,v,0,0,"дате операции",flags[10]);
   end else begin
     RadioButton(h2,v,0,0,"дате сч/ф",flags[10]); 
   end;
   if (HasLocalization("POL")) then begin 
     RadioButton(h2,v+=16,5,0,"номеру сч/ф",flags[10]);
   end else begin
     RadioButton(h2,v+=16,1,0,"номеру сч/ф",flags[10]); 
   end;
   if (IsEnterprise) then begin
    RadioButton(h2,v+=16,2,0,"складу (из загол.)",flags[10]);
    RadioButton(h2,v+=16,3,0,"№ для печати",flags[10]);
    RadioButton(h2,v+=16,4,0,"дате сч/ф",flags[10]);
   end;
   EndFrame;
   if (IsEnterprise) then begin
   Tile(2,330,false,"2",Stext);
    v = 6;
   EditFieldTL(h=150,v,100,"Группа товаров",M4UStr,Normal,21,Stext,false,ITSClass);
   StaticText(h+110,v+12, "Только подробный",false);
   EditFieldTL(h=150,v+=vs,100,"Счет продаж",M4UStr,Normal,21,f7,false,AccSClass);
   StaticText(h+110,v+12, "Только подробный",false);
   EditFieldTL(h=150,v+=vs,100,"Счет должника",M4UStr,Normal,21,f8,false,AccSClass);
   EditFieldTL(h=150,v+=vs,100,"Осн. партнер",M4UStr,Normal,20,f9,false,CUSClass);
//    EditFieldTL(h,v+=vs,50,"Order Class",M4UStr,Normal,5,Stext,false,OrderClassSClass);
    ButtonFrame(h=50,vm = (v+=40),123,4,"Вид счета");
    CheckBox(h,v,0,"Счета-фактуры",flags[3]);
    CheckBox(h,v+=16,0,"Кассовые ордера",flags[4]);
    CheckBox(h,v+=16,0,"Счета кредита",flags[5]);
    CheckBox(h,v+=16,0,"Счета пени",flags[6]);
    CheckBox(h,v+=26,0,"С/ф, влияющие на книгу продаж",flags[19]);
    StaticText(h+17,v+=30,"(не учитывать тип с/ф)",false);
    CheckBox(h=220,v=vm,0,"Показать коммент.",flags[11]);
    CheckBox(h,v+=16,0,"Суммы в осн. валюте 1 и 2",flags[12]);
    CheckBox(h,v+=16,0,"Только фискальные сч/ф",flags[13]);
    CheckBox(h,v+=16,0,"Показывать аннулированные сч/ф",flags[14]);
    CheckBox(h,v+=16,0,"Показывать счет НДС",flags[15]);
    CheckBox(h,v+=16,0,"Только нераспечатанные сч/ф",flags[17]);
    CheckBox(h,v+=16,0,"Включая орг. клиентов",flags[18]);
    CheckBox(h+=hs,v=vm,0,"Показать № для печати",flags[16]);
   end else begin
     ButtonFrame(h+=148,v+=41,123,3,"Тип сч/ф"); 
     CheckBox(h,v,0,"Сч/ф-ры",flags[3]); 
     CheckBox(h,v+=16,0,"Сч/ф на наличные",flags[4]); 
     CheckBox(h,v+=16,0,"Кредит-ноты",flags[5]); 
     if (HasLocalization("PRT")) then begin
       CheckBox(h,v=48,0,"Show Official No.",flags[16]);
     end;
   end;
    EndWindow;
end;

window IVGPRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Определите прибыль по счетам-фактурам",IVGPRClass,CGRcW,RcType);
  SetWRect(20,80,480,320);
  vs = 20;
  Tile(0,20,false,"",Period2Str);
  PeriodField(150,v=6,"Период");
  TileButtons(v,2);
  Tile(1,280,false,"1",f3);
  v = 6;
  EditFieldTL(h=150,v, 150,"Номер сч/ф",   M4Str,Normal,30,f1,false,0);
  EditFieldTL(h,v+=vs ,150,"Клиент",M4UStr,Normal,50,f2,false,CUSClass);
  EditFieldTL(h,v+=vs ,100,"Продавец",M4UStr,Normal,10,AccStr,false,UserSClass);
  EditFieldTL(h,v+=vs ,50,"Группа продаж",M4UStr,Normal,10,f5,false,SalesGroupSClass);
  EditFieldTL(h,v+=vs ,150,"Товар",M4UStr,Normal,20,FirstAcc,false,INSClass);
  EditFieldTL(h,v+=vs ,150,"Классификация товара",M4UStr,Normal,200,f6,false,DISClass);
  EditFieldTL(h,v+=vs ,80,"Группа товаров",M4UStr,Normal,5,LastAcc,false,ITSClass);
  EditFieldTL(h,v+=vs ,150,"Объект",M4UStr,Normal,60,ObjStr,false,ObjSClass);
  EditFieldTL(h,v+=vs ,150,"Объект из стр. (подроб)",M4UStr,Normal,60,f3,false,ObjSClass);
  EditFieldTL(h,v+=vs ,50,"Условия оплаты",M4UStr,Normal,5,TransStr,false,PDSClass);
  ButtonFrame(h=60,vm=(v+=45),123,2,"Функция");
  RadioButton(h,v,0,0,"Сводный",ArtMode);
  RadioButton(h,v+=16,1,0,"Подробный",ArtMode);
  ButtonFrame(h=250,v=vm,140,2,"Статус"); //##cc
  CheckBox(h,v,0,"Неутвержденные",flags[1]);
  CheckBox(h,v+=16,0,"Утвержденные",flags[2]);
  Tile(2,310,false,"2",f4);
  v = 6;
  EditFieldTL(h=150,v,100,"Склады",M4UStr,Normal,60,f4,false,LocationSClass); //added
  EditFieldTL(h,v+=20,80,"Подразделение",M4Code,Normal,20,Stext,false,ContactCUSClass);
  ButtonFrame(h=60,vm=(v+=45),123,3,"Функция");
  RadioButton(h,v,0,0,"Стоимость",flags[11]);
  RadioButton(h,v+=16,2,0,"Ст-сть в осн.в.2",flags[11]);
  RadioButton(h,v+=16,1,0,"Ст-сть по очер.",flags[11]);
  ButtonFrame(h=230,v=vm,140,6,"Включать");//##cc
  CheckBox(h,v,0,"Сч/ф",flags[3]);
  CheckBox(h,v+=16,0,"Наличные",flags[4]);
  CheckBox(h,v+=16,0,"Кредитные счета",flags[5]);
  CheckBox(h,v+=16,0,"Счета пени",flags[6]);
  CheckBox(h,v+=16,0,"Предоплата",flags[7]);
  CheckBox(h,v+=16,0,"Cч/ф на авансы",flags[8]);
  CheckBox(h,v+=32,0,"Только сч/ф по З/О",flags[10]);  
  EndWindow;
end;

window IVExcelRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Определите период счет-фактур",IVExcelRClass,CGRcW,RcType);
  SetWRect(20,80,480,320);
  vs = 20;
  PeriodField(150,v=6,"Период");
  v = 6;
    
  EndWindow;
end;

window VIVExcelRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Определите период счет-фактур",VIVExcelRClass,CGRcW,RcType);
  SetWRect(20,80,480,320);
  vs = 20;
  PeriodField(150,v=6,"Период");
  v = 6;
    
  EndWindow;
end;

window ArtStatIClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  boolean Colourf,DiscUPrf,GPPrcf,GPf,InStockf,Instock2f,LeadDatef,Locsf,NotRsrvdf,OrddOutf,POQtyf,Shpblef,Statf,Varf,CostPricef;
  real h,hs,l,v;
  
  WindowBegin("Cтатус товара",ArtStatIClass,CGother,RcType);
  DynamicWindow;
  ItemStatusUserSettings(CurrentUser,InStockf,OrddOutf,POQtyf,Shpblef,GPf,NotRsrvdf,GPPrcf,DiscUPrf,Instock2f,Varf,LeadDatef,Statf,Locsf,CostPricef);
  l = 1200;//1040;
  if (!InStockf) then begin l = l - 80; end;
  if (!OrddOutf) then begin l = l - 80; end;
  if (!POQtyf) then begin l = l - 80; end;
  if (!Shpblef) then begin l = l - 80; end;
  if (!NotRsrvdf) then begin l = l - 80; end;
  if (!GPf) then begin l = l - 80; end;
  if (!GPPrcf) then begin l = l - 80; end;
  if (!DiscUPrf) then begin l = l - 80; end;
  if (!Instock2f) then begin l = l - 80; end;
  if (!LeadDatef) then begin l = l - 90; end;
  if (!Varf) then begin l = l - 60; end;
  if (!Locsf) then begin l = l - 60; end;
  if (!Statf) then begin l = l - 60; end;
  if (!CostPricef) then begin l = l - 60; end;
  SetWRect(3,80,l,129);
  Modality(2);
  if (IsWebClient) then begin
    v = 37;
    h = 1;
    hs = 70;
  end else begin
    v = 15;
    h = 20;
    hs = 80;
  end;
  StaticText(h,v,  "Товар",false);
  if (InStockf) then begin
//    StaticText(h+=(hs+10),v,  "Склад",false);
    ColourPushButton(h+=(hs+6),v-12,h+67,v+3,"ArtStatIClassSL","Статус",1001);
  end;
  if (OrddOutf) then begin
//    StaticText(h+=hs,v,  "Order",false);
    ColourPushButton(h+=(hs+2),v-12,h+62,v+3,"ArtStatIClassOS","Статус",1001);
  end;
  if (POQtyf) then begin
//    StaticText(h+=hs,v,  "Purch.Ord",false);
    ColourPushButton(h+=(hs-1),v-12,h+62,v+3,"ArtStatIClassPOS","Зак.пос",1001);
  end;
  if (Shpblef) then begin
    StaticText(h+=hs,v,  "Доступно",false);
  end;
  if (NotRsrvdf) then begin
    StaticText(h+=hs,v,  "Незарезерв.",false);
  end;
  if (GPf) then begin
    StaticText(h+=hs,v,  "Прибыль",false);
  end;
  if (GPPrcf) then begin
    StaticText(h+=hs,v,  "Прибыль (%)",false);
  end;
  if (DiscUPrf) then begin
    StaticText(h+=hs,v,  "Цена со ск.",false);
  end;
  if (Instock2f) then begin
    StaticText(h+=hs,v,  "На складе,2",false);
  end;
  if (LeadDatef) then begin
    StaticText(h+=hs,v,  "Дата",false);
  end;
  if (CostPricef) then begin
    StaticText(h+=hs,v,  "Стоим.",false);
  end;
  if (IsWebClient) then begin
    h = 1;
  end else begin
    h = 20;
  end;
  EditFieldTL(h,v+=10, 70,"",M4UStr,ViewOnly,20,f1,false,0);
  if (InStockf) then begin
    EditFieldTL(h+=(hs+10),v, 60,"",M4Str,ViewOnly,20,f2,true,0);
  end;
  if (OrddOutf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,f3,true,0);
  end;
  if (POQtyf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,LastAcc,true,0);
  end;
  if (Shpblef) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,FirstAcc,true,0);
  end;
  if (NotRsrvdf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,Stext,true,0);
  end;
  if (GPf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,AccStr,true,0);
  end;
  if (GPPrcf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,ObjStr,true,0);
  end;
  if (DiscUPrf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,TransStr,true,0);
  end;
  if (Instock2f) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,f4,true,0);
  end;
  if (LeadDatef) then begin
    EditFieldTL(h+=hs,v ,70,"",M4Date,ViewOnly,0,d1,true,0);
  end;
  if (CostPricef) then begin
    EditFieldTL(h+=hs,v ,70,"",M423Val,ViewOnly,0,vals4,true,0);
  end;
  if (IsWebClient) then begin
    h = h - 200;
    v = 1;
  end else begin
    v = 20;
  end;
  if (Varf) then begin
    ColourPushButton(h+=87,v,h+58,v+26,"DoVARMaskStock","Вар.",1001);
    //HalPushButton(h+=87,20,h+43,40,"DoVARMaskStock","Var");
    Colourf = true;
  end;
  if (Locsf) then begin
    if (Colourf) then begin
      ColourPushButton(h+=62,v,h+58,v+26,"DoLocationItem","Скл.",1001);
    end else begin
      ColourPushButton(h+=87,v,h+58,v+26,"DoLocationItem","Скл.",1001);
    end;
    //HalPushButton(h+=47,v,h+43,40,"DoLocationItem","Loc");
    Colourf = true;
  end;
  if (Statf) then begin
    if (Varf) then begin
      if (Colourf) then begin
        ColourPushButton(h+=62,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end else begin
        ColourPushButton(h+=87,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end;
      //HalPushButton(h+=47,v,h+43,40,"DoFutureStockHist","Future");
    end else begin
      if (Colourf) then begin
        ColourPushButton(h+=62,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end else begin
        ColourPushButton(h+=87,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end;
      //HalPushButton(h+=47,20,h+43,40,"DoFutureStockHist","Future");
    end;
    Colourf = true;
  end;
  EndWindow;
end;

window ARPay2SClass:1
  wtag("language","RUS"), wtag("product","OLDONE-ToBeRemoved"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;
  WindowBegin("Выберите предоплату1",ARPay2SClass,CGother,HBlRecType);
  SetWRect(40,80,630,298);
  Sizeable(-1,-1,-1,0);
  v=6;
  ToolBar;
  HalPushButton(-120,v,-20,v+10,"ARPay2SClassOpenARPayClass","Все Предоплаты");
  EndToolBar;
  HalPushButton(h=9,v=30,h+90,v+10,"ARPay2SClassSortCUPNr","№");
  HalPushButton(h=h+90,v,h+85,v+10,"ARPay2SClassSortOrderNr","№ сч.");
  HalPushButton(h=h+85,v,h+80,v+10,"ARPay2SClassSortPayDate","Дата опл.");
//  HalPushButton(h=h+80,v,h+80,v+10,"","Клиент");
//  HalPushButton(h=h+80,v,h+200,v+10,"","Имя");
  HalPushButton(h=h+80,v,h+90,v+10,"","НДС");
  HalPushButton(h=h+90,v,h+85,v+10,"","Сумма");
  HalPushButton(h=h+85,v,h+85,v+10,"","Заброн.");
  HalPushButton(h=h+85,v,h+35,v+10,"","Валюта");
  StringList2(9,29,-24,-5);
  SearchField("Поиск");
  SoftEditField(1000,1000,-20,"Сортировать",Normal ,"ARPay2SClassSorting",false,0,M4Str,255);
  EndWindow;
end;








window LocalMachineTClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vm,vm2,vs;
  string 255 label;
  Integer tilenr;

  WindowBegin("Настройки локальной машины",LocalMachineTClass,CGSbl,-);
  SetWRect(64,80,750,580);
  SetBlid(LocalMachineBlock);
  vs = 20;
  Tile(0,50,false,"",LocalMachineCode);
  EditField(h=200,v=6,60,"Код",Normal,LocalMachineCode,false,LocalMachineSClass);
  tilenr = 1;
  TileButton(tilenr,"По умолч."); tilenr = tilenr + 1;
  TileButton(tilenr,"Шрифты"); tilenr = tilenr + 1;
  if (StandardHansa==false) then begin
    if (HasHotelInterface) then begin // Hotel
      TileButton(tilenr,"Отель"); tilenr = tilenr + 1;
    end else begin
      TileButton(tilenr,"Планир. Ресурсов"); tilenr = tilenr + 1;
    end;
  end;
  TileButton(tilenr,"Интеграции"); tilenr = tilenr + 1;
  TileButton(tilenr,"Интеграция"); tilenr = tilenr + 1;
  TileButton(tilenr,"Польз."); tilenr = tilenr + 1;
  TileButton(tilenr,"POS"); tilenr = tilenr + 1;
  tilenr = 1;
  Tile(tilenr,515,false,tilenr,DefLocation); tilenr = tilenr + 1;
  v = 6; h2=400;
  EditField(h,v,60,"Клиент по-умолчанию",Normal,DefCustCode,false,CUSClass);         
  EditField(h2,v,60,"Филиал",Normal,BranchID,false,CUBranchSClass);
  EditField(h,v+=vs,60,"Склад по умолчанию",Normal,DefLocation,false,LocationSClass);         
  EditField(h2,v,60,"Место возврата по умолчанию",Normal,DefReturnLocation,false,LocationSClass);         
  EditField(h,v+=vs,120,"Принтер по умолч.",Normal,DefPrinter,false,0);
  EditFieldTL(h,v+=vs,180,"Кодировка экспорта по умолч.",M4StrSet,Normal,89,DefExpCodepage,false,StrSetSClass);
//  EditField(h,v+=vs,100,"Printer",Normal,FiscalPrinter,false,SetSClass); used difrent way now afaik ,jj
  if (StandardHansa==false) then begin
    EditField(h,v+=vs,60,"Смещение по GMT",Normal,GMTOffset,false,0);           
  end;
  ButtonFrame(h2=30,vm=(v+=40),153,4,"Список выбора товара");
  RadioButton(h2,v,0,0,"системный по умолч.",ItemPasteSpecial);
  RadioButton(h2,v+=16,1,0,"простой",ItemPasteSpecial);
  RadioButton(h2,v+=16,2,0,"с классификациями",ItemPasteSpecial);
  RadioButton(h2,v+=16,3,0,"без перелист.",ItemPasteSpecial);

  ButtonFrame(h2=30,v+=40,153,3,"Вставка класса счёта");         
  RadioButton(h2,v,0,0,"По умолчанию",AccClassPasteSpecial);         
  RadioButton(h2,v+=16,1,0,"Без классификаций",AccClassPasteSpecial);         
  RadioButton(h2,v+=16,2,0,"С классификациями",AccClassPasteSpecial);         

  ButtonFrame(h2=220,v=vm,153,4,"Вставка почтового ящика");         
  RadioButton(h2,v,3,0,"Связи с контактами",MailboxPasteSpecial);
  RadioButton(h2,v+=16,1,0,"Клиенты",MailboxPasteSpecial);
  RadioButton(h2,v+=16,2,0,"Поставщики",MailboxPasteSpecial);
  RadioButton(h2,v+=16,0,0,"Почт.ящ./Конференции",MailboxPasteSpecial);

  if (StandardHansa==false) then begin
    ButtonFrame(h2,v+=40,153,3,"Вставка тиап деятельности");         
    RadioButton(h2,v,0,0,"Cистемный по умолч.",ActTypePastePerClass);
    RadioButton(h2,v+=16,1,0,"По классу деятельности",ActTypePastePerClass);
    RadioButton(h2,v+=16,2,0,"Из фаворитов",ActTypePastePerClass);
  end;
  if (HasObjects) then begin
    ButtonFrame(h2=30,v+=40,153,3,"Вставка объекта");         
    RadioButton(h2,v,0,0,"По умолчанию",ObjectPasteSpecial);         
    RadioButton(h2,v+=16,1,0,"Без типов",ObjectPasteSpecial);         
    RadioButton(h2,v+=16,2,0,"С типами",ObjectPasteSpecial);         
  end;


  CheckBox(h=400,v=vm,0,"Спрашивать при удалении",WarnOnDelete);         
  CheckBox(h,v+=17,0,"Не выводить всплывающие подсказки",NoToolTips);
  CheckBox(h,v+=17,0,"Не использовать фон",NoBackGround);
  CheckBox(h,v+=17,0,"Широкая полоса прокрутки",WideScrollBars);
  CheckBox(h,v+=17,0,"Не включать режим сервера при бездействии",NoServerModeIdle);
  if (StandardHansa==false) then begin
    CheckBox(h,v+=17,0,"Фоновая синхр. e-mail",BackgroundMailSync);
    CheckBox(h,v+=17,0,"Включить автономные заказы",BackgroundOrderSync);
    CheckBox(h,v+=17,0,"Автом. показыв. справку по кл. при входящем звонке",CustPSOnCall);
    CheckBox(h,v+=17,0,"Тип деятельности утверждения",ApprovalTypeActDClass);  
  end;

  if (GuiType==kGuiiPhone) then begin
    ButtonFrame(h2=30,v+=40,153,3,"Редактирование матрицы"); 
    RadioButton(h2,v,0,0,"По строкам",MatEditing); 
    RadioButton(h2,v+=16,1,0,"Расширение",MatEditing); 
    //RadioButton(h2,v+=16,2,0,"Счёт авансов дебиторов",MatEditing);
    EndFrame;
  end;

  Tile(tilenr,70,false,tilenr,entryFont); tilenr = tilenr + 1;
  v = 6; h = 210;
  EditField(h,v,-20,"Редакт. шрифт",Normal,entryFont,false,FontNameSClass);
  EditField(h,v+=vs,-20,"Отч. шрифт",Normal,reportFont,false,FontNameSClass);
  EditField(h,v+=vs,50,"Отч. размер шрифта",Normal,reportFontSize,false,0);
  if (GuiType==kGuiiPhone) then begin
    EditField(h,v+=vs,50,"Фактор маштаба устройства",Normal,TabletScaleFactor,false,0);
  end;
  v = 6;
  if (StandardHansa==false) then begin
    if (HasHotelInterface) then begin // Hotel
      Tile(tilenr,100,false,tilenr,ResLoc); tilenr = tilenr + 1;
      EditField(h,v,60,"Местопол. комнаты",Normal,ResLoc,false,ResLocSClass);
      EditField(h,v+=vs,150,"Классиф. комнаты",Normal,ResClass,false,ResClasSClass);
      EditField(h,v+=vs,60,"№ кодир. устр-ва замочной сис-мы ",Normal,LockSysEncoderNo,false,0);
    end else begin
      Tile(tilenr,50,false,tilenr,ResLoc); tilenr = tilenr + 1;
      EditField(h,v,60,"Местопол. ресурса",Normal,ResLoc,false,ResLocSClass);
      EditField(h,v+=vs,150,"Классиф. ресурса",Normal,ResClass,false,ResClasSClass);
    end;
  end;
  Tile(tilenr,130,false,tilenr,SkypeInt); tilenr = tilenr + 1;
  ButtonFrame(h,vm=(v=20),123,3,"Соединение со Skype");
  RadioButton(h,v,1,0,"Да",SkypeInt);
  RadioButton(h,v+=16,2,0,"Нет",SkypeInt);
  RadioButton(h,v+=16,0,0,"Еще не решено",SkypeInt);

  ButtonFrame(h,v+=96,200,1,"Connect to GSX");
  EditField(h+100,v,80,"Ship-To Account",Normal,ShipToAccount,false,0);

  if (HasItemClassification) then begin
    CheckBox(h,v+=30,0,"Синхрониз. товары и цены для счетов ресторана",SyncRecordforPOS);
    EditField(h,v+=vs,-40,"Классиф.товаров для синхр.",Normal,SyncINClass,false,DISClass);
  end;

  ButtonFrame(h2=h+200,v=vm,140,7,"Предпочитаемый вид телефонии");
  RadioButton(h2,v,kPreferredCallingMethodNotDecided,0,"Не определено",PreferredCallingMethod);         
  RadioButton(h2,v+=16,kPreferredCallingMethodSkype,0,"Skype",PreferredCallingMethod);         
  RadioButton(h2,v+=16,kPreferredCallingMethodAsterisk,0,"Asterisk",PreferredCallingMethod);         
  RadioButton(h2,v+=16,kPreferredCallingMethod3CX,0,"3CX",PreferredCallingMethod); 
  RadioButton(h2,v+=16,kPreferredCallingMethodTAPI,0,"TAPI",PreferredCallingMethod); 
  RadioButton(h2,v+=16,kPreferredCallingMethodSoftPhone,0,"Встроенный",PreferredCallingMethod); 
  RadioButton(h2,v+=16,kPreferredCallingMethodBria,0,"Bria",PreferredCallingMethod); 

  Tile(tilenr,300,false,tilenr,UserStr1); tilenr = tilenr + 1;
  label = UserDefined("LocalMachineSetVc","UserStr1");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr1,false,0);
  end;
  label = UserDefined("LocalMachineSetVc","UserStr2");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr2,false,0);
  end;
  label = UserDefined("LocalMachineSetVc","UserStr3");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr3,false,0);
  end;
  label = UserDefined("LocalMachineSetVc","UserStr4");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr4,false,0);
  end;
  label = UserDefined("LocalMachineSetVc","UserStr5");
  if (nonblank(label)) then begin
    EditField(h,v+=vs,-20,label,Normal,UserStr5,false,0);
  end;
  Tile(tilenr,450,false,tilenr,Supervisor); tilenr = tilenr + 1;
  if (StandardHansa==false) then begin
    EditField(h=220,v=6,60,"Контролер",Normal,Supervisor,false,UserSClass);
    EditField(h,v+=20,60,"Упаковщик",Normal,Bagger,false,BaggerSClass);
    EditField(h,v+=vs,60,"Прайс-лист",Normal,PLCode,false,PLDefSClass);
  end else begin
    EditField(h=220,v=6,60,"Прайс-лист",Normal,PLCode,false,PLDefSClass);
  end;
  EditField(h,v+=vs,100,"ID терминала",Normal,TerminalID,false,0);         
  if (IsEnterprise or BuildProductCode=="PAYYAPERP") then begin    
  EditField(h,v+=vs,150,"Группа кнопок кас. терминала",Normal,POSButtonGroup,false,POSButtonGroupsSClass);
    EditField(h+300,v,50,"Выбранная строка",Normal,SelectRowPage,false,0);
  end;
  if (StandardHansa==false) then begin
    EditField(h,v+=20,150,"Путь к эл. журн. фиск. принт.",Normal,FiscalPrinterEJournalPath,false,0);
    EditField(h,v+=20,150,"Путь к эл. журн. фиск. принт. 2",Normal,FiscalPrinterEJournalPath2,false,0);
  end;
  if (HasModRest) then begin
    EditField(h,v+=20,150,"Расп.столов",Normal,TableViewCode,false,TablesViewsSClass);
    EditField(h,v+=20,150,"Вид счета ресторана",Normal,RestAccClass,false,RestAccClassSClass);
    if (HasItemClassification) then begin
    EditField(h,v+=vs,60,"Класс товаров по умолчанию (ресторан)",Normal,DefRestDisp,false,DISClass);         
    end;
  end;
  if (HasModRest) then begin
    EditFieldTL(h,v+=vs,-20,"Kitchen Order Screen Departments",M4Str,Normal,200,KitchenOrdScrDep,false,RestOrderDeptSClass);
    EditFieldTL(h,v+=vs,50,"Kitchen Order Screen Refresh Interval",M4Time,Normal,0,KitchenRefreshInt,false,PasteCurTime);    
    CheckBox(h,v+=20,0,"Подробное описание заказов на кухню",KitchenOrdDetailed);  v = v - 4;         
    CheckBox(h,v+=20,0,"Один активный счёт бара",OneBarTabWindow);         
  end;
    EditField(h,v+=20,150,"Bluetooth Назв.",Normal,BluetoothName,false,0);
    EditField(h,v+=20,150,"Bluetooth MAC Адр.",Normal,BluetoothMACAddr,false,0);
//  CheckBox(h,v+=20,0,"iOS Vertical Touch Screen Interface",TouchScreenLook2);
//  CheckBox(h,v+=20,0,"",TouchScreenLook2);
  //CheckBox(h=30,vm=(v+=24),0,"Интерфейс Touch Screen",TouchScreenLookPicture);//++++++++++++++++++++++++++++++++++++++++alex
  CheckBox(h=30,vm=(v+=24),0,"Интерфейс TouchScreen",TouchScreenLook);////
  CheckBox(h,v+=16,0,"Использовать дисплей кассира",UseDisplay);
  CheckBox(h,v+=16,0,"Использовать дисплей покупателя",UseCustomerDisplay);
  CheckBox(h,v+=16,0,"Открыть цифры",UseNumPad);
  if (StandardHansa==false) then begin
    CheckBox(h=225,v=vm,0,"Упаковщик и контролер по умолч. на сч/ф кас.терм.",DefaulBaggerSupervisor);
    CheckBox(h,v+=16,0,"Показыв. упаковщ. на сч/ф кас.терм.",ShowBaggerSupervisor);
    CheckBox(h,v+=16,0,"Требовать код авторизац. для платеж. кредитн. картами",CCRequireAuthCode);
  end;
  CheckBox(h,v+=16,0,"Спрятать к-во на сч/ф кас.терм.",HideQty);
  CheckBox(h,v+=16,0,"Спрятать код товара на сч/ф POS",HideArtCode);
  CheckBox(h,v+=16,0,"Нарастающая печать чеков",IncrementalReceiptPrinting);
  if (HasLocalization("HRV")) then begin
    CheckBox(h,v+=16,0,"Send Fiscal Invoice (#S/L#)",SendFiscalInvoice);
  end;

  Tile(tilenr,490,false,tilenr,-); tilenr = tilenr + 1;

  StaticText(h=30,vm=(v=20),"Сч/ф POS",false);
  WindowLine(20,v+1,-20,v+1,kLineTypeGray);
  ButtonFrame(h=30,vm=(v+=24),100,3,"Список выбора товара");
  RadioButton(h,v,kPOSPanelSizeLarge,0,"Большой",POSPanelSize);
  RadioButton(h,v+=16,kPOSPanelSizeMedium,0,"Средний",POSPanelSize);
  RadioButton(h,v+=16,kPOSPanelSizeSmall,0,"Маленький",POSPanelSize);
  ButtonFrame(h=225,v=vm,100,4,"Размер шрифта");
  RadioButton(h,v,0,0,"22",POSFontSize);
  RadioButton(h,v+=16,3,0,"30",POSFontSize); 
  RadioButton(h,v+=16,1,0,"16",POSFontSize);
  RadioButton(h,v+=16,2,0,"11",POSFontSize);

  EditField(h=121,v+=44,50,"Шрифт панели",Normal,PanelFontSize,true,0);
  EditField(h=321,v,50,"Размеh шрифта первого поля",Normal,IVCashPOSDisplayFontSize1,true,0);
  EditField(h=521,v,50,"Размер шрифта второго поля",Normal,IVCashPOSDisplayFontSize2,true,0);

/*
  EditField(h,v+=30,50,"Размер шрифта",Normal,PanelFontSize,true,0);
  EditField(h,v+=vs,50,"Размеh шрифта первого поля",Normal,IVCashPOSDisplayFontSize1,true,0);
  EditField(h,v+=vs,50,"Размер шрифта второго поля",Normal,IVCashPOSDisplayFontSize2,true,0);
*/
  ButtonFrame(h=400,v=vm,100,2,"Позиция кнопок");
  RadioButton(h,v,kPOSButtonsPositionLeft,0,"Слева",POSButtonsPosition);
  RadioButton(h,v+=16,kPOSButtonsPositionRight,0,"Справа",POSButtonsPosition);
  CheckBox(h,v+=40,0,"Картинка товара на кнопках",POSShowButtonPictures);
  EditField(h=600,v=vm-10,50,"Button Width",Normal,POSButtonWidth,true,0);
  EditField(h,v+=vs,50,"Длина кнопок",Normal,POSButtonHeight,true,0);
  EditField(h,v+=vs,50,"Размер шрифта бирки",Normal,POSLabelFontSize,true,0);
  
  StaticText(h=30,v+=100,"Дисплей клиента",false);
  WindowLine(20,v+1,-20,v+1,kLineTypeGray);
  EditField(h=121,v+=24,50,"Шрифт панели",Normal,CustomerDisplayFontSize,true,0);
  EditField(h=321,v,50,"Размеh шрифта первого поля",Normal,CUDisplayFontSize1,true,0);
  EditField(h=521,v,50,"Размер шрифта второго поля",Normal,CUDisplayFontSize2,true,0);

  if (HasLocalization("SVN")) then begin
//    SpecialMenu("",' ',1,"SVNRegisterPremiseDsm");
  end;
  EndWindow;
end;

window PMBSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Выберите способ оплаты",PMBSClass,CGother,HBlRecType);
  SetWRect(240,80,650,298);
//  StringList(9,9,236,209);
  DataList(9,20,-22,-6,"PayMode"); 
  DataListColumn(1,6,94,AdjLeft,"PayMode","Тип платежа",M4Str); 
  DataListColumn(1,100,360,AdjLeft,"Comment","Комментарий",M4Str);
  if (UserModuleAccess("modNL")==kAccessLevelFull) then begin
  //DataListColumn(1,-122,-16,AdjRight,"Balance","Баланс",M4Val); // Edit ************************** Friday, 20 October 2017 16:28:44
  end;
  SearchField("Поиск");
  EndWindow;
end;

window ArtStatIClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  boolean Colourf,DiscUPrf,GPPrcf,GPf,InStockf,Instock2f,LeadDatef,Locsf,NotRsrvdf,OrddOutf,POQtyf,Shpblef,Statf,Varf,CostPricef;
  real h,hs,l,v;
  
  WindowBegin("Cтатус товара",ArtStatIClass,CGother,RcType);
  DynamicWindow;
  ItemStatusUserSettings(CurrentUser,InStockf,OrddOutf,POQtyf,Shpblef,GPf,NotRsrvdf,GPPrcf,DiscUPrf,Instock2f,Varf,LeadDatef,Statf,Locsf,CostPricef);
  l = 1200;//1040;
  if (!InStockf) then begin l = l - 80; end;
  if (!OrddOutf) then begin l = l - 80; end;
  if (!POQtyf) then begin l = l - 80; end;
  if (!Shpblef) then begin l = l - 80; end;
  if (!NotRsrvdf) then begin l = l - 80; end;
  if (!GPf) then begin l = l - 80; end;
  if (!GPPrcf) then begin l = l - 80; end;
  if (!DiscUPrf) then begin l = l - 80; end;
  if (!Instock2f) then begin l = l - 80; end;
  if (!LeadDatef) then begin l = l - 90; end;
  if (!Varf) then begin l = l - 60; end;
  if (!Locsf) then begin l = l - 60; end;
  if (!Statf) then begin l = l - 60; end;
  if (!CostPricef) then begin l = l - 60; end;
  SetWRect(3,80,450,140);
  Modality(1);// Edit ************************** Friday, 27 October 2017 15:36:20
  if (IsWebClient) then begin
    v = 37;
    h = 1;
    hs = 70;
  end else begin
    v = 26;
    h = 20;
    hs = 80;
  end;
  StaticText(h,v,  "Товар",false);
  if (InStockf) then begin
//    StaticText(h+=(hs+10),v,  "Склад",false);
    ColourPushButton(h+=(hs+6),v-12,h+67,v+3,"ArtStatIClassSL","Склад",1001);
  end;
  if (OrddOutf) then begin
//    StaticText(h+=hs,v,  "Order",false);
    ColourPushButton(h+=(hs+2),v-12,h+62,v+3,"ArtStatIClassOS","ArtStatIClassOS",1001);
  end;
  if (POQtyf) then begin
//    StaticText(h+=hs,v,  "Purch.Ord",false);
    ColourPushButton(h+=(hs-1),v-12,h+62,v+3,"ArtStatIClassPOS","Зак.пос",1001);
  end;
  if (Shpblef) then begin
    StaticText(h+=hs,v,  "Доступно",false);
  end;
  if (NotRsrvdf) then begin
    StaticText(h+=hs,v,  "Незарезерв.",false);
  end;
  if (GPf) then begin
    StaticText(h+=hs,v,  "Прибыль",false);
  end;
  if (GPPrcf) then begin
    StaticText(h+=hs,v,  "Прибыль (%)",false);
  end;
  if (DiscUPrf) then begin
    StaticText(h+=hs,v,  "Цена со ск.",false);
  end;
  if (Instock2f) then begin
    StaticText(h+=hs,v,  "На складе,2",false);
  end;
  if (LeadDatef) then begin
    StaticText(h+=hs,v,  "Дата",false);
  end;
  if (CostPricef) then begin
    StaticText(h+=hs,v,  "Стоим.",false);
  end;
  if (IsWebClient) then begin
    h = 1;
  end else begin
    h = 20;
  end;
  EditFieldTL(h,v+=10, 70,"",M4UStr,ViewOnly,20,f1,false,0);
  if (InStockf) then begin
    EditFieldTL(h+=(hs+10),v, 60,"",M4Str,ViewOnly,20,f2,true,0);
  end;
  if (OrddOutf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,f3,true,0);
  end;
  if (POQtyf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,LastAcc,true,0);
  end;
  if (Shpblef) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,FirstAcc,true,0);
  end;
  if (NotRsrvdf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,Stext,true,0);
  end;
  if (GPf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,AccStr,true,0);
  end;
  if (GPPrcf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,ObjStr,true,0);
  end;
  if (DiscUPrf) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,TransStr,true,0);
  end;
  if (Instock2f) then begin
    EditFieldTL(h+=hs,v ,60,"",M4Str,ViewOnly,20,f4,true,0);
  end;
  if (LeadDatef) then begin
    EditFieldTL(h+=hs,v ,70,"",M4Date,ViewOnly,0,d1,true,0);
  end;
  if (CostPricef) then begin
    EditFieldTL(h+=hs,v ,70,"",M423Val,ViewOnly,0,vals4,true,0);
  end;
  if (IsWebClient) then begin
    h = h - 200;
    v = 1;
  end else begin
    v = 20;
  end;
  if (Varf) then begin
    ColourPushButton(h+=87,v,h+58,v+26,"DoVARMaskStock","Вар.",1001);
    //HalPushButton(h+=87,20,h+43,40,"DoVARMaskStock","Var");
    Colourf = true;
  end;
  if (Locsf) then begin
    if (Colourf) then begin
      ColourPushButton(h+=62,v,h+58,v+26,"DoLocationItem","Скл.",1001);
    end else begin
      ColourPushButton(h+=87,v,h+58,v+26,"DoLocationItem","Скл.",1001);
    end;
    //HalPushButton(h+=47,v,h+43,40,"DoLocationItem","Loc");
    Colourf = true;
  end;
  if (Statf) then begin
    if (Varf) then begin
      if (Colourf) then begin
        ColourPushButton(h+=62,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end else begin
        ColourPushButton(h+=87,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end;
      //HalPushButton(h+=47,v,h+43,40,"DoFutureStockHist","Future");
    end else begin
      if (Colourf) then begin
        ColourPushButton(h+=62,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end else begin
        ColourPushButton(h+=87,v,h+58,v+26,"DoFutureStockHist","Буд.",1001);
      end;
      //HalPushButton(h+=47,20,h+43,40,"DoFutureStockHist","Future");
    end;
    Colourf = true;
  end;
  EndWindow;
end;

window ChangeTermsNPTSSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,hm,l,v,v3,vm,vs;
  WindowBegin("Изменить условия",ChangeTermsNPTSSClass,CGother,RcType);
  UseView(RcVc);
  Modality(kModalityGlobal);//kModalityAboveParent
  SetWRect(80,200,550,460);
  vs = 20; h= 110; v = 6;
  EditFieldTL(h=110,v=6,80,"Условия",M4Code,Normal,10,FirstAcc,false,PDSClass);
  EditFieldTL(h,v+=vs,-20,"Номер счета кл.",M4Str,Normal,100,f1,false,0);
  EditFieldTL(h,v+=vs,-20,"Ответсвенный",M4Str,Normal,100,f2,false,0);
  EditFieldTL(h,v+=vs,-20,"Конт.лицо",M4Str,Normal,100,f3,false,0);
  EditFieldTL(h,v+=vs,-20,"Офиц. серийн. номер",M4Str,Normal,100,f4,false,LegalInvNrSClass);
  EditFieldTL(h,v+=vs,80,"Склад",M4Code,Normal,10,LastAcc,false,LocationSClass);
  EditFieldTL(h,v+=vs,80,"Язык",M4Str,Normal,5,Language,false,LangSClass);
  EditFieldTL(h,v+=vs,-20,"Объекты",M4UStr,Normal,60,ObjStr,false,ObjSClass);
  EditFieldTL(h,v+=vs,-20,"Валюта",M4Code,Normal,5,CurncyCode,false,CurncyCodeSClass);

  v3 = 33; vs = 37; h3 = 210; h4 = 400; hm = 280;

  vm = -160; vs = 52; h2 = 55; v3 = 48; l = 57;

  v = v + 30;
  ColourPushButton(-250,v,-250+2*h2,v+v3,"CancelAndOverrideLogout","Отмена<BR>F2",20);
  ColourPushButton(-130,v,-130+2*h2,v+v3,"ProceedChangeTermsNPTSSClass","Продолжить<BR>F1",20);
  EndWindow;
end;

window ArtRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vm,vs;
  WindowBegin("Определите список товаров",ArtRClass,CGRcW,RcType);
  if (IsEnterprise) then begin
  SetWRect(20,80,415,310);
  end else begin
  SetWRect(20,80,415,250);
  end;
  v = 6; vs = 20; h = 120;
  EditFieldTL(h,v, 150,"Код товара",   M4UStr,Normal,50,f1,false,INSClass);
  if (HasItemGroups) and (HasModSL) then begin
  EditFieldTL(h,v+=vs, 150,"Группа товаров",   M4UStr,Normal,11,f3,false,ITSClass);
  end;
  if (HasItemClassification) then begin
  EditFieldTL(h,v+=vs, 150,"Классиф. товаров", M4UStr,Normal,60,f4,false,DISClass); 
  end;
  EditFieldTL(h,v+=vs, 150,"Табл. скидок", M4UStr,Normal,60,f5,false,RebSClass); // Edit ************************** BPI Ukraine - KramarAlexandr - Wednesday, 13 December 2017 10:26:18
  if (IsEnterprise) then begin 
    h = 50;
  end;
  if (BuildProductCode!="StandardContracts") then begin 
  ButtonFrame(h,vm=(v+=41),123,3,"Сортировать по"); 
  end else begin
    ButtonFrame(h,vm=(v+=41),123,2,"Сортировать по"); 
  end;
  RadioButton(h,v,0,0,"Коду товара",flags[2]);
  if (BuildProductCode!="StandardContracts") and (HasModSL) then begin
  RadioButton(h,v+=16,1,0,"Группе",flags[2]);
  end;
  RadioButton(h,v+=16,2,0,"Наименованию",flags[2]);
  EndFrame;
  if (IsEnterprise) then begin
  ButtonFrame(h,v+=41,123,4,"Выводить товар");
  CheckBox(h,v,0,"Свободный",flags[3]);
  CheckBox(h,v+=16,0,"Складируемый",flags[4]);
  CheckBox(h,v+=16,0,"Структурирован.",flags[5]);
  CheckBox(h,v+=16,0,"Работу",flags[6]);  
  CheckBox(h2=230,v=vm,0,"Показать штрих-код",flags[7]);  
  CheckBox(h2,v+=16,0,"Включая закрытые товары",flags[10]);  
  end else begin
  CheckBox(h,v+=32,0,"Включая закрытые товары",flags[10]);   
  end;
  EndWindow;
end;


window GiftVoucherSalesTouchScreenDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer,iPad")
begin
  real h,h2,v,vs;
  real fieldh,fieldh2,keypadh,keypadh2,keypadv,fntsize;

  WindowBegin("Продажа подарочного сертификата",GiftVoucherSalesTouchScreenDClass,CGother,RcType);
//  Modality(kModalityGlobal);
  UseView(RcVc);
  SetWRect(80,200,600,510);
  AutoSizeWindow(false);
  SetupColumWithKeypadWindow(fieldh,fieldh2,keypadh,keypadh2,keypadv,vs,fntsize);// Edit ************************** BPI Ukraine - KramarAlexandr - Tuesday, 26 December 2017 09:43:48


  EditFieldTL(fieldh,v=6,100,"№ подар. сертиф.",M4Str,Normal,100,f1,false,GCSClass);

  v = keypadv;
  POSKeyPad(v,keypadh,v + 250,keypadh2,2,"NPTSPaymentToolKeyPad",kKeyPadEnter); //!!TRANSLATE
  v = v + 255;
  SplitButton(keypadh,v,keypadh2,v + vs,2,"CancelNPTSCashPaymentTClass","Cancel" & F_Label("F2"),"ProceedGiftVoucherSalesTouchScreenDClass","Продолжить" & F_Label("F1"),20); //!!TRANSLATE

  EndWindow;
end;


window ChangeLoyCardDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,v,vs;
  real fieldh,fieldh2,keypadh,keypadh2,keypadv,fntsize;

  WindowBegin("Замена карты лояльности",ChangeLoyCardDClass,CGother,RcType);
//  Modality(kModalityGlobal);
  UseView(RcVc);
  SetWRect(80,200,600,510);

  EditFieldTL(200,v=6,100,"Старая карта (Штрих код)",M4Str,Normal,100,f1,false,0);
  EditFieldTL(200,v+=16,100,"ID клиента",M4Str,Normal,100,f4,false,CUSClass);
  EditFieldTL(200,v+=16,100,"Новая карта (Штрих код)",M4Str,Normal,100,f2,false,0);
	EditFieldTL(200,v+=16,100,"Сотрудник",M4Str,Normal,100,f3,false,SalesmanSClass);
	v=v+16;
		ButtonFrame(200,v+=16,300,3,"Причина выдачи"); 
			RadioButton(200,v,0,0,"-",flags[0]);
			RadioButton(200,v+=16,1,0,"Выдача серебристой/золотой карты",flags[0]);
			RadioButton(200,v+=16,2,0,"Карта утеряна/испорчена",flags[0]);
		EndFrame;
	ColourPushButton(200,v+=20,400,v+=40,"ProceedChangeLoyCard","Продолжить",20);
  EndWindow;
end;

window SerialNoScanNPTSSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer,iPad")
begin
  real h,h2,h3,h4,hm,l,v,v3,vm,vs,xc,xc1;
  real fieldh,fieldh2,keypadh,keypadh2,keypadv,fntsize;

  WindowBegin("Сканировать серийный номер",SerialNoScanNPTSSClass,CGother,RcType);
  UseView(RcVc);
  SetWRect(80,200,600,520);
  vs = 20; l = 170;
  SetupColumWithKeypadWindow(fieldh,fieldh2,keypadh,keypadh2,keypadv,vs,fntsize);

  EditFieldTL(h=fieldh,v=6,fieldh2-20,"Серийный #",M4UStr,Normal,60,f1,false,SerialNrSClass);
  EditFieldTL(h=fieldh,v=v+20,fieldh2-20,"Сумма под. сертификата",M4Val,Normal,60,vals0,false,0);

  v = keypadv;
  POSKeyPad(v,keypadh,v + 250,keypadh2,2,"NPTSPaymentToolKeyPad",kKeyPadEnter); //!!TRANSLATE
  v = v + 255;
  SplitButton(keypadh,v,keypadh2,v + vs,2,"CancelSerialNoScanNPTSSClass","Cancel" & F_Label("F2"),"ProceedSerialNoScanNPTSSClass","Продолжить" & F_Label("F1"),20); //!!TRANSLATE

  EndWindow;
end;


window CCPayTouchScreenDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer,iPad")
begin
  real fieldh,fieldh2,keypadh,keypadh2,keypadv,v,vs,fntsize;
  record LocalMachineBlock LMb;
  record RahaxiBlock Rahaxib;

  WindowBegin("Платёж кредитной картой",CCPayTouchScreenDClass,CGother,RcType);
  Modality(kModalityGlobal);

  UseView(RcVc);
  AutoSizeWindow(false);
  SetWRect(80,200,660,510);

  SetupColumWithKeypadWindow(fieldh,fieldh2,keypadh,keypadh2,keypadv,vs,fntsize);

  vs = 40;
  EditFieldTLX(fieldh,v=6, fieldh2,"Сумма",M4Val,Normal,0,fntsize,patM4black,vals0,true,0);
  BlockLoad(LMb);
  if (LMb.CCRequireAuthCode!=0) then begin
    EnterSkip(f1);
    EditFieldTLX(fieldh,v=v+vs, fieldh2,"Авторизации",M4Str,Normal,20,fntsize,patM4black,f1,false,0);
  end;
  EditFieldTLX(fieldh,v=v+vs, fieldh2,"Валюта",M4Str,ViewOnly,5,fntsize,patM4black,CurncyCode,false,0);
  EditFieldTLX(fieldh-50,v=v+vs, fieldh2,"№ подарочной каты",M4Str,Normal,50,fntsize,patM4black,f2,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - Wednesday, 31 January 2018 11:04:20
  EditFieldTLX(fieldh-50,v=v+vs, fieldh2,"Баланс карты",M4Val,ViewOnly,50,fntsize,patM4black,vals1,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - Wednesday, 31 January 2018 11:04:20

  BlockLoad(Rahaxib);
 /* if (Rahaxib.TerminalType!=kLocalCCTerminalPCEFTPOS and Rahaxib.TerminalType!=kLocalCCTerminalBambora) then begin
    v=v+vs;
    StaticText(fieldh-100,v=v+vs,"If you have the credit card ready",false); //!!TRANSLATE
    StaticText(fieldh-100,v=v+20,"you may swipe it now.",false); //!!TRANSLATE
  end;*/

  v = keypadv;
  //POSKeyPad(v,keypadh,v + 250,keypadh2,2,"NPTSPaymentToolKeyPad",kKeyPadEnter); //!!TRANSLATE
  v = v + 250;
  SplitButton(keypadh,v,keypadh2,v + vs,2,"CancelCCPayTouchScreenDClass","Cancel" & F_Label("F2"),"ProceedCCPayTouchScreenDClass","Продолжить" & F_Label("F1"),20); //!!TRANSLATE

  EndWindow;
end;

window GCLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Выпущенные подарочные сертификаты",GCLClass,CGmlist,-);
  SetWRect(64,80,560,298);
  SpawnClass(GCDClass);
  Sizeable(-1,-1,0,0);
  UseView(GCVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Номер",SerNr,false,SerNr);
  RlColKey(94,94,"Дата",TransDate,false,TransDate);
  RlColKey(170,170,"Штрих-код",BarCode,false,TransDate);
  RlColKey(270,270,"OK",OKFlag,false,OKFlag);
  RlColKey(294,294,"Комментарий",Comment,false,Comment);
  RlCol(-70,-70,"Сумма",Amount,true);
  SearchField("Поиск");
  SpecialMenu("OK",'G',0,"OKGCLsm");
  EndWindow;
end;

window ORIDSClass:3
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Выберите счет",ORIDSClass,CGslist,-);
  SpawnClass(ORDClass);
  SetWRect(20,80,330,298);
  Sizeable(-1,-1,0,0);
  UseView(ORVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"PR Number",CustOrdNr,false,CustOrdNr);
  RlColKey(80,80,"ОК",OKFlag,false,OKFlag);
  RlColKey(110,110,"PR Date",OrdDate,false,OrdDate);
  RlColKey(180,180,"Client Number",CustCode,false,CustCode);
  if (HasLimitedAccess) then begin
    BrowseSubsetButton(-40,-15);
  end;
  SearchField("Поиск");
  EndWindow;
end;





window DBLockTClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;
  WindowBegin("Закрытие периодов",DBLockTClass,CGSbl,DBLockType);
  SetBlid(DBLockBlock);
  if (HasModPL or HasModSL or HasModIN) then begin
    SetWRect(64,80,509,300);
    Tile(0,50,false,"",TRLock);
    StaticText(20,v=20,"Внимание: это действие не может быть отменено",false);
    TileButton(1,"Закрыть");
    TileButton(2,"Предупредить");
    if (IsEnterprise) then begin
      TileButton(3,"Проч.");
    end;
    h = 230; v = 6;
    Tile(1,130,false,"",TRLock);
    EditField(h,v,82,"Закрыть записи",Normal,TRLock,false,PasteCurDate);
    
    EditField(h,v+=20,-20,"Пользователи исключение",Normal,ExUsers,false,UserSClass);// Edit ************************** BPI Ukraine - KramarAlexandr - 03, 25 07 2018 y. о 12:58:22
    EditField(h,v+=20,-20,"Пользователи исключение 7 дней",Normal,ExUsersMoreDays,false,UserSClass);// Edit ************************** BPI Ukraine - KramarAlexandr - 03, 25 07 2018 y. о 12:58:22
    
    if (HasModPL) then begin
      EditField(h,v+=20,82,"Закрыть сч/ф поставщиков",Normal,PLLock,false,PasteCurDate);
    end;
    if (HasModSL) then begin
      EditField(h,v+=20,82,"Закрыть сч/ф",Normal,SLLock,false,PasteCurDate);
    end;
    if (HasModCRM) then begin
      EditField(h,v+=20,82,"Закр. задачи",Normal,ActLock,false,PasteCurDate);
    end;
    if (HasModIN or HasModSL or HasModPL or HasModExp) then begin
      EditField(h,v+=20,82,"Закрыть другие",Normal,OtherLock,false,PasteCurDate);
    end;
    if (IsEnterprise) then begin
      CheckBox(20,v+=24,0,"Запретить созд. новых записей с датами, позднее тек. даты",DisallowFutureDate);
    end;
    Tile(2,160,false,"",TRWarn);
    EditField(h,v=6,82,"Предупреждать о создании записи",Normal,TRWarn,false,PasteCurDate);
    if (HasModPL) then begin
      EditField(h,v+=20,82,"Предупреждать о сч/ф поставщиков",Normal,PLWarn,false,PasteCurDate);
    end;
    if (HasModSL) then begin
      EditField(h,v+=20,82,"Предупреждать о сч/ф",Normal,SLWarn,false,PasteCurDate);
    end;
    if (HasModCRM) then begin
      EditField(h,v+=20,82,"Предупр. задачи",Normal,ActWarn,false,PasteCurDate);
    end;
    if (HasModIN or HasModSL or HasModPL or HasModExp) then begin
      EditField(h,v+=20,82,"Предупреждать о других",Normal,OtherWarn,false,PasteCurDate);
    end;
    if (IsEnterprise) then begin
      CheckBox(20,v+=24,0,"Предупреждать о создании новых записей с датами позже чем в сущ. записях",WarnOldRecords);
      CheckBox(20,v+=16,0,"Предупреждать о создании новых записей с датами транз. позже чем тек. дата",WarnFutureDate);
      Tile(3,50,false,"",TRNoPrel);
      EditField(h,v=6,82,"Не предв. транзакции",Normal,TRNoPrel,false,0);
      EditField(h,v+=20,82,"Разр. удаление записей до",Normal,DeleteBeforeDate,false,0);
    end else begin
      if (HasLocalization("PRT")) then begin
        CheckBox(20,v+=24,0,"Предупреждать о создании новых записей с датами транз. позже чем тек. дата",WarnFutureDate);
      end;
    end;
  end else begin
    SetWRect(64,80,400,200);
    if (HasModNL) then begin
      EditField(h=160,v=6,82,"Блокировать сч/ф",Normal,SLLock,false,0);
      EditField(h,v+=20,82,"Предупреждвать в сч/ф",Normal,SLWarn,false,0);
      EditField(h,v+=20,82,"Блокировать записи",Normal,TRLock,false,0);
      EditField(h,v+=20,82,"Пердупреждать в записях",Normal,TRWarn,false,0);
    end;
  end;
  EndWindow;
end;

window ForceQuitClass:3
  wtag("language","ENG"), wtag("product","*"), wtag("productcode","*"), wtag("device","android_tab,android,computer,iPad,iPhone")
begin
  real h,v;
  WindowBegin("",ForceQuitClass,CGother,-);
  SetWRect(20,262,20+468,262+68);
  h = 335; v = 40;
  if (GuiType==kGuiAndroid) then begin
    h = 135;
  end;
  PushButton(h,v,h+60,v+20,ToolRestartApplication,"Restart");
  PushButton(h+65,v,h+125,v+20,ToolRestore,"Quit");
  WhiteBackground;
  Modality(kModalityGlobal);
  WType(1);
  EndWindow;
end;




window OSDSerialTClass:2
  wtag("language","ENG"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v,vs,h;
  WindowBegin("OS&D Codes",OSDSerialTClass,CGHbl,HBlRecType);
  SetBlid(OSDSerialBock);
  SetWRect(64,80,620,298);
  h = 8; v = 20;
  MatrixBegin(h,v,-25,-1,-,99);
  MatCol(1,25,"Fr",0,FrNr,false,0);
  MatCol(1,125,"To",0,ToNr,false,0);
  MatCol(1,225,"Cur",0,CurNr,false,0);
	MatCol(1,325,"Description",0,Description,false,0);
	EndMatrix;
  EndWindow;
end;








window ReserveWEBTClass:1  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger12:09 12.10.2018
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v;
  WindowBegin("Настройки синхронизации CRM",ReserveWEBTClass,CGSbl,-);
  SetWRect(20,80,527,350);
  SetBlid(WEBReservStock);
	 EditField(150,v,300,"Склады для резервации",Normal,ResStockSet,false,LocationSClass);
  EndWindow;
end; 

window ConsolCompTClass:1  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger12:09 12.10.2018
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v;
  WindowBegin("Настройка консолидированой компании",ConsolCompTClass,CGSbl,-);
	SetBlid(ConsCompBlock);
  SetWRect(64,80,400,400);
  Sizeable(-1,-1,0,0);
	 CheckBox(50,v,0,"Конс. компания",OKFlag);
	 if(UserCanAction("ViewPOrDisable",false) or CurrentUser=="SA" or CurrentUser=="SA1") then begin
		CheckBox(50,v+=20,0,"Запрет создания поступлений",OKFlagPOr);
	 end;
	 CheckBox(50,v+=20,0,"15% фрахт на товар консигнации ",ConsAddShipCost);
  EndWindow;
end; 




window SellerDataTClass:1  // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger 12:11 02.10.2019
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Информация для контракта",SellerDataTClass,CGSbl,-);
	SetWRect(64,80,539,500);
	SetBlid(SellerDataBlock);
  vs = 20; h=130;
  EditField(h,vm=(v=6),270,"Реквизиты банка 1",Normal,String01,false,0);
  EditField(h,v+=vs,270,"Реквизиты банка 1",Normal,String02,false,0);
  EditField(h,v+=vs,270,"Реквизиты банка 1",Normal,String03,false,0);
  EditField(h,v+=vs,270,"Реквизиты банка 1",Normal,String04,false,0);
  EditField(h,v+=vs,270,"Реквизиты банка 1",Normal,String05,false,0);
  EditField(h,v+=vs,270,"Реквизиты банка 1",Normal,String06,false,0);
  EditField(h,v+=vs,270,"Реквизиты банка 1",Normal,String07,false,0);
  EditField(h,v+=vs,270,"Адрес продавца",Normal,String08,false,0);
  // EditField(h,v+=vs,65,"",Normal,String09,false,0);
  EndWindow;
end; 





window SRTClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Серии номеров по умолчанию",SRTClass,CGSbl,SRType);
  SetWRect(64,80,539,333);
  SetBlid(SRBlock);
  vs = 20; h=130;
  EditField(h,vm=(v=6),65,"Счета",Normal,LastOrdNr,false,0);
  EditField(h,v+=vs,65,"Отгрузка",Normal,LastShipNr,false,0);
  EditField(h,v+=vs,65,"Сч/ф клиентам",Normal,LastInvNr,false,0);
  EditField(h,v+=vs,65,"Сч/ф поставщиков",Normal,LastVINr,false,0);
  EditField(h,v+=vs,65,"Поступления",Normal,LastPurNr,false,0);
  EditField(h,v+=vs,65,"Счета пени",Normal,LastIntNr,false,0);
  EditField(h,v+=vs,65,"Контакты",Normal,LastCustCode,false,0);
  EditField(h,v+=vs,65,"Поставщик",Normal,LastVECode,false,0);
  EditField(h,v+=vs,65,"Товары",Normal,LastArtCode,false,0);
  if (StandardHansa==false) then begin
    EditField(h,v+=vs,65,"Накопительне карты",Normal,LastLoyaltyCardNr,false,0);
    EditField(h,v+=vs,65,"Счёт ресторана",Normal,LastRestAccNr,false,0);
    EditField(h,v+=vs,65,"Групп.резрв.",Normal,LastJobNr,false,0);
    EditField(h,v+=vs,65,"Посл. заезда гостей",Normal,GuestArrivalSequence,false,0);
    EditField(h,v+=vs,65,"Декларация #VAT#",Normal,LastVATDeclCode,false,0); 
    EditField(h=330,v=vm,65,"Платежи клиентов",Normal,LastPayNr,false,0);
    EditField(h,v+=vs,65,"Записи операций",Normal,LastTRNr,false,0);
  end else begin
    EditField(h,v+=vs,65,"Платежи клиентов",Normal,LastPayNr,false,0);   // From dict
    EditField(h=330,v=vm,65,"Записи операций",Normal,LastTRNr,false,0);   // From dict
  end;
  EditField(h,v+=vs,65,"Кредитные сч/ф",Normal,LastCredInvNr,false,0);
  EditField(h,v+=vs,65,"Кредитные сч/ф пост.",Normal,LastCredVINr,false,0);
  EditField(h,v+=vs,65,"Платежи пост.",Normal,LastOPNr,false,0);
  EditField(h,v+=vs,65,"Предложения",Normal,LastQTNr,false,0);
  EditField(h,v+=vs,65,"Возможности",Normal,LastOYNr,false,0);
  EditField(h,v+=vs,65,"Сч/ф по контрактам",Normal,LastCOInvNr,false,0);
  EditField(h,v+=vs,65,"Сч/ф POS",Normal,LastIVCashNr,false,0);
  EditField(h,v+=vs,65,"Кассовые ордера",Normal,LastCashInvNr,false,0);
  EditField(h,v+=vs,65,"Заказ поставщику",Normal,LastPONr,false,0);
  if (IsEnterprise) then begin
    EditField(h,v+=vs,65,"Cтандарт. рез.",Normal,LastDaughterJobNr,false,0);
    EditField(h,v+=vs,65,"Последний товар",Normal,LastSKU,false,0);
  end;

  EndWindow;
end;


window BPISRTClass:1
  wtag("language","ENG"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Number Series Defaults",BPISRTClass,CGSbl,-);
  SetWRect(64,80,509,333);
  SetBlid(BPISRBlock);
  vs = 20; h=130;
  EditField(h,vm=(v=6),65,"Model",Normal,LastModelCode,false,0);
  EditField(h,v+=vs,65,"Colour",Normal,LastColourCode,false,0);
  
  EndWindow;
end;


window FreePosSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Paste Position",FreePosSClass,CGslist,-);
  SetWRect(240,80,700,298);
  Sizeable(-1,-1,0,0);
  UseView(PosVc);
  SpawnClass(PosDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,2,"Code",Code,false,MainKey);
  RlColKey(100,100,"Area",LocArea,false,LocArea);
  RlColKey(200,200, "Comment",Comment,false,Comment);
  RlColKey(300,300,"Location",Location,false,Location);
  RlColKey(400,400,"Height",Height,false,Height);
  SearchField("Search");
  EndWindow;
end;

window PosSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Paste Position",PosSClass,CGslist,-);
  SetWRect(240,80,700,298);
  Sizeable(-1,-1,0,0);
  UseView(PosVc);
  SpawnClass(PosDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,2,"Code",Code,false,MainKey);
  RlColKey(100,100,"Area",LocArea,false,LocArea);
  RlColKey(200,200, "Comment",Comment,false,Comment);
  RlColKey(300,300,"Location",Location,false,Location);
  RlColKey(400,400,"Height",Height,false,Height);
  SearchField("Search");
  EndWindow;
end;

window UsedPosSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Paste Position",UsedPosSClass,CGslist,-);
  SetWRect(240,80,700,298);
  Sizeable(-1,-1,0,0);
  UseView(PosVc);
  SpawnClass(PosDClass);
  RecordList(4,17,-21,-39);
  RlColKey(4,2,"Code",Code,false,MainKey);
  RlColKey(100,100,"Area",LocArea,false,LocArea);
  RlColKey(200,200, "Comment",Comment,false,Comment);
  RlColKey(300,300,"Location",Location,false,Location);
  RlColKey(400,400,"Height",Height,false,Height);
  SearchField("Search");
  EndWindow;
end;	


window ReFillBPIclassVClass:1
  wtag("language","ENG"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  WindowBegin("Замена/возврат классификаторов",ReFillBPIclassVClass,CGMnt,RcType);
  SetWRect(20,80,400,350);
  vs = 20;h = 200; v = 26;
  EditFieldTL(h,v+=20,150,"Old BPICode",M4UStr,Normal,41,f1,false,0);
	EditFieldTL(h,v+=20,150,"New BPICode (Жесткая перезапись!)",M4UStr,Normal,41,f2,false,0);
	CheckBox(h,v+=20,0,"По всем компаниям",flags[0]);
  EndWindow;
end;


window NonBlankYearCopyToBlankHigh:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;
  WindowBegin("NonBlank Year Copy To Blank High For All Companies",NonBlankYearCopyToBlankHigh,CGMnt,RcType);
  SetWRect(20,80,440,150);
  h=100;
  EndWindow;
end;


window OutOrderVClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("",OutOrderVClass,CGMnt,RcType);
  SetWRect(20,80,400,200);
	if(CurrentCompany==9) then begin
		EditFieldTL(150,6,100,"Brand",M4UStr,Normal,60,f1,false,DI2SClass);
	end else begin
		EditFieldTL(150,6,100,"Brand",M4UStr,Normal,60,f1,false,BPIBrandSClass);
	end;
  EndWindow;
end;

window CCColVClass:1
wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("",CCColVClass,CGMnt,RcType);
  SetWRect(20,80,400,200);
		EditFieldTL(150,6,100,"Колекция для правки",M4UStr,Normal,60,f1,false,0);
		EditFieldTL(150,30,100,"Колекция исправленная",M4UStr,Normal,60,f2,false,0);
  EndWindow;
end;

window CompObjLClass:1 //Edit_________________ABR 12:25 13.11.18
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Объекты по компаниям",CompObjLClass,CGmlist,-);
	UseView(CompObjVc);
	spawnclass(CompObjDClass)
	Sizeable(-1,-1,0,0);
	SetWRect(20,80,690,400);
	RecordList(4,17,-21,-39);
	RlColKey(4,4,"Код",Code,false,Code);
	RlCol(60,60,"Комментарий",Comment,false);
  EndWindow;
end;

window CompObjDClass:1 //Edit_________________ABR 12:25 13.11.18
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Объекты по компаниям",CompObjDClass,CGview,-);
	AutoSizeWindow(false);
	UseView(CompObjVc);
	Sizeable(-1,-1,0,0);
	SetWRect(20,80,690,400);
	EditField(60,20,40,"Код",Normal,Code,false,0);
	EditField(200,20,250,"Коментарий",Normal,Comment,false,0);
	MatrixBegin(20,60,-25,-1,-,99);
  MatCol(1,20,"Company",0,Company,false,0);
  MatCol(1,60,"Object",0,Object,false,objSClass);
  EndWindow;
end;

window CompObjSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("",CompObjDClass,CGslist,-);
  SetWRect(20,80,750,355);
  Sizeable(-1,-1,0,0);
  UseView(CompObjVc);
  RecordList(4,17,-21,-39);
	RlColKey(4,4,"Код",Code,false,Code);
	RlCol(60,60,"Комментарий",Comment,false);
  SearchField("Найти");
  EndWindow;
end;


window ORLClass:3
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  Integer pos,rn;
  

  WindowBegin("Счета клиентам",ORLClass,CGmlist,-);
  SpawnClass(ORDClass);
  SetWRect(20,80,1000,298);
  Sizeable(-1,-1,0,0);
  UseView(ORVc);
  FormName(PrintORL);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"№",SerNr,false,SerNr);
  RlColKey(79,79,"ОК",OKFlag,false,OKFlag);
  pos = 111;
	if(CurrentCompany!=29)then begin
		if (HasModIN) then begin
			RlColKey(pos,pos,"Отгр",ShipMark,false,ShipFlag);
			pos = pos + 32;
		end;
		if (HasModSL) then begin
			RlColKey(pos,pos,"Отфк",InvMark,false,InvFlag);
			pos = pos + 32;
		end;
	end;
	if(CurrentCompany==29)then begin // _-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_- Anton Preisinger15:54 04.02.2019
		RlCol(pos,pos,"Пригот",ECORLocCompl,false);
		pos = pos + 40;
		RlCol(pos,pos,"Дос-ка",ECLocSHOK,false);
		pos = pos + 40;
		RlCol(pos,pos,"Собран",ECORCompl,false);
		pos = pos + 40;
		RlCol(pos,pos,"Отправ",ECSHOK,false);
		pos = pos + 40;
		RlCol(pos,pos,"Отмена",Closed,false);
		pos = pos + 40;
		RlCol(pos,pos,"С-выв.",ECORSelfDelf,false);
		pos = pos + 40;
		RlCol(pos,pos,"Успешн.",ECORSuccOK,false);
		pos = pos + 40;
	end else begin
		RlCol(pos,pos,"Закр",Closed,false);
		pos = pos + 32;
	end;
  RlColKey(pos,pos,"Дата заказа",OrdDate,false,OrdDate);
  pos = pos + 80;
  if (HasMultiLocations) then begin
    RlCol   (pos,pos,"Местоположение",Location,false);
    pos = pos + 60;
  end;
  RlColKey(pos,pos,"Номер заказа клиента",CustOrdNr,false,CustOrdNr);
  pos = pos + 80;
  RlColKey(pos,pos,"Клиент",CustCode,false,CustCode);
  pos = pos + 60;
  RlColKey(pos,pos,"Наим.",Addr0,false,Name);
  if (IsEnterprise) then begin
    if (AcceptanceStatusColumnTest("ORVc")) then begin 
      CalculatedColumn(-300,-300,"Подтв.","ORLClassAcceptanceStatus",false);
    end;
    RlColKey(-260,-260,"Класс",OrderClass,false,OrderClass);
    RlColKey(-215,-215,"Итого",Sum4,true,Sum4);
		if(CurrentCompany!=28)then begin
			RlCol(-135,-135,"Аванс",DownPaySent,true);
		end else begin
			CalculatedColumn(-135,-135,"Аванс.","AdvanceforIdeaCorrections",true);
		end;
  end else begin
    RlColKey(-115,-115,"ИТОГО",Sum4,true,Sum4);
  end;
  
  CalculatedColumn(-80,-80,"Бренд","GetBrandForOR",false);
  
  if (HasLimitedAccess) then begin
    BrowseSubsetButton(-40,-15);
  end;
  SearchField("Поиск");
  if (GuiType==kGuiMetro) then begin
    rn = 0;
    RowMenuBegin("");
    if (HasModIN) then begin
      RowMenuItem(rn,"Создать отгрузку",'L','L',4300,"SHFromORLsm"); rn = rn + 1;  
    end;
    RowMenuItem(rn,"Создать счет-фактуры",'L','L',4300,"IVFromORLsm"); rn = rn + 1;  
    if (HasDownpayments) then begin
      RowMenuItem(rn,"Созжать счет-фактуру на аванс",'o','o',4300,"DownPayFromORLsm"); rn = rn + 1;  
    end;
    RowMenuItem(rn,"Статус счет",'r','r',4300,"ORStatusORLsm"); rn = rn + 1;  
    if (HasModPO) then begin
      RowMenuItem(rn,"Создать заказ поставщику",' ',' ',4300,"POFromORLsm"); rn = rn + 1;  
    end;
    if (HasModCRM) then begin
      RowMenuItem(rn,"Создать деятельность",'c','c',4300,"ActFromORLsm"); rn = rn + 1;
    end;
    if (IsEnterprise) then begin
      RowMenuItem(rn,"Отметить счет как сфактурированный",' ',' ',4300,"ORToInvORLsm"); rn = rn + 1;  
    end;
    EndRowMenu;
  end else begin
    SpecialMenu("Статус заказа",'r',3,"ORStatusORLsm");         
    if (IsEnterprise) then begin
      SpecialMenu("По заказу выставлен счёт",' ',6,"ORToInvORLsm");         
    end;
    SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);         
    if (HasModIN) then begin
      SpecialMenu("Создать отгрузку",'L',0,"SHFromORLsm");
    end;
    SpecialMenu("Создать реализацию",'F',1,"IVFromORLsm");
    if (HasDownpayments) then begin
      SpecialMenu("Создать счет-фактуру на аванс",'o',2,"DownPayFromORLsm");
    end;
    if (HasModPO) then begin
      SpecialMenu("Создать заказ поставщику",' ',4,"POFromORLsm");
    end;
    if (HasModCRM) then begin
      SpecialMenu("Создать деятельность",'c',5,"ActFromORLsm");
    end;
  end;
  EndWindow;
end;




window SHJRClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vm,vs;
  WindowBegin("Определите журнал отгрузки",SHJRClass,CGRcW,RcType);
  SetWRect(20,80,440,310);
  vs = 20; h = 150; v = 6-vs;
  PeriodField(h,v+=vs,"Период");
  EditFieldTL(h,v+=vs,150,"Номер отгрузки",M4Str,Normal,30,f1,false,0);
  EditFieldTL(h,v+=vs ,150,"Клиент",M4UStr,Normal,60,f2,false,CUSClass);
  EditFieldTL(h,v+=vs ,150,"Номер счета",M4Str,Normal,20,TransStr,false,0);
  if (IsEnterprise) then begin
    EditFieldTL(h,v+=vs ,150,"Способ отгрузки",M4UStr,Normal,30,f3,false,DMSClass);
  end;
  if (HasMultiLocations) then begin
    EditFieldTL(h,v+=vs ,150,"Склад",M4UStr,Normal,30,f4,false,LocationSClass);
  end;
  if (IsEnterprise) then begin
    EditFieldTL(h,v+=vs,150,"Группа складов",M4Code,Normal,10,f6,false,LocGrSClass); 
    EditFieldTL(h,v+=vs,150,"Классификация склада",M4List,Normal,200,f7,false,LocClSClass); 
  end;
  if (IsEnterprise) then begin
    EditFieldTL(h,v+=vs ,150,"Товар",M4UStr,Normal,41,LastAcc,false,INSClass);
    StaticText(h+160,v+12, "Только в подробном",false);
  end;
  if (HasItemGroups) then begin
    EditFieldTL(h,v+=vs ,150,"Группа товара",M4UStr,Normal,21,Stext,false,ITSClass);
    StaticText(h+160,v+12, "Только в подробном",false);
  end;
  if (HasItemClassification) then begin
    EditFieldTL(h,v+=vs,150,"Классификация товара",M4UStr,Normal,100,f8,false,DISClass);
    StaticText(h+160,v+12, "Только детально",false);
  end;  
  if (IsEnterprise) then begin
    EditFieldTL(h,v+=vs ,150,"Класс заказа",M4UStr,Normal,5,f5,false,OrderClassSClass);
  end;
  ButtonFrame(h=60,vm=(v+=40),123,2,"Функция");
  RadioButton(h,v,0,0,"Сводный",ArtMode);
  RadioButton(h,v+=16,1,0,"Подробно",ArtMode);
  ButtonFrame(h+=148,v = vm,123,2,"Показать:");
	if(CurrentCompany!=29)then begin
		CheckBox(h,v,0,"неутвержденные",flags[1]);
		CheckBox(h,v+=16,0,"утвержденные",flags[2]);
	end else begin
		CheckBox(h,v,0,"неотгруженные",flags[1]);
		CheckBox(h,v+=16,0,"отгруженные",flags[2]);
	end;
  CheckBox(h=60,v+=28,0,"Каждый клиент с новой страницы",flags[3]);
  EndWindow;
end;

window LCMemberLevelDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;
  WindowBegin("Статус членства",LCMemberLevelDClass,CGview,-);
  SetWRect(74,80,500,150);
  UseView(LCMemberLevelVc);
  EditField(h=120,v=6, 100,"Код",Normal,Code,false,0);
  EditField(h,v+=20,-40,"Комментарий",Normal,Comment,false,0);
  EditField(h,v+=20,-40,"CRMID",Normal,CRMid,false,0);
  EndWindow;
end;

window BigPULClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real pos;

  WindowBegin("Поступления товаров консолидированное",BigPULClass,CGmlist,PUView);
  SpawnClass(BigPUDClass);
  SetWRect(20,80,800,298);
  Sizeable(-1,-1,0,0);
  UseView(BigPUVc);
  FormName(PrintPUL);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,"Номер",SerNr,false,SerNr);
  RlColKey(79,79,"ОК",OKFlag,false,OKFlag);
  RlColKey(111,111,"Дата",TransDate,false,TransDate);
  pos = 191;
  if (HasMultiLocations) then begin
    RlColKey(pos,pos,"Склад",Location,false,Location);
    pos = 251;
  end;
  if (HasModPO) then begin
		if(currentcompany!=29)then begin
			RlColKey(pos,pos,"Номера заказов",FromOrds,false,FromOrds);
		end else begin
			RlColKey(pos,pos,"Номера заказов",FromOrds,false,FromOrds);
		end;
    pos = 331;
  end;
  RlColKey(391,391,"Наим.",VEName,false,VEName);
  RlColKey(531,531,"Комментарий",Comment,false,Comment);
  if (AcceptanceStatusColumnTest("PUVc")) then begin 
    CalculatedColumn(-40,-40,"Подтв.","PULClassAcceptanceStatus",false); 
  end;
  if (HasAdvancedStock) then begin
    RlCol(-1,-1,"",Invalid,true);
  end;
  if (HasLimitedAccess) then begin
    BrowseSubsetButton(-40,-15);
  end;
  SearchField("Поиск");
  if (GuiType==kGuiMetro) then begin
    RowMenuBegin("");
    RowMenuItem(0,"OK",'G','G',4312,"PUOKLsm");  
    EndRowMenu;
  end else begin
    SpecialMenu("OK",'G',0,"PUOKLsm");
  end;
  EndWindow;
end;

window BigPUDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,t,v,vm,vs;
  string 255 label;
  record CYBlock CYb;
  Integer tilenr;
  Integer f,flipnr;

  BlockLoad(CYb);
  WindowBegin("Поступление товаров консолидированное",BigPUDClass,CGview,-);
	if (CompanyIsJWLikeCompany(currentcompany)) then begin
		SetWRect(20,80,850,620);
	end else begin
		SetWRect(20,80,850,460);
	end;
	
	Sizeable(-1,-1,0,0);
	
  UseView(BigPUVc);
  ActiveFieldOnNew("VECode");      
  FormName(BigPurchaseForm);
  Tile(0,74,false,"",TransDate);
  EditField(75,vm=(v=6),95,"Но.",Normal,SerNr,false,TSerSClass);
  //EditField(75,v+=20,95,"Поставщик",Normal,VECode,false,VESClass);
  EnterSkip(TransDate);
	EditField(h=255,v=vm,-40,"Коммент.",Normal,Comment,false,0); 
  CheckBox(h4=-100,v+=20,0,"Принять",OKFlag);

	//CheckBox(-400,v,0,"Отменить проверки на классификации",ItemClassifCheck);
  //CheckBox(h4,v+=16,0,"Цена вкл. НДС",InclVAT);
	ColourPushButton(h+210,v+=26,h+300,v+40,"CollectItemsFromOrd","Собрать товары",2);
	EditField(h,v+20,200,"Заказы",Normal,FromOrds,false,CompPOSClass);
  tilenr = 1;
  TileButton(tilenr,"Условия"); tilenr = tilenr + 1; 
  TileButton(tilenr,"Товары"); tilenr = tilenr + 1; 
	
  if (HasMultiCurrency) then begin
    //TileButton(tilenr,"Валюта"); tilenr = tilenr + 1; 
  end;
  if (IsEnterprise) then begin
    TileButton(tilenr,"Доп. издержки"); tilenr = tilenr + 1; 
    //TileButton(tilenr,"Фрахт"); tilenr = tilenr + 1; 
    //TileButton(tilenr,"Коммент."); tilenr = tilenr + 1; 
  end;
  tilenr = 1;

  vs = 20; h1 = 110; h2 = 300; h3 = 550; h4 = -100;
  Tile(tilenr,70,false,tilenr,TransDate); tilenr = tilenr + 1;
  EditField(h1,vm=(v=6),82,"Дата опер.",Normal,TransDate,false,PasteCurDate);
  if (IsEnterprise==false) then begin
    EditField(h2,v,-20,"Коммент.",Normal,Comment,false,0); 
  end;
  if (HasMultiLocations) then begin
  EditField(h1,v+=vs,82,"Склад",Normal,Location,false,LocationSClass);
  end;
	label = UserDefined("AccBlock","PUCost1");
	if (blank(label)) then begin label = "Затр.т.конс"; end;
	CheckBox(h2-100,v-vs,0,"Подтв. " & label,ApprovedCost1);
	label = UserDefined("AccBlock","PUCost2");
	if (blank(label)) then begin label = "Таможня.конс."; end;
	CheckBox(h2+100,v-vs,0,"Подтв. " & label,ApprovedCost2);
	label = UserDefined("AccBlock","PUCost3");
	if (blank(label)) then begin label = "Затр. 3"; end;
	CheckBox(h2+300,v-vs,0,"Подтв. " & label,ApprovedCost3);
	label = UserDefined("AccBlock","PUCost4");
	if (blank(label)) then begin label = "Затр. 4"; end;
	CheckBox(h2-100,v,0,"Подтв. " & label,ApprovedCost4);
	label = UserDefined("AccBlock","PUCost5");
	if (blank(label)) then begin label = "Затр. 5"; end;
	CheckBox(h2+100,v,0,"Подтв. " & label,ApprovedCost5);
  if (IsEnterprise) then begin
  //EditField(h1,v+=vs,82,"Маршрут",ViewOnly,Sorting,false,0);
  end;

  if (IsEnterprise) then begin
		if(currentcompany!=28)then begin
			if(currentcompany==29)then begin
				//EditField(h2,v+=vs,135,"№ заказа Btrx",ViewOnly,FreightCompanyRegNr,false,0);
			end else begin
				//EditField(h2,v+=vs,135,"№ заказа пост.",ViewOnly,PONr,false,0);
			end;
		end else begin
			//EditField(h2,v+=vs,135,"№ заказа пост.",ViewOnly,IDPONr,false,0);
		end;
		//EditField(h2,v+=vs,135,"Договор постав.",ViewOnly,POCOSerNr,true,POCOSClass);
		//EditField(h3,v=vm,80,"Вид заказа пост.",ViewOnly,PUClass,false,0);
		if(currentcompany==28)then begin 
			//EditField(h3,v+=vs,80,"№ зак.пост.(Hansa)",ViewOnly,PONr,false,0);
		end;
  end;
  if (HasLanguages) then begin
  //EditField(h3,v+=vs,80,"Язык",Normal,LangCode,false,LangSClass);
  end;
//  CheckBox(h4,v=vm,0,"Price Incl. #VAT#",InclVAT);
  EnterSkip(Math);
  Tile(tilenr,220,true,tilenr,Math); tilenr = tilenr + 1;
  v = 24;
	if(currentcompany==28)then begin
		MatrixBegin(4,v,-50,-85,-,1000);
	end else begin
		if (HasSerialNumbers) then begin
			MatrixBegin(4,v,-50,-50,-,1000);
		end else begin
			MatrixBegin(4,v,-25,-50,-,1000);
		end;
	end;
  MatTypedRow(stp);
  MatOverStrike(ovst);
  Flip(0);
  MatCol(1,26,"Товар",0,ArtCode,false,INSClass);
	MatCol(1,96,"Код товара",0,VEItemCode,false,INSClass);
//  MatCol(1,84,"Var",0,VARList,true,VARSClass);
//  MatCol(1,144,"Qty",0,Quant,true,0);
  if (HasVarieties) then begin
		MatCol(1,164,"Кол-во",0,Quant,true,MATVARINSClass);
  end else begin
    MatCol(1,164,"Кол-во",0,Quant,true,0); 
  end;
	MatCol(1,194,"Описание",0,Spec,false,0); 
	MatCol(1,294,"Тип товара",0,ItemConsgType,false,SetSClass); 
  EnterSkip(Spec);
	flipnr = 1;
  Flip(flipnr); flipnr = flipnr + 1;
  //MatText(t=3,28,"Подпись",true);
  //MatCol(t,100,"",0,Sign,false,0);
  //MatText(t,160,"Дата исправления",true);
  //MatCol(t,290,"Дата обн.",0,UpdDate,false,0);
  
  //if (CompanyIsJWLikeCompany(currentcompany)) then begin
    //MatColTL(1,144,"Ед.",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass); 
    MatCol(1,350,"Склад",0,Location,false,LocationSClass);
		//MatCol(1,280,"Место",0,Position,false,0);		
    MatCol(1,-430,"Серийный номер",0,SerialNr,false,SerialNrSClass); 
    //MatCol(1,-320,"Тип склада",0,StockType,false,SetSClass); 
  //end else begin
  //MatColTL(1,164,"Ед.",0,M4Code,ViewOnly,5,UnitCode,false,UnitSCLass);
  //MatCol(1,204,"Наим.",0,Spec,false,0);
  //end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-340,"Цена",0,UPrice,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-290,"Себестоимость",0,CostPrice,true,0); end;
	 if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-230,"Валюта",0,CurrencyItem,true,0); end;
  if (UserCanAction("ViewMoneyInf",true))then begin MatCol(1,-180,"Сумма",0,Sum,true,0); end;
	MatColTL(1,-110,"Заказ №",0,M4Str,ViewOnly,0,FromOrdNr,true,0)
	MatColTL(1,-60,"Строка",0,M4Int,ViewOnly,0,FromOrdrowNr,true,0)
  //if (IsEnterprise) then begin
  Flip(flipnr); flipnr = flipnr + 1;
	MatCol(1,370,"Место",0,Position,false,0);	
	MatCol(1,420,"Вес",0,WeightRow,false,0);	
	MatCol(1,460,"Камень",0,CaratRow,false,0);	
	MatCol(1,530,"Россыпь",0,CaratplacerRow,false,0);	
	MatCol(1,-140,"Фрахт",0,ShipCost,true,0); 
	MatCol(1,-70,"Таможня",0,CustomsCost,true,0);	
  
  Flip(flipnr); flipnr = flipnr + 1;
  //MatCol(1,144,"Описание",0,Spec,false,0); 
	MatCol(1,-420,"Фрахт",0,ShipCost,true,0);
  MatCol(1,-360,"Таможня",0,CustomsCost,true,0);
  label = UserDefined("AccBlock","PUCost1");
  if (blank(label)) then begin label = "Затр.т.конс";end;
  MatCol(1,-300,label,0,RowCost1,false,0);
  label = UserDefined("AccBlock","PUCost2");
  if (blank(label)) then begin label = "Таможня конс.";end;
  MatCol(1,-240,label,0,RowCost2,false,0);
  label = UserDefined("AccBlock","PUCost3");
  if (blank(label)) then begin label = "Затр. 3";end;
  MatCol(1,-180,label,0,RowCost3,false,0);
  label = UserDefined("AccBlock","PUCost4");
  if (blank(label)) then begin label = "Затр. 4";end;
  MatCol(1,-120,label,0,RowCost4,false,0);
  label = UserDefined("AccBlock","PUCost5");
  if (blank(label)) then begin label = "Затр. 5";end;
  MatCol(1,-60,label,0,RowCost5,false,0);
	
  InsertRowTest;
  DeleteRowTest;
  EndMatrix;
	// CheckBox(50,-61,0,"15% таможня на товар консигнации",ConsManualCost);
	EditField(50,-41,40,"Валюта",Normal,CurrencyF,true,CurncyCodeSClass);
	EditField(50,-21,40,"Валюта",Normal,CurrencyT,true,CurncyCodeSClass);
	EditField(160,-41,70,"Фрахт",Normal,ShipCost,true,0);
	if(currentuser=="SA")then begin
		CheckBox(240,-41,0,"",ExportFlag);
	end;
	CheckBox(451,-41,0,"Подтв. фрахт",ApprovedShipCost);
	EditField(160,-21,70,"Таможня",Normal,CustomsCost,true,0);
	if(currentuser=="SA")then begin
		CheckBox(240,-21,0,"",ExportedFlag);
	end;
	CheckBox(451,-21,0,"Подтв. таможню",ApprovedCustomsCost);
	EditField(300,-41,50,"Курс",Normal,FrRateF,true,0);
	EditField(365,-41,50,":",Normal,ToRateF,true,0);
	EditField(300,-21,50,"Курс",Normal,FrRateT,true,0);
	EditField(365,-21,50,":",Normal,ToRateT,true,0);
  vs = 20;
  v = 18; 
  if (flipnr>2) then begin
    for (f=1;f<flipnr;f=f+1) begin
      VTab(-35,v,-16,v+vs,ToolFlip,f,chr(asc("A") + f - 1)); 
      v = v + vs;
    end;
  end;
	

    Tile(tilenr,120,false,tilenr,Cost1); tilenr = tilenr + 1;
		vs = 20;
		label = UserDefined("AccBlock","PUCost1");
		if (blank(label)) then begin label = "Затр.на таможню конс.";end;
		if (UserCanAction("ViewMoneyInf",true) and currentcompany!=28)then begin
			EditField(h=110,v=6,70,label,Normal,Cost1,false,0);
		end;
		label = UserDefined("AccBlock","PUCost2");
		if (blank(label)) then begin label = "Таможня консигнации";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h2=295,v,70,label,Normal,Cost2,false,0);
		end;
		label = UserDefined("AccBlock","PUCost3");
		if (blank(label)) then begin label = "Накладные 3";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h,v+=vs,70,label,Normal,Cost3,false,0);
		end;
		label = UserDefined("AccBlock","PUCost4");
		if (blank(label)) then begin label = "Накладные 4";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h2,v,70,label,Normal,Cost4,false,0);
		end;
		label = UserDefined("AccBlock","PUCost5");
		if (blank(label)) then begin label = "Накладные 5";end;
		if (UserCanAction("ViewMoneyInf",true))then begin
			EditField(h,v+=vs,70,label,Normal,Cost5,false,0);
		end;
		ButtonFrame(h3=400,v=16,130,2,"Расчет накл. затрат"); 
		RadioButton(h3,v,0,0,"Стоимость",ExtraCostsCalculation); 
		RadioButton(h3,v+=16,1,0,"Вес",ExtraCostsCalculation); 
	
	SpecialMenu("Создать счета-фактуры",'',1,"VIFromBigPUDsm");
	SpecialMenu("Создать список на удаление",' ',1,"CreateNoterToDelBigPUDsm");
	SpecialMenu("Сохранить строки согласно списку",' ',1,"SaveItemsFromBigPUDsm");
	SpecialMenu("Удалить лишние строки согласно списку",' ',1,"DeleteItemsFromBigPUDsm");
  
  EndWindow;
end;

window POLClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","*")
begin
  Integer pos,rn;

  WindowBegin("Заказы поставщикам",POLClass,CGmlist,POView);
  SpawnClass(PODClass);
  SetWRect(20,80,1100,298);
  Sizeable(-1,-1,0,0);
  UseView(POVc);
  FormName(PrintPOL);
  RecordList(4,17,-21,-39);
/*
old design
  if (GUIType==kGuiiPhone) then begin
    RlCellKey(10,6,70,19,SerNr,false,12,patM4black,SerNr);
    RlCellKey(80,6,90,19,OKFlag,false,12,patM4black,OKFlag);
    RlCellKey(100,6,130,19,PUFlag,false,12,patM4black,PUFlag);
    RlCellKey(140,6,150,19,PIFlag,false,12,patM4black,InvFlag);
    RlCellKey(155,6,165,19,Closed,false,12,patM4black,Closed);
    RlCellKey(170,6,280,19,TransDate,false,12,patM4black,TransDate);
    RlCellKey(290,6,320,19,Location,false,12,patM4black,Location);
    RlCellKey(10,26,90,39,Reference,false,12,patM4black,Reference);
    RlCellKey(100,26,160,39,VECode,false,12,patM4black,VECode);
    RlCellKey(170,26,-180,39,Addr0,false,12,patM4black,Name);
    RlCellKey(-170,26,-105,39,POClass,false,12,patM4black,POClass);
    RlCellKey(-100,26,-40,39,Sum4,true,12,patM4black,Sum4);
  end else begin
*/
    RlColKey(4,4,"Номер",SerNr,false,SerNr);
    RlColKey(79,79,"ОК",OKFlag,false,OKFlag);
    pos = 111;
    if (HasModIN) then begin
      RlColKey(pos,pos,"Пост.",PUFlag,false,PUFlag);
      pos = 143;
    end;
    if (HasModPL) then begin
      RlColKey(pos,pos,"Сч/ф",PIFlag,false,InvFlag);
      pos = 175;
    end;
    RlColKeyTL(pos,pos,"Закр",M4Mark,Closed,false,Closed);
    pos = pos + 32;
    RlColKey(pos,pos,"Дата",TransDate,false,TransDate); 
    pos = pos + 80;
    if (HasMultiLocations) then begin
      RlColKey(pos,pos,"Местопол.",Location,false,Location);
      pos = pos + 80;
    end;
    if (IsEnterprise) then begin
      RlColKey(pos,pos,"Ссылка",Reference,false,Reference);
      pos = pos + 80;
    end;
    RlColKey(pos,pos,"Поставщик",VECode,false,VECode);
    pos = pos + 60;
    RlColKey(pos,pos,"Наименование",Addr0,false,Name);
    pos = pos + 150;
    RlColKey(pos,pos,"Коммент.",Comment,false,Comment);// Edit ************************** BPI Ukraine - KramarAlexandr - 02, 02 07 2019 y. at 5:08:43 PM
    if (IsEnterprise) then begin
      RlCol(-240,-240,"Класс",POClass,false); 
      if (AcceptanceStatusColumnTest("POVc")) then begin 
        CalculatedColumn(-160,-160,"Подтв.","POLClassAcceptanceStatus",false); 
      end;
      RlCol(-190,-190,"Таможня",CustomsCost,true);
      RlCol(-130,-130,"Фрахт",ShipCost,true);
      RlCol(-65,-65,"Итого",Sum4,true); // Edit ************************** BPI Ukraine - KramarAlexandr - 02, 02 07 2019 y. at 6:13:14 PM
      //RlCol(-65,-65,"Предоплата",DownPaySent,true); 
    end else begin
      RlCol(-80,-80,"Итого",Sum4,true);
    end;
//  end;
  if (GUIType!=kGuiiPhone) then begin
    SearchField("Поиск");
    if (HasLimitedAccess) then begin
      BrowseSubsetButton(-40,-15);
    end;
    if (GuiType==kGuiMetro) then begin
      RowMenuBegin("");
      RowMenuItem(0,"OK",'G','G',4312,"OKPOLsm");  
      RowMenuItem(0,"Закрыт",' ',' ',4300,"ClosePOLsm");
      if (HasModIN) then begin
        RowMenuItem(0,"Создать приём товаров",' ',' ',4300,"PUFromPOLsm");         
      end;
      if (HasModPO) then begin
        if (IsEnterprise) then begin
          RowMenuItem(0,"Создать заказы поставщикам",' ',' ',4300,"POCreatePOLsm");
        end;
        RowMenuItem(0,"Статус заказа поставщику",'r','r',4300,"POStatusORLsm");         
      end;
      EndRowMenu;
    end else begin
      SpecialMenu("ОК",'G',0,"OKPOLsm");
      SpecialMenu("Закрыть",' ',1,"ClosePOLsm");
      if (HasModPO) then begin
        SpecialMenu("Статус заказа поставщику",'r',4,"POStatusORLsm");         
      end;
      SpecMenuGroup("",kSpecMenuGroupTypeExtendedPlusMenu,0);         
      if (HasModIN) then begin
        SpecialMenu("Создать поступление",' ',2,"PUFromPOLsm");
      end;
      if (HasModPO) then begin
        if (IsEnterprise) then begin
        SpecialMenu("Создать заказы поставщикам",' ',3,"POCreatePOLsm");
        end; 
      end;
    end;
  end;
  EndWindow;
end;

window ClientItemStatusLClass:2
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","*")
begin
  Integer pos,rn;

  WindowBegin("Статус клиентских товаров",ClientItemStatusLClass,CGmlist,-);
  SpawnClass(ClientItemStatusDClass);
  SetWRect(20,80,180,298);
  Sizeable(-1,-1,0,0);
  UseView(ClientItemStatusVc);

  RecordList(4,17,-21,-39);
    RlColKey(4,4,"Номер",ItemCode,false,ItemCode);
    RlColKey(79,79,"Счет клиента",OrderNr,false,ItemCode);
		RlCol(-190,-190,"Кол-во",Quant,true);
    SearchField("Поиск");
 
  EndWindow;
end;

window ClientItemStatusDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h1,h2,h3,h4,t,v,vm,vs;

  WindowBegin("Статус клиентских товаров",ClientItemStatusDClass,CGview,-);
		SetWRect(20,80,360,328);
	
	v = 20;
	h = 90;
	vs = 20;
  UseView(ClientItemStatusVc);
  ActiveFieldOnNew("ItemCode");  
	EditField(h,v,70,"Код товара",ViewOnly,ItemCode,false,INSClass);
	EditField(h,v+=vs,70,"Счет клиента",ViewOnly,OrderNr,false,ORSClass);
	if (left(CurrentUser,2)!="SA") then begin
		EditField(h,v+=vs,70,"Количество",ViewOnly,Quant,false,0);
	end else begin
		EditField(h,v+=vs,70,"Количество",Normal,Quant,false,0);
	end;
	EndWindow;
end;

window VIFromBigPUVClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v,vs;
  string 255 label;
  WindowBegin("Определите создание сч/ф поставщика",VIFromBigPUVClass,CGMnt,RcType);
  SetWRect(20,100,400,300);
  v = 6; vs = 20; h = 150;
  EditFieldTL(h,v, 80,"Поставщик",M4UStr,Normal,20,f1,false,VESClass);
  EditFieldTL(h,v+=vs, 80,"№ поступления",M4Long,ViewOnly,20,FirstVer,false,0);
  //CheckBox(h,v+=20,0,"Цена",flags[0]);
  CheckBox(h,v+=16,0,"Таможня",flags[6]);
  CheckBox(h,v+=16,0,"Фрахт",flags[7]);
  label = UserDefined("AccBlock","PUCost1");
  if (blank(label)) then begin label = "Cost 1";end;
  CheckBox(h,v+=16,0,label,flags[1]);
  label = UserDefined("AccBlock","PUCost2");
  if (blank(label)) then begin label = "Cost 2";end;
  CheckBox(h,v+=16,0,label,flags[2]);
  label = UserDefined("AccBlock","PUCost3");
  if (blank(label)) then begin label = "Cost 3";end;
  CheckBox(h,v+=16,0,label,flags[3]);
  label = UserDefined("AccBlock","PUCost4");
  if (blank(label)) then begin label = "Cost 4";end;
  CheckBox(h,v+=16,0,label,flags[4]);
  label = UserDefined("AccBlock","PUCost5");
  if (blank(label)) then begin label = "Cost 5";end;
  CheckBox(h,v+=16,0,label,flags[5]);
  EndWindow;
end;
  
window ItemStatusDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,v;
  WindowBegin("Статус товара",ItemStatusDClass,CGview,-);
  SetWRect(64,80,450,420);
  UseView(ItemStatusVc);
  h = 120;
  EditField(h,v=6,50,"Item Code",Normal,Code,false,0);
  EditField(h,v+=20,50,"Variety",Normal,Variety,false,0);
  EditField(h,v+=20,50,"Склад",Normal,Location,false,0);
  EditField(h,v+=20,50,"Res. Qty",Normal,RsrvQty,false,0);
  EditField(h,v+=20,50,"In Stock",Normal,Instock,false,0);
  EditField(h,v+=20,50,"UValue",Normal,UValue,false,0);
  EditField(h,v+=20,50,"OrddOut",Normal,OrddOut,false,0);
  EditField(h,v+=20,50,"POQty",Normal,POQty,false,0);
  EditField(h,v+=20,50,"POUnOKQty",Normal,POUnOKQty,false,0);
  EditField(h,v+=20,50,"InShipment",Normal,InShipment,false,0);
  EditField(h,v+=20,50,"Instock2",Normal,Instock2,false,0);
  EditField(h,v+=20,50,"ProdOrd",Normal,ProdOrd,false,0);
  EditField(h,v+=20,50,"NoDataBefore",Normal,NoDataBefore,false,0);
  EditField(h,v+=20,50,"WOrd",Normal,WOrd,false,0);
  EditField(h,v+=20,50,"InWSheet",Normal,InWSheet,false,0);
  EditField(h,v+=20,50,"StockRsrvQty",Normal,StockRsrvQty,false,0);
  EndWindow;
end;



window CTypeDClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real v;
  WindowBegin("Вид классификации",CTypeDClass,CGview,CTypeView);
  SetWRect(64,80,509,150);
  UseView(CTypeVc);
  EditField(120,v=6,50,"Код",St_i,Code,false,0);
	CheckBox(220,v,0,"Связан со справочником",Relatedf);
  EditField(120,v+=20,300,"Комментарий",Normal,Comment,false,0);
  EndWindow;
end;

window CTypeLClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  WindowBegin("Виды классификации",CTypeLClass,CGmlist,CTypeView);
  SetWRect(64,80,509,298);
  SpawnClass(CTypeDClass);
  Sizeable(-1,-1,0,0);
  UseView(CTypeVc);
  RecordList(4,17,-21,-39);
  RlColKey(4,4,  "Код",Code,false,Code);
  RlColKey(81,81,"Комментарий",Comment,false,Comment);
  SearchField("Поиск");
  EndWindow;
end;



window LoyalCardNPTSSClass:1
  wtag("language","RUS"), wtag("product","*"), wtag("productcode","*"), wtag("device","computer")
begin
  real h,h2,h3,h4,hm,l,v,v3,vm,vs;
  real fieldh,fieldh2,keypadh,keypadh2,keypadv,fntsize;

  WindowBegin("Накопительная карта",LoyalCardNPTSSClass,CGother,RcType);
  UseView(RcVc);
  Modality(kModalityGlobal);
  SetWRect(80,200,600,510);
  AutoSizeWindow(false);
  SetupColumWithKeypadWindow(fieldh,fieldh2,keypadh,keypadh2,keypadv,vs,fntsize);

  vs = 20;
  EditFieldTL(fieldh,v=6,150,"№ накопит. карты",M4UStr,Normal,20,f1,false,0);
  EditFieldTL(fieldh,v+=16,150,"Код клиента",M4UStr,ViewOnly,20,f2,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 02, 26 01 2021 y. at 4:29:34 PM
	EditFieldTL(fieldh,v+=16,150,"PIN если не сканирует QR",M4UStr,Normal,20,f3,false,0);// Edit ************************** BPI Ukraine - KramarAlexandr - 01, 01 02 2021 y. at 2:21:35 PM
	EnterSkip(f1);
	EditFieldTL(fieldh,v+=16,150,"",M4UStr,Normal,20,f4,false,0);
	
  v = keypadv;
  POSKeyPad(v,keypadh,v + 250,keypadh2,2,"NPTSPaymentToolKeyPad",kKeyPadEnter); //!!TRANSLATE
  v = v + 255;
  SplitButton(keypadh,v,keypadh2,v + 2*vs,2,"CancelNPTSCashPaymentTClass","Cancel" & F_Label("F2"),"ProceedLoyalCardNPTSSClass","Продолжить" & F_Label("F1"),20); //!!TRANSLATE

  EndWindow;
end;
